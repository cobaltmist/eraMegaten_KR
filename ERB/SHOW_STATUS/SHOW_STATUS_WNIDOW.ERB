;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:STATUS_WINDOW_MAIN.ERB
;	Facility	:各種能力値等をステータスウィンドウ風に表示する関数
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		Ｎ烏					新規作成
;	002		2021/01/29		Rsp暇人					도구명중/道具威力を表示できるように
;	003		2021/02/07		Rsp暇人					文字数が多くてレイアウトが崩れる場合に短縮形を使うように
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;=======================================
;기본情報ウィンドウ
;=======================================
@STATUS_WINDOW_MAIN , ARG , ARG:1 , ARG:2
#DIM 横幅
横幅 = 42
CALL SET_PICTURE , @"┏RACE%"━" * 8%┳NAME%"━" * 8%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%종족명(ARG) , 20 , LEFT%┃%CALLNAME:ARG , 20 , LEFT%┃" , ARG:1 + 1 , , ARG:2
CALL SET_PICTURE , @"┣%"━" * 10%╋%"━" * 10%┫" , ARG:1 + 2 , , ARG:2
CALL SET_PICTURE , @"┃ＬＶ　 {BASE:ARG:LV, 5}_" , ARG:1 + 3 , , ARG:2
;---- EDIT 003 MOD START -------------------------
;LOCALS = \@ BASE:ARG:ＨＰ >= 1000000 ? ？？？ # {BASE:ARG:ＨＰ , 6} \@/\@ MAXBASE:ARG:ＨＰ >= 1000000 ? ？？？ # {MAXBASE:ARG:ＨＰ , 6} \@
LOCALS = \@ BASE:ARG:ＨＰ >= 1000000 && !CFLAG:ARG:PT플래그 ? ？？？ # %ADD_KMGT(BASE:ARG:ＨＰ , 6)% \@/\@ MAXBASE:ARG:ＨＰ >= 1000000 && !CFLAG:ARG:PT플래그 ? ？？？ # %ADD_KMGT(MAXBASE:ARG:ＨＰ , 6)% \@
CALL SET_PICTURE , @"┃ＨＰ　%LOCALS%_" , ARG:1 + 4 , , ARG:2
IF MAXBASE:ARG:ＭＰ == 0
	LOCALS = ------/------
ELSE
;	LOCALS = \@ BASE:ARG:ＭＰ >= 1000000 ? ？？？ # {BASE:ARG:ＭＰ , 6} \@/\@ MAXBASE:ARG:ＭＰ >= 1000000 ? ？？？ # {MAXBASE:ARG:ＭＰ , 6} \@
	LOCALS = \@ BASE:ARG:ＭＰ >= 1000000 && !CFLAG:ARG:PT플래그 ? ？？？ # %ADD_KMGT(BASE:ARG:ＭＰ , 6)% \@/\@ MAXBASE:ARG:ＭＰ >= 1000000 && !CFLAG:ARG:PT플래그 ? ？？？ # %ADD_KMGT(MAXBASE:ARG:ＭＰ , 6)% \@
ENDIF
CALL SET_PICTURE , @"┃ＭＰ　%LOCALS%_" , ARG:1 + 5 , , ARG:2
CALL SET_PICTURE , @"┃ＣＰ　 {MAXBASE:ARG:CP, 5}_" , ARG:1 + 6 , , ARG:2
CALL SET_PICTURE , @"┃　_%GET_ALI1(ABL:ARG:속성LD),7%,{ALICOLOR(ABL:ARG:속성LD)}_/_%GET_ALI2(ABL:ARG:속성LC),7%,{ALICOLOR(ABL:ARG:속성LC)}_" , ARG:1 + 7 , , ARG:2
IF ARG == MASTER
	CALL SET_PICTURE , @"┃　COMP　 %ARRANGE_STRLENS(@"{NUM_NAKAMA()+소프트용량()}/{FLAG:ＣＯＭＰ용량}" , 9),9%　┃" , ARG:1 + 3 , , ARG:2 + 22
ELSE
	CALL SET_PICTURE , @"┃충성도　 %ARRANGE_STRLENS(@"{BASE:ARG:충성도, 9}" , 9),9%　┃" , ARG:1 + 3 , , ARG:2 + 22
ENDIF
; CALL SET_PICTURE , @"┃ 　MAG　 {BASE:ARG:ＭＡＧ, 9}　┃" , ARG:1 + 4 , , ARG:2 + 22
; CALL SET_PICTURE , @"┃ 　　　 /{MAXBASE:ARG:ＭＡＧ, 9}　┃" , ARG:1 + 5 , , ARG:2 + 22
; CALL SET_PICTURE , @"┃ 　EXP　 {BASE:ARG:ＥＸＰ, 9}　┃" , ARG:1 + 6 , , ARG:2 + 22
; CALL SET_PICTURE , @"┃  NEXT　 {MAXBASE:ARG:ＥＸＰ-BASE:ARG:ＥＸＰ, 9}　┃" , ARG:1 + 7 , , ARG:2 + 22
CALL SET_PICTURE , @"┃ 　MAG　 %ADD_KMGT(BASE:ARG:ＭＡＧ , 9)%　┃" , ARG:1 + 4 , , ARG:2 + 22
CALL SET_PICTURE , @"┃ 　　　 /%ADD_KMGT(MAXBASE:ARG:ＭＡＧ , 9)%　┃" , ARG:1 + 5 , , ARG:2 + 22
CALL SET_PICTURE , @"┃ 　EXP　 %ADD_KMGT(BASE:ARG:ＥＸＰ , 9)%　┃" , ARG:1 + 6 , , ARG:2 + 22
CALL SET_PICTURE , @"┃  NEXT　 %ADD_KMGT(MAXBASE:ARG:ＥＸＰ-BASE:ARG:ＥＸＰ, 9)%　┃" , ARG:1 + 7 , , ARG:2 + 22
;---- EDIT 003 MOD END -------------------------

CALL SET_PICTURE , @"┗%"━" * 10%┻%"━" * 10%┛" , ARG:1 + 8 , , ARG:2

IF ABL:ARG:종족 > 0 && ABL:ARG:종족 < 45
	CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1+9 , , ARG:2
	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+10 , , ARG:2
	CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1 + 11 , , ARG:2
	CALL SET_PICTURE , @"ANALYZE" , ARG:1+9 , , ARG:2+2
	CALL SET_PICTURE , @"_\@FLAG:(20000+NO:ARG) >= 1000 ? COMPLETE! # {FLAG:(20000+NO:ARG)/10}％\@,,,50_" , ARG:1+10 , , ARG:2+2
ENDIF

;=======================================
;@STATUS_WINDOW_EQUIPDEVIL
;페르소나・변신악마ウィンドウ표시処理
; ■引数
;　　ARG   = 대상キャラ固定No
;　　ARG:1 = 横の位置
;　　ARG:2 = 
; ■戻り値
;　　なし
; ■ローカル変数
;　　LOCAL = 縦の位置
;　　横幅  = 표시枠横幅(固定値)
;=======================================
@STATUS_WINDOW_EQUIPDEVIL , ARG , ARG:1 , ARG:2
#DIM 横幅
LOCAL = ARG:1
横幅 = 42

;旧処理
;	IF TALENT:ARG:데빌시프터 || TALENT:ARG:식노 && TALENT:ARG:페르소나구사자 || TALENT:ARG:악마빙의자
;		CALL SET_PICTURE , @"┏LINKED-DEVIL%"━" * (横幅 / 2 - 6)%┓" , ARG:1 , , ARG:2
;		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , ARG:1+1 , , ARG:2
;		IF TALENT:ARG:데빌시프터 && CFLAG:ARG:링크악마 > 0
;			CALL SET_PICTURE , @"[변경] %CALLNAME:FINDCHARA_ID(CFLAG:ARG:링크악마),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ELSEIF TALENT:ARG:데빌시프터
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ELSEIF TALENT:ARG:식노 || TALENT:ARG:악마빙의자
;			CALL SET_PICTURE , @"　　　 %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#변신가\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ENDIF
;		CALL SET_PICTURE , @"┣PERSONA %"━" * (横幅 / 2 - 4)%┫" , ARG:1+2 , , ARG:2
;		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , ARG:1+3 , , ARG:2
;		IF EQUIP:ARG:장비페르소나
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME((DITEMTYPE:(EQUIP:ARG:장비페르소나):페르소나("NO")),0), 20, LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , ARG:1+3 , , ARG:2 + 2
;		ELSEIF !EQUIP:ARG:장비페르소나 && ABL:ARG:초기페르소나
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(ABL:ARG:초기페르소나,0), 20 , LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , ARG:1+3 , , ARG:2 + 2
;		ELSE
;			CALL SET_PICTURE , @"[변경],,,페르소나변경" , ARG:1+3 , , ARG:2 + 2
;		ENDIF
;		CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+4 , , ARG:2
;	ELSEIF TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
;		CALL SET_PICTURE , @"┏LINKED-DEVIL%"━" * (横幅 / 2 - 6)%┓" , ARG:1 , , ARG:2
;		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , ARG:1+1 , , ARG:2
;		IF TALENT:ARG:데빌시프터 && CFLAG:ARG:링크악마 > 0 && (!TALENT:ARG:석세서 && !TALENT:ARG:달인 && !TALENT:ARG:이능자 && !TALENT:ARG:건슬링거)
;			CALL SET_PICTURE , @"[변경] %CALLNAME:FINDCHARA_ID(CFLAG:ARG:링크악마),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ELSEIF TALENT:ARG:데빌시프터 && (!TALENT:ARG:석세서 && !TALENT:ARG:달인 && !TALENT:ARG:이능자 && !TALENT:ARG:건슬링거)
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ELSEIF TALENT:ARG:식노 || TALENT:ARG:악마빙의자
;			CALL SET_PICTURE , @"　　　 %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#변신가\@,,,악마변경" , ARG:1+1 , , ARG:2 + 2
;		ENDIF
;		CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+2 , , ARG:2
;	ELSEIF TALENT:ARG:페르소나구사자
;		CALL SET_PICTURE , @"┏PERSONA %"━" * (横幅 / 2 - 4)%┓" , ARG:1 , , ARG:2
;		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , ARG:1+1 , , ARG:2
;		IF EQUIP:ARG:장비페르소나
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME((DITEMTYPE:(EQUIP:ARG:장비페르소나):페르소나("NO")),0), 20, LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , ARG:1+1 , , ARG:2 + 2
;		ELSEIF !EQUIP:ARG:장비페르소나 && ABL:ARG:초기페르소나
;			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(ABL:ARG:초기페르소나,0), 20 , LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , ARG:1+1 , , ARG:2 + 2
;		ELSE
;			CALL SET_PICTURE , @"[변경],,,페르소나변경" , ARG:1+1 , , ARG:2 + 2
;		ENDIF
;		CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+2 , , ARG:2
;	ELSE
;		RETURN 0
;	ENDIF

	SIF !TALENT:ARG:데빌시프터 && !TALENT:ARG:식노 && !TALENT:ARG:페르소나구사자 && TALENT:ARG:악마빙의자
		RETURN 0

	IF TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
		CALL SET_PICTURE , @"┏LINKED-DEVIL%"━" * (横幅 / 2 - 6)%┓" , LOCAL , , ARG:2
		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , LOCAL+1 , , ARG:2
		IF TALENT:ARG:데빌시프터 && (TALENT:ARG:석세서 || TALENT:ARG:달인 || TALENT:ARG:이능자 || TALENT:ARG:건슬링거 || TALENT:ARG:페르소나구사자)
			;이능자シフター用
			CALL SET_PICTURE , @"[고정] \@ CFLAG:ARG:링크악마 > 0 ? %CALLNAME:FINDCHARA_ID(CFLAG:ARG:링크악마),20,LEFT%# %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT%\@ \@CFLAG:ARG:악마변신 ?변신중#링크중\@" , LOCAL+1 , , ARG:2 + 2
		ELSEIF TALENT:ARG:데빌시프터 && CFLAG:ARG:링크악마 > 0
			CALL SET_PICTURE , @"[변경] %CALLNAME:FINDCHARA_ID(CFLAG:ARG:링크악마),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , LOCAL+1 , , ARG:2 + 2
		ELSEIF TALENT:ARG:데빌시프터 && (!TALENT:ARG:석세서 && !TALENT:ARG:달인 && !TALENT:ARG:이능자 && !TALENT:ARG:건슬링거 && !TALENT:ARG:페르소나구사자)
			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@,,,악마변경" , LOCAL+1 , , ARG:2 + 2
		ELSEIF TALENT:ARG:데빌시프터
			;이능자シフター用
			CALL SET_PICTURE , @"[고정] %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#링크중\@" , LOCAL+1 , , ARG:2 + 2
		ELSEIF TALENT:ARG:식노 && FLAG:만트라개방도 && (SOFT_ON("삼히타") || FLAG:SHOP커맨드 == [[SHOP:셋업]] || FLAG:SHOP커맨드 == [[SHOP:능력확인]])
			CALL SET_PICTURE , @"[취득] %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#변신가\@,,,만트라취득" , LOCAL+1 , , ARG:2 + 2
		ELSEIF TALENT:ARG:식노 || TALENT:ARG:악마빙의자
			CALL SET_PICTURE , @"　　　 %CSVCALLNAME(CFLAG:ARG:초기링크악마, 0),20,LEFT% \@CFLAG:ARG:악마변신 ?변신중#변신가\@" , LOCAL+1 , , ARG:2 + 2
		ENDIF
	ENDIF
	IF TALENT:ARG:페르소나구사자
		IF TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
			LOCAL += 2
			CALL SET_PICTURE , @"┣PERSONA %"━" * (横幅 / 2 - 4)%┫" , LOCAL , , ARG:2
		ELSE
			CALL SET_PICTURE , @"┏PERSONA %"━" * (横幅 / 2 - 4)%┓" , LOCAL , , ARG:2
		ENDIF
		CALL SET_PICTURE , @"┃%" " * (横幅)%┃" , LOCAL+1 , , ARG:2
		IF EQUIP:ARG:장비페르소나
			CALL SET_PICTURE , @"[변경] %CSVCALLNAME((DITEMTYPE:(EQUIP:ARG:장비페르소나):페르소나("NO")),0), 20, LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , LOCAL+1 , , ARG:2 + 2
		ELSEIF !EQUIP:ARG:장비페르소나 && ABL:ARG:초기페르소나
			CALL SET_PICTURE , @"[변경] %CSVCALLNAME(ABL:ARG:초기페르소나,0), 20 , LEFT% 상성:%MARK_P_FITNESS(ARG)%,,,페르소나변경" , LOCAL+1 , , ARG:2 + 2
		ELSE
			CALL SET_PICTURE , @"[변경],,,페르소나변경" , LOCAL+1 , , ARG:2 + 2
		ENDIF
	ENDIF
	CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , LOCAL+2 , , ARG:2


;=======================================
;전투能力値ウィンドウ
;=======================================
@STATUS_WINDOW_BATTLE_STATUS , ARG , ARG:1 , ARG:2 , ARG:3
#DIM 공격횟수 , 2
#DIMS 공격범위 , 2
#DIM 横幅
;横幅 = 48
横幅 = 50
SIF FLAG:커스텀게임화면
	横幅 = 54
;---- EDIT 001 ADD START -------------------------
SIF BATTLE_SETTING_IS_ITEM_DAMAGE()
	横幅 += 12 - 4*!FLAG:커스텀게임화면
;---- EDIT 001 ADD END -------------------------

CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
;CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
;검と총の공격힘と명중と사거리と공격횟수と공격범위
FOR LOCAL , 0 , 2
	IF LOCAL == 0
		LOCALS = 검
		LOCALS:1 = \@ EQUIP:ARG:LOCALS > 0 && CFLAG:ARG:악마변신 == 0 ? 검： # 통상공격： \@
		LOCAL:1 = 0
		LOCALS:2 =
	ELSE
		LOCALS = 총
		LOCALS:1 = 총：
		LOCAL:1 = [[스킬:ＧＵＮ]]
		LOCALS:2 = 총
		ARG:1 += 2
		CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
		CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
		SIF EQUIP:ARG:총 == 0
			BREAK
	ENDIF
	CALLFORM SKILL_MINATTACKNUMBER_{LOCAL:1} , ARG
	공격횟수 = RESULT
	CALLFORM SKILL_MAXATTACKNUMBER_{LOCAL:1} , ARG
	공격횟수:1 = RESULT
	IF FLAG:커스텀게임화면
		IF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격")) > 0
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),5} (_↑{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격"))},{COLOR("aqua")}_)" , ARG:1+1 , , ARG:2 + 2
		ELSEIF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격")) < 0
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),5} (_↓{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격"))},{COLOR("red")}_)" , ARG:1+1 , , ARG:2 + 2
		ELSE
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),5}　공격횟수：{공격횟수}-{공격횟수:1}" , ARG:1+1 , , ARG:2 + 2
			IF LOCALS == "검"
				CALL SET_PICTURE , @"속성：%GET_TYPE(ABL:ARG:공격상성),4,LEFT%" , ARG:1+1 , , ARG:2 + 2 + 43
			ELSEIF LOCALS == "총"
				;총なら특수탄창を표시
				CALLFORM EQUIP_PROPERTY , EQUIP:ARG:총 , "특수탄창" , , ARG
				CALL SET_PICTURE , @" 특수탄창：{RESULT}" , ARG:1+1 , , ARG:2 + 43
			ENDIF
		ENDIF
		CALLFORM SKILL_RANGE_{LOCAL:1} , ARG
		공격범위 = %GET_RANGE(RESULT) , 4 , LEFT%
		CALLFORM SKILL_SPHERE_{LOCAL:1} , ARG
		공격범위:1 = %GET_SPHERE(RESULT),4,LEFT%
		;IF ARG:3 == 1 && 변경予定장비:GET_EQUIPNUM(LOCALS) != -1
		;	ARG:1 += 3
		;	
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
		;	
		;	CALL SET_PICTURE , 
		;	
		;ENDIF
		IF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중")) > 0
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),5} (_↑{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중"))},{COLOR("aqua")}_)" , ARG:1+2 , , ARG:2 + 2
		ELSEIF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중")) < 0
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),5} (_↓{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중"))},{COLOR("red")}_)" , ARG:1+2 , , ARG:2 + 2
		ELSE
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),5}  사거리：%공격범위%　　　 대상：%공격범위:1%" , ARG:1+2 , , ARG:2 + 2
		ENDIF
	ELSE
		IF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격")) > 0
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),3}(_↑{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격"))},{COLOR("aqua")}_)" , ARG:1+1 , , ARG:2 + 2
		ELSEIF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격")) < 0
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),3}(_↓{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "공격"))},{COLOR("red")}_)" , ARG:1+1 , , ARG:2 + 2
		ELSE
			CALL SET_PICTURE , @"%LOCALS:1 , 10%　공격력 {MAXBASE:ARG:(LOCALS:2 + "공격"),3}　횟수：{공격횟수}-{공격횟수:1}" , ARG:1+1 , , ARG:2 + 2
			IF LOCALS == "검"
				CALL SET_PICTURE , @"속성：%GET_TYPE(ABL:ARG:공격상성),4,LEFT%" , ARG:1+1 , , ARG:2 + 2 + 37
			ELSEIF LOCALS == "총"
				;총なら특수탄창を표시
				CALLFORM EQUIP_PROPERTY , EQUIP:ARG:총 , "특수탄창" , , ARG
				CALL SET_PICTURE , @" 특수탄창：{RESULT}" , ARG:1+1 , , ARG:2 + 37
			ENDIF
		ENDIF
		CALLFORM SKILL_RANGE_{LOCAL:1} , ARG
		공격범위 = %GET_RANGE(RESULT) , 4 , LEFT%
		CALLFORM SKILL_SPHERE_{LOCAL:1} , ARG
		공격범위:1 = %GET_SPHERE(RESULT),4,LEFT%
		;IF ARG:3 == 1 && 변경予定장비:GET_EQUIPNUM(LOCALS) != -1
		;	ARG:1 += 3
		;	
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
		;	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
		;	
		;	CALL SET_PICTURE , 
		;	
		;ENDIF
		IF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중")) > 0
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),3}(_↑{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중"))},{COLOR("aqua")}_)" , ARG:1+2 , , ARG:2 + 2
		ELSEIF ARG:3 == 1 && 장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중")) < 0
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),3}(_↓{장비변경時스테이터스変化値(GET_BATTLESTATUS_NUM(LOCALS:2 + "명중"))},{COLOR("red")}_)" , ARG:1+2 , , ARG:2 + 2
		ELSE
			CALL SET_PICTURE , @"　　　　　　　명중 {MAXBASE:ARG:(LOCALS:2 + "명중"),3}  사거리：%공격범위% 　대상：%공격범위:1%" , ARG:1+2 , , ARG:2 + 2
		ENDIF
	ENDIF
	
	
	;IF ABL:ARG:추가효과 > 0 && LOCALS == "검"
	;	CALL SET_PICTURE , @"　　　　　추가효과：%GET_STATE(ABL:ARG:추가효과),6,LEFT%　 　　추가상성：%GET_TYPE(ABL:ARG:추가효과상성)%" , ARG:1+3 , , ARG:2 + 2
	;ELSEIF LOCALS == "총"
	;	ARG:1 -= 1
	;ENDIF
NEXT
CALL SET_PICTURE , @"┣%"━" * (横幅 / 2)%┫" , ARG:1+3 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+4 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+5 , , ARG:2
CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+6 , , ARG:2
IF FLAG:커스텀게임화면
	FOR LOCAL , 2 , 6
		CALL SET_PICTURE , @"%GET_BATTLESTATUS(LOCAL),8%{MAXBASE:ARG:(GET_BATTLESTATUS(LOCAL)),6} " , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 24 + 2
		SIF 장비변경時스테이터스変化値(LOCAL) > 0
			CALL SET_PICTURE , @"(_↑{장비변경時스테이터스変化値(LOCAL)},{COLOR("aqua")}_)" , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 24 + 17
		SIF 장비변경時스테이터스変化値(LOCAL) < 0
			CALL SET_PICTURE , @"(_↓{장비변경時스테이터스変化値(LOCAL)},{COLOR("red")}_)" , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 24 + 17
			
	NEXT
	;---- EDIT 001 ADD START -------------------------
	IF BATTLE_SETTING_IS_ITEM_DAMAGE()
		CALL SET_PICTURE , @"도구위력{MAXBASE:ARG:도구위력,6}" , ARG:1 + 4 , , ARG:2 + 2 + 2 * 24 + 2
		CALL SET_PICTURE , @"도구명중\@BATTLE_SETTING_IS_ITEM_HITRATE() ? {MAXBASE:ARG:도구명중,6} # 　----\@" , ARG:1 + 5 , , ARG:2 + 2 + 2 * 24 + 2
	ENDIF
;---- EDIT 001 ADD END -------------------------
ELSE
	FOR LOCAL , 2 , 6
		CALL SET_PICTURE , @"%GET_BATTLESTATUS(LOCAL),8,LEFT%{MAXBASE:ARG:(GET_BATTLESTATUS(LOCAL)),5} " , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 21
		SIF 장비변경時스테이터스変化値(LOCAL) > 0
			CALL SET_PICTURE , @"(_↑{장비변경時스테이터스変化値(LOCAL)},{COLOR("aqua")}_)" , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 21 + 13
		SIF 장비변경時스테이터스変化値(LOCAL) < 0
			CALL SET_PICTURE , @"(_↓{장비변경時스테이터스変化値(LOCAL)},{COLOR("red")}_)" , ARG:1 + 4 + (LOCAL - 2) % 2 , , ARG:2 + 2 + ((LOCAL-2) / 2) * 21 + 13
			
	NEXT
;---- EDIT 001 ADD START -------------------------
	IF BATTLE_SETTING_IS_ITEM_DAMAGE()
		CALL SET_PICTURE , @"도구위력{MAXBASE:ARG:도구위력,6}" , ARG:1 + 4 , , ARG:2 + 2 + 2 * 21
		CALL SET_PICTURE , @"도구명중\@BATTLE_SETTING_IS_ITEM_HITRATE() ? {MAXBASE:ARG:도구명중,6} # 　----\@" , ARG:1 + 5 , , ARG:2 + 2 + 2 * 21
	ENDIF
;---- EDIT 001 ADD END -------------------------
ENDIF

;=======================================
;기본能力値ウィンドウ
;=======================================
@STATUS_WINDOW_BASE_STATUS , ARG , ARG:1 , ARG:2 , ARG:3
#DIM 横幅
#DIM ブロック数 , 3
#DIM 최대能力値
横幅 = 46

CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+4 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+5 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+6 , , ARG:2
CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+7 , , ARG:2
SIF CFLAG:ARG:PT플래그 > 0 && FLAG:레벨업시인터페이스설정 == 3 && !(FLAG:이신합체표시 || FLAG:SHOP커맨드 == [[SHOP:사교의관]])
	CALL SET_PICTURE , "_[능력상승률변경],,,능력상승률변경_" , ARG:1+7 , , ARG:2 + 2
최대能力値 = MAX(MAXARRAY(MAXBASE:ARG:0 , GETNUM(BASE , "힘") , GETNUM(BASE , "운") + 1) , 28)
; 한판 수정사항 : 능력치 우측 문자할당을 6칸으로, 능력치 바 할당에 2를 더함
FOR LOCAL , 1 , 7
	IF FLAG:커스텀게임화면
		CALL SET_PICTURE , @"_%GET_BASESTATUS(LOCAL),6,LEFT%,{SETCOLOR_AUTOIF2_F改(ARG,LOCAL)}_ {MAXBASE:ARG:(GET_BASESTATUS(LOCAL)),4}({BASE:ARG:(GET_BASESTATUS(LOCAL)),4}) " , ARG:1 + LOCAL, , ARG:2 + 2
		;ブロック配置数
		ブロック数:0 = MIN(MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) , BASE:ARG:(GET_BASESTATUS(LOCAL))) * 26 / 최대能力値 ;WHITEブロック
		ブロック数:1 = MAX(MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) - BASE:ARG:(GET_BASESTATUS(LOCAL)) , 0) * 26 / 최대能力値 ;GRAYブロック
		ブロック数:2 = MAX(BASE:ARG:(GET_BASESTATUS(LOCAL)) - MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) , 0) * 26 / 최대能力値 ;AQUAブロック
		CALL SET_PICTURE , @"%UNICODE(0x258B)*ブロック数:0%,0xe0e0e0_%UNICODE(0x258B)*ブロック数:1%,0x9090E8_%UNICODE(0x258B)*ブロック数:2%,{COLOR("gray")}" , ARG:1 + LOCAL, , ARG:2 + 2 + 16 + 2
	ELSE
		CALL SET_PICTURE , @"_%GET_BASESTATUS(LOCAL),6,LEFT%,{SETCOLOR_AUTOIF2_F改(ARG,LOCAL)}_ {MAXBASE:ARG:(GET_BASESTATUS(LOCAL)),3}({BASE:ARG:(GET_BASESTATUS(LOCAL)),3}) " , ARG:1 + LOCAL, , ARG:2 + 2
		;ブロック配置数
		ブロック数:0 = MIN(MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) , BASE:ARG:(GET_BASESTATUS(LOCAL))) * 28 / 최대能力値 ;WHITEブロック
		ブロック数:1 = MAX(MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) - BASE:ARG:(GET_BASESTATUS(LOCAL)) , 0) * 28 / 최대能力値 ;GRAYブロック
		ブロック数:2 = MAX(BASE:ARG:(GET_BASESTATUS(LOCAL)) - MAXBASE:ARG:(GET_BASESTATUS(LOCAL)) , 0) * 28 / 최대能力値 ;AQUAブロック
		CALL SET_PICTURE , @"%UNICODE(0x258B)*ブロック数:0%,0xe0e0e0_%UNICODE(0x258B)*ブロック数:1%,0x9090E8_%UNICODE(0x258B)*ブロック数:2%,{COLOR("gray")}" , ARG:1 + LOCAL, , ARG:2 + 2 + 14 + 2
	ENDIF
NEXT

;=======================================
;방어상성ウィンドウ
;=======================================
@STATUS_WINDOW_DEFTYPE , ARG , ARG:1 , ARG:2 , ARG:3
#DIM 横幅
横幅 = 42
SIF ARG:3
	横幅 = 72
;4*5にしておこう
CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+4 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+5 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+6 , , ARG:2
CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+7 , , ARG:2
SIF CFLAG:ARG:PT플래그 > 0 && !(FLAG:이신합체표시 || FLAG:SHOP커맨드 == [[SHOP:사교의관]])
	CALL SET_PICTURE , "_[≪],,,≪_표시변경_[≫],,,≫_" , ARG:1+7 , , ARG:2 + 2 + 横幅 - 16
IF FLAG:윈도우내성표시설정 == 0 || CFLAG:ARG:PT플래그 < 1
	FOR LOCAL , 0 , FLAG:상성수
		;CALL SET_PICTURE , @"%GET_TYPE(LOCAL),4% _\@(MAXBASE:ARG:GET_TYPE(LOCAL) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:GET_TYPE(LOCAL) != 999)) ? {ABS(MAXBASE:ARG:GET_TYPE(LOCAL)),3}% # %" " *2%반사 \@,%相性カラー(MAXBASE:ARG:GET_TYPE(LOCAL))%_" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + LOCAL % 3 * 14
		CALL SET_PICTURE , @"%GET_TYPE(LOCAL),4% _\@(MAXBASE:ARG:GET_TYPE(LOCAL) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:GET_TYPE(LOCAL) != 999)) ? {ABS(MAXBASE:ARG:GET_TYPE(LOCAL)),3}％ # %" "%반사 \@,%相性カラー(MAXBASE:ARG:GET_TYPE(LOCAL))%_" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + LOCAL % 3 * (横幅/3)
		SIF ARG:3 == 1 &&  장비변경時相性(LOCAL) != MAXBASE:ARG:GET_TYPE(LOCAL)
			CALL SET_PICTURE , @" → _\@(장비변경時相性(LOCAL) < 0) ? 흡 # 　\@\@ ((장비변경時相性(LOCAL) != 999)) ? {ABS(장비변경時相性(LOCAL)),3}％ # %" "%반사 \@,%相性カラー(장비변경時相性(LOCAL))%_" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 14 + (LOCAL % 3) * (横幅/3)
		;IF ARG:3 == 1 && 장비변경時相性(LOCAL) != MAXBASE:ARG:GET_TYPE(LOCAL)
		;	CALL SET_PICTURE , @" → \@(MAXBASE:ARG:(GET_TYPE(LOCAL)) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:(GET_TYPE(LOCAL)) != 999)) ? {ABS(MAXBASE:ARG:(GET_TYPE(LOCAL))),4}％ # %" " *2%반사 \@" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + 11 + LOCAL % 3 * 21
		;
		;ENDIF
	NEXT
ELSEIF FLAG:윈도우내성표시설정 == 1
	LOCAL:1 = 0
	FOR LOCAL , 0 , FLAG:스테이터스수
		SIF LOCAL == 0 || LOCAL == 13 || LOCAL == 16 || LOCAL == 17
			CONTINUE
		;CALL SET_PICTURE , @"%GET_TYPE(LOCAL),4% _\@(MAXBASE:ARG:GET_TYPE(LOCAL) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:GET_TYPE(LOCAL) != 999)) ? {ABS(MAXBASE:ARG:GET_TYPE(LOCAL)),3}% # %" " *2%반사 \@,%相性カラー(MAXBASE:ARG:GET_TYPE(LOCAL))%_" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + LOCAL % 3 * 14
		CALL SET_PICTURE , @"%GET_STATE(LOCAL),6,LEFT% ,{COLOR("パ青緑")}_{MAX(MAXBASE:ARG:GET_STATE(LOCAL) + 100,0),3}％,%相性カラー(MAX(MAXBASE:ARG:GET_STATE(LOCAL) + 100,0))%_" , ARG:1 + 1 + LOCAL:1/3 , , ARG:2 + 2 + LOCAL:1 % 3 * (横幅/3)
		SIF ARG:3 == 1 &&  장비변경時バステ내성(LOCAL) != MAXBASE:ARG:GET_STATE(LOCAL)
			CALL SET_PICTURE , @" → 　_{MAX(장비변경時バステ내성(LOCAL) + 100,0),3}％,%相性カラー(MAX(장비변경時バステ내성(LOCAL) + 100,0))%_" , ARG:1 + 1 + LOCAL:1/3 , , ARG:2 + 14 + (LOCAL:1 % 3) * (横幅/3)
		;IF ARG:3 == 1 && 장비변경時相性(LOCAL) != MAXBASE:ARG:GET_TYPE(LOCAL)
		;	CALL SET_PICTURE , @" → \@(MAXBASE:ARG:(GET_TYPE(LOCAL)) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:(GET_TYPE(LOCAL)) != 999)) ? {ABS(MAXBASE:ARG:(GET_TYPE(LOCAL))),4}％ # %" " *2%반사 \@" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + 11 + LOCAL % 3 * 21
		;
		;ENDIF
		LOCAL:1 ++
	NEXT
ELSEIF FLAG:윈도우내성표시설정 == 2
	FOR LOCAL , 0 , FLAG:상성수
		SUBSTRING GET_TYPE(LOCAL),0,2
		CALL SET_PICTURE , @"%RESULTS% _%내성一文字(MAXBASE:ARG:GET_TYPE(LOCAL))%,%相性カラー(MAXBASE:ARG:GET_TYPE(LOCAL))%_" , ARG:1 + 1 + LOCAL/6 , , ARG:2 + 2 + LOCAL % 6 * (横幅/6)
		SIF ARG:3 == 1 &&  내성一文字(장비변경時相性(LOCAL)) != 내성一文字(MAXBASE:ARG:GET_TYPE(LOCAL))
			CALL SET_PICTURE , @"→_%내성一文字(장비변경時相性(LOCAL))%,%相性カラー(장비변경時相性(LOCAL))%_" , ARG:1 + 1 + LOCAL/6 , , ARG:2 + 8 + (LOCAL % 6) * (横幅/6)
	NEXT
	LOCAL:1 = 0
	FOR LOCAL , 0 , FLAG:스테이터스수
		SIF LOCAL == 0 || LOCAL == 13 || LOCAL == 16 || LOCAL == 17
			CONTINUE
		CALL SET_PICTURE , @"%GET_STATE_KANJI(LOCAL,1)% ,{COLOR("パ青緑")}_%내성一文字(MAX(MAXBASE:ARG:GET_STATE(LOCAL) + 100,0))%,%相性カラー(MAX(MAXBASE:ARG:GET_STATE(LOCAL) + 100,0))%_" , ARG:1 + 4 + LOCAL:1/6 , , ARG:2 + 2 + LOCAL:1 % 6 * (横幅/6)
		SIF ARG:3 == 1 &&  내성一文字(MAX(장비변경時バステ내성(LOCAL) + 100,0)) != 내성一文字(MAX(MAXBASE:ARG:GET_STATE(LOCAL) + 100,0))
			CALL SET_PICTURE , @"→_%내성一文字(MAX(장비변경時バステ내성(LOCAL) + 100,0))%,%相性カラー(MAX(장비변경時バステ내성(LOCAL) + 100,0))%_" , ARG:1 + 4 + LOCAL:1/6 , , ARG:2 + 8 + (LOCAL:1 % 6) * (横幅/6)
		;IF ARG:3 == 1 && 장비변경時相性(LOCAL) != MAXBASE:ARG:GET_TYPE(LOCAL)
		;	CALL SET_PICTURE , @" → \@(MAXBASE:ARG:(GET_TYPE(LOCAL)) < 0) ? 흡 # 　\@\@ ((MAXBASE:ARG:(GET_TYPE(LOCAL)) != 999)) ? {ABS(MAXBASE:ARG:(GET_TYPE(LOCAL))),4}％ # %" " *2%반사 \@" , ARG:1 + 1 + LOCAL/3 , , ARG:2 + 2 + 11 + LOCAL % 3 * 21
		;
		;ENDIF
		LOCAL:1 ++
	NEXT
ENDIF

;=======================================
;스킬ウィンドウ
;=======================================
@STATUS_WINDOW_SKILL , ARG , ARG:1 , ARG:2
#DIM 横幅
#DIM 基準位置 , 2
;横幅 = 46
横幅 = 50
SIF GETBIT (FLAG:커스텀게임화면,1)
	横幅 = 82
;이능자
;IF TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:인수라
IF CHARA_SKILLCOUNT(ARG) == 12
CALL SET_PICTURE , @"┏SKILL %"━" * (横幅 / 2 -3)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+4 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+5 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+6 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+7 , , ARG:2
CALL SET_PICTURE , @"_┗%"━" * (横幅 / 2)%┛_" , ARG:1+8 , , ARG:2

;스킬표시
;IF ABL:ARG:종족 != 0 || TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:페르소나구사자 || TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
	基準位置:0 = ARG:1 + 1
	基準位置:1 = ARG:2 + 2
	FOR LOCAL, 1, FLAG:이능자스킬수 + 1
		LOCAL:1 = ABL:ARG:@"스킬{LOCAL}"
		IF LOCAL:1
			;적専用/システム・기본行動・총공격/사용아이템/링케이지はグレーで표시(전투중＆全書閲覧用)
			RESULT = 0
			TRYCALLFORM 적専用_{LOCAL:1}
			RESULT |= INRANGE(LOCAL:1, 1, 2099) !| INRANGE(LOCAL:1, 2400, 2999)
			IF GETBIT (FLAG:커스텀게임화면,1)
				LOCALS = 스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL}]%RESULTS,20-LOCAL/10,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
			ELSE
				;CALL SET_PICTURE, @"_[{LOCAL}]%SKILL_NAME_F(LOCAL:1),20-LOCAL/10,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
				;CALL SET_PICTURE, @"_[{LOCAL}]%SKILL_NAME_F(LOCAL:1),20-LOCAL/10,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 25
				LOCALS = 스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL}]%RESULTS,20-LOCAL/10,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 25
			ENDIF
		ENDIF
	NEXT
	IF CFLAG:ARG:PT플래그 > 0
		;LOCAL:1 = 표시する습득予定스킬
		LOCAL:1 = 0
		FOR LOCAL,1, 21
			LOCALS:1 = 습득LV{LOCAL}
			IF ABL:ARG:(LOCALS:1) > 0
				IF LOCAL:1 == 0
					LOCAL:1 = LOCAL
				ELSE
					SIF ABL:ARG:("습득LV" + TOSTR(LOCAL:1)) > ABL:ARG:(LOCALS:1)
						LOCAL:1 = LOCAL
				ENDIF
			ENDIF
		NEXT
		;변이표시
		LOCAL:2 = 0
		IF ABL:ARG:변이 && LOCAL:1 > 0 && (LOCAL:1 > ABL:ARG:변이레벨)
			LOCAL:2 = ABL:ARG:변이레벨
		ENDIF
		IF LOCAL:1 > 0 && LOCAL:2 == 0
			LOCALS:1 = 습득LV{LOCAL:1}
			LOCALS = 습득스킬{LOCAL:1}
			IF GETBIT (FLAG:커스텀게임화면,1)
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE , @"　　NEXT[%RESULTS,20,LEFT%]　습득LV {ABL:ARG:(LOCALS:1)},0x666666" , 基準位置:0 + FLAG:이능자스킬수/2 , , 基準位置:1
			ELSE
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				LOCALS:2 = \@ ABL:ARG:(LOCALS:1) > (BASE:ARG:LV)+5 ? 　　？？？？？？　　 # %RESULTS% \@ 
				;LOCALS:2 = \@ ABL:ARG:(LOCALS:1) > (BASE:ARG:LV)+5 ? 　　？？？？？？　　 # %SKILL_NAME_F(ABL:ARG:LOCALS)% \@ 
				CALL SET_PICTURE , @"　　NEXT[%LOCALS:2,20,LEFT%]　습득LV {ABL:ARG:(LOCALS:1)},0x666666" , 基準位置:0 + FLAG:이능자스킬수/2 , , 基準位置:1
			ENDIF
		ELSEIF ABL:ARG:변이 > 0 || ABL:ARG:변이레벨 > 0
				LOCALS:2 = 변이
				CALL SET_PICTURE , @"　　NEXT[%LOCALS:2,20,LEFT%]　변이LV {ABL:ARG:변이레벨},0xFFFF00" , 基準位置:0 + FLAG:이능자스킬수/2 , , 基準位置:1
		ENDIF
	ENDIF
;ENDIF
SIF FLAG:이신합체표시 || FLAG:SHOP커맨드 == [[SHOP:사교의관]]
	RETURN 0
;장비스킬표시
;IF ABL:ARG:종족 == 0
;	IF TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:페르소나구사자 || TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
		基準位置:0 = 基準位置:0 + FLAG:이능자스킬수/2 + 2
		基準位置:1 = ARG:2 + 2
		
		;FLAG:DEBUG = 10000
		;CALL SET_PICTURE , @"┣%"━" * (横幅 / 2)%┫" , ARG:1+6 , , ARG:2
		CALL SET_PICTURE , @"┣EQUIPMENT SKILL %"━" * (横幅 / 2 - 8)%┫" , ARG:1+8 , , ARG:2
		;FLAG:DEBUG = 0
		;PRINTL はう
		;CALL SET_PICTURE ,  , 0 , "WAIT" , 35
		FOR LOCAL , 0 , 5
			CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+9 + LOCAL , , ARG:2
		NEXT
		CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+13 , , ARG:2
		
;	ELSE
;		基準位置:0 = ARG:1 + 2
;		基準位置:1 = ARG:2 + 2
;	ENDIF
;	CALL SET_PICTURE , @"◇장비스킬" , 基準位置:0 -1 , , 基準位置:1
	
	FOR LOCAL, 1 + 장비스킬ページ * 8, MIN(9 + 장비스킬ページ * 8, 22)
		LOCAL:1 = ABL:ARG:@"장비스킬{LOCAL}"
		IF GETBIT (FLAG:커스텀게임화면,1)
			;SIF LOCAL:1
			IF LOCAL:1
				;CALL SET_PICTURE, @"_[{LOCAL+20}]%SKILL_NAME_F(LOCAL:1),19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
				LOCALS = 장비스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL+20}]%RESULTS,19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
			ENDIF
		ELSE
			;SIF LOCAL:1
			IF LOCAL:1
				;CALL SET_PICTURE, @"_[{LOCAL+20}]%SKILL_NAME_F(LOCAL:1),19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
				LOCALS = 장비스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL+20}]%RESULTS,19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
			ENDIF
		ENDIF
	NEXT
	SIF ABL:ARG:장비스킬9
		CALL SET_PICTURE, @"[<],,,<_P.{장비스킬ページ + 1,2}_[>],,,>", 基準位置:0 + 4, , 基準位置:1 + 30
;ENDIF
;이능자以外
ELSE
CALL SET_PICTURE , @"┏SKILL %"━" * (横幅 / 2 -3)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+2 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+3 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+4 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+5 , , ARG:2
CALL SET_PICTURE , @"_┗%"━" * (横幅 / 2)%┛_" , ARG:1+6 , , ARG:2

;스킬표시
;IF ABL:ARG:종족 != 0 || TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:페르소나구사자 || TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
	基準位置:0 = ARG:1 + 1
	基準位置:1 = ARG:2 + 2
	FOR LOCAL, 1, FLAG:스킬수 + 1
		LOCAL:1 = ABL:ARG:@"스킬{LOCAL}"
		IF LOCAL:1
			;적専用/システム・기본行動・총공격/사용아이템/링케이지はグレーで표시(전투중＆全書閲覧用)
			RESULT = 0
			TRYCALLFORM 적専用_{LOCAL:1}
			RESULT |= INRANGE(LOCAL:1, 1, 2099) !| INRANGE(LOCAL:1, 2400, 2999)
			IF GETBIT (FLAG:커스텀게임화면,1)
				LOCALS = 스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL}]%RESULTS,20,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
			ELSE
				LOCALS = 스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL}]%RESULTS,20,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
				;CALL SET_PICTURE, @"_[{LOCAL}]%SKILL_NAME_F(LOCAL:1),20,LEFT%,\@ RESULT ? 0x666666 # \@,,{LOCAL}_", 基準位置:0 + (LOCAL-1) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
			ENDIF
		ENDIF
	NEXT
	IF CFLAG:ARG:PT플래그 > 0
		;LOCAL:1 = 표시する습득予定스킬
		LOCAL:1 = 0
		FOR LOCAL,1, 21
			LOCALS:1 = 습득LV{LOCAL}
			IF ABL:ARG:(LOCALS:1) > 0
				IF LOCAL:1 == 0
					LOCAL:1 = LOCAL
				ELSE
					SIF ABL:ARG:("습득LV" + TOSTR(LOCAL:1)) > ABL:ARG:(LOCALS:1)
						LOCAL:1 = LOCAL
				ENDIF
			ENDIF
		NEXT
		;변이표시
		LOCAL:2 = 0
		IF ABL:ARG:변이 && LOCAL:1!= 0 && (LOCAL:1 > ABL:ARG:변이레벨)
			LOCAL:2 = ABL:ARG:변이레벨
		ENDIF
		IF LOCAL:1 > 0 && LOCAL:2 == 0
			LOCALS:1 = 습득LV{LOCAL:1}
			LOCALS = 습득스킬{LOCAL:1}
			IF GETBIT (FLAG:커스텀게임화면,1)
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE , @"　　NEXT[%RESULTS,20,LEFT%]　습득LV {ABL:ARG:(LOCALS:1)},0x666666" , 基準位置:0 + FLAG:스킬수/2 , , 基準位置:1
			ELSE
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				LOCALS:2 = \@ ABL:ARG:(LOCALS:1) > (BASE:ARG:LV)+5 ? 　　？？？？？？　　 # %RESULTS% \@ 
				;LOCALS:2 = \@ ABL:ARG:(LOCALS:1) > (BASE:ARG:LV)+5 ? 　　？？？？？？　　 # %SKILL_NAME_F(ABL:ARG:LOCALS)% \@ 
				CALL SET_PICTURE , @"　　NEXT[%LOCALS:2,20,LEFT%]　습득LV {ABL:ARG:(LOCALS:1)},0x666666" , 基準位置:0 + FLAG:스킬수/2 , , 基準位置:1
			ENDIF
		ELSEIF ABL:ARG:변이 > 0 || ABL:ARG:변이레벨 > 0
				LOCALS:2 = 변이
				CALL SET_PICTURE , @"　　NEXT[%LOCALS:2,20,LEFT%]　변이LV {ABL:ARG:변이레벨},0xFFFF00" , 基準位置:0 + FLAG:스킬수/2 , , 基準位置:1
		ENDIF
	ENDIF
;ENDIF
SIF FLAG:이신합체표시 || FLAG:SHOP커맨드 == [[SHOP:사교의관]]
	RETURN 0
;장비스킬표시
;IF ABL:ARG:종족 == 0
;	IF TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:페르소나구사자 || TALENT:ARG:데빌시프터 || TALENT:ARG:식노 || TALENT:ARG:악마빙의자
		基準位置:0 = 基準位置:0 + FLAG:스킬수/2 + 2
		基準位置:1 = ARG:2 + 2
		
		;FLAG:DEBUG = 10000
		;CALL SET_PICTURE , @"┣%"━" * (横幅 / 2)%┫" , ARG:1+6 , , ARG:2
		CALL SET_PICTURE , @"┣EQUIPMENT SKILL %"━" * (横幅 / 2 - 8)%┫" , ARG:1+6 , , ARG:2
		;FLAG:DEBUG = 0
		;PRINTL はう
		;CALL SET_PICTURE ,  , 0 , "WAIT" , 35
		FOR LOCAL , 0 , 5
			CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+7 + LOCAL , , ARG:2
		NEXT
		CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+12 , , ARG:2
		
;	ELSE
;		基準位置:0 = ARG:1 + 2
;		基準位置:1 = ARG:2 + 2
;	ENDIF
;	CALL SET_PICTURE , @"◇장비스킬" , 基準位置:0 -1 , , 基準位置:1
	
	FOR LOCAL, 1 + 장비스킬ページ * 8, MIN(9 + 장비스킬ページ * 8, 22)
		LOCAL:1 = ABL:ARG:@"장비스킬{LOCAL}"
		IF GETBIT (FLAG:커스텀게임화면,1)
			;SIF LOCAL:1
			IF LOCAL:1
				;CALL SET_PICTURE, @"_[{LOCAL+20}]%SKILL_NAME_F(LOCAL:1),19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
				LOCALS = 장비스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL+20}]%RESULTS,19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 41
			ENDIF
		ELSE
			;SIF LOCAL:1
			IF LOCAL:1
				;CALL SET_PICTURE, @"_[{LOCAL+20}]%SKILL_NAME_F(LOCAL:1),19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
				LOCALS = 장비스킬{LOCAL}
				CALLFORM SKILL_NAME_{ABL:ARG:LOCALS}, ARG
				CALL SET_PICTURE, @"_[{LOCAL+20}]%RESULTS,19,LEFT%,,,{LOCAL+20}_", 基準位置:0 + (LOCAL-1 - 장비스킬ページ * 8) / 2, , 基準位置:1 + (LOCAL-1) % 2 * 23
			ENDIF
		ENDIF
	NEXT
	SIF ABL:ARG:장비스킬9
		CALL SET_PICTURE, @"[<],,,<_P.{장비스킬ページ + 1,2}_[>],,,>", 基準位置:0 + 4, , 基準位置:1 + 30
;ENDIF
ENDIF

;=======================================
;장비品ウィンドウ
;=======================================
@STATUS_WINDOW_EQUIP , ARG , ARG:1 , ARG:2 , ARG:3
#DIM 横幅
#DIM 色
横幅 = 42
IF ARG:3
	CALL SET_PICTURE , @"┏RACE%"━" * 8%┳NAME%"━" * 8%┓" , ARG:1 , , ARG:2
	CALL SET_PICTURE , @"┃%종족명(ARG) , 20 , LEFT%┃%CALLNAME:ARG , 20 , LEFT%┃" , ARG:1 + 1 , , ARG:2
	;CALL SET_PICTURE , @"┣%"━" * (横幅 / 2)%┫" , ARG:1 + 2 , , ARG:2
	CALL SET_PICTURE , @"┣%"━" * ((横幅-2)/4 )%┻%"━" * ((横幅-2)/4 )%┫" , ARG:1 + 2 , , ARG:2
	
	ARG:1 += 2
ELSE
	CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1 , , ARG:2
	
ENDIF

;4*5にしておこう
IF GROUPMATCH(ABL:ARG:종족 , 0 , 36) || SKILL_EQUIPTHEORY_IS_HAVE_SKILL(ARG)
	CALL SET_PICTURE , @"EQUIP " , ARG:1 , , ARG:2 + 2
	FOR LOCAL , 1 , 9
		CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+LOCAL , , ARG:2
	NEXT
	CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+9 , , ARG:2
	FOR LOCAL , 0 , 7
		IF ARG:3 && 변경장비箇所 == LOCAL
			LOCALS = [{50+LOCAL}]%"[" + GET_EQUIP(LOCAL) + "]",14,LEFT%,{COLOR("パ緑")},,{50+LOCAL}_
		ELSE
			LOCALS = [{50+LOCAL}]%"[" + GET_EQUIP(LOCAL) + "]",14,LEFT%,,,{50+LOCAL}_
		ENDIF
		
		IF ARG:3 && 변경予定장비:LOCAL > -1
			;IF 개조장비(변경予定장비:LOCAL)
			;	LOCALS += 개조장비명칭(개조장비番号(변경予定장비:LOCAL))+ @",{COLOR("パ緑")}"
			;ELSEIF 마정장비(변경予定장비:LOCAL)
			;	LOCALS += EQ_GETNAME_마정장비_ITEM(변경予定장비:LOCAL)+ @",{COLOR("パ緑")}"
			;ELSEIF 변경予定장비:LOCAL == 0
			;	LOCALS += @"ＥＭＰＴＹ,{COLOR("パ緑")}"
			;ELSE
			;	LOCALS += ITEMNAME:(변경予定장비:LOCAL)+ @",{COLOR("パ緑")}"
			;ENDIF
				LOCALS += 장비의명칭(변경予定장비:LOCAL,ARG) + @",{COLOR("パ緑")}"
		ELSEIF EQUIP:ARG:GET_EQUIP(LOCAL) == 0
			LOCALS += "ＥＭＰＴＹ,0x404040"
		; ELSEIF 개조장비(EQUIP:ARG:GET_EQUIP(LOCAL))
		; 	LOCALS += 개조장비명칭(개조장비番号(EQUIP:ARG:GET_EQUIP(LOCAL)))+ ","
		; ELSEIF 마정장비(EQUIP:ARG:GET_EQUIP(LOCAL))
		; 	LOCALS += EQ_GETNAME_마정장비_CHARA(ARG, LOCAL)+ ","
		ELSE
			; LOCALS += ITEMNAME:(EQUIP:ARG:GET_EQUIP(LOCAL))+ ","
			LOCALS += 장비의명칭(EQUIP:ARG:GET_EQUIP(LOCAL),ARG) + ","
		ENDIF
			
		CALL SET_PICTURE , @"%LOCALS%,,{50+LOCAL}_" , ARG:1 + 1 + LOCAL , , ARG:2+2
	NEXT
	IF TALENT:ARG:건슬링거 && EQUIP:ARG:총
		CALL SET_PICTURE , @"[57][특수탄변경],,,57_" , ARG:1 + 1 + LOCAL , , ARG:2+2
	ELSE
		CALL SET_PICTURE , @"[--][----------]" , ARG:1 + 1 + LOCAL , , ARG:2+2
	ENDIF
;조마
ELSEIF ABL:ARG:종족 == 45
		FOR LOCAL , 0 , 9
			CALL SET_PICTURE , @"%"　" * (横幅 / 2 + 2)%" , ARG:1+0+LOCAL , , ARG:2
		NEXT
ELSE
	CALL SET_PICTURE , @"PLUGIN" , ARG:1 , , ARG:2 + 2
	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
	CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+2 , , ARG:2
	;IF TALENT:ARG:이능자 || TALENT:ARG:달인 || TALENT:ARG:인수라;THE힘技
	IF CHARA_SKILLCOUNT(ARG) == 12
		FOR LOCAL , 0 , 6
			CALL SET_PICTURE , @"%"　" * (横幅 / 2 + 2)%" , ARG:1+3+LOCAL , , ARG:2
		NEXT
	ENDIF
	
	IF ARG:3 && 변경予定장비:6 > -1
		CALL SET_PICTURE , @"_[50][%PLUGINNAME(변경予定장비:6)%],{COLOR("パ緑")},,50_" , ARG:1+1 , , ARG:2 + 2
	ELSEIF EQUIP:ARG:악세사리
		CALL SET_PICTURE , @"_[50][%PLUGINNAME(EQUIP:ARG:악세사리)%],,,50_" , ARG:1+1 , , ARG:2 + 2
	ELSE
		CALL SET_PICTURE , @"_[50][----------],,,50" , ARG:1+1 , , ARG:2 + 2
		
	ENDIF
	
ENDIF

;=======================================
;장비品데이터ウィンドウ
;ARG:3が장비品の番号
;=======================================
@STATUS_WINDOW_EQUIP_DATA , ARG , ARG:1 , ARG:2 , ARG:3 , ARGS
#DIM 横幅
#DIM 표시情報
#DIM 공격횟수 , 2
#DIMS 공격범위 , 2
IF ARGS == "표시변경+"
	표시情報++
	SIF 표시情報 > 2
		표시情報 = 0
	RETURN 0
ELSEIF ARGS == "표시변경-"
	표시情報--
	SIF 표시情報 < 0
		표시情報 = 2
	RETURN 0
ENDIF
横幅 = 42
CALL SET_PICTURE , @"┏%"━" * (横幅 / 2)%┓" , ARG:1 , , ARG:2
CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+1 , , ARG:2
IF ARG:3 == 0
	CALL SET_PICTURE , @"ＥＭＰＴＹ,{COLOR("gray")}" , ARG:1+1 , , ARG:2 + 2
; ELSEIF 개조장비(ARG:3)
; 	CALL SET_PICTURE , @"%개조장비명칭(개조장비番号(ARG:3))%" , ARG:1+1 , , ARG:2 + 2
; ELSEIF 마정장비(ARG:3)
; 	CALL SET_PICTURE , @"%EQ_GETNAME_마정장비_ITEM(ARG:3)%" , ARG:1+1 , , ARG:2 + 2
; ELSE
; 	CALL SET_PICTURE , @"%ITEMNAME:(ARG:3)%" , ARG:1+1 , , ARG:2 + 2
	CALL SET_PICTURE , 장비의명칭(ARG:3,ARG) , ARG:1+1 , , ARG:2 + 2
ENDIF
CALL SET_PICTURE , @"┣%"━" * (横幅 / 2)%┫" , ARG:1+2 , , ARG:2

FOR LOCAL , 3 , 9
	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+LOCAL , , ARG:2
NEXT
CALL SET_PICTURE , @"┗%"━" * (横幅 / 2)%┛" , ARG:1+9 , , ARG:2
IF 표시情報 == 0
	;기본性能
	FOR LOCAL , 0 , 6
		CALLFORM EQUIP_PROPERTY , ARG:3 , "전투능력수정" , LOCAL , ARG
		;SIF RESULT
		CALL SET_PICTURE , @"%GET_BATTLESTATUS(LOCAL),8%_ {RESULT,3},{COLOR(AUTO_SPLIT("RED_GRAY_DEF" , "_" , (RESULT > 0) + (RESULT >= 0)))}" , ARG:1+3+(LOCAL%2) , , ARG:2 + 2 + (LOCAL/2) *13
	NEXT
	;能力値ボーナス
	FOR LOCAL , 0 , 6
		CALLFORM EQUIP_PROPERTY , ARG:3 , "기본능력수정" , LOCAL + 1 , ARG
		;IF RESULT > 0
		CALL SET_PICTURE , @"%GET_BASESTATUS(LOCAL + 1),8%_ {RESULT,3},{COLOR(AUTO_SPLIT("RED_GRAY_DEF" , "_" , (RESULT > 0) + (RESULT >= 0)))}" , ARG:1+5+(LOCAL/3) , , ARG:2 + 2 + (LOCAL%3) *13
		
	NEXT
	
	;검か총なら공격횟수・相性・사거리・공격범위표시
	IF RANGE(ARG:3 , 2000 , 2999)
		IF RANGE(ARG:3 , 2500 , 2999)
			CALLFORM EQUIP_PROPERTY , ARG:3 , "총공격" , , ARG
			CALL SET_PICTURE , @"공격:{RESULT,3}" , ARG:1+7 , , ARG:2 + 6
			CALLFORM EQUIP_PROPERTY , ARG:3 , "총명중" , , ARG
			CALL SET_PICTURE , @"명중:{RESULT,3}" , ARG:1+8 , , ARG:2 + 6
		ENDIF
		CALLFORM EQUIP_PROPERTY , ARG:3 , "최저공격횟수" , , ARG
		공격횟수 = RESULT
		CALLFORM EQUIP_PROPERTY , ARG:3 , "최대공격횟수" , , ARG
		공격횟수:1 = RESULT
		CALL SET_PICTURE , @"공격횟수：{공격횟수}-{공격횟수:1}" , ARG:1+7 , , ARG:2 + 16
		IF RANGE(ARG:3 , 2000 , 2499)
			;검なら공격상성を표시
			CALLFORM EQUIP_PROPERTY , ARG:3 , "공격상성" , , ARG
			CALL SET_PICTURE , @" 속성：%GET_TYPE(RESULT),4,LEFT%" , ARG:1+7 , , ARG:2 + 30
		ELSEIF RANGE(ARG:3 , 2500 , 2999)
			;총なら특수탄창を표시
			CALLFORM EQUIP_PROPERTY , ARG:3 , "특수탄창" , , ARG
			CALL SET_PICTURE , @" 특수탄창：{RESULT}" , ARG:1+7 , , ARG:2 + 30
		ENDIF
		CALLFORM EQUIP_PROPERTY , ARG:3 , "사거리" , , ARG
		공격범위 = %GET_RANGE(RESULT) , 4 , LEFT%
		CALLFORM EQUIP_PROPERTY , ARG:3 , "공격범위" , , ARG
		공격범위:1 = %GET_SPHERE(RESULT),4,LEFT%
		CALL SET_PICTURE , @"사거리：%공격범위% 　　대상：%공격범위:1%" , ARG:1+8 , , ARG:2 + 16
	ENDIF
	
ELSEIF 표시情報 == 1
	;CALL SET_PICTURE , @"방어상성" , ARG:1 + 3 , , ARG:2 + 2
	FOR LOCAL,0,FLAG:상성수
		CALLFORM EQUIP_PROPERTY , ARG:3 , "방어상성" , LOCAL , ARG
		CALL SET_AISYOU_COLOR, RESULT
		IF RESULT == 999
			LOCALS = 　반사　
		ELSE
			LOCALS = %\@(RESULT < 0) ? 흡 # 　\@%{ABS(RESULT),3}％ 
		ENDIF
		SIF RESULT == 100
			LOCALS =
		CALL SET_PICTURE , @" %GET_TYPE(LOCAL),4,LEFT%,{GETDEFCOLOR()}_ _%LOCALS%,{GETCOLOR()}" , ARG:1 + 3 + (LOCAL/3) , , ARG:2 + 2 + (LOCAL%3) * 14
		RESETCOLOR
	NEXT
ELSEIF 표시情報 == 2
	;무기の추가효과
	CALLFORM EQUIP_PROPERTY , ARG:3 , "추가효과" , , ARG
	IF RESULT > 0
		CALL SET_PICTURE , @"추가효과：%GET_STATE(RESULT),6,LEFT%" , ARG:1 + 3 , , ARG:2 + 2
		CALLFORM EQUIP_PROPERTY , ARG:3 , "추가효과상성" , , ARG
		CALL SET_PICTURE , @"추가효과상성：%GET_TYPE(RESULT),6,LEFT%" , ARG:1 + 3 , , ARG:2 + 20
		ARG:1 ++
	ENDIF
	LOCAL:1 = 0
	CALL SET_PICTURE , @"◇상태이상내성" , ARG:1 + 3 , , ARG:2 + 2
	FOR LOCAL , 0 , FLAG:스테이터스수
		CALLFORM EQUIP_PROPERTY , ARG:3 , "バステ내성" , LOCAL , ARG
		IF RESULT
			CALL SET_PICTURE , @"%GET_STATE(LOCAL),8,LEFT% {100+RESULT,3}％" , ARG:1 + 4 + LOCAL:1 / 3 , , ARG:2 + 2 + (LOCAL:1 % 3) * 14
			LOCAL:1 ++
		ENDIF
	NEXT
ENDIF

;=======================================
;페르소나ウィンドウ
;=======================================

@STATUS_WINDOW_PERSONA


;=======================================
;장비可能品リストウィンドウ
;=======================================
@STATUS_WINDOW_EQUIP_ITEM_LIST , ARG = -1 , ARG:1 , ARG:2 , ARG:3 , ARGS
#DIM 横幅
#DIM 色
IF ARGS == "リスト作成"
	VARSET 아이템リスト , -1
	아이템リストページ = 0
	;머리はEMPTY
	;장비箇所が검で생득무기を소지している場合、先머리を생득무기に、それ以外は0(外す)に
	아이템リスト:0 = ( ARG:3 == 0 && 생득무기소지(ARG) ? [[아이템:생득무기]] # 0 )
	;아이템を장비していてそれが생득무기でない場合リストの先머리に現在の장비品を추가
	SIF EQUIP:ARG:GET_EQUIP(ARG:3) > 0 && EQUIP:ARG:GET_EQUIP(ARG:3) != [[아이템:생득무기]]
		아이템リスト:1 = EQUIP:ARG:GET_EQUIP(ARG:3)
	;장비지식持ちは強制的に인간장비표시
	IF SKILL_EQUIPTHEORY_IS_HAVE_SKILL(ARG)
		FOR LOCAL, 2000+ARG:3*500 , 2000+(ARG:3+1)*500
			SIF ITEMNAME:LOCAL == ""
				CONTINUE
			SIF ITEM:LOCAL == 0
				CONTINUE
			SIF FINDELEMENT(아이템リスト , LOCAL) != -1
				CONTINUE
			IF 마정장비(LOCAL)
				CALLFORM 장비조건_마정장비,ARG ,LOCAL - 2450 - ARG:3*450
				SIF RESULT == 1
					아이템リスト:FINDELEMENT(아이템リスト , -1) = LOCAL
			ELSE
				CALLFORM 장비조건_{LOCAL},ARG
				SIF RESULT == 1
					아이템リスト:FINDELEMENT(아이템リスト , -1) = LOCAL
			ENDIF
		NEXT
	;通常処理
	ELSE
		FOR LOCAL, (GET_DEVIL(ARG) ? 8000 # 2000+ARG:3*500) , (GET_DEVIL(ARG) ? 8500 # 2000+(ARG:3+1)*500)
			SIF ITEMNAME:LOCAL == ""
				CONTINUE
			SIF ITEM:LOCAL == 0
				CONTINUE
			SIF FINDELEMENT(아이템リスト , LOCAL) != -1
				CONTINUE
			IF 마정장비(LOCAL)
				CALLFORM 장비조건_마정장비,ARG ,LOCAL - 2450 - ARG:3*450
				SIF RESULT == 1
					아이템リスト:FINDELEMENT(아이템リスト , -1) = LOCAL
			ELSE
				CALLFORM 장비조건_{LOCAL},ARG
				SIF RESULT == 1
					아이템リスト:FINDELEMENT(아이템リスト , -1) = LOCAL
			ENDIF
		NEXT
	ENDIF
	
	;ここにソート作業でも入れよう
	;0番눈は外すor생득무기で固定
	;1番눈は現在の장비品があるなら固定
	CALL EQUIP_SORT , ARG , 1 + (EQUIP:ARG:GET_EQUIP(ARG:3) > 0)
	RETURN 0
ENDIF
;横幅 = 56
横幅 = 66
CALL SET_PICTURE , @"┏LIST%"━" * (横幅 / 2 - 2)%┓" , ARG:1 , , ARG:2
FOR LOCAL , 1 , 12
	CALL SET_PICTURE , @"┃%" " * 横幅%┃" , ARG:1+LOCAL , , ARG:2
NEXT
CALL SET_PICTURE , @"[정렬조건변경],,,정렬조건변경" , ARG:1+11 , , ARG:2 + 2
IF 변경장비箇所 >= 0
	CALL SET_PICTURE , @"[장비상세선택],,,장비상세선택" , ARG:1+11 , , ARG:2 + 19
ENDIF
CALL SET_PICTURE , @"[<],,,<_P.{아이템リストページ + 1,2}_[>],,,>" , ARG:1+11 , , ARG:2 + 横幅 - 14
CALL SET_PICTURE , @"┗%"━" * ((横幅) / 2)%┛" , ARG:1+12 , , ARG:2

;リストに登録された장비品の一覧を표시

FOR LOCAL , 아이템リストページ * 20 , (아이템リストページ+1)*20
	SIF 아이템リスト:LOCAL == -1
		BREAK
	TRYCALLFORM 최대소지수_{COUNT_ITEMMAX(아이템リスト:LOCAL)}
	RESULT = 0
	SIF RESULT > 0 && ITEM:(아이템リスト:LOCAL) > RESULT
		ITEM:(아이템リスト:LOCAL) = RESULT
	色 = GETDEFCOLOR()
	SIF 변경장비箇所 > -1 && 변경予定장비:변경장비箇所 == 아이템リスト:LOCAL
		色 = COLOR("パ緑")
	IF 아이템リスト:LOCAL == 0
		;CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%"제외한다",20,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 28
		CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%"제외한다",20,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 33
	; ELSEIF 개조장비(아이템リスト:LOCAL)
	; 	CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%개조장비명칭(개조장비番号(아이템リスト:LOCAL)),24,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 33
	; ELSEIF 마정장비(아이템リスト:LOCAL)
	; 	;CALL SET_PICTURE , @"[{아이템リスト:LOCAL}]%EQ_GETNAME_마정장비_ITEM(아이템リスト:LOCAL),20,LEFT%,{色},,{아이템リスト:LOCAL}_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 30
	; 	;CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%EQ_GETNAME_마정장비_ITEM(아이템リスト:LOCAL),20,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 28
	; 	CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%EQ_GETNAME_마정장비_ITEM(아이템リスト:LOCAL),24,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 33
	ELSE
		;CALL SET_PICTURE , @"[{아이템リスト:LOCAL}]%ITEMNAME:(아이템リスト:LOCAL),20,LEFT%,{色},,{아이템リスト:LOCAL}_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 30
		;CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%ITEMNAME:(아이템リスト:LOCAL),20,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 28
		; CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%ITEMNAME:(아이템リスト:LOCAL),24,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 33
		CALL SET_PICTURE , @"[%UNICODE(97 +(LOCAL%20))%]%장비의명칭(아이템リスト:LOCAL,ARG),24,LEFT%,{色},,%UNICODE(97 +(LOCAL%20))%_×{ITEM:(아이템リスト:LOCAL),2}" , ARG:1+1+(LOCAL%20 / 2) , , ARG:2 + 2 + (LOCAL%2) * 33
	ENDIF
NEXT

@장비변경時カラー , ARG
#FUNCTION
SIF 장비변경時스테이터스変化値(ARG) > 0
	RETURNF COLOR("aqua")
SIF 장비변경時스테이터스変化値(ARG) < 0
	RETURNF COLOR("red")
RETURNF GETDEFCOLOR()

@相性カラー, ARG
#FUNCTIONS
SELECTCASE ARG
	CASE 999
		;반사
		LOCAL = GETNUM(FLAG, "반사컬러")
	CASE IS > 100
		;弱点
		LOCAL = GETNUM(FLAG, "약점컬러")
	CASE 100
		;普通
		LOCAL = GETNUM(FLAG, "통상컬러")
	CASE IS > 0
		;내성
		LOCAL = GETNUM(FLAG, "내성컬러")
	CASE 0
		;無効
		LOCAL = GETNUM(FLAG, "무효컬러")
	CASEELSE
		;흡수
		LOCAL = GETNUM(FLAG, "흡수컬러")
ENDSELECT
LOCAL:1 = FLAG:LOCAL / 1000000 , FLAG:LOCAL /1000 % 1000 , FLAG:LOCAL % 1000
LOCAL:1 *= 256 * 256
LOCAL:2 *= 256
;PRINTFORML %CONVERT(LOCAL:1+LOCAL:2+LOCAL:3 , 16)% {LOCAL:1} {LOCAL:2} {LOCAL:3}
RETURNF "0x" + CONVERT(LOCAL:1+LOCAL:2+LOCAL:3 , 16)
;RETURNF CONVERT(FLAG:LOCAL , 16)
;CALL GETCOLOR_9(FLAG:LOCAL)
;RETURNF FLAG:LOCAL

;ARGSの長さがARGを超えている場合、最後の3文字を...にして返す
@ARRANGE_STRLENS(ARGS , ARG)
#FUNCTIONS
IF STRLENS(ARGS) > ARG
	ARGS = %SUBSTRING(ARGS , 0 , ARG - 3)%...
ENDIF
RETURNF ARGS


@ALICOLOR(ARG)
#FUNCTION
RETURNF TOINT(AUTO_SPLIT(@"{COLOR("AQUA")}_{COLOR("WHITE")}_{COLOR("RED")}" , "_" , ARG-1))

