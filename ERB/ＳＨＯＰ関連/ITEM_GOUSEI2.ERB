;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:ENDING.ERB
;	Facility	:ゲームの종료조건달성等の処理群
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		Jガン					新規作成
;	002		2020/08/19		Jガン					사룬가、흑선풍II추가
;	002		2020/10/16		Jガン					마사카도의검・쿠리카라의검・天の御검추가、不具合対策
;	003		2020/12/19		JK好き					표시を整理するため一部コメントアウト
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

@SHOP_COM_116_2
#LOCALSIZE 14
#LOCALSSIZE 13

GETBGCOLOR
C = RESULT

$INPUT_LOOP
VARSET DB

DRAWLINE 
PRINTL 무엇을 만드시겠습니까？

CALL ITEM_SYNTHESIS_표시(26,[[아이템:진・방천화극]],0, "방천화극・改", 1, "메테오라이트s", 5, "오리하르콘", 5)

CALL ITEM_SYNTHESIS_표시(100,[[아이템:사모]],0, "운철", 3, "다마스커스동", 3)
CALL ITEM_SYNTHESIS_표시(101,[[아이템:붕성사모]],0, "사모", 1, "꿈의물방울", 3, "태양의돌", 3)
CALL ITEM_SYNTHESIS_표시(102,[[아이템:청홍검]],0, "흑요석", 3, "미스릴은", 3)
CALL ITEM_SYNTHESIS_표시(103,[[아이템:청홍검・改]],0, "청홍검", 1, "달의돌", 3, "태양의돌", 3)
CALL ITEM_SYNTHESIS_표시(104,[[아이템:의천검]],0, "청홍검・改", 1, "꿈의물방울", 4, "오리하르콘", 2)
CALL ITEM_SYNTHESIS_표시(105,[[아이템:의천검・改]],0, "의천검", 1, "비욘다이트", 4, "히히이로카네", 2)
CALL ITEM_SYNTHESIS_표시(106,[[아이템:바쥬라・改]],0, "바쥬라", 1, "비욘다이트", 1, "태양의돌", 5)
CALL ITEM_SYNTHESIS_표시(107,[[아이템:청룡언월도・改]],0, "청룡언월도", 1, "히히이로카네", 1, "달의돌", 5)
CALL ITEM_SYNTHESIS_표시(108,[[아이템:자웅일대검]],0, "무명의도", 2, "메테오라이트s", 1, "꿈의물방울", 5)
CALL ITEM_SYNTHESIS_표시(109,[[아이템:무왕의현옹]],0, "무왕의해머", 1, "태양의돌", 3, "비욘다이트", 1)
CALL ITEM_SYNTHESIS_표시(110,[[아이템:무왕의현옹II]],0, "무왕의현옹", 1, "히히이로카네", 4, "메테오라이트s", 2)
CALL ITEM_SYNTHESIS_표시(111,[[아이템:동악태산]],0, "다마스커스동", 5, "무지개조각", 3, "꿈의물방울", 3)
CALL ITEM_SYNTHESIS_표시(112,[[아이템:동악태산II]],0, "동악태산", 1, "오리하르콘", 3, "메테오라이트s", 3)
CALL ITEM_SYNTHESIS_표시(113,[[아이템:풍화륜]],0, "스킬카드【파이어브레스】", 1, "스킬카드【동충파】", 1, "무지개조각", 2, "달의돌", 2)
CALL ITEM_SYNTHESIS_표시(114,[[아이템:풍화륜II]],0, "풍화륜", 1, "스킬카드【데들리번】", 1, "스킬카드【림도라온】", 1, "비욘다이트", 6)
CALL ITEM_SYNTHESIS_표시(115,[[아이템:자웅일대검II]],0, "자웅일대검", 1, "비욘다이트", 4, "오리하르콘", 2)
CALL ITEM_SYNTHESIS_표시(116,[[아이템:진・청룡언월도]],0, "청룡언월도・改", 1, "메테오라이트s", 4, "오리하르콘", 2)
CALL ITEM_SYNTHESIS_표시(117,2572,0, "사초총", 1, "메테오라이트s", 2, "비욘다이트", 2, "오리하르콘", 2, "히히이로카네", 1)
CALL ITEM_SYNTHESIS_표시(118,[[아이템:스킬카드【분노의정격】]],5, ITEMNAME:12517, 1, "스킬카드【극락떨구기】", 1, "스킬카드【아쿠아리타이드】", 1, "스킬카드【선풍진】", 1)
CALL ITEM_SYNTHESIS_표시(119,[[아이템:스킬카드【분노의온격】]],5, ITEMNAME:12517, 1, "스킬카드【인페르노】", 1, "스킬카드【절대영도】", 1, "스킬카드【나루카미】", 1)
CALL ITEM_SYNTHESIS_표시(120,[[아이템:스킬카드【분노의물마】]],5, ITEMNAME:12517, 1, "스킬카드【용권지옥】", 1, "스킬카드【마그네스톰】", 1, "스킬카드【히트카이저】", 1)
CALL ITEM_SYNTHESIS_표시(121, 2180,7, ITEMNAME:2116  , 1, "메테오라이트s", 3, "비욘다이트", 3, "오리하르콘", 3, "스킬카드【썬더볼트】", 2)
IF 던전플래그:42:신주쿠플래그("벨・데르진행도") == 4
	CALL ITEM_SYNTHESIS_표시(122,[[아이템:미스틸테인]],0, "겨우살이", 1, "비욘다이트", 4, "오리하르콘", 2)
	CALL ITEM_SYNTHESIS_표시(123,[[아이템:미스틸테인II]],7, "미스틸테인", 1, "히히이로카네", 3, "오리하르콘", 3, "메테오라이트s", 3, "스킬카드【지고의마탄】", 1)
ENDIF
CALL ITEM_SYNTHESIS_표시(124,[[아이템:요도니힐II]],0, "요도니힐", 1, "달의돌", 3, "비욘다이트", 1)
CALL ITEM_SYNTHESIS_표시(125,[[아이템:요도니힐III]],0, "요도니힐II", 1, "히히이로카네", 4, "오리하르콘", 2)
CALL ITEM_SYNTHESIS_표시(126,[[아이템:칠성검II]],0, "칠성검", 1, "메테오라이트s", 3, "오리하르콘", 3)
CALL ITEM_SYNTHESIS_표시(127,[[아이템:칠성검III]],7, "칠성검II", 1, "히히이로카네", 3, "비욘다이트", 3, "오리하르콘", 3, "스킬카드【칠성강천】", 1)
;------ 002 ADD --------
CALL ITEM_SYNTHESIS_표시(128,[[아이템:사룬가]],7, "샤랑가", 1, "메테오라이트s", 3, "비욘다이트", 3, "오리하르콘", 3, "스킬카드【아토믹플레어】", 1)
CALL ITEM_SYNTHESIS_표시(129,[[아이템:흑선풍II]],7, "흑선풍", 1, "메테오라이트s", 3, "비욘다이트", 3, "히히이로카네", 3, "스킬카드【만물유전】", 1)
;------ 003 ADD --------
IF ITEM:[[아이템:마사카도의검]] > 0
	CALL ITEM_SYNTHESIS_표시(130,[[아이템:마사카도의활]]  ,0, "마사카도의검", 1, "메테오라이트s", 2)
	CALL ITEM_SYNTHESIS_표시(131,[[아이템:마사카도의철봉]],0, "마사카도의검", 1, "히히이로카네", 2)
	CALL ITEM_SYNTHESIS_표시(132,[[아이템:마사카도의가시곤봉]],0, "마사카도의검", 1, "오리하르콘", 2)
	CALL ITEM_SYNTHESIS_표시(133,[[아이템:구요문의보륜]],0, "마사카도의검", 1, "비욘다이트", 2)
ENDIF
SIF ITEM:[[아이템:마사카도의활]] > 0
	CALL ITEM_SYNTHESIS_표시(134,[[아이템:마사카도의검]],0, "마사카도의활", 1, "메테오라이트s", 1)
SIF ITEM:[[아이템:마사카도의철봉]] > 0
	CALL ITEM_SYNTHESIS_표시(135,[[아이템:마사카도의검]],0, "마사카도의철봉", 1, "히히이로카네", 1)
SIF ITEM:[[아이템:마사카도의가시곤봉]] > 0
	CALL ITEM_SYNTHESIS_표시(136,[[아이템:마사카도의검]],0, "마사카도의가시곤봉", 1, "오리하르콘", 1)
SIF ITEM:[[아이템:구요문의보륜]] > 0
	CALL ITEM_SYNTHESIS_표시(137,[[아이템:마사카도의검]],0, "구요문의보륜", 1, "비욘다이트", 1)
	
IF ITEM:[[아이템:천어검]] > 0
	CALL ITEM_SYNTHESIS_표시(138,[[아이템:라스트저지먼트]]  ,0, "천어검", 1, "메테오라이트s", 2)
	CALL ITEM_SYNTHESIS_표시(139,[[아이템:시나이의신검]],0, "천어검", 1, "히히이로카네", 2)
	CALL ITEM_SYNTHESIS_표시(140,[[아이템:알베니스]],0, "천어검", 1, "오리하르콘", 2)
	CALL ITEM_SYNTHESIS_표시(141,[[아이템:크루세이더]],0, "천어검", 1, "비욘다이트", 2)
ENDIF
SIF ITEM:[[아이템:라스트저지먼트]] > 0
	CALL ITEM_SYNTHESIS_표시(142,[[아이템:천어검]],0, "라스트저지먼트", 1, "메테오라이트s", 1)
SIF ITEM:[[아이템:시나이의신검]] > 0
	CALL ITEM_SYNTHESIS_표시(143,[[아이템:천어검]],0, "시나이의신검", 1, "히히이로카네", 1)
SIF ITEM:[[아이템:알베니스]] > 0
	CALL ITEM_SYNTHESIS_표시(144,[[아이템:천어검]],0, "알베니스", 1, "오리하르콘", 1)
SIF ITEM:[[아이템:크루세이더]] > 0
	CALL ITEM_SYNTHESIS_표시(145,[[아이템:천어검]],0, "크루세이더", 1, "비욘다이트", 1)
	
IF ITEM:[[아이템:쿠리카라의검]] > 0
	CALL ITEM_SYNTHESIS_표시(146,[[아이템:부동견삭]],0, "쿠리카라의검", 1, "메테오라이트s", 2)
	CALL ITEM_SYNTHESIS_표시(147,[[아이템:천궁애염]],0, "쿠리카라의검", 1, "히히이로카네", 2)
	CALL ITEM_SYNTHESIS_표시(148,[[아이템:전륜성왕]],0, "쿠리카라의검", 1, "오리하르콘", 2)
	CALL ITEM_SYNTHESIS_표시(149,[[아이템:옥부천왕]],0, "쿠리카라의검", 1, "비욘다이트", 2)
ENDIF
SIF ITEM:[[아이템:부동견삭]] > 0
	CALL ITEM_SYNTHESIS_표시(150,[[아이템:쿠리카라의검]],0, "부동견삭", 1, "메테오라이트s", 1)
SIF ITEM:[[아이템:천궁애염]] > 0
	CALL ITEM_SYNTHESIS_표시(151,[[아이템:쿠리카라의검]],0, "천궁애염", 1, "히히이로카네", 1)
SIF ITEM:[[아이템:전륜성왕]] > 0
	CALL ITEM_SYNTHESIS_표시(152,[[아이템:쿠리카라의검]],0, "전륜성왕", 1, "오리하르콘", 1)
SIF ITEM:[[아이템:옥부천왕]] > 0
	CALL ITEM_SYNTHESIS_표시(153,[[아이템:쿠리카라의검]],0, "옥부천왕", 1, "비욘다이트", 1)

IF GETBIT(FLAG:EXTRA이벤트설정, 0)
	IF GETBIT(이벤트플래그:19:19,0)
		CALL ITEM_SYNTHESIS_표시(200,[[아이템:토가비토고로시・弐]],3, "토가비토고로시", 1, "스킬카드【브레이브재퍼】", 1, "비욘다이트", 4)
		CALL ITEM_SYNTHESIS_표시(201,[[아이템:토가비토고로시・参]],5, "토가비토고로시・弐", 1, ITEMNAME:13520, 1, "비욘다이트", 7, "히히이로카네", 7)
	ENDIF
ENDIF
DRAWLINE 
PRINTFORML [999] 돌아간다
SIF ITEM:[[아이템:합성가이드북]] > 0
	PRINTL [1000] 합성가이드북2(해설)
DRAWLINE 
INPUT
IF RESULT < 999 && DB:RESULT:0 > 0
	VARSET LOCAL
	VARSET LOCALS
	FOR LOCAL, 1, 13 
		SIF DB:RESULT:LOCAL == 0
			BREAK
		LOCAL:LOCAL  = DB:RESULT:LOCAL / 100000
		A = DB:RESULT:LOCAL % 100000
		LOCALS:LOCAL = %ITEMNAME:A%
	NEXT
	LOCAL = DB:RESULT:0 % 100000
	LOCAL:13 = DB:RESULT:0 / 100000
	CALL ITEM_SYNTHESIS(LOCAL,LOCAL:13, LOCALS:1, LOCAL:1, LOCALS:2, LOCAL:2, LOCALS:3, LOCAL:3, LOCALS:4, LOCAL:4, LOCALS:5, LOCAL:5, LOCALS:6, LOCAL:6, LOCALS:7, LOCAL:7, LOCALS:8, LOCAL:8, LOCALS:9, LOCAL:9, LOCALS:10, LOCAL:10, LOCALS:11, LOCAL:11, LOCALS:12, LOCAL:12)
ENDIF
SELECTCASE RESULT
	CASE 999
		RETURN 0
	CASE 1000
		IF ITEM:[[아이템:합성가이드북]] > 0
			CALL ITEM_SYNTHESIS_GUIDE2
		ENDIF
ENDSELECT

GOTO INPUT_LOOP

@ITEM_SYNTHESIS(ARG,ARG:13, ARGS:1, ARG:1, ARGS:2 = "", ARG:2 = 0, ARGS:3 = "", ARG:3 = 0, ARGS:4 = "", ARG:4 = 0, ARGS:5 = "", ARG:5 = 0, ARGS:6 = "", ARG:6 = 0, ARGS:7 = "", ARG:7 = 0, ARGS:8 = "", ARG:8 = 0, ARGS:9 = "", ARG:9 = 0, ARGS:10 = "", ARG:10 = 0, ARGS:11 = "", ARG:11 = 0, ARGS:12 = "", ARG:12 = 0)

#DIM 아이템종류, 13
#DIM 아이템필요数, 13
#DIM 아이템소지数, 13
#DIM 교환수, 1

VARSET 아이템종류,0
VARSET 아이템필요数,0
VARSET 아이템소지数,0

CALL CHECK_ITEMMAX , ARG
IF RESULT == 1
		PRINTW 소지수가 한계입니다
		RETURN 0
ENDIF
PRINTFORML 제작물　:%ITEMNAME:ARG%
PRINTFORML 필요기교:{ARG:13} 
PRINTFORML
IF ARG > 10000
	CALL 스킬詳細,ARG - 10000
ELSE
	CALL 아이템詳細,ARG
ENDIF
IF ABL:MASTER:기교 < ARG:13
		PRINTW 기교가 부족합니다
		RETURN 0
ENDIF
FOR LOCAL:2, 1, 13
	LOCAL:1 = 0
	FOR LOCAL, 1, 13
		SIF ARGS:LOCAL == ""
			CONTINUE
		RESULT = GETNUM(ITEM,ARGS:LOCAL)
		IF LOCAL:1 < RESULT
			LOCAL:1 = RESULT
			LOCAL:3 = LOCAL
		ENDIF
	NEXT
	SIF LOCAL:1 == 0
		BREAK
	IF LOCAL:1 > 0
		IF LOCAL:1 == 아이템종류:(LOCAL:2-1)
			LOCAL:2 --
			아이템필요数:(LOCAL:2) += ARG:(LOCAL:3)
			아이템소지数:(LOCAL:2) += ITEM:(ARGS:(LOCAL:3))
		ELSE
			아이템종류:(LOCAL:2) = LOCAL:1
			아이템필요数:(LOCAL:2) = ARG:(LOCAL:3)
			아이템소지数:(LOCAL:2) = ITEM:(ARGS:(LOCAL:3))
		ENDIF
		ARGS:(LOCAL:3) = ""
	ENDIF
NEXT	
FOR LOCAL, 1, 13
	SIF 아이템종류:LOCAL == 0
		BREAK
	PRINTFORML %ITEMNAME:(아이템종류:LOCAL),18,LEFT% {아이템필요数:LOCAL}
NEXT
PRINTL

LOCAL:1 = 99
FOR LOCAL, 1, 13
	SIF 아이템종류:LOCAL == 0
		BREAK
	IF 아이템소지数:LOCAL < 아이템필요数:LOCAL
		PRINTW 소재가 부족합니다
		RETURN 0
	ENDIF
	SIF LOCAL:1 > (아이템소지数:LOCAL / 아이템필요数:LOCAL)
		LOCAL:1 = 아이템소지数:LOCAL / 아이템필요数:LOCAL
NEXT

TRYCCALLFORM 최대소지수_{COUNT_ITEMMAX(ARG)}
	SIF LOCAL:1 > (RESULT - ITEM:ARG)
		LOCAL:1 = RESULT - ITEM:ARG
CATCH
ENDCATCH
$개수선택
PRINTFORML 몇 개 만듭니까？(1～{LOCAL:1})
PRINTFORML ※수동입력할 수 있습니다
FOR LOCAL, 1, LOCAL:1 + 1
	SIF LOCAL == 31
		BREAK
	PRINT [
	PRINTFORM {LOCAL,2}
	PRINT ]
	SIF LOCAL % 10 == 0
		PRINTL
NEXT
PRINTL
PRINTL [ 0]그만둔다

INPUT
IF RESULT < 1
	RETURN 0
ELSEIF RESULT > LOCAL:1
	PRINTFORML 올바른 수치를 입력하세요
	PRINTFORML
	PRINTFORML
	PRINTFORMW
	GOTO 개수선택
ELSE
	교환수 = RESULT
ENDIF
PRINTFORML %ITEMNAME:ARG%　{교환수}개 작성합니다 좋습니까？
FOR LOCAL, 1, 13
	SIF 아이템종류:LOCAL == 0
		BREAK
	PRINTFORML %ITEMNAME:(아이템종류:LOCAL),18,LEFT%　소지수:{아이템소지数:LOCAL,2} → {(아이템소지数:LOCAL-아이템필요数:LOCAL*교환수),2}
NEXT
CALL INPUT_YN("네", "아니오")
SIF RESULT == 1
	RETURN 0
	
	PRINTFORMW ＞%ITEMNAME:ARG%를(을) {교환수}개 입수했다
	ITEM:ARG += 교환수
	FOR LOCAL, 1, 13
		SIF 아이템종류:LOCAL == 0
			BREAK
		ITEM:(아이템종류:LOCAL) -= 아이템필요数:LOCAL*교환수
	NEXT


@ITEM_SYNTHESIS_표시(ARG:14,ARG,ARG:13, ARGS:1, ARG:1, ARGS:2 = "", ARG:2 = 0, ARGS:3 = "", ARG:3 = 0, ARGS:4 = "", ARG:4 = 0, ARGS:5 = "", ARG:5 = 0, ARGS:6 = "", ARG:6 = 0, ARGS:7 = "", ARG:7 = 0, ARGS:8 = "", ARG:8 = 0, ARGS:9 = "", ARG:9 = 0, ARGS:10 = "", ARG:10 = 0, ARGS:11 = "", ARG:11 = 0, ARGS:12 = "", ARG:12 = 0)

#DIM 아이템종류, 13
#DIM 아이템필요数, 13
#DIM 아이템소지数, 13
#DIM LCOUNT

VARSET 아이템종류,0
VARSET 아이템필요数,0
VARSET 아이템소지数,0
LCOUNT = 0

;LOCAL = [[キャラ:%ARGS:0%]]
CALL SET_PICTURE , , , "소거"
CALL SET_PICTURE , @"[{ARG:14,3}]" , 0 , , LCOUNT
LCOUNT += 5
IF ARG > 10000
	CALLFORM SKILL_NAME_{ARG - 10000},-1
	LOCALS = SC【%RESULTS%】
	CALL SET_PICTURE , @"%LOCALS,26,LEFT%" , 0 , , LCOUNT
ELSE
	CALL SET_PICTURE , @"%ITEMNAME:ARG,26,LEFT%" , 0 , , LCOUNT
ENDIF
DB:(ARG:14):0 = ARG
LCOUNT += 26

CALL SET_PICTURE , @"소지수:{ITEM:ARG,3}" , 0 , , LCOUNT
LCOUNT += 10
CALL SET_PICTURE , " 필요기교:" , 0 , , LCOUNT
LCOUNT += 10

IF ABL:MASTER:기교 >= ARG:13
	LOCAL = COLOR("하늘색")
ELSE
	LOCAL = COLOR("赤")
ENDIF
CALL SET_PICTURE , @"_{ARG:13,2}　,{LOCAL}_" , 0 , , LCOUNT
DB:(ARG:14):0 += ARG:13 * 100000
LCOUNT += 4

;PRINTFORM {ARG:13,2}　
;RESETCOLOR

FOR LOCAL:2, 1, 13
	LOCAL:1 = 0
	FOR LOCAL, 1, 13
		SIF ARGS:LOCAL == ""
			CONTINUE
		RESULT = GETNUM(ITEM,ARGS:LOCAL)
		IF LOCAL:1 < RESULT
			LOCAL:1 = RESULT
			LOCAL:3 = LOCAL
		ELSEIF LOCAL:1 == 0 && RESULT < 1
			;存在しない아이템名だと클리캡10個に(作成불可能)
			LOCAL:1 = 2
			LOCAL:3 = LOCAL
		ENDIF
	NEXT
	SIF LOCAL:1 == 0
		BREAK
	SIF LOCAL:1 == 2
		ARG:(LOCAL:3) = 10
	IF LOCAL:1 > 0
		IF LOCAL:1 == 아이템종류:(LOCAL:2-1)
			LOCAL:2 --
			아이템필요数:(LOCAL:2) += ARG:(LOCAL:3)
			;아이템소지数:(LOCAL:2) += ITEM:(ARGS:(LOCAL:3))
			아이템소지数:(LOCAL:2) = ITEM:(LOCAL:1)
		ELSE
			아이템종류:(LOCAL:2) = LOCAL:1
			아이템필요数:(LOCAL:2) = ARG:(LOCAL:3)
			;아이템소지数:(LOCAL:2) = ITEM:(ARGS:(LOCAL:3))
			아이템소지数:(LOCAL:2) = ITEM:(LOCAL:1)
		ENDIF
		ARGS:(LOCAL:3) =
	ENDIF
NEXT
CALL SET_PICTURE , "필요한 아이템:" , 0 , , LCOUNT
LCOUNT += 12
LOCAL:3 = LCOUNT
LOCAL:4 = 0
FOR LOCAL, 1, 13
	SIF 아이템종류:LOCAL == 0
		BREAK
	IF LOCAL > 3 && LOCAL % 3 == 1
		LOCAL:4 ++
		LOCAL:3 = LCOUNT
		CALL SET_PICTURE , @"_[{ARG:14,3}],{C}_" , LOCAL:4 , , 0
	ENDIF
	IF 아이템소지数:LOCAL >= 아이템필요数:LOCAL
		LOCAL:1 = COLOR("하늘색")
	ELSE
		LOCAL:1 = COLOR("赤")
	ENDIF
	IF 아이템종류:LOCAL > 10000
		CALLFORM SKILL_NAME_{아이템종류:LOCAL - 10000},-1
		LOCALS = SC【%RESULTS%】
		CALL SET_PICTURE , @"_%LOCALS,18,LEFT%,{LOCAL:1}_" , LOCAL:4 , , LOCAL:3
	ELSE
		CALL SET_PICTURE , @"_%ITEMNAME:(아이템종류:LOCAL),18,LEFT%,{LOCAL:1}_" , LOCAL:4 , , LOCAL:3
	ENDIF
	LOCAL:3 += 18
	CALL SET_PICTURE , @"_({아이템소지数:LOCAL,2}/{아이템필요数:LOCAL,2}),{LOCAL:1}_" , LOCAL:4 , , LOCAL:3
	LOCAL:3 += 7
	DB:(ARG:14):LOCAL = 아이템종류:LOCAL
	DB:(ARG:14):LOCAL += 아이템필요数:LOCAL * 100000
	;PRINTFORM %ITEMNAME:(아이템종류:LOCAL),18,LEFT%　({아이템소지数:LOCAL,2}/{아이템필요数:LOCAL,2})
	;RESETCOLOR
NEXT
CALL SET_PICTURE ,  , 0 , "표시" , 1 + LOCAL:4
;PRINTFORML

@ITEM_SYNTHESIS_GUIDE2
PRINTL 진・방천화극
PRINTL 마법위력、마법효과가 전혀 올라가지 않지만
PRINTL 그만큼 공격、명중이 많이 올라가는 창
PRINTL 힘이 없으면 장비할 수 없다
PRINTL 
PRINTL 사모
PRINTL 힘 증가의 무구　장비하는데에 힘이 필요한 창
PRINTL 반마인이 장비하면 포효를 깨닫는다
PRINTL 
PRINTL 청홍검
PRINTL 명중・마법효과 증가의 무구
PRINTL 지혜가 없으면 장비할 수 없다
PRINTL 스쿠카쟈오토를 깨닫는다
PRINTL 
PRINTL 의천검
PRINTL 명중・마법효과 증가의 무구
PRINTL 능력이 올라가는 지원계 스킬를 깨닫는다
PRINTL MP가 없으면、카쟈오토를 깨닫는다
PRINTL 지혜가 없으면 장비할 수 없다
PRINTL 
PRINTL 바쥬라・改
PRINTL 마법 증가의 무구（제구）
PRINTL 반마인이 진리의번개를 깨닫는다
PRINTL 
PRINTL 청룡언월도・改
PRINTL 약간 물리 증가의 창
PRINTL 장비하면 수격내성이 붙는다
PRINTL 
PRINTL 자웅일대검
PRINTL 명중이 정말로 높다
PRINTL 통상공격이 2회 공격
PRINTL 총 미장비상태로 공격이 올라간다
PRINTL 빠르지 않으면 장비할 수 없다
PRINTL 
PRINTL 무왕의현옹
PRINTL 공격이 정말로 높은 둔기
PRINTL 명중은 정말로 낮으나
PRINTL 명중이 올라가는 스킬를 깨닫는다
PRINTL 힘이 없으면 장비할 수 없다
PRINTL 
PRINTL 동악태산
PRINTL 방어가 올라가는 톤파（곤봉）
PRINTL 장비하면 물리에 내성이 붙는다
PRINTL 인내력이 없으면 장비할 수 없다
PRINTL 
PRINTL 풍화륜
PRINTL 회피 상승이 높은 발장비
PRINTL 그 외에도 속성에 내성이 붙어、약점이 없다
PRINTL 빠르지 않으면 장비할 수 없다
PRINTL 검을 장비하지 않은 마샬아츠가 장비하면…
PRINTL 
PRINTL 
PRINTL 
WAIT
DRAWLINE

@스킬詳細,ARG
LOCAL = ARG
		CALLFORM SKILL_RANK_{LOCAL}
		CALLFORM SKILL_SUCCESSION_TYPE_{LOCAL}
		
		
		TRYCALLFORM SKILL_RANK_{LOCAL}		
		PRINTFORM 랭크:{RESULT,2}　
		RESULT = 0
		TRYCALLFORM SKILL_HITRATE_{LOCAL}
		PRINTFORM 명중:{RESULT,4}　
		RESULT = 0
		TRYCALLFORM SKILL_POWER_{LOCAL}
		PRINTFORM 위력:{RESULT,4}　
		RESULT = 0
		TRYCALLFORM SKILL_COSTTYPE_{LOCAL}
		LOCAL:1 = RESULT
		RESULT = 0
		TRYCALLFORM SKILL_COST_{LOCAL}
		PRINTFORML \@ LOCAL:1 == 2 ? 소비HP:{RESULT,3}％ # 소비MP:{RESULT,3} \@

		SELECTCASE LOCAL
			;罪아군の専用魔法シリーズは타겟いねーと落ちるので
			CASE 1520, 1620, 1720 ,1923, 2025
				PRINTFORM 속성:특수　
			CASEELSE
				RESULT = -1
				TRYCALLFORM SKILL_TYPE_{LOCAL}
				IF RESULT == -1
					PRINTFORM 속성:특수　
				ELSE
					PRINTFORM 속성:%GET_TYPE(RESULT), 6%　
				ENDIF
		ENDSELECT
		TRYCALLFORM SKILL_DECIDE_TYPE_{LOCAL}
		PRINTFORM \@RESULT == 1 ? EX # MA\@　
		RESULT = 0
		TRYCALLFORM SKILL_SPHERE_{LOCAL}
		PRINT 범위:
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 1체　　
			CASE 2
				PRINTFORM 열　　　
			CASE 3
				PRINTFORM 전체　　
			CASE 4
				PRINTFORM 적아군　
			CASEELSE
				PRINT 없음　　
		ENDSELECT
		TRYCALLFORM SKILL_EFECT_{LOCAL}
		PRINT 종별:
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 공격　　　　
			CASE 2
				PRINTFORM 회복　　　　
			CASE 3
				PRINTFORM 상태변화　　
			CASE 4
				PRINTFORM 특수　　　　
			CASE 5
				PRINTFORM 상태회복　　
			CASEELSE
				PRINTFORM 그외　　　
		ENDSELECT
		TRYCCALLFORM SKILL_MINATTACKNUMBER_{LOCAL},-1
			PRINTFORM 공격횟수:{RESULT}～
			CALLFORM SKILL_MAXATTACKNUMBER_{LOCAL},-1
			PRINTFORM {RESULT}
			TRYCCALLFORM SKILL_MAXATK_PER_{LOCAL},-1
				PRINTFORM 　1몸통박치기{RESULT}HIT까지
			CATCH
			ENDCATCH
		CATCH
		ENDCATCH
		PRINTL
		
		TRYCALLFORM SKILL_EXPLAIN_{LOCAL}
		PRINTL 

@아이템詳細,ARG
LOCAL = ARG
	IF LOCAL < 2000
		PRINTFORML (사용아이템)
	ELSEIF LOCAL < 2500
		PRINTFORML (검)
	ELSEIF LOCAL < 3000
		PRINTFORML (총)
	ELSEIF LOCAL < 3500
		PRINTFORML (머리방어구)
	ELSEIF LOCAL < 4000
		PRINTFORML (몸통방어구)
	ELSEIF LOCAL < 4500
		PRINTFORML (팔방어구)
	ELSEIF LOCAL < 5000
		PRINTFORML (발방어구)
	ELSEIF LOCAL < 5500
		PRINTFORML (악세사리)
	ELSEIF LOCAL < 9000
		PRINTFORML (플러그인)
	ENDIF
	SELECTCASE LOCAL
	CASE 2000 TO 9000
	FOR LOCAL:3,1,FLAG:기본능력수
		TRYCALLFORM 기본능력수정_{LOCAL},LOCAL:3
		SELECTCASE LOCAL:3
			CASE 1
		PRINTFORM 힘 
			CASE 2
		PRINTFORM 지혜 
			CASE 3
		PRINTFORM 마력 
			CASE 4
		PRINTFORM 체력 
			CASE 5
		PRINTFORM 속도 
			CASE 6
		PRINTFORM 운 
		ENDSELECT
		IF RESULT > 0
			SETCOLOR 51, 255, 255
		PRINTFORM +
		ELSEIF RESULT < 0
			SETCOLOR 204, 0, 0
		ENDIF
		PRINTFORM {RESULT}　
		RESETCOLOR
	NEXT
	PRINTFORML 
	ENDSELECT

	IF LOCAL < 2000
	SELECTCASE LOCAL
		CASE 1100 TO 1240
		TRYCALLFORM SKILL_HITRATE_{LOCAL+2000}
		PRINTFORM 명중:{RESULT,4}　
		RESULT = 0
		TRYCALLFORM SKILL_POWER_{LOCAL+2000}
		PRINTFORM 위력:{RESULT,4}　
		RESULT = 0
		TRYCALLFORM SKILL_COSTTYPE_{LOCAL+2000}
		LOCAL:1 = RESULT
		RESULT = 0
	ENDSELECT
		TRYCALLFORM SKILL_SPHERE_{LOCAL+2000}
		PRINT 범위:
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 1체　　
			CASE 2
				PRINTFORM 열　　　
			CASE 3
				PRINTFORM 전체　　
			CASE 4
				PRINTFORM 적아군　
			CASEELSE
				PRINT 없음　　
		ENDSELECT
		TRYCALLFORM SKILL_EFECT_{LOCAL+2000}
		PRINT 種別:
		SELECTCASE RESULT
			CASE 1
				PRINTFORM 공격　　　
			CASE 2
				PRINTFORM 회복　　　
			CASE 3
				PRINTFORM 상태변화　
			CASE 4
				PRINTFORM 특수　　　
			CASE 5
				PRINTFORM 상태회복　
			CASEELSE
				PRINTFORM 그외　　
		ENDSELECT
		TRYCALLFORM 최대소지수_{LOCAL+2000}
		PRINTFORM 최대소지수 {RESULT}　
		TRYCALLFORM SKILL_SPEED_{LOCAL+2000}
		PRINTFORML 속도보정 {RESULT}　
		TRYCALLFORM SKILL_EXPLAIN_{LOCAL+2000}
	ELSEIF LOCAL < 5500
		IF LOCAL < 3000
			TRYCALLFORM 공격상성_{LOCAL} 
			PRINTFORM 속성 [%GET_TYPE(RESULT),4%]　
		ENDIF
		TRYCALLFORM 전투능력수정_{LOCAL}, 0
		PRINTFORM 공격 {RESULT,3}　
		TRYCALLFORM 전투능력수정_{LOCAL}, 1
		PRINTFORM 명중 {RESULT,3}　
		TRYCALLFORM 전투능력수정_{LOCAL}, 2
		PRINTFORM 방어 {RESULT,3}　
		TRYCALLFORM 전투능력수정_{LOCAL}, 3
		PRINTFORM 회피 {RESULT,3}　
		TRYCALLFORM 전투능력수정_{LOCAL}, 4
		PRINTFORM 마위 {RESULT,3}　
		TRYCALLFORM 전투능력수정_{LOCAL}, 5
		PRINTFORML 마효 {RESULT,3}　
		IF LOCAL < 3000 && LOCAL >= 2500
			TRYCALLFORM 총공격_{LOCAL}
			PRINTFORM 총공격 {RESULT,3}　
			TRYCALLFORM 총명중_{LOCAL}
			PRINTFORML 총명중 {RESULT,3}　
		ENDIF
		LOCAL:2 = 0
		FOR LOCAL:1 , 0 , FLAG:상성수
			TRYCALLFORM 방어상성_{LOCAL}, LOCAL:1
			IF RESULT != 100
				LOCAL:2 += 1
				IF LOCAL:2 % 7 == 1
					PRINTL 
				ENDIF
				IF RESULT < 100 || RESULT == 999
					SETCOLOR 51, 255, 255
				ELSE
					SETCOLOR 204, 0, 0
				ENDIF
				IF RESULT == 999
					PRINTFORM [%GET_TYPE(LOCAL:1),4%:반사]　
				ELSEIF RESULT == 50
					PRINTFORM [%GET_TYPE(LOCAL:1),4%:반감]　
				ELSEIF RESULT == 0
					PRINTFORM [%GET_TYPE(LOCAL:1),4%:무효]　
				ELSE
					PRINTFORM [%GET_TYPE(LOCAL:1),4%:{RESULT,4}]　
				ENDIF
			ENDIF
			RESETCOLOR
		NEXT
		IF LOCAL < 3000
			PRINTL
			TRYCALLFORM 최저공격횟수_{LOCAL}
			PRINTFORM 공격횟수 {RESULT}
			TRYCALLFORM 최대공격횟수_{LOCAL}
			PRINTFORM -{RESULT}　
			TRYCALLFORM 사거리_{LOCAL}
			PRINT 사거리:
			SELECTCASE RESULT
				CASE 1
					PRINTFORM Ｓ　
				CASE 2
					PRINTFORM Ｍ　
				CASE IS > 2
					PRINTFORM Ｌ　
				CASEELSE
					PRINTFORM ？　
			ENDSELECT
			TRYCALLFORM 공격범위_{LOCAL},
			PRINT 범위:
			SELECTCASE RESULT
				CASE 1
					PRINTFORM 1체　
				CASE 2
					PRINTFORM 열　
				CASE 3
					PRINTFORM 전체　
				CASE 4
					PRINTFORM 적아군　
			ENDSELECT
		ENDIF
		SELECTCASE LOCAL
			CASE 2500 TO 3000
			TRYCALLFORM 특수탄창_{LOCAL}
			PRINTFORM 특수탄창 {RESULT}　
		ENDSELECT
		IF LOCAL < 3000
			TRYCALLFORM 속도보정_{LOCAL}
			PRINTFORM 속도보정 {RESULT}　
		ENDIF
		SELECTCASE LOCAL
			CASE 2000 TO 2499
			TRYCALLFORM 검타입_{LOCAL}
			SELECTCASE RESULT
						CASE 1
							PRINTL 도검
						CASE 2
							PRINTL 레이피어
						CASE 3
							PRINTL 활
						CASE 4
							PRINTL 검
						CASE 5
							PRINTL 창
						CASE 6
							PRINTL 도끼・둔기
						CASE 7
							PRINTL 채찍
						CASE 8
							PRINTL 투척
						CASE 9
							PRINTL 지팡이・제구
						CASE 10
							PRINTL 곤봉
						CASE 11
							PRINTL 권투구
						CASEELSE
							PRINTL 그외
			ENDSELECT
			CASE 2500 TO 2999
			TRYCALLFORM 총타입_{LOCAL}
			SELECTCASE RESULT
				CASE 1
					PRINT 핸드건　
				CASE 2
					PRINT 샷건　
				CASE 3
					PRINT A라이플・머신건　
				CASE 4
					PRINT 저격라이플　
				CASE 5
					PRINT 그외　
			ENDSELECT
		ENDSELECT
	ELSEIF LOCAL < 9000
		TRYCALLFORM 증가CP_{LOCAL}
		PRINTFORM 증가CP {RESULT}　
		TRYCALLFORM 필요레벨_{LOCAL}
		PRINTFORM 필요레벨 {RESULT}　
	ENDIF
		PRINTL 
		TRYCALLFORM 장비조건설명_{LOCAL}
		TRYCALLFORM 장비해설_{LOCAL}
		PRINTL 
