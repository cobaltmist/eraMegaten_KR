;스킬명
@SKILL_NAME_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RESULTS = 붉은 비늘의 드라큘라
;それ以外
ELSE
	RESULTS = 드래곤 바이트
ENDIF

;　명중
@SKILL_HITRATE_ドラゴンバイト, ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 90
;通常時
ELSE
	RETURN 90
ENDIF

;　위력
@SKILL_POWER_ドラゴンバイト, ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	SIF ARG == -1
		RETURN 200
	IF BASE:ARG:LV < 10
		RETURN 200
	ELSEIF BASE:ARG:LV < 20
		RETURN 300
	ELSEIF BASE:ARG:LV < 30
		RETURN 400
	ELSEIF BASE:ARG:LV < 40
		RETURN 500
	ELSEIF BASE:ARG:LV < 50
		RETURN 600
	ELSEIF BASE:ARG:LV < 60
		RETURN 700
	ELSE
		RETURN 800
	ENDIF
ELSE
	SIF ARG == -1
		RETURN 200
	IF BASE:ARG:LV < 10
		RETURN 200
	ELSEIF BASE:ARG:LV < 20
		RETURN 250
	ELSEIF BASE:ARG:LV < 30
		RETURN 300
	ELSEIF BASE:ARG:LV < 40
		;2回攻撃
		RETURN 175
	ELSEIF BASE:ARG:LV < 50
		;2回攻撃
		RETURN 200
	ELSEIF BASE:ARG:LV < 60
		;3回攻撃
		RETURN 150
	ELSE
		;3回攻撃
		RETURN 170
	ENDIF
ENDIF

;クリティカル率
@SKILL_CRITICAL_RATE_ドラゴンバイト, ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 999
;それ以外
ELSE
	RETURN 25
ENDIF

;　최저공격횟수
@SKILL_MINATTACKNUMBER_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 1
;通常時
ELSE
	SIF ARG == -1
		RETURN 1
	IF BASE:ARG:LV < 10
		RETURN 1
	ELSEIF BASE:ARG:LV < 20
		RETURN 1
	ELSEIF BASE:ARG:LV < 30
		RETURN 1
	ELSEIF BASE:ARG:LV < 40
		;2回攻撃
		RETURN 2
	ELSEIF BASE:ARG:LV < 50
		;2回攻撃
		RETURN 2
	ELSEIF BASE:ARG:LV < 60
		;3回攻撃
		RETURN 3
	ELSE
		;3回攻撃
		RETURN 3
	ENDIF
ENDIF

;　최대공격횟수
@SKILL_MAXATTACKNUMBER_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 1
;通常時
ELSE
	SIF ARG == -1
		RETURN 1
	IF BASE:ARG:LV < 10
		RETURN 1
	ELSEIF BASE:ARG:LV < 20
		RETURN 1
	ELSEIF BASE:ARG:LV < 30
		RETURN 1
	ELSEIF BASE:ARG:LV < 40
		;2回攻撃
		RETURN 2
	ELSEIF BASE:ARG:LV < 50
		;2回攻撃
		RETURN 2
	ELSEIF BASE:ARG:LV < 60
		;3回攻撃
		RETURN 3
	ELSE
		;3回攻撃
		RETURN 3
	ENDIF
ENDIF

;　2 ＨＰ지불　3 ＭＰ지불
@SKILL_COSTTYPE_ドラゴンバイト, ARG
RETURN 3
;소비없음＝1

;　코스트량
@SKILL_COST_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	SIF ARG == -1
		RETURN 12
	IF BASE:ARG:LV < 10
		RETURN 12
	ELSEIF BASE:ARG:LV < 20
		RETURN 13
	ELSEIF BASE:ARG:LV < 30
		RETURN 17
	ELSEIF BASE:ARG:LV < 40
		;2回攻撃
		RETURN 24
	ELSEIF BASE:ARG:LV < 50
		;2回攻撃
		RETURN 26
	ELSEIF BASE:ARG:LV < 60
		;3回攻撃
		RETURN 34
	ELSE
		;3回攻撃
		RETURN 37
	ENDIF
;通常時
ELSE
	SIF ARG == -1
		RETURN 12
	IF BASE:ARG:LV < 10
		RETURN 12
	ELSEIF BASE:ARG:LV < 20
		RETURN 13
	ELSEIF BASE:ARG:LV < 30
		RETURN 17
	ELSEIF BASE:ARG:LV < 40
		;2回攻撃
		RETURN 24
	ELSEIF BASE:ARG:LV < 50
		;2回攻撃
		RETURN 26
	ELSEIF BASE:ARG:LV < 60
		;3回攻撃
		RETURN 34
	ELSE
		;3回攻撃
		RETURN 37
	ENDIF
ENDIF

;　상성
@SKILL_TYPE_ドラゴンバイト,ARG
#LOCALSSIZE 5
#LOCALSIZE 4
;本性顕現時、複合属性
;戦技・火炎・核熱のうち、最も効果のある相性で攻撃
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	SIF ARG < 0 || 스킬속성표시중
		RETURN GET_TYPE_NUM("전술")
	SIF CFLAG:ARG:타겟 > 16 || CFLAG:ARG:타겟 < 1
		RETURN GET_TYPE_NUM("전술")
	LOCAL = POS(CFLAG:ARG:타겟)
	SIF LOCAL < 0
		RETURN GET_TYPE_NUM("전술")
		
	LOCAL:2 = -300
	;全部-400とかないとおもうけど、あったらあれなんで、電撃をいれとく
	LOCALS = 전술
	LOCALS:1 = 전술
	LOCALS:2 = 화염
	LOCALS:3 = 핵열
	FOR LOCAL:1, 1, 4
		;判定用に数値を仕舞う。反射は-200扱い
		LOCAL:3 = MAXBASE:LOCAL:(LOCALS:(LOCAL:1)) == 999 ? -200 # MAXBASE:LOCAL:(LOCALS:(LOCAL:1))
		LOCAL:3 = !(HAVE_SKILL(ARG,[[스킬:영세라이도우]]) || HAVE_SKILL(ARG,2947)) && CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"무효화횟수") ? -5 # LOCAL:3
		LOCAL:3 = CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"가드킬") && LOCAL:3 < 100 ? 100 # LOCAL:3
		SELECTCASE LOCAL:1
			CASE 1 TO 2
				LOCAL:3 = CFLAG:LOCAL:물리반사플래그 ? -200 # LOCAL:3
			CASE 3
				LOCAL:3 = CFLAG:LOCAL:마법반사플래그 ? -200 # LOCAL:3
			CASEELSE
		ENDSELECT
		IF LOCAL:3 > LOCAL:2
			LOCAL:2 = LOCAL:3
			LOCALS = %LOCALS:(LOCAL:1)%
		ENDIF
	NEXT
	PRINT 속성상성：
	PRINTS LOCALS
	PRINTL ！
	RETURN GET_TYPE_NUM(LOCALS)
	
;通常時は戦技
ELSE
	RETURN 3
ENDIF


;　1 EXTRA　2 MAGIC
@SKILL_DECIDE_TYPE_ドラゴンバイト,ARG
RETURN 1

;　1 물리데미지로 계산　2 마법데미지로 계산
@SKILL_DAMAGETYPE_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 1
;通常時
ELSE
	RETURN 1
ENDIF


;　대상　1 적　2 아군　3 양쪽전체　4 특수
@SKILL_TARGET_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 1
;通常時
ELSE
	RETURN 1
ENDIF

;　사거리
@SKILL_RANGE_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 3
;通常時
ELSE
	RETURN 1
ENDIF

;　범위　1 1체　2 1열　3 전체　4 적아군전체
@SKILL_SPHERE_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 3
;通常時
ELSE
	RETURN 2
ENDIF

;　 효과타입　1 공격、2 회복、3 상태변화、4 특수、5 상태회복
@SKILL_EFECT_ドラゴンバイト,ARG
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	RETURN 1
;通常時
ELSE
	RETURN 1
ENDIF

;　 특수처리 여부 및 처리내용
;@SKILL_SPECIALEFECT_ドラゴンバイト,ARG
;ARG = 1인 경우는 처리 여부를 반환합니다
;SIF ARG == 1
;	RETURN 0
;아래쪽에 특수처리를 기술합니다

;계승타입
;@SKILL_SUCCESSION_TYPE_ドラゴンバイト,ARG
;RETURN 23
;

;속도보정
@SKILL_SPEED_ドラゴンバイト, ARG = -1
RETURN 0

;;　구상의 표시와 그 타입
;@SKILL_MESSAGE_ドラゴンバイト,ARG


;전투시 이외에 사용 가능한가
@SKILL_ACTIONABLE_FIELD_ドラゴンバイト, ARG = -1
;できない
RETURN 0

;没
;@SKILL_RANK_ドラゴンバイト
;@SKILL_RANKUP_ドラゴンバイト
;@계승불능_ドラゴンバイト

;템플릿용、추가효과 시리즈
;추가효과 스테이터스
;@SKILL_ADDTIONAL_STATE_ドラゴンバイト,ARG
;RETURN GET_STATE_NUM("SHOCK")

;추가효과 상성
;@SKILL_ADDTIONAL_TYPE_ドラゴンバイト,ARG
;만능
;RETURN 17

;추가효과 기본부여확률
;@SKILL_ADDTIONAL_BASE_RATE_ドラゴンバイト,ARG
;RETURN 80

;추가효과 부여확률상한
;@SKILL_ADDTIONAL_MAX_RATE_ドラゴンバイト,ARG
;RETURN 100

;;拡散攻撃用追加処理
;;ブレスなどの拡散攻撃に使う
;@SKILL_SPREAD_ドラゴンバイト,ARG
;RETURN 0



;====================================================
;行動によるスキルゲージ操作
;====================================================
@SKILLGAGE_CHARGE_ドラゴンバイト,ARG,ARG:1
#LOCALSIZE 1

;自分の行動の場合
IF ARG == ARG:1
	;毎ターン＋10
	CALL SKILLGAGE_H_ADD,ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト")),10
	
	;ダメージを受けた敵の数に応じてスキルゲージアップ
	FOR LOCAL,0,CHARANUM
		SIF CFLAG:LOCAL:PT플래그 == CFLAG:ARG:PT플래그
			CONTINUE
		IF CFLAG:LOCAL:현데미지 > 0
			CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),10
		ELSE
			CONTINUE
		ENDIF
		;会心、弱点を出すとさらにアップ
		SIF GETBIT(CFLAG:LOCAL:받음플래그,21)
			CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),10
		SIF GETBIT(CFLAG:LOCAL:받음플래그,22)
			CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),10
	NEXT
	
	;気合を入れても上がる
	IF CFLAG:ARG:입력행동 == 511
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	;切り落とししても上がる
	ELSEIF CFLAG:ARG:입력행동 == [[스킬:베어내기]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	;雄叫びしても上がる
	ELSEIF CFLAG:ARG:입력행동 == 514
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),20
	ENDIF
		
	;専用技を使った場合さらに+20
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기1]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기2]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기3]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기4]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기5]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기6]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기7]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기8]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기9]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기10]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기11]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	SIF CFLAG:ARG:입력행동 == [[스킬:전용기12]]
		CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),30
	
ENDIF
;ダメージを受けた又はカウンター、トリガー以外の攻撃を受けたら
;ゲージが増える
IF CFLAG:ARG:현데미지 > 0 || GETBIT(CFLAG:ARG:받음플래그,18) || GETBIT(CFLAG:ARG:받음플래그,19)
	LOCAL = 60 * CFLAG:ARG:현데미지 / MAXBASE:ARG:ＨＰ
	LOCAL = LOCAL < 2 ? 2 # LOCAL
	CALL SKILLGAGE_H_ADD,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),LOCAL
ENDIF
;スキルゲージが100以上だと100にする
SIF SKILLGAGE_H_GET(ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト")) > 100
	CALL SKILLGAGE_H_SET,ARG,PU_SKILLNUM_GET(ARG, "ドラゴンバイト"),100
RETURN 0

PRINTFORML ※유리아씨의 텐션　{SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))),3}％


;====================================================
;스킬 및 행동의 실행
;====================================================
@ACTION_ドラゴンバイト,ARG,ARG:1,SKILL_NUM
#DIM SKILL_NUM

CALL ATTACK_FIELD, ARG, ARG:1, (PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))
;本性顕現時
IF SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
	CALL SKILLGAGE_H_SET,ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト")),0
;それ以外
ELSE

ENDIF


;====================================================
;실행내용 여기까지
;====================================================

;　説明文の表示
@SKILL_EXPLAIN_ドラゴンバイト,ARG
#LOCALSIZE 1
IF CFLAG:(CHARANUM-1):PT플래그 || U < 0 || U >= CHARANUM
	PRINTL 【통상시】
	PRINTL 적 1열에 전술 데미지。위력은 레벨에 의존한다。텐션이 MAX가 되면 본성을 들어낸다。
	PRINTL 
	PRINTL 【텐션 MAX시】
	PRINTL 적 전체에、『전술・화염・핵열』복합 데미지＋초고확률 크리티컬。1회 쏘면 텐션은 리셋된다。
	PRINTL 
	PRINTL 각각、위력은 레벨의 10단위에 의존한다。
ELSE
	;本性顕現時
	IF SKILLGAGE_H_GET(U, (PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))) > 99
		PRINTL 루마니아의 붉은 용의 본성을 들어내、날뛴다。
		PRINT 적 전체에、『전술・화염・핵열』복합
		SIF ARG == -1
			PRINT 의 
		IF BASE:ARG:LV < 10
			PRINT 중 
		ELSEIF BASE:ARG:LV < 20
			PRINT 대 
		ELSEIF BASE:ARG:LV < 30
			PRINT 특대 
		ELSEIF BASE:ARG:LV < 40
			PRINT 초특대 
		ELSEIF BASE:ARG:LV < 50
			PRINT 초초특대 
		ELSEIF BASE:ARG:LV < 60
			PRINT 울트라초특대 
		ELSE
			PRINT 울트라초특대디럭스대 
		ENDIF
		PRINT 데미지＋초고확률 크리티컬。
		
		;天井はLv60
		IF BASE:ARG:LV < 60
			PRINTL Lv이 10 높아질 때마다 위력이 높아진다
		ELSE
			PRINTL 
		ENDIF
		PRINTL 
		PRINTL 　날뛰면 개운해져 텐션이 0으로 돌아온다。
		
	ELSE
		PRINTL 용의 턱으로 변한 팔로 깨물어 부순다。
		PRINT 적 1체에 、
		SIF ARG == -1
			PRINT 전술 상성 소 데미지
		IF BASE:ARG:LV < 10
			PRINT 전술 상성 소 데미지
		ELSEIF BASE:ARG:LV < 20
			PRINT 전술 상성 중 데미지
		ELSEIF BASE:ARG:LV < 30
			PRINT 전술 상성 중 데미지
		ELSEIF BASE:ARG:LV < 40
			PRINT 전술 상성으로　2HIT　대 데미지
		ELSEIF BASE:ARG:LV < 50
			PRINT 전술 상성으로　2HIT　대 데미지
		ELSEIF BASE:ARG:LV < 60
			PRINT 전술 상성으로　3HIT　특대 데미지
		ELSE
			PRINT 전술 상성　3HIT　특대 데미지
		ENDIF

		;天井はLv60
		IF BASE:ARG:LV < 60
			PRINTL 。Lv이 10 높아질 때마다 위력이 높아진다
		ELSE
			PRINTL 
		ENDIF
		PRINTL 
		PRINTL 　텐션 MAX시、스킬이 보다 강력한 것으로 변화한다
		PRINTL 　텐션은 행동한다・데미지를 받는 것 외에、기합・포효・베어내기로 크게 상승한다
	ENDIF
ENDIF


;没
;@계승부위_ドラゴンバイト,ARG

;사용조건
@SKILL_SPECIAL_ACTIONABLE_ドラゴンバイト,ARG
RETURN 1




@SKILLGAGE_DISPLAY_ドラゴンバイト,ARG
#DIM ドラゴンバイト制御変数
ドラゴンバイト制御変数 = PU_SKILLNUM_GET(ARG,"ドラゴンバイト")
SETCOLOR 0x999999

IF SKILLGAGE_H_GET(ARG,ドラゴンバイト制御変数) < 100
	PRINTFORM 유리아씨의 텐션|
	CALL PRINT_COLORBAR, SKILLGAGE_H_GET(ARG,ドラゴンバイト制御変数), 100, 25, UNICODE(0x2585), UNICODE(0x2585), 0x9acd32, 0x696969
	RESETCOLOR
	PRINTFORML {SKILLGAGE_H_GET(ARG,(PU_SKILLNUM_GET(ARG, "ドラゴンバイト"))),3}％
ELSEIF SKILLGAGE_H_GET(ARG,ドラゴンバイト制御変数) == 100
	PRINTFORM 유리아씨의 텐션|
	CALL PRINT_COLORBAR, SKILLGAGE_H_GET(ARG,ドラゴンバイト制御変数), 100, 25, UNICODE(0x2585), UNICODE(0x2585), 0xff8c00, 0x696969
	RESETCOLOR
	PRINTFORML ＭＡＸ！
ENDIF
