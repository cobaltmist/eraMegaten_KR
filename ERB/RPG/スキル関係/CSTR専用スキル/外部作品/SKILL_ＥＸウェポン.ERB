;スキル名
@SKILL_NAME_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RESULTS = 아이언 팽
	ELSE
		RESULTS = 블레이징 발리스타
	ENDIF
CASE 2
	IF CFLAG:ARG:801 == 1
		RESULTS = 밴티지 라인
	ELSE
		RESULTS = 그리드 스내처
	ENDIF
CASE 3
	IF CFLAG:ARG:801 == 1
		RESULTS = 테일 벙커
	ELSE
		RESULTS = 밀리언 이터
	ENDIF
CASE 4
	IF CFLAG:ARG:801 == 1
		RESULTS = 와이드 서킷
	ELSE
		RESULTS = 아로간트 팽
	ENDIF
CASE 5
	IF CFLAG:ARG:801 == 1
		RESULTS = 아발란체 소드
	ELSE
		RESULTS = 레이지 레이저
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RESULTS = 프리즘 브레이크
	ELSE
		RESULTS = 젤러식 고르곤
	ENDIF
CASE 7
	IF CFLAG:ARG:801 == 1
		RESULTS = 하이드로 재퍼
	ELSE
		RESULTS = 러스트 도플러
	ENDIF
ENDSELECT

;　명중
@SKILL_HITRATE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1 TO 4, 6
	RETURN 100
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 100
	ELSE
		RETURN 150
	ENDIF
CASE 7
	IF CFLAG:ARG:801 == 1
		RETURN 100
	ELSE
		RETURN 200
	ENDIF
ENDSELECT

;　위력
@SKILL_POWER_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN 280
	ELSE
		RETURN 350
	ENDIF
CASE 2
	IF CFLAG:ARG:801 == 1
		RETURN 205
	ELSE
		RETURN 130
	ENDIF
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN 350
	ELSE
		RETURN 230
	ENDIF
CASE 4
	IF CFLAG:ARG:801 == 1
		RETURN 350
	ELSE
		RETURN 330
	ENDIF
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 350
	ELSE
		RETURN 120
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 330
	ELSE
		RETURN 0
	ENDIF
CASE 7
	IF CFLAG:ARG:801 == 1
		RETURN 330
	ELSE
		RETURN 550
	ENDIF
ENDSELECT

;　吸収率
@SKILL_HP_ABSORBER_ＥＸウェポン, ARG
SIF CFLAG:ARG:801 == 1 && CFLAG:ARG:803 == 1
	RETURN 20
RETURN 0

;　최저공격횟수
@SKILL_MINATTACKNUMBER_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1, 3 TO 7
	RETURN 1
CASE 2
	IF CFLAG:ARG:801 == 1
		RETURN 1
	ELSE
		RETURN 3
	ENDIF
ENDSELECT

;　최대공격횟수
@SKILL_MAXATTACKNUMBER_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1, 3 TO 4, 6 TO 7
	RETURN 1
CASE 2
	IF CFLAG:ARG:801 == 1
		RETURN 1
	ELSE
		RETURN 3
	ENDIF
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 1
	ELSE
		RETURN 4
	ENDIF
ENDSELECT

;　2 ＨＰ지불　3 ＭＰ지불
@SKILL_COSTTYPE_ＥＸウェポン, ARG
RETURN 3

;　코스트량
@SKILL_COST_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1 TO 6
	RETURN 30
CASE 7
	IF CFLAG:ARG:801 == 1
		RETURN 30
	ELSE
		RETURN 60
	ENDIF
ENDSELECT

;　상성
@SKILL_TYPE_ＥＸウェポン, ARG
#LOCALSSIZE 3
#LOCALSIZE 4
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("비구")
	ELSE
		RETURN GET_TYPE_NUM("화염")
	ENDIF
CASE 2
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("비구")
	ELSE
		RETURN GET_TYPE_NUM("중력")
	ENDIF
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("타격")
	ELSE
		RETURN GET_TYPE_NUM("비구")
	ENDIF
CASE 4
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("전격")
	ELSE
		SIF ARG < 0 || 스킬속성표시중
			RETURN GET_TYPE_NUM("전격")
		SIF CFLAG:ARG:타겟 > 16 || CFLAG:ARG:타겟 < 1
			RETURN GET_TYPE_NUM("전격")
		LOCAL = POS(CFLAG:ARG:타겟)
		SIF LOCAL < 0 || CFLAG:LOCAL:마법반사플래그 || CFLAG:LOCAL:무효플래그
			RETURN GET_TYPE_NUM("전격")
		LOCAL:2 = -1000
		LOCALS = 전격
		LOCALS:1 = 파마
		LOCALS:2 = 전격
		FOR LOCAL:1, 1, 3
			;判定用に数値を仕舞う。反射は-200扱い
			LOCAL:3 = MAXBASE:LOCAL:(LOCALS:(LOCAL:1)) == 999 ? -200 # MAXBASE:LOCAL:(LOCALS:(LOCAL:1))
			LOCAL:3 = !(HAVE_SKILL(ARG, [[스킬:영세라이도우]]) || HAVE_SKILL(ARG,2947)) && CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"무효화횟수") ? -5 # LOCAL:3
			LOCAL:3 = CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"가드킬") && LOCAL:3 < 100 ? 100 # LOCAL:3
			LOCAL:3 = CFLAG:LOCAL:마법반사플래그 ? -200 # LOCAL:3
			IF LOCAL:3 > LOCAL:2
				LOCAL:2 = LOCAL:3
				LOCALS = %LOCALS:(LOCAL:1)%
			ENDIF
		NEXT
		RETURN GET_TYPE_NUM(LOCALS)
	ENDIF
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("빙결")
	ELSE
		RETURN GET_TYPE_NUM("핵열")
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("전술")
	ELSE
		RETURN GET_TYPE_NUM("주살")
	ENDIF
CASE 7
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("수격")
	ELSE
		SIF ARG < 0 || 스킬속성표시중
			RETURN GET_TYPE_NUM("정신")
		SIF CFLAG:ARG:타겟 > 16 || CFLAG:ARG:타겟 < 1
			RETURN GET_TYPE_NUM("정신")
		LOCAL = POS(CFLAG:ARG:타겟)
		SIF LOCAL < 0 || CFLAG:LOCAL:마법반사플래그 || CFLAG:LOCAL:무효플래그
			RETURN GET_TYPE_NUM("정신")
		LOCAL:2 = -1000
		LOCALS = 정신
		LOCALS:1 = 만능
		LOCALS:2 = 정신
		FOR LOCAL:1, 1, 3
			;判定用に数値を仕舞う。反射は-200扱い
			LOCAL:3 = MAXBASE:LOCAL:(LOCALS:(LOCAL:1)) == 999 ? -200 # MAXBASE:LOCAL:(LOCALS:(LOCAL:1))
			LOCAL:3 = !(HAVE_SKILL(ARG, [[스킬:영세라이도우]]) || HAVE_SKILL(ARG,2947)) && CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"무효화횟수") ? -5 # LOCAL:3
			LOCAL:3 = CFLAG:LOCAL:(LOCALS:(LOCAL:1)+"가드킬") && LOCAL:3 < 100 ? 100 # LOCAL:3
			LOCAL:3 = CFLAG:LOCAL:마법반사플래그 ? -200 # LOCAL:3
			IF LOCAL:3 > LOCAL:2
				LOCAL:2 = LOCAL:3
				LOCALS = %LOCALS:(LOCAL:1)%
			ENDIF
		NEXT
		RETURN GET_TYPE_NUM(LOCALS)
	ENDIF
ENDSELECT

;　1 EXTRA　2 MAGIC
@SKILL_DECIDE_TYPE_ＥＸウェポン, ARG
RETURN 1

;　1 물리데미지로 계산　2 마법데미지로 계산
@SKILL_DAMAGETYPE_ＥＸウェポン, ARG
RETURN 1

;　対象が1敵か2味方か3場全体か4特殊か
@SKILL_TARGET_ＥＸウェポン, ARG
RETURN 1

;　사거리
@SKILL_RANGE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1 TO 2, 4, 6 TO 7
	RETURN 3
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN 2
	ELSE
		RETURN 3
	ENDIF
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 1
	ELSE
		RETURN 3
	ENDIF
ENDSELECT

;　범위　1 1체　2 1열　3 전체　4 적아군전체
@SKILL_SPHERE_ＥＸウェポン, ARG
RETURN 1

;　 효과타입　1 공격、2 회복、3 상태변화、4 특수、5 상태회복
@SKILL_EFECT_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1 TO 5, 7
	RETURN 1
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 1
	ELSE
		RETURN 3
	ENDIF
ENDSELECT

;속도보정
@SKILL_SPEED_ＥＸウェポン, ARG = -1
RETURN 0

;전투시 이외에 사용 가능한가
@SKILL_ACTIONABLE_FIELD_ＥＸウェポン, ARG = -1
RETURN 0

;추가효과ステータス
@SKILL_ADDTIONAL_STATE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN GET_STATE_NUM("FLAME")
	ENDIF
CASE 2
	IF CFLAG:ARG:801 == 1
		RETURN GET_STATE_NUM("BIND")
	ELSE
		RETURN GET_STATE_NUM("CLOSE")
	ENDIF
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN GET_STATE_NUM("SLIP")
	ELSE
		RETURN 0
	ENDIF
CASE 4, 7
	RETURN 0
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN GET_STATE_NUM("FREEZE")
	ELSE
		RETURN 0
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN GET_STATE_NUM("STONE")
	ENDIF
ENDSELECT

;추가효과 상성
@SKILL_ADDTIONAL_TYPE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN GET_TYPE_NUM("화염")
	ENDIF
CASE 2
	RETURN GET_TYPE_NUM("만능")
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("타격")
	ELSE
		RETURN 0
	ENDIF
CASE 4, 7
	RETURN 0
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN GET_TYPE_NUM("빙결")
	ELSE
		RETURN 0
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN GET_TYPE_NUM("주살")
	ENDIF
ENDSELECT

;추가효과基本付与確率
@SKILL_ADDTIONAL_BASE_RATE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN 30
	ENDIF
CASE 2
	RETURN 65
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN 15
	ELSE
		RETURN 0
	ENDIF
CASE 4, 7
	RETURN 0
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 15
	ELSE
		RETURN 0
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN 75
	ENDIF
ENDSELECT

;추가효과付与確率上限
@SKILL_ADDTIONAL_MAX_RATE_ＥＸウェポン, ARG
SELECTCASE CFLAG:ARG:803
CASE 1
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN 70
	ENDIF
CASE 2
	RETURN 95
CASE 3
	IF CFLAG:ARG:801 == 1
		RETURN 65
	ELSE
		RETURN 0
	ENDIF
CASE 4, 7
	RETURN 0
CASE 5
	IF CFLAG:ARG:801 == 1
		RETURN 45
	ELSE
		RETURN 0
	ENDIF
CASE 6
	IF CFLAG:ARG:801 == 1
		RETURN 0
	ELSE
		RETURN 95
	ENDIF
ENDSELECT

;====================================================
;ダメージ発動時
;====================================================
@SKILL_DAMAGE_EFFECT_ＥＸウェポン, ARG, ARG:1
IF CFLAG:ARG:801 == 0 && CFLAG:ARG:803 == 3
	PRINT  & 방어저하
	CFLAG:(ARG:1):방어강화 = MAX(-16, CFLAG:(ARG:1):방어강화 - 4)
ENDIF

;====================================================
;스킬 및 행동의 실행
;====================================================
@ACTION_ＥＸウェポン, ARG, ARG:1, SKILL_NUM
#DIM SKILL_NUM

SELECTCASE CFLAG:ARG:803
CASE 1 TO 5, 7
	CALL ATTACK_SINGLE, ARG, POS(ARG:1), SKILL_NUM
CASE 6
	IF CFLAG:ARG:801 == 1
		CALL ATTACK_SINGLE, ARG, POS(ARG:1), SKILL_NUM
	ELSE
		CALL SINGLE_BADSTATE, ARG, POS(ARG:1), SKILL_NUM
	ENDIF
ENDSELECT

;====================================================
;실행내용 여기까지
;====================================================

;　説明文の表示
@SKILL_EXPLAIN_ＥＸウェポン, ARG
PRINTL 
PRINTL 

;사용조건
@SKILL_SPECIAL_ACTIONABLE_ＥＸウェポン, ARG
SIF CFLAG:ARG:803 == 0
	RETURN 0
RETURN 1

