;=======================================================================
;ＶＲ호러・하우스
;ボス・원령에리카
;던전ナンバー92　ＭＡＰ0~9
;登場악마레벨29~34　ボス레벨43
;フラグ
;던전플래그:92:0 ボス：０（撃破前）　１（ＣＦＬＡＧバグ수정前撃破）　２（ＣＦＬＡＧバグ수정後撃破）
;던전플래그:92:1 던전進行度：０（突入前）　１～３（受付）　5～7（記憶）　8（鏡）　9（忘音）
;던전플래그:92:2～12 宝箱
;던전플래그:92:13～15 夜の魔物　13고기　14루게이에　15버그스
;던전플래그:92:16 全소환時フラグ
;던전플래그:92:17 記憶の回廊ナレーションフラグ
;던전플래그:92:18 식스Ｐ각성
;=======================================================================

;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_92
;ＶＲ미술관のクリア
SIF (던전플래그:90:1 > 2 && 던전플래그:92:0 == 0) || 던전플래그:92:0 == 1 || FLAG:DEBUG
	RETURN 1
RETURN 0

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_92
RESULTS = ＶＲ호러・하우스


;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_92
PRINT ＶＲ호러・하우스
SELECTCASE FLAG:현M
	CASE 0
		PRINTL Ｂ１Ｆ
	CASE 1
		PRINTL １Ｆ
	CASE 2
		PRINTL ２Ｆ
	CASE 3
		PRINTL ３Ｆ
	CASE 4
		PRINTL ４Ｆ
	CASE 5
		PRINTL ５Ｆ
	CASE 6
		PRINTL ６Ｆ
	CASE 7
		PRINTL 어린 추억
	CASE 8
		PRINTL 추억의 바람
	CASE 9
		PRINTL 과거로의 문
	CASEELSE
		PRINTL
ENDSELECT


;=======================================================================
;特殊タイル표시
;=======================================================================
@TILE_MARK_COMMON_92_9, ARG , ARG:1 , ARG:2
		RESULTS = ！

@TILE_MARK_COMMON_92_4, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 1,2,3,200
		RESULTS = ！
	CASE 4
		SELECTCASE FLAG:현M
			CASE 7, 8, 9
				IF 던전플래그:92:17 == 1
					RESULTS = ！
				ELSE
					RESULTS = □
				ENDIF
			CASEELSE
				RESULTS = □
		ENDSELECT
	CASE 100
		IF 던전플래그:92:1 < 9
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
ENDSELECT
;=======================================================================
;스타ト地点입력
;=======================================================================
@START_DUNGEON_92,ARG
FLAG:현M = 1
FLAG:현X = 7
FLAG:현Y = 15
;CALL AUTOMAP

;=======================================================================
;스타ト時이벤트
;=======================================================================
@EVENT_DUNGEON_START_92
IF 던전플래그:92:1 == 0
CALL MESSAGE_WINDOW_D, "", "＞ＶＲ미술관의 사건이 있고 얼마 후、조직에서 연락이 왔다。/＞무슨 NET을 통해서 어떤 악마들을 이용할 계획이 있다는데、패러다임 Ｘ는 그 악마들의 통행로라고 한다。"
CALL MESSAGE_WINDOW_D, "", "＞그 악마들 자체는 의사란 것이 거의 존재하지 않지만 드물게 자아를 가진 녀석이 발생한다는 것、/＞그런 녀석 중 하나가  VR 미술관에 있던 악마였던 것이다。"
CALL MESSAGE_WINDOW_D, "", "＞그렇게 된 녀석은 패러다임 X 내부에 이계를 만들어、인간의 영혼을 수중에 넣게된다。/＞만약 계속해서 방치하게 되면 다른 악마들도 자아를 가지게 돼버린다。"
CALL MESSAGE_WINDOW_D, "", @"＞즉、계획이 지연되는 것이고 자칫 잘못하면 계획의 실패로 이어지기에 신속하게 대처 할 필요가 있다는 것이다。/＞그렇기에 이후로는 이번에 실적을 낸 %CALLNAME:MASTER%에게 동종 사건의 대처를 맡기는 것이 결정되었다는 연락이었다。"
CALL MESSAGE_WINDOW_D, "", @"＞어쨌든 그 개체는 개발중이었던 VR 호러 하우스에 이계를 발생시켜、이용자 중 한 명을 수중에 넣은 듯하다。/＞%조사처리(CALLNAME:MASTER,"는")% 조직이 준비한 해커의 손을 빌려、/＞프로그램 내부에서 실체화할 수 있도록 사이버 공간의 바다를 향해 몸을 던졌다……"
	던전플래그:92:1 = 1
	던전플래그:92:17 = 4
ELSEIF 던전플래그:92:0 == 1
CALL MESSAGE_WINDOW_D, "", "＞ＣＦＬＡＧ버그의 수정을 실시합니다……"
	IF CFLAG:(LOCAL:2):전투참가불가능 == 1
		CFLAG:(LOCAL:2):전투참가불가능 = 0
	CALL MESSAGE_WINDOW_D, "", "＞수정 완료"
	ENDIF
	던전플래그:92:0 = 2
	TIME = TIME-1
	FLAG:탈출 = 1
	RETURN 1
ELSEIF 던전플래그:92:1 == 1
CALL MESSAGE_WINDOW_D, "", @"＞사건에 대한 대처는 완료되지 않았다。/＞빠른 시간내에 해결하지 않으면、%CALLNAME:MASTER%의 평판에 영향을 줄 지도 모른다……"
ENDIF
;=======================================================================
;指定したマスに進入가능か
;=======================================================================
@CAN_ENTER_92, ARG, ARG:1
RESULT = 1
SELECTCASE DA:ARG:(ARG:1)
	CASE 12
		IF 던전플래그:92:1 == 1 && ARG:1 == 13
			CALL MESSAGE_WINDOW_D, "", "＞검은 슈트를 입고 안경을 쓴 노인이 말을 건네왔다。/＞명찰에는 「접수」라고만 쓰여있다。"
			CALL MESSAGE_WINDOW_D, "접수", "버츄얼 호러 하우스에 어서 오십시오……/당신도 마음 속의 어두운 면을 제거하려 오셨습니까……？"
			CALL MESSAGE_WINDOW_D, "접수", "누구나 마음 속에 갖고있는、잊혀진 기억……/그러나 때로는 그런 기억에 마(魔)가 끼는 것입니다」"
			CALL MESSAGE_WINDOW_D, "접수", "마에게 홀린 기억은 마음의 그림자로 크게 자라나、마침내……/「악마」를 낳는 것입니다"
			CALL MESSAGE_WINDOW_D, "접수", "그런 말도 안 되는 소리、라고 웃고 계시는 겁니까？　아니아니、이게 어때서요。/애초에 마란 마음 속에 사는 것입니다"
			CALL MESSAGE_WINDOW_D, "접수", "그 증거로、이 관에서도…… 그래요、그런 악마가 나와 버리고 말았습니다。/무서운 일이지요……"
			던전플래그:92:1 = 2
			RETURN 1
		ELSEIF 던전플래그:92:1 == 2 && ARG:1 == 11
			CALL MESSAGE_WINDOW_D, "", "＞검은 슈트를 입고 안경을 쓴 노인이 말을 건네왔다。/＞명찰에는「접수의 형」이라고 밖에 써 있지 않았다。"
			CALL MESSAGE_WINDOW_D, "접수의 형", "이번에 악마를 탄생시킨 자는 어떤 소년입니다。/뭐、일단 Ａ군이라고 부르기로 하죠"
			CALL MESSAGE_WINDOW_D, "접수의 형", "Ａ군에게서 탄생한 악마는 이 저택에서 교묘하게 모습을 감추고 있었습니다만、/결국 그를 손에 넣어버렸습니다"
			CALL MESSAGE_WINDOW_D, "접수의 형", "아아、불쌍한 Ａ군은 아무것도 하지 못한채 이대로、/악마에게 영혼을 빼앗겨버리는 걸까요？"
			CALL MESSAGE_WINDOW_D, "접수의 형", "그럼 Ａ군의 기억세계로/…………언제까지나 A군이라 부르고 있는 것도 지겹군요。/그럼、임시로 그의 이름을…………「신고」 군이라고 해둘까요"
			CALL MESSAGE_WINDOW_D, "접수의 형", "자、안으로 드시지요……"
			던전플래그:92:1 = 3
			RETURN 1
		ELSEIF 던전플래그:92:1 == 3 && ARG:1 == 9
			CALL MESSAGE_WINDOW_D, "", "＞검은 슈트를 입고 안경을 쓴 노인이 말을 건네왔다。/＞명찰에는「접수의 아버지」라고 밖에 써 있지 않았다。"
			CALL MESSAGE_WINDOW_D, "접수의 아버지", "만약 당신이 상당한 호인이라、/신고 군을 돕고 싶다고 생각하신다면……"
			CALL MESSAGE_WINDOW_D, "접수의 아버지", "이 관에 있는 「기억의 방」을 찾으십시오。/제가 가르쳐드릴 수 있는 건 1개의 힌트 뿐입니다……"
			CALL MESSAGE_WINDOW_D, "접수의 아버지", "「기억이 머물고 있는 소리」。/아시겠습니까、소리를 찾으십시오。"
			던전플래그:92:1 = 4
			RETURN 1
		ELSEIF ARG:1 > FLAG:현Y && 던전플래그:92:1 < 4
			CALL SET_FLOOR_ANALYZE(2, FLAG:현던전, FLAG:현M, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASE 22
		IF ARG:1 > FLAG:현Y
			CALL SET_FLOOR_ANALYZE(2, FLAG:현던전, FLAG:현M, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASE 32
		IF FLAG:현M == 1 && FLAG:현X == 7
			CALL MESSAGE_WINDOW_D, "", "＞어린 추억"
			IF 던전플래그:92:1 == 5
				RETURN 1
			ELSE
				CALL MESSAGE_WINDOW_D, "", "＞열쇠로 잠겨있다。"
				RETURN 0
			ENDIF
		ELSEIF FLAG:현X == 3
			CALL MESSAGE_WINDOW_D, "", "＞추억의 바람"
			IF 던전플래그:92:1 == 6
				RETURN 1
			ELSE
				CALL MESSAGE_WINDOW_D, "", "＞열쇠로 잠겨있다。"
				RETURN 0
			ENDIF
		ELSEIF FLAG:현X == 11
			CALL MESSAGE_WINDOW_D, "", "＞과거로의 문"
			IF 던전플래그:92:1 == 7
				RETURN 1
			ELSE
				CALL MESSAGE_WINDOW_D, "", "＞열쇠로 잠겨있다。"
				RETURN 0
			ENDIF
		ELSEIF FLAG:현M == 6
			CALL MESSAGE_WINDOW_D, "", "＞망음의 방"
			IF 던전플래그:92:1 == 9
			CALL MESSAGE_WINDOW_D, "", "＞……문의 저쪽에 강대한 악마의 기척이 있다。/＞들어갑니까？"
			CALL INPUT_YN_D
			IF RESULT == 0
				RETURN 1
			ELSE
				RETURN 0
			ENDIF
			ELSE
				CALL MESSAGE_WINDOW_D, "", "＞열쇠로 잠겨있다。"
				RETURN 0
			ENDIF
		ENDIF
	CASE 42
		IF 던전플래그:92:17 == 2
			CALL MESSAGE_WINDOW_D, "", "＞……어디선가 목소리가 들려왔다……"
			CALL MESSAGE_WINDOW_D, "목소리", "기다리고 있었습니다。/이 앞은 소년의 마음과 접할 수 있는 방으로 이어지는、기억의 회랑……"
			CALL MESSAGE_WINDOW_D, "목소리", "다음은……/이런、이거 실례했습니다。/당신 스스로 확인해주세요"
			CALL MESSAGE_WINDOW_D, "목소리", "「기억에 머무는 소리」는、분명 그 거울에 다시 한번 힘을 부여하겠지요。/이것을 잊지 마세요……"
			던전플래그:92:17 = 3
			RETURN 1
		ENDIF
	CASEELSE
		CALL CAN_ENTER,ARG,ARG:1
ENDSELECT
RETURN RESULT



;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_92
SELECTCASE FLAG:현M
	CASE 0
	;Ｂ１階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 11111 11111 11111 "
		CALL MAKE_FLOOR_LINE, 2," 2   ] 2   ] 2   ] "
		CALL MAKE_FLOOR_LINE, 3," ' ! 1 ' 6 1 ' ! 1 "
		CALL MAKE_FLOOR_LINE, 4,"   1     1     1   "
		CALL MAKE_FLOOR_LINE, 5,"  111  11111  111  "
		CALL MAKE_FLOOR_LINE, 6," 11 11 1   1 11 11 "
		CALL MAKE_FLOOR_LINE, 7," 11111 1 # 1 11111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   11111   1   "
		CALL MAKE_FLOOR_LINE, 9,"  111    2    111  "
		CALL MAKE_FLOOR_LINE,10," 1111! 1111111111  "
		CALL MAKE_FLOOR_LINE,11," 11 11111111    1  "
		CALL MAKE_FLOOR_LINE,12," 11111111111 3  11 "
		CALL MAKE_FLOOR_LINE,13," 111111      2   1 "
		CALL MAKE_FLOOR_LINE,14," 111111  3   11111 "
		CALL MAKE_FLOOR_LINE,15," 111111  2       1 "
		CALL MAKE_FLOOR_LINE,16," - - -   1111111 1 "
		CALL MAKE_FLOOR_LINE,17," 1 1 1  11     111 "
		CALL MAKE_FLOOR_LINE,18,"                   "

	CASE 1
	;１階
		FLAG:최대X = 15
		FLAG:최대Y = 17
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1,"       6       "
		CALL MAKE_FLOOR_LINE, 2,"       2       "
		CALL MAKE_FLOOR_LINE, 3,"     11111     "
		CALL MAKE_FLOOR_LINE, 4," 11111   11111 "
		CALL MAKE_FLOOR_LINE, 5," 1   1 x 1   1 "
		CALL MAKE_FLOOR_LINE, 6," 1 x 1 _ 1 x 1 "
		CALL MAKE_FLOOR_LINE, 7," 1 _ 11111 _ 1 "
		CALL MAKE_FLOOR_LINE, 8," 111111%111111 "
		CALL MAKE_FLOOR_LINE, 9," 2   2 ~ 2   2 "
		CALL MAKE_FLOOR_LINE,10," 111 T 1 7 111 "
		CALL MAKE_FLOOR_LINE,11,"   1   ~   1   "
		CALL MAKE_FLOOR_LINE,12," 1 1   1   1 3 "
		CALL MAKE_FLOOR_LINE,13," 2 1   ~   1 2 "
		CALL MAKE_FLOOR_LINE,14," 1 1  111  1 1 "
		CALL MAKE_FLOOR_LINE,15," 111  111  111 "
		CALL MAKE_FLOOR_LINE,16,"       8       "

	CASE 2
	;２階
		FLAG:최대X = 11
		FLAG:최대Y = 11
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"           "
		CALL MAKE_FLOOR_LINE, 1," 3 1   121 "
		CALL MAKE_FLOOR_LINE, 2," 2 1   1   "
		CALL MAKE_FLOOR_LINE, 3," 111111111 "
		CALL MAKE_FLOOR_LINE, 4,"   1 2 1   "
		CALL MAKE_FLOOR_LINE, 5,"   1 7 1   "
		CALL MAKE_FLOOR_LINE, 6,"   1   1   "
		CALL MAKE_FLOOR_LINE, 7," 111111111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   1 2 "
		CALL MAKE_FLOOR_LINE, 9," 621   1 1 "
		CALL MAKE_FLOOR_LINE,10,"           "

	CASE 3
	;３階
		FLAG:최대X = 11
		FLAG:최대Y = 11
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"           "
		CALL MAKE_FLOOR_LINE, 1," 1 1   126 "
		CALL MAKE_FLOOR_LINE, 2," 2 1   1   "
		CALL MAKE_FLOOR_LINE, 3," 111111111 "
		CALL MAKE_FLOOR_LINE, 4,"   1 2 1   "
		CALL MAKE_FLOOR_LINE, 5,"   1 3 1   "
		CALL MAKE_FLOOR_LINE, 6,"   1   1   "
		CALL MAKE_FLOOR_LINE, 7," 111111111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   1 2 "
		CALL MAKE_FLOOR_LINE, 9," 721   1 1 "
		CALL MAKE_FLOOR_LINE,10,"           "


	CASE 4
	;４階
		FLAG:최대X = 11
		FLAG:최대Y = 11
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"           "
		CALL MAKE_FLOOR_LINE, 1," 1 1   127 "
		CALL MAKE_FLOOR_LINE, 2," 2 1   1   "
		CALL MAKE_FLOOR_LINE, 3," 111111111 "
		CALL MAKE_FLOOR_LINE, 4,"   1 2 1   "
		CALL MAKE_FLOOR_LINE, 5,"   1 1 1   "
		CALL MAKE_FLOOR_LINE, 6,"   1   1   "
		CALL MAKE_FLOOR_LINE, 7," 111111111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   1 2 "
		CALL MAKE_FLOOR_LINE, 9," 621   1 3 "
		CALL MAKE_FLOOR_LINE,10,"           "

	CASE 5
	;５階
		FLAG:최대X = 11 
		FLAG:최대Y = 11 
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"           "
		CALL MAKE_FLOOR_LINE, 1," 1 1   123 "
		CALL MAKE_FLOOR_LINE, 2," 2 1   1   "
		CALL MAKE_FLOOR_LINE, 3," 111111111 "
		CALL MAKE_FLOOR_LINE, 4,"   1 2 1   "
		CALL MAKE_FLOOR_LINE, 5,"   1 6 1   "
		CALL MAKE_FLOOR_LINE, 6,"   1   1   "
		CALL MAKE_FLOOR_LINE, 7," 111111111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   1 2 "
		CALL MAKE_FLOOR_LINE, 9," 721   1 1 "
		CALL MAKE_FLOOR_LINE,10,"           "

	CASE 6
	;６階
		FLAG:최대X = 15
		FLAG:최대Y = 17
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1,"  3    >    1  "
		CALL MAKE_FLOOR_LINE, 2,"  2    _    2  "
		CALL MAKE_FLOOR_LINE, 3," 111  111  111 "
		CALL MAKE_FLOOR_LINE, 4," 111 11111 111 "
		CALL MAKE_FLOOR_LINE, 5,"  2  11111  2  "
		CALL MAKE_FLOOR_LINE, 6,"  1  11111  1  "
		CALL MAKE_FLOOR_LINE, 7,"  11211111211  "
		CALL MAKE_FLOOR_LINE, 8,"  1  11111  1  "
		CALL MAKE_FLOOR_LINE, 9,"  1   111   1  "
		CALL MAKE_FLOOR_LINE,10,"  2         2  "
		CALL MAKE_FLOOR_LINE,11,"  1    <    1  "
		CALL MAKE_FLOOR_LINE,12," 1111211121111 "
		CALL MAKE_FLOOR_LINE,13," 111  111  111 "
		CALL MAKE_FLOOR_LINE,14,"  2    2    2  "
		CALL MAKE_FLOOR_LINE,15,"  1    7    1  "
		CALL MAKE_FLOOR_LINE,16,"               "
		SIF 던전플래그:92:1 == 9
			CALL MAKE_FLOOR_LINE,10,"  2    1    2  "

	CASE 7
	;幼き思い出
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 11111 $211111111 $ "
		CALL MAKE_FLOOR_LINE, 2," 1  2      1    1 2 "
		CALL MAKE_FLOOR_LINE, 3," 1 111     1    111 "
		CALL MAKE_FLOOR_LINE, 4," 1   %111111121   1 "
		CALL MAKE_FLOOR_LINE, 5," 1 & 1     1  111 1 "
		CALL MAKE_FLOOR_LINE, 6," 1 2 111 1 11 1 1 1 "
		CALL MAKE_FLOOR_LINE, 7," 1 =11   2  1 1 1 1 "
		CALL MAKE_FLOOR_LINE, 8," 1   1 11111  1 1 1 "
		CALL MAKE_FLOOR_LINE, 9," 1 111 1   1  1 1 1 "
		CALL MAKE_FLOOR_LINE,10," 1     1 / 1  11111 "
		CALL MAKE_FLOOR_LINE,11," 1121  1 2 1 11 2 1 "
		CALL MAKE_FLOOR_LINE,12," 1  1  11=11 1  1 1 "
		CALL MAKE_FLOOR_LINE,13,"    1        1    1 "
		CALL MAKE_FLOOR_LINE,14," 1211  $211111111 1 "
		CALL MAKE_FLOOR_LINE,15,"    2        2  1 1 "
		CALL MAKE_FLOOR_LINE,16," 1111  11111 $  1 1 "
		CALL MAKE_FLOOR_LINE,17," 2 11  1 2 1    1 2 "
		CALL MAKE_FLOOR_LINE,18," $ 11111 X 111111 3 "
		CALL MAKE_FLOOR_LINE,19,"                    "

	CASE 8
	;追憶の風
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 1111111   111 11 $ "
		CALL MAKE_FLOOR_LINE, 2," 1   1 1 $ 1 1  1 2 "
		CALL MAKE_FLOOR_LINE, 3," 1 & 1 1 2   1  111 "
		CALL MAKE_FLOOR_LINE, 4," 1 2 1 1111%11    1 "
		CALL MAKE_FLOOR_LINE, 5," 11=11  1   2  11 1 "
		CALL MAKE_FLOOR_LINE, 6,"        1   1  1  1 "
		CALL MAKE_FLOOR_LINE, 7," 121 1    121  1121 "
		CALL MAKE_FLOOR_LINE, 8," 1   2    1 1  1  2 "
		CALL MAKE_FLOOR_LINE, 9," 1 11111  1 1  1  1 "
		CALL MAKE_FLOOR_LINE,10," 1 1   1  111111  1 "
		CALL MAKE_FLOOR_LINE,11," 1 1 / 1     2 1111 "
		CALL MAKE_FLOOR_LINE,12," 1 1 2 1  $  3    1 "
		CALL MAKE_FLOOR_LINE,13," 1 11=11  2       1 "
		CALL MAKE_FLOOR_LINE,14," 1       11111111 1 "
		CALL MAKE_FLOOR_LINE,15," 111   111    2 1 2 "
		CALL MAKE_FLOOR_LINE,16," 1 1 1211111  $ 1 1 "
		CALL MAKE_FLOOR_LINE,17," 2 1   1 2 1    1 1 "
		CALL MAKE_FLOOR_LINE,18," $ 11121 X 11111121 "
		CALL MAKE_FLOOR_LINE,19,"                    "

	CASE 9
	;過去への扉
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;					     01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 111 112111211111 $ "
		CALL MAKE_FLOOR_LINE, 2," 1 2 1   1  1   1 2 "
		CALL MAKE_FLOOR_LINE, 3," 1 1 12$ 1    1 111 "
		CALL MAKE_FLOOR_LINE, 4," 1   1   1    2   1 "
		CALL MAKE_FLOOR_LINE, 5," 1111111 1  11111 1 "
		CALL MAKE_FLOOR_LINE, 6,"       1 1  1   1 1 "
		CALL MAKE_FLOOR_LINE, 7," &2=11 1 1  1 / 1 2 "
		CALL MAKE_FLOOR_LINE, 8,"     1 1 1  1 2 1 1 "
		CALL MAKE_FLOOR_LINE, 9," 11111 2 1  11=11 1 "
		CALL MAKE_FLOOR_LINE,10," 2     1 1        1 "
		CALL MAKE_FLOOR_LINE,11," 11%   1 1 3      1 "
		CALL MAKE_FLOOR_LINE,12,"   1 111 1 11111111 "
		CALL MAKE_FLOOR_LINE,13,"   1 1   1 1      1 "
		CALL MAKE_FLOOR_LINE,14," 111212$ 1 11111  1 "
		CALL MAKE_FLOOR_LINE,15," 1   1   1   2 1  2 "
		CALL MAKE_FLOOR_LINE,16," 1 121 11111 $ 1  1 "
		CALL MAKE_FLOOR_LINE,17," 2   1 1 2 1   1  2 "
		CALL MAKE_FLOOR_LINE,18," $ 121 1 X 11111  1 "
		CALL MAKE_FLOOR_LINE,19,"                    "
	CASEELSE
ENDSELECT

;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_92, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 던전플래그:84~99
;LOCAL:4 이벤트
;(0/0)でLOCALを소거
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
SELECTCASE ARG
	CASE 3
		IF GETBIT(던전플래그:(FLAG:현던전):(FLAG:현M+70), LOCAL:3)
			DA:(ARG:1):(ARG:2) = 1
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:3 * 10 + 3
		ENDIF
		LOCAL:3++
	CASE 4
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:4 * 10 + 4
		LOCAL:4++
	CASE 5
		;DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:5 * 10 + 5
		;LOCAL:5++
	CASE 6
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:6 * 10 + 6
		LOCAL:6++
	CASE 7
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:7 * 10 + 7
		LOCAL:7++
	CASE 8
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:8 * 10 + 8
		LOCAL:8++
	CASE 9
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:9 * 10 + 9
		LOCAL:9++
ENDSELECT

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_92, ARGS, ARG, ARG:1
SELECTCASE ARGS
	CASE "~"
		RETURN 12
	CASE "-"
		RETURN 22
	CASE "_"
		RETURN 32
	CASE "]"
		RETURN 42

	CASE "!"
		RETURN 14
	CASE "#"
		RETURN 24
	CASE "="
		RETURN 34
	CASE "%"
		RETURN 44
	CASE "/"
		RETURN 54
	CASE "<"
		RETURN 1004
	CASE ">"
		RETURN 2004

	CASE "$"
		RETURN 19
	CASE "&"
		RETURN 29
	CASE "'"
		RETURN 39
	CASE "x"
		RETURN 49
	CASE "X"
		RETURN 59
ENDSELECT

;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_92
CALL EVENT_DUNGEON_92
RETURN RESULT
;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_92,ARG
;ARG = 進入時の向き　0の場合ワープなど
CALL EVENT_DUNGEON_92, ARG , 0
RETURN RESULT

@EVENT_DUNGEON_92, ARG, ARG:1
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
;==========
;出口の処理
;==========
	CASE 8
		CALL DUNGEON_EXIT
	RETURN 1
;==========
;扉の処理
;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
;========
;宝の処理
;========
CASE 3
CALL TREASURE_92
RETURN 1

;=======
;階段
;=======
CASE 6
CALL UPSTAIRS_92
RETURN RESULT

CASE 7
CALL DOWNSTAIRS_92
RETURN RESULT
;==========
;이벤트
;==========
CASE 4
	SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
		CASE 1
			CALL MESSAGE_WINDOW_D, "", "＞석판모양의 묘가 있다……/＞어떻게 하겠습니까？"
			CALL INPUT_SELECT_D, @"[0]말을 건넨다/[1]발로 차본다/[2]아무것도 안한다"
				SELECTCASE RESULT
					CASE 0
						CALL MESSAGE_WINDOW_D, "", "＞묘가 말을 걸어왔다。"
						CALL MESSAGE_WINDOW_D, "묘", "『방에는 라이트가 2개 있다。１개는 저쪽에、1개는 이쪽에。/자세한 이야기는 십자가에서……』"
					CASE 1
						CALL MESSAGE_WINDOW_D, "", "＞묘에서 돌로 된 거대한 다리가 나타나 발로 차버렸다！"
						CALL DUNGEON_TRAP_HP,20
					CASE 2
						CALL MESSAGE_WINDOW_D, "",  @"＞%조사처리(CALLNAME:MASTER,"는")% 조심스럽게 그곳에서 멀어졌다。"
			ENDSELECT
		CASE 2
			CALL MESSAGE_WINDOW_D, "", "＞십자가가 있다……/＞어떻게 하겠습니까？"
			CALL INPUT_SELECT_D, @"[0]말을 건넨다/[1]돌을 던진다/[2]아무것도 안한다"
				SELECTCASE RESULT
					CASE 0
						CALL MESSAGE_WINDOW_D, "", "＞십자가에 말을 걸었다。"
						CALL MESSAGE_WINDOW_D, "십자가", "『「기억의 방」의 천정에는 라이트가 2개 있다。/하나는 혼이 잠드는 곳……/그리고 다른 하나는 그 곳으로 인도하는 곳……』"
					CASE 1
						CALL MESSAGE_WINDOW_D, "", "＞십자가 뒤에서 돌맹이가 쏟아져내렸다！"
						CALL DUNGEON_TRAP_HP,20
					CASE 2
						CALL MESSAGE_WINDOW_D, "",  @"＞%조사처리(CALLNAME:MASTER,"는")% 조심스럽게 그곳에서 멀어졌다。"
				ENDSELECT
		CASE 3
			CALL MESSAGE_WINDOW_D, "", "＞천장의 라이트가 한쪽 구석을 비추고 있다。"
		CASE 4
			IF FLAG:현M == 1 && 던전플래그:92:1 == 4
				CALL MESSAGE_WINDOW_D, "", "＞……어디선가 목소리가 들려왔다……"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "……쿡쿡……/이번에는 누나가 책을 읽어줄게……"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "신고、즐거워？/누나와 쭉 함께 놀자"
				CALL MESSAGE_WINDOW_D, "남자아이의 목소리", "응、누나……/나、누나와 쭉 함께 놀거야……"
				던전플래그:92:1 = 5
				던전플래그:92:17 = 0
			ELSEIF FLAG:현M == 7 && 던전플래그:92:17 == 1
				CALL MESSAGE_WINDOW_D, "", "＞……어디선가 목소리가 들려왔다……"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "신고、이제 잘 시간이야。/침대에 들어가야지"
				CALL MESSAGE_WINDOW_D, "남자아이의 목소리", "누나、나 무서워。/창 밖에、귀신이 있는거 아냐？/……봐！　지금、뭔가 움직였어！"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "착하게 굴지 않으면 정말로 귀신이 와버린단다。/자、이제 자자"
				던전플래그:92:17 = 2
			ELSEIF FLAG:현M == 8 && 던전플래그:92:17 == 1
				CALL MESSAGE_WINDOW_D, "", "＞……어디선가 목소리가 들려왔다……"
				CALL MESSAGE_WINDOW_D, "남자아이의 목소리", "누나、여기에 있으면 아무에게도 발견되지 않는거야？"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "그럼。쭉 여기 있으면、/학교에도、치과에도 가지 않아도 돼。"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "여기의 일은、어느 누구에게도 비밀이야。/아빠한테도、엄마한테도、누구에게도 안 돼。"
				던전플래그:92:17 = 2
			ELSEIF FLAG:현M == 9 && 던전플래그:92:17 == 1
				CALL MESSAGE_WINDOW_D, "", "＞……어디선가 목소리가 들려왔다……"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "신고…… 신고……/어디 있니？/어디에 있는거야……？"
				CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "쭉 함께 있자고、약속했었는데……/신고、어디 있니……？"
				던전플래그:92:17 = 2
			ENDIF
		CASE 5
			IF 던전플래그:92:1 == 5
				CALL MESSAGE_WINDOW_D, "",  @"＞「추억의 방」이라고 쓰여진 문을 열고 방에 들어가자、시야가 어두워졌다。/＞빛이 돌아오자 지금까지와는 분위기가 다른 방에 있다는 것을 %조사처리(CALLNAME:MASTER,"는")% 알아차렸다。"
				CALL MESSAGE_WINDOW_D, "",  "＞조금 따듯한 느낌이 드는 방 안에 작은 침대가 2개 있다。/＞침대 위에는 파자마를 입은 심약해보이는 남자아이가 앉아 있었다。"
				CALL MESSAGE_WINDOW_D, "남자아이",  "누나…… 잘 수가 없어……"
				CALL MESSAGE_WINDOW_D, "",  @"＞남자아이는 그렇게 중얼거렸다。그 때 %마스터가% 들어온 것을 눈치챘는지、얼굴을 이쪽으로 돌렸다。"
				CALL MESSAGE_WINDOW_D, "남자아이",  "어라…… 누구？/이렇게 늦은 밤에……귀신？"
				CALL MESSAGE_WINDOW_D, "",  @"＞이 남자아이가 좀 전에 들었던 이야기에 나오는 신고일까。/＞%조사처리(CALLNAME:MASTER,"는")% 무심코 물어보았다。"
				CALL MESSAGE_WINDOW_D, "남자아이", @"응、내 이름은 신고라고 하는데……/\@ TALENT:MASTER:남자 ? 형은 # 누나는 \@、여기에 왜 온거야？/나쁜 사람은 아니지？"
				CALL MESSAGE_WINDOW_D, "",  "＞남자아이는 이쪽을 경계하는 눈빛으로 보고 있다……/＞어떻게 합니까？"
				CALL INPUT_SELECT_D, @"[0]데리고 간다/[1]잠시 지켜본다"
					SELECTCASE RESULT
						CASE 0
							던전플래그:92:13 = 1
							CALL MESSAGE_WINDOW_D, "남자아이",  "엣？/나를 데리고 갈 거야？/싫어、나 가고 싶지 않아！"
							CALL MESSAGE_WINDOW_D, "",  @"＞%마스터가% 억지로 데리고 나가려고 손을 잡자 남자아이는 눈물을 흘리며 거부했다。"
							CALL MESSAGE_WINDOW_D, "남자아이", @"\@ TALENT:MASTER:남자 ? 형은 # 누나는 \@ 나를 밤뿐인 나라로 데려가는거지！/그 귀신처럼！"
							CALL MESSAGE_WINDOW_D, "남자아이",  "싫어、무서워！/도와줘요、누가……/누나、구해줘ー！！"
							CALL MESSAGE_WINDOW_D, "",  @"＞그렇게 남자아이가 외친 순간、마치 보이지 않는 손이 낚아채듯이 %조사처리(CALLNAME:MASTER,"는")% 남자아이로부터 떨어졌다。/＞어느샌가 원피스를 입고 붉은 란도셀을 맨 귀여운 여자아이가 이쪽에 등을 향하고 서 있었다。"
							CALL MESSAGE_WINDOW_D, "여자아이",  "무슨 일이야 신고。/큰 소리를 내면 안되잖아"
							CALL MESSAGE_WINDOW_D, "여자아이",  "착하게 굴지 않으면、대모충의 고기가 나타나서/네 머리를 먹어버릴거야"
							CALL MESSAGE_WINDOW_D, "",  "＞여자아이가 그렇게 말하자 소년은 잠잠해졌다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "자、얌전히 자도록하렴。/신고는 누나가 지켜줄게。/누구에게도 너를 넘겨주지 않을 테니까……"
						CASE 1
							CALL MESSAGE_WINDOW_D, "남자아이", @"흐응、\@ TALENT:MASTER:남자 ? 형은 # 누나는 \@ 나쁜 사람은 아닌 것 같네。/다행이다。"
							CALL MESSAGE_WINDOW_D, "", "＞이쪽이 아무것도 하지 않을거란 걸 알았는지、사내 아이는 안도한 것 같다。/＞그리고 흥미진진한 모습으로 이쪽에 말을 건네 왔다"
							CALL MESSAGE_WINDOW_D, "남자아이", @"그렇지、\@ TALENT:MASTER:남자 ? 형 # 누나 \@무언가 재미있는 이야기 해 줘。재미있는 이야기。/앗、무서운 이야기는 싷어。/나、화장실에 갈 수 없게 돼버린단 말이야"
							CALL MESSAGE_WINDOW_D, "",  @"＞그것을 듣고 %마스터가% 어떻게 할지 생각하고 있을 때、갑자기 방문이 열렸다。/＞거기서 원피스 입고 빨간 란도셀을 맨 귀여운 여자아이가 나타났다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "무슨 일이야、신고？/빨리 자지 않으면 안 돼。엄마에게 꾸중들을거야。"
							CALL MESSAGE_WINDOW_D, "",  @"＞말한 직후 이쪽을 깨달았는지 여자아이는 수상하다는 듯 %마스터를% 응시하고 있다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "당신들 누구？ 뭐하러 왔어？/안 돼、신고。모르는 사람과 이야기하면。/자、가자……"
					ENDSELECT
				CALL MESSAGE_WINDOW_D, "",  @"＞그 순간 %CALLNAME:MASTER%의 시야는 어두워져、빛이 돌아왔을 때는 기억의 방 입구로 되돌아와 있었다.。"
				던전플래그:92:1 = 6
				던전플래그:92:17 = 0
				CALL DUNGEON_WORP,1,7,8
			ELSEIF 던전플래그:92:1 == 6
				CALL MESSAGE_WINDOW_D, "", @"＞「추억의 방」이라고 쓰여진 문을 열어 방에 들어가자、시야가 어두워졌다。/＞빛이 돌아오자 지금까지와는 분위기가 다른 방에 있다는 것을 %조사처리(CALLNAME:MASTER,"는")% 알아차렸다。/＞마루에는 먼지가 조금 있고 낮은 천장에는 창이 붙어 있다。아무래도 어딘가의 다락방인 것 같다。"
				CALL MESSAGE_WINDOW_D, "남자아이",  @"아―！\@ TALENT:MASTER:남자 ? 형 # 누나 \@ 또 왔네？"
				CALL MESSAGE_WINDOW_D, "", "＞옆에서 그렇게 크게 외치는 소리가 들려왔다。돌아보니 조금 전의 사내아이가 놀란 표정으로 이쪽을 보고 있다。"
				CALL MESSAGE_WINDOW_D, "남자아이", "안돼、멋대로 여기에 들어오면。/여기는 나와 누나의 비밀기지니까。/그렇게 말한 후、남자아이는 무언가 눈치챈 듯 겁먹기 시작했다"
				CALL MESSAGE_WINDOW_D, "남자아이", "……혹시 나를 데리고 가려는거야？/어디로？"
				CALL MESSAGE_WINDOW_D, "남자아이", "싫어……/나 여기서 나가고 싶지 않아……"
				CALL MESSAGE_WINDOW_D, "", "＞남자아이는 겁먹은 표정으로 이쪽을 보고있다……/어떻게 합니까？"
				CALL INPUT_SELECT_D, @"[0]데리고 간다/[1]잠시 지켜본다"
					SELECTCASE RESULT
						CASE 0
							던전플래그:92:14 = 1
							CALL MESSAGE_WINDOW_D, "남자아이",  @"그렇구나！/나를 데려간다니！/\@ TALENT:MASTER:남자 ? 형은 # 누나는 \@나쁜 사람이었구나！"
							CALL MESSAGE_WINDOW_D, "",  @"＞%마스터가% 억지로 데리고 나가려고 손을 잡자 남자아이는 눈물을 흘리며 거부했다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "싫어、나 가고 싶지 않아！/누나、구해줘！"
							CALL MESSAGE_WINDOW_D, "",  @"＞그렇게 남자 아이가 외친 순간、마치 보이지 않는 손에 튕겨진 것처럼 %조사처리(CALLNAME:MASTER,"는")% 남자아이에게서 떨어졌다。/＞보니까、또 그 때의 여자아이가 사내아이의 곁에 서 있다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "뭐야、신고！/또 소란을 피운거야？"
							CALL MESSAGE_WINDOW_D, "여자아이", "얌전히 있지 않으면、난쟁이 루게이에가 와서、/네 눈을 보이지 않게 해버린다구！"
							CALL MESSAGE_WINDOW_D, "",  "＞이렇게 여자아이가 심하게 꾸짖자 사내아이는 얌전해졌다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "당신들 누구？/혹시、신고를 데려갈 생각이야？"
							CALL MESSAGE_WINDOW_D, "",  "＞여자아이는 이쪽을 흘긋 노려본 뒤、사내아이에게 상냥하게 말했다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "괜찮아、신고。/누나가、이 사람들로부터 너를 도망치게 해 줄 테니까……"
						CASE 1
							CALL MESSAGE_WINDOW_D, "남자아이",  @"아아、다행이다。\@ TALENT:MASTER:남자 ? 형은 # 누나는 \@ 아무 짓도 하지않네"
							CALL MESSAGE_WINDOW_D, "",  "＞이쪽이 해를 끼치지 않을거란 것을 알았는지、남자아이는 안도한 것 같다。/그리고 기뻐하며 옆에 끼고있던 상자를 꺼내고 말을 걸어왔다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "그럼 이걸 보여줄게。/어、아버지가 사주신 모형 총이야"
							CALL MESSAGE_WINDOW_D, "남자아이", "아、총알도 나가。/그게、어떻게 하면 되더라……"
							CALL MESSAGE_WINDOW_D, "",  @"＞그렇게 찾고 있을 때 소리도 없이 %CALLNAME:MASTER% 옆 마루 밑이 열리더니 거기로부터 좀 전의 여자아이가 나왔다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "신고ー。/앗、여기 있었구나。"
							CALL MESSAGE_WINDOW_D, "",  @"＞그리 말하고는 %마스터를% 발견했는지 여자아이는 수상쩍다는듯 이쪽을 바라봤다。"
							CALL MESSAGE_WINDOW_D, "여자아이", "어머、이 사람들 또 와있었네。흐ー응。"
							CALL MESSAGE_WINDOW_D, "여자아이", "안돼 신고、모르는 사람을 여기에 들여보내면。/자、가자……"
					ENDSELECT
				CALL MESSAGE_WINDOW_D, "",  @"＞그 순간 %CALLNAME:MASTER%의 시야는 어두워져、빛이 돌아왔을 때는 기억의 방 입구로 되돌아와 있었다。"
				던전플래그:92:1 = 7
				던전플래그:92:17 = 0
				CALL DUNGEON_WORP,1,7,8
			ELSEIF 던전플래그:92:1 == 7
				CALL MESSAGE_WINDOW_D, "", @"＞과거의 방」이라고 쓰여진 문을 열어 방에 들어갔을 때 시야가 어두워졌다。/＞빛이 돌아오자、이번에는 조금 넓은 복도에 있다는 것을 %조사처리(CALLNAME:MASTER,"는")% 알아챘다。"
				CALL MESSAGE_WINDOW_D, "남자아이", "우…훌쩍……훌쩍……우우…/망가졌어……망가져버렸어……/인형이 망가져……우우……"
				CALL MESSAGE_WINDOW_D, "",  "＞복도 구석에 있는 계단 중간에 그 남자아이가 피를 계속 흘리고 있는 인형을 누르면서 울고 있다。"
				CALL MESSAGE_WINDOW_D, "남자아이", "어쩌지……　저기、어쩌면 좋아……/피가 멈추지 않아……눌러도 자꾸 자꾸 나와버려……/멈출 수가 없어……"
				CALL MESSAGE_WINDOW_D, "",  "＞남자아이는 인형이 피를 흘리고 있는 부분을 필사적으로 막아보지만 멈추지 않고、피는 계단을 따라 떨어지고 있다。"
				CALL MESSAGE_WINDOW_D, "남자아이", "죽어버려……/인형이 죽어버려……/나 때문에……"
				CALL MESSAGE_WINDOW_D, "",  "＞남자아이는 계속 울고 인형의 피는 멈추지 않는다。/＞이대로 두기엔 위험한 상태다。/＞어떻게 합니까？"
				CALL INPUT_SELECT_D, @"[0]아이를 붙잡는다/[1]말을 건넨다"
					SELECTCASE RESULT
						CASE 0
							던전플래그:92:15 = 1
							CALL MESSAGE_WINDOW_D, "",  @"＞%마스터가% 거칠게 끌어내도 반응이 별로 없다。/＞넋이 나간듯 소년은 계속해서 울고있다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "……나는 사람을 죽여서 잡혀갈거야/그리고 죽 외톨이로……"
							CALL MESSAGE_WINDOW_D, "남자아이", "싫어、그런 건 싫어……/우욱、우와앙……"
							CALL MESSAGE_WINDOW_D, "",  @"＞남자아이가 더욱 크게 울기 시작한 순간、%조사처리(CALLNAME:MASTER,"는")% 강한 힘에 의해 날려져 버렸다！"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "어째서 울고 있어、신고？"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "그렇게 울고만 있으면、귀신 버그스가 찾아와서、/널 잡아갈거야"
							CALL MESSAGE_WINDOW_D, "",  "＞지금까지와 달리 그 여자아이의 모습은 보이지 않지만、목소리만은 확실히 들리고 있다！"
							CALL MESSAGE_WINDOW_D, "남자아이", "우우、우우……/미안해、누나。/내가 누나의 인형……"
							CALL MESSAGE_WINDOW_D, "",  "＞그렇게 사내아이가 대답했을 때、갑자기 사내아이의 움직임이 멈췄다。/＞그 얼굴은 한층 더 절망적인 사실을 깨달았는지 공포로 물들고 있었다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "！！/아냐、내가 떨어뜨린 건 인형이 아니야！"
							CALL MESSAGE_WINDOW_D, "남자아이", "내가 장난치다 밀어서……/누나가 계단에서……"
							CALL MESSAGE_WINDOW_D, "남자아이", "아아、어째서……/미안해、누나……"
							CALL MESSAGE_WINDOW_D, "",  "＞남자아이는 완전히 망연자실 하고 있다。"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "후후、이제 괜찮아。/왜냐하면 누나、죽지 않는 몸이 되었으니까"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "자、가자。/여기에는 너를 잡아가려는 무서운 사람들이 있으니까……"
						CASE 1
							CALL MESSAGE_WINDOW_D, "",  @"＞%마스터가% 상냥하게 말을 건네자 사내아이는 조금 전 보다 약간 침착해 진 듯、고개를 숙인 채 말하기 시작했다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "……아니야。/내가 깨뜨린 것은、인형같은 것이 아니야"
							CALL MESSAGE_WINDOW_D, "남자아이", "그래、내가 떨어뜨린 인형 같은 건 없어/누나……"
							CALL MESSAGE_WINDOW_D, "남자아이", "내가……내가 장난치다、밀어서……/누나는 계단으로 떨어져……"
							CALL MESSAGE_WINDOW_D, "", "＞남자아이의 눈물이 또 한방울 바닥으로 떨어졌을 때、갑자기 목소리가 들려왔다。"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "어쩔 수 없구나、너는。/무슨 일이야 신고？"
							CALL MESSAGE_WINDOW_D, "", "＞지금까지와 달리 그 여자아이의 모습은 보이지 않았지만、목소리만은 상냥했다。"
							CALL MESSAGE_WINDOW_D, "남자아이", "누나……/어떻게、누나가 있는거야？"
							CALL MESSAGE_WINDOW_D, "", "＞남자아이의 눈물은 멈춰 있었다。그 소리에는 왜라는 감정이 가득차 있었다。"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "후후。/어떻게 누나가 있냐니？"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "그야 신고랑 약속했잖아。"
							CALL MESSAGE_WINDOW_D, "", "＞목소리는 상냥했다/＞ 마치 남자아이를 안심시키려고 하는 것 처럼。"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "누나는 언제나 신고 곁에 있을 거라고……/자、안쪽 방에서 놀자"
							CALL MESSAGE_WINDOW_D, "여자아이의 목소리", "여기에는 무서운 사람들이 있으니까……"
					ENDSELECT
				CALL MESSAGE_WINDOW_D, "",  @"＞그 순간 %CALLNAME:MASTER%의 시야는 어두워져、빛이 돌아왔을 때는 기억의 방 입구로 되돌아와 있었다。"
				던전플래그:92:1 = 8
				던전플래그:92:17 = 0
				CALL DUNGEON_WORP,1,7,8
			ENDIF
		CASE 100
			IF 던전플래그:92:1 == 8
				CALL MESSAGE_WINDOW_D, "", "＞벽에 걸린 거울 안에 있는 사내아이가 귀를 기울이고 있다。"
				CALL MESSAGE_WINDOW_D, "거울 속의 소년",  @"……\@ TALENT:MASTER:남자 ? 형 # 누나 \@、뭔가 들리지 않아？"
				CALL MESSAGE_WINDOW_D, "",  @"＞그렇게 말하자 %조사처리(CALLNAME:MASTER,"는")% 어디선가 희미하게 오르골 소리가 울리고 있다는 것을 알아챘다。"
				CALL MESSAGE_WINDOW_D, "거울 속의 소년", "있지……/나、이 노래 들은 적 있는 것 같아"
				CALL MESSAGE_WINDOW_D, "거울 속의 소년",  @"그래……맞아。/이 노래는、누나가 정말 좋아했던 곡이야"
				CALL MESSAGE_WINDOW_D, "거울 속의 소년",  @"나、절대 잊지 않았어……"
				CALL MESSAGE_WINDOW_D, "", "＞그리고 거울에서 빛이 나와、벽을 소멸시켰다。/안쪽으로 통로가 이어져 있어、오르골 소리는 그 안 쪽에서 울리고 있는 것 같다。"
				DA:(FLAG:현X):(FLAG:현Y-1) = 1
				던전플래그:92:1 = 9
			ELSEIF 던전플래그:92:1 < 8
				CALL MESSAGE_WINDOW_D, "", "＞벽에 걸린 거울 안에 사내아이가 이상하다는 듯 이쪽을 보고 있다。"
				CALL MESSAGE_WINDOW_D, "거울 속의 소년",  @"……\@ TALENT:MASTER:남자 ? 형 # 누나 \@……누구……？"
			ENDIF
		CASE 200
			CALL MESSAGE_WINDOW_D, "", "＞방에 들어서자 한 명의 아이와 의자에 앉아 있는 한 사람의 청년이 눈에 띄었다。/＞의자에 앉아 있는 나름대로 단정하게 생긴 청년에게는 그 소년의 모습이 어렴풋이 남아있다。"
			CALL MESSAGE_WINDOW_D, "", "＞하지만 그 얼굴은 영혼이 빠져나간 것처럼 창백해 마음이 떠난 상태다。/아이쪽은 그 여자아이로、그 청년에게 말을 걸고 있다。"
			CALL MESSAGE_WINDOW_D, "여자아이", "너무하네、신고는。/쭉 나에 대해서 잊고 있었다니。"
			CALL MESSAGE_WINDOW_D, "청년", "……"
			CALL MESSAGE_WINDOW_D, "여자아이", "신고는 항상 「누나와 쭉 함께야」라고 말했었잖아。/그래 놓고는、완전히 잊어버려서"
			CALL MESSAGE_WINDOW_D, "여자아이", "어쩐지、에리카 굉장히 배신당한 기분。/역시、인간이란 없어진 사람 같은 건 잊어버리는 걸까"
			CALL MESSAGE_WINDOW_D, "청년", "그런 적……없어"
			CALL MESSAGE_WINDOW_D, "", "＞처음으로 청년……신고가 반응해 목소리는 냈다、/＞간신히 짜낸 것처럼、힘이 하나도 없었다。"
			CALL MESSAGE_WINDOW_D, "여자아이", "순 거짓말쟁이。/에리카를 가둬둔 건 신고잖아。/에리카는 쭉 신고의 마음속、빛이 닿지 않는곳에 있었어……"
			CALL MESSAGE_WINDOW_D, "", "＞여자아이……에리카는 담담하게 신고의 말을 부정한다。"
			CALL MESSAGE_WINDOW_D, "에리카", "그렇지만、이제 괜찮아。/지금부터、신고와 에리카는 다시 쭉 함께니까"
			CALL MESSAGE_WINDOW_D, "", "＞방금 전의 담백함에서 돌변해 기쁜듯한 목소리로 말했지만、신고의 모습은 변함없다。"
			CALL MESSAGE_WINDOW_D, "신고", "그렇지만……여기는 진짜 세계가 아니고、/누나도……이제 진짜로 살아 있는 건 아니야……"
			CALL MESSAGE_WINDOW_D, "에리카", "그렇지 않아。/이 세계에서도、살아갈 수 있어。/단지、신고가 모르는 것 뿐"
			CALL MESSAGE_WINDOW_D, "에리카", "게다가 신고의 진정한 마음까지 알고 있는 것은 에리카 뿐인걸。"
			CALL MESSAGE_WINDOW_D, "에리카", "강한 척 보이면서、사실은 겁쟁이에、외로움도 많이 타고……/그렇지만、여기에서 에리카와 있으면 이제 그런 무리할 필요 없어"
			CALL MESSAGE_WINDOW_D, "에리카", "……누구？"
			CALL MESSAGE_WINDOW_D, "", "＞아무래도 이쪽을 깨달은 것 같다。/에리카는 이쪽으로 몸을 향하고 막아선다。"
			CALL MESSAGE_WINDOW_D, "에리카", "당신들、신고를 잡으러 온 사람이네。/하지만 안 돼、신고는 건네주지 않아。신고는 평생 여기에 있을 거야！"
			CALL MESSAGE_WINDOW_D, "", "＞이쪽의 목적은 그게 아니라、여기를 이계화한 악마에 대한 대처지만……/＞상황을 보니 눈앞의 소녀가 그 악마임에 틀림없는 것 같다。"
			CALL MESSAGE_WINDOW_D, "",  @"＞거기에 본인의 영혼이 변질된 악마든、청년의 기억을 취해서 빙의된 악마든 %마스터와%는 관계 없는 일이다。/＞물러날 기색이 없는 %CALLNAME:MASTER%에게 마주한 에리카도 물러설 기색은 없다。"
			CALL MESSAGE_WINDOW_D, "에리카", "당신들이 여기서 사라져 주면、신고는 나와 함께 있을 수 있어。/그러니까……신고、넌 여기 있으렴/누나가、너를 지킬거야……"
			CALL MESSAGE_WINDOW_D, "", "＞신고는 얼음 속에 갇혔다。/＞아마도、술자를 쓰러뜨리지 않는 한 녹지 않을 것이다。"
			CALL MESSAGE_WINDOW_D, "", "＞그리고 가로막기 놀이를 하는 것처럼 에리카는 주인공들 앞을 막아섰다。/＞그 눈은 적의로 가득차 붉게 물들어 있었다！"
			CALL MESSAGE_WINDOW_D, "에리카", "너희들 따위에게 신고를 넘겨 주지 않아！"
			CALL MESSAGE_WINDOW_D, "에리카", "와라、밤의 마물들！！/고기！　루게이에！　버그스！"
			IF 던전플래그:92:13 == 1 && 던전플래그:92:14 == 1 && 던전플래그:92:15 == 1
				던전플래그:92:16 = 1
				CALL MESSAGE_WINDOW_D, "", "＞그 부름에 답하는 것처럼 분위기가 변하더니 악마가 나타났다！"
				CALL MESSAGE_WINDOW_D, "에리카", "잘 왔어、모두들。/고기、루게이에、버그스"
				CALL MESSAGE_WINDOW_D, "에리카", "고기는 녀석들을 물어 뜯고/루게이에는 저 녀석들의 눈을 빼앗고/버그스는 어둠으로 감싸 안으렴"
				CALL MESSAGE_WINDOW_D, "에리카", "자、가겠어요。/신고는 넘겨주지 않을 테니까！"
			ELSEIF 던전플래그:92:13 == 1 || 던전플래그:92:14 == 1 || 던전플래그:92:15 == 1
				CALL MESSAGE_WINDOW_D, "", "＞그 부름에 답하는 것처럼 분위기가 변하더니 악마가 나타났다！"
				CALL MESSAGE_WINDOW_D, "에리카",@"잘왔어요。/\@ 던전플래그:92:13 ? 고기 #  \@\@ 던전플래그:92:14 ? 루게이에 #  \@\@ 던전플래그:92:15 ? 버그스 #  \@"
					SIF 던전플래그:92:13 == 1
						CALL MESSAGE_WINDOW_D, "에리카", "고기는 녀석들을 물어뜯고"
					SIF 던전플래그:92:14 == 1
						CALL MESSAGE_WINDOW_D, "에리카", "루게이에는 눈을 빼앗고"
					SIF 던전플래그:92:15 == 1
						CALL MESSAGE_WINDOW_D, "에리카", "버그스는 어둠으로 감싸 안으렴"
				CALL MESSAGE_WINDOW_D, "", "＞하지만 불러낸 수에 비해 조금 부족하다。"
				CALL MESSAGE_WINDOW_D, "에리카",@"\@ 던전플래그:92:13 ?  # 고기 \@　\@ 던전플래그:92:14 ?  # 루게이에 \@　\@ 던전플래그:92:15 ?  # 버그스 \@오지 않아……/마음의 소리에 당해서……"
				CALL MESSAGE_WINDOW_D, "에리카", "자、가겠어요。/신고는 넘겨주지 않을 테니까！"
			ELSE
				CALL MESSAGE_WINDOW_D, "", "＞하지만 그 소리는 허무하게 울려퍼질 뿐이었다。/＞누구도 말을 꺼내지 않는 공허 속에서、오르골 소리만이 상냥하게 울리고 있다。"
				CALL MESSAGE_WINDOW_D, "에리카", "아무도 오지 않아……/모두 마음의 소리에 당했구나……"
				CALL MESSAGE_WINDOW_D, "에리카", "그래、이제 나 혼자……/그래도 신고를 넘겨주진 않을거야！"
			ENDIF
				CALL MESSAGE_WINDOW_D, "", @"＞원령 에리카가 １체 나타났다！/\@ 던전플래그:92:13 ? ＞요충 고기가 1체 나타났다！ # 　 \@ \@ 던전플래그:92:14 ? 　＞요마 루게이에가 1체 나타났다！ # 　 \@　\@ 던전플래그:92:15 ? 　＞요정 버그스가 1체 나타났다！ # 　 \@"
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					;고기
					IF 던전플래그:92:13 == 1
						CALL SET_ENEMY,8,881,31,0,1
						CALL SYNC_STATUS, (CHARANUM-1)
						CALL HEALTH_CHARA, (CHARANUM-1)
					ENDIF
					;루게이에
					IF 던전플래그:92:14 == 1
						CALL SET_ENEMY,9,464,30,0,1
						CALL SYNC_STATUS, (CHARANUM-1)
						CALL HEALTH_CHARA, (CHARANUM-1)
					ENDIF
					;버그스
					IF 던전플래그:92:15 == 1
						CALL SET_ENEMY,10,556,34,0,1
						CALL SYNC_STATUS, (CHARANUM-1)
						CALL HEALTH_CHARA, (CHARANUM-1)
					ENDIF
					;에리카
					CALL SET_ENEMY,14,1012,43,0,1
					CFLAG:(CHARANUM-1):ＨＰ보정 += 500
					CFLAG:(CHARANUM-1):ＭＰ보정 += 500
					CSTR:(CHARANUM-1):사고패턴 = 1012
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL BATTLE_START
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0

			IF ( FINDCHARA_B(4510) == 2 || FINDCHARA_B(4511) == 2 || FINDCHARA_B(4512) == 2 )
				SIF FINDCHARA_B(4510) == 2
					LOCAL = FINDCHARA(NO,4510)
				SIF FINDCHARA_B(4511) == 2
					LOCAL = FINDCHARA(NO,4511)
				SIF FINDCHARA_B(4512) == 2
					LOCAL = FINDCHARA(NO,4512)
				PRINTL 에리카
				PRINTFORMW 「꺄아아아아…악……」
				PRINTFORMW 비명을 지르며 에리카는 사라져간다… 그와 동시에 얼음이 녹아 청년은 해방되었다
				PRINTFORML 신고
				PRINTFORMW 「……난… 쭉 누나를 잊고 있었어…」
				PRINTFORMW 「그렇게 심한 짓을 한 건 나였는데…」
				PRINTFORMW 아직 몽롱한 상태긴 하지만 의식을 되찾은 것인지、청년이 잠꼬대처럼 중얼거렸다
				PRINTFORMW 그 모습을 차마 지켜볼 수 없었는지 %조사처리(CALLNAME:LOCAL,"가")% 말을 건넨다
				PRINTFORML %CALLNAME:LOCAL%
				PRINTFORMW 「저기, 들리니?」
				PRINTFORMW 「누나는 이제 현실에서는 살아갈 수 없지만, 네 마음속에는 남아있잖아?」
				PRINTFORMW %CALLNAME:LOCAL%의 목소리는 평소와는 다른 사람처럼 상냥하다…
				PRINTFORMW 그녀에게도 과거의 속박이 있는 것인가. 그러나 그것은 %CALLNAME:MASTER%에게는 알 필요가 없는 것이다
				PRINTFORML 신고
				PRINTFORMW 「그래도… 나는 누나를…」
				PRINTFORML %CALLNAME:LOCAL%
				PRINTFORMW 「항상 생각하고 있지 않아도 돼. 때때로 떠올려주기만 한다면, 분명 옛날처럼 상냥한 누나로 돌아올 거라고 생각해」
				PRINTFORMW 「항상 당신에게 상냥하게 대해준, 진짜 누나의 모습으로… 그렇지?」
				PRINTFORML 신고
				PRINTFORMW 「…그래, 내가 좀 더 누나를……」
				PRINTFORMW 「응… 고마워…」
				PRINTFORMW 청년의 모습은 사라져갔다. 현실세계로 돌아간 것이겠지
				PRINTFORMW 이제 더 이상 이 곳에 남아있을 필요는 없다
				던전플래그:92:18 = 1

			ELSEIF 던전플래그:92:16 == 1
				CALL MESSAGE_WINDOW_D, "에리카", "시……인……고……"
				CALL MESSAGE_WINDOW_D, "", "＞악마를 사역한 탓에 힘을 다 써버렸을 것이다。/＞에리카는 소멸하기 시작했다。/＞그리고、얼음에서 해방된 신고도 기절해 있는지 조금도 움직이지 않는다。"
				CALL MESSAGE_WINDOW_D, "", "＞자 그럼、어떻게 할까……"
				CALL INPUT_SELECT_D, @"[0]방치한다/[1]에리카를 포획한다/[2]신고를 포획한다/[3]양쪽 모두 포획한다"
					SELECTCASE RESULT
						CASE 0
							CALL MESSAGE_WINDOW_D, "",  "＞딱히 마무리를 지을 필요도 없고 이것으로 의뢰는 완료했다고 봐도 좋을 것이다。/＞거기에 신고 쪽은 아마 이 장소에서의 일은 잊어 버릴테지。/＞적당한 장소에서 해방하면 될 것이다。"
							CALL MESSAGE_WINDOW_D, "",  @"＞최후의 순간까지 남동생만을 생각한 악마의 소멸을、%조사처리(CALLNAME:MASTER,"는")% 가만히 지켜보았다。"
						CASE 1
							CALL MESSAGE_WINDOW_D, "",  "＞단정한 얼굴을 하고 있고、실력도 방금 전의 싸움으로 보증된 수표나 다름없다。/＞말을 듣게 하기까지 고생하겠지만 그만큼의 가치는 있을 것이다。"
							CALL MESSAGE_WINDOW_D, "",  "＞거기에 신고 쪽은 아마 이 장소에서의 일은 잊어 버릴 것이다。/＞적당한 장소에서 해방하면 될 것이다。"
							CALL ADD_NEW_COMPANION, 1012, 0, 1
							SIF RESULT
								CFLAG:(RESULT:1):전투참가불가능 = 1
						CASE 2
							CALL MESSAGE_WINDOW_D, "",  "＞일단 단정한 얼굴을 하고 있기에 이용할 방법이 있을 것이다。/＞악마의 소멸을 지켜본 후 신고를 데리고 돌아갔다。"
							CALL ADD_NEW_COMPANION, 4594, 200, 1
							SIF RESULT
								CFLAG:(RESULT:1):전투참가불가능 = 1
						CASE 3
							CALL MESSAGE_WINDOW_D, "",  "＞단정한 얼굴을 하고 있고、실력도 방금 전의 싸움으로 보증된 수표나 다름없다。/＞＞말을 듣게 하기까지 고생하겠지만 그만큼의 가치는 있을 것이다。/＞거기에 남동생에 대한 강한 집착도 이용할 수 있다。"
							CALL MESSAGE_WINDOW_D, "",  "＞정작 그쪽에서 어프로치하면 편하게 말을 듣게 할 수 있을 것이다。/＞소멸 직전이고 거의 의식이 없는 악마를 ＣＯＭＰ 안에 봉인한 다음 신고를 데리고 돌아갔다。"
							CALL ADD_NEW_COMPANION, 4594, 200, 1
							SIF RESULT
								CFLAG:(RESULT:1):전투참가불가능 = 1
							CALL ADD_NEW_COMPANION, 1012, 0, 1
							SIF RESULT
								CFLAG:(RESULT:1):전투참가불가능 = 1
				ENDSELECT
			ELSE
				CALL MESSAGE_WINDOW_D, "",  "에리카가 쓰러지는 것과 동시에 신고를 가두고 있던 얼음이 부서졌다。"
				CALL MESSAGE_WINDOW_D, "에리카", "미안………그래도……누나……지켜……/……널…넘겨…않겠어……！！"
				CALL MESSAGE_WINDOW_D, "",  "＞에리카가 이렇게 중얼거린 순간 신고의 모습은 홀연히 사라졌다。/＞아마도 에리카가 마지막 힘을 짜내어 패러다임 Ｘ로부터 원래의 장소로 되돌려 보낸 것일테지。/＞그를 지키기 위해 마지막 힘까지 모두 사용해버린 것인지、에리카는 소멸하기 시작했다……"
				CALL INPUT_SELECT_D, @"[0]방치한다/[1]에리카를 포획한다"
					SELECTCASE RESULT
						CASE 0
							CALL MESSAGE_WINDOW_D, "",  @"＞딱히 마무리를 지을 필요도 없고 이것으로 의뢰는 완료했다고 봐도 좋을 것이다。/＞마지막까지 남동생만을 생각한 악마의 소멸을、%조사처리(CALLNAME:MASTER,"는")% 지켜보았다。"
						CASE 1
							CALL MESSAGE_WINDOW_D, "",  "＞단정한 얼굴을 하고 있고、실력도 방금 전의 싸움으로 보증된 수표나 다름없다。/＞말을 듣게 하기까지 고생하겠지만 그만큼의 가치는 있을 것이다。"
							CALL ADD_NEW_COMPANION, 1012, 0, 1
							SIF RESULT
								CFLAG:(RESULT:1):전투참가불가능 = 1
					ENDSELECT
			ENDIF
				CALL MESSAGE_WINDOW_D, "",  "＞보상으로 계좌에 ￥50000이 지급되었고、명성 50을 얻었다"
					MONEY += 50000
					FLAG:명성 += 50
					던전플래그:92:0 = 2
					FLAG:탈출 = 1
					RETURN 1
	ENDSELECT
;==========
;ワープの処理
;==========
	CASE 9
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
		CASE 1
			IF FLAG:현M == 7
				CALL DUNGEON_WORP,0,1,17
			ELSEIF FLAG:현M == 8
				CALL DUNGEON_WORP,0,3,17
			ELSE
				CALL DUNGEON_WORP,0,5,17
			ENDIF
		CASE 2
			IF FLAG:현M == 7
				CALL DUNGEON_WORP,0,5,3
			ELSEIF FLAG:현M == 8
				CALL DUNGEON_WORP,0,11,3
			ELSE
				CALL DUNGEON_WORP,0,17,3
			ENDIF
		CASE 3
			IF FLAG:현X == 1
				CALL DUNGEON_WORP,7,9,6
			ELSEIF FLAG:현X == 7
				CALL DUNGEON_WORP,8,5,7
			ELSE
				CALL DUNGEON_WORP,9,14,3
			ENDIF
		CASE 4
			CALL MESSAGE_WINDOW_D, "",  "＞오래된 오르골이 있다。/＞울려 보겠습니까？"
			CALL INPUT_SELECT_D, @"[0]YES/[1]NO"
				SELECTCASE RESULT
					CASE 0
						CALL MESSAGE_WINDOW_D, "",  "………………/…………"
						IF FLAG:현X == 7
							CALL DUNGEON_WORP,7,9,16
							IF 던전플래그:92:17 == 0
								CALL MESSAGE_WINDOW_D, "목소리", "기억의 방에 오신 것을 환영합니다……/당신은、문득 어렸을 때의 사건을 생각해 내거나 하지는 않습니까……？"
								CALL MESSAGE_WINDOW_D, "목소리", "그것은、좋았던 일이기도 하고……/혹은、안좋았던 일이기도 하지요……/어느쪽도 추억임에는 분명합니다만……"
								CALL MESSAGE_WINDOW_D, "목소리", "소년이 기억해 낸 것은、과연 어떤 일일까요？/그 대답의 열쇠는……"
								CALL MESSAGE_WINDOW_D, "목소리", "어쩌면 당신일지도 모르겠습니다……/그럼 이쯤에서……"
								CALL MESSAGE_WINDOW_D, "목소리", "「어린 추억」의 개막입니다。/「기억에 머무는 소리」는、분명 그 거울에 다시 한번 힘을 전해주겠지요……"
								던전플래그:92:17 = 1
							ENDIF
						ELSEIF FLAG:현X == 3
							CALL DUNGEON_WORP,8,9,16
							IF 던전플래그:92:17 == 0
								CALL MESSAGE_WINDOW_D, "목소리", "기억의 방에 오신 것을 환영합니다……/당신은 추억의 저 너머에 무엇이 있을까 생각한 적은 없습니까？"
								CALL MESSAGE_WINDOW_D, "목소리", "그곳에서는 크고 작은 기억들이、/떠오르기도 가라앉기도 하고 있다고、저는 생각합니다……/즐거웠던 일도、가슴아픈 일도……"
								CALL MESSAGE_WINDOW_D, "목소리", "소년이 추억의 저편에서 본 것은、과연 무엇일까요？/그 기억의 열쇠는……"
								CALL MESSAGE_WINDOW_D, "목소리", "어쩌면 당신일지도 모르겠습니다……/그러면 이쯤에서……"
								CALL MESSAGE_WINDOW_D, "목소리", "「추억의 바람」의 개막입니다。/「기억에 머무는 소리」는、분명 그 거울에 다시 한번 힘을 전해주겠지요……"
								던전플래그:92:17 = 1
							ENDIF
						ELSEIF FLAG:현X == 11
							CALL DUNGEON_WORP,9,9,16
							IF 던전플래그:92:17 == 0
								CALL MESSAGE_WINDOW_D, "목소리", "기억의 방에 오신 것을 환영합니다……/당신은、과거나 미래로 갈 수 있는 문이 있다면、어느쪽으로 가시겠습니까？"
								CALL MESSAGE_WINDOW_D, "목소리", "분명 대부분의 사람은 과거로 가겠지요……/그리고 한번 더 그 때 그 장소에서、/모든것을 바로잡을 수 있는 문에 손을 뻗겠지요……"
								CALL MESSAGE_WINDOW_D, "목소리", "소년이 열었던 문의 저편에는、과연 무엇이 기다리고 있는걸까요？/그 대답의 열쇠는……"
								CALL MESSAGE_WINDOW_D, "목소리", "어쩌면 당신일지도 모르겠습니다……/그러면 이쯤에서……"
								CALL MESSAGE_WINDOW_D, "목소리", "「과거로의 문」의 개막입니다。/「기억에 머무는 소리」는、분명 그 거울에 다시 한번 힘을 전해주겠지요……"
								던전플래그:92:17 = 1
							ENDIF
						ENDIF
				ENDSELECT
		CASE 5
			CALL MESSAGE_WINDOW_D, "",  "＞오르골이 울리고 있다。/＞멈춥니까？"
			CALL INPUT_SELECT_D, @"[0]YES/[1]NO"
				SELECTCASE RESULT
					CASE 0
						CALL MESSAGE_WINDOW_D, "",  "………………/…………"
						IF FLAG:현M == 7
							CALL DUNGEON_WORP,1,7,7
						ELSEIF FLAG:현M == 8
							CALL DUNGEON_WORP,1,3,8
						ELSEIF FLAG:현M == 9
							CALL DUNGEON_WORP,1,11,8
						ENDIF
				ENDSELECT
		ENDSELECT
ENDSELECT
RETURN 0

;=======================================================================
;탈출時の이벤트
;=======================================================================
@EVENT_DUNGEON_END_92
;식스Ｐ각성이벤트を挟んでいる場合
IF 던전플래그:92:18
	PRINTW 「앗, 너, 잠깐 기다려줘」
	PRINTW 임무를 마치고 거점으로 돌아가려던 %조사처리(CALLNAME:MASTER,"를")% 들어본 적 있는 목소리가 잡아세웠다
	PRINTW …ＶＲ 호러 하우스에서 만난 청년, 신고였다
	PRINTL 신고
	PRINTW 「그… 고맙다」
	PRINTW 「아, 그… 뭐랄까, 말해야만 할 것 같은 기분이 들어서 말이야…」
	PRINTW 신고는 자신이 내뱉은 말에 당혹스러워하는 내색이었다
	PRINTW 아무래도 패러다임 Ｘ 안에서 벌어진 일을 무의식중에 떠올린듯하다
	PRINTW 팬텀의 기밀을 눈치챈 것 같지는 않은 듯하지만, 만에 하나의 경우를 대비해서 확보해둬야할 것인가
	CALL INPUT_YN("확보한다","대화를 이어간다")
	IF RESULT == 0
		;フラグ折る
		던전플래그:92:18 = 0
		PRINTW 청년을 확보해 거점으로 데리고 돌아갔다
		PRINTW ＞해커 사코 신고를 노예로 삼았다
		CALL ADD_NEW_COMPANION, 4594, 0, 1
		SIF RESULT
			CFLAG:(RESULT:1):전투참가불가능 = 1
		RETURN
	ENDIF
	PRINTL 신고
	PRINTW 「미안, 왠지 당신하고는 처음 만난 것 같지가 않아서」
	IF IS_LOOKSLIKE_MALE(MASTER)
		PRINTW 「…맞아. 괜찮으면 ID 교환하지 않겠어?」
		PRINTW 「요즘 뒤숭숭하니까 말이지. 서로 돕고 살 수 있다면 좋잖아」
	ELSE
		PRINTW 「…맞아. 괜찮으면 전화번호 교환하지 않겠어?」
		PRINTW 「어!? 아니, 헌팅하려는게 아니고 말이지?」
		PRINTW …허둥대며 변명하려는 모습이 평상시의 멀쩡한 겉모습과는 달라서 색다른 귀여움이 있었다
	ENDIF
	PRINTW 조직의 정보수집 능력을 이용한다면 시민 ID의 조사 따위 딱히 수고스러울 것도 없는 일이지만、신뢰를 쌓아둬서 나쁠 것은 없다
	PRINTFORMW %조사처리(CALLNAME:MASTER,"는")% 흔쾌히 받아들였다
	PRINTW 「거친 일은 좀 서툴지만、무슨 일이 있으면 돕게 해달라고」
	PRINTW ＞해커 사코 신고가 동료가 되었다
	;若干초기忠誠高め
	CALL ADD_NEW_COMPANION, 4594, 500, 1
	SIF RESULT
		CFLAG:(RESULT:1):전투참가불가능 = -1
ENDIF

;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_92
SELECTCASE FLAG:현M
	CASE 1
		FLAG:인카운트율 = 0
	CASEELSE
		FLAG:인카운트율 = FLAG:미조우걸음수*3
ENDSELECT
SIF FLAG:미조우걸음수 < 5
	FLAG:인카운트율 = 0
;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_92
RETURN 31, 29, 34, 43
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_92
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_92
RETURN CLASS_NUM_COMMON("中級")
;=======================================================================
;적の総数
;=======================================================================
@ENEMY_NUM_92, ARG
RETURN ENEMY_NUM_COMMON("中級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_92, ARG
	SELECTCASE RAND:100
		CASE IS < 14
			RETURN [[キャラ:프린시펄리티]], 29
		CASE IS < 28
			RETURN [[キャラ:노즈치]], 29
		CASE IS < 42
			RETURN [[キャラ:네코마타]], 28
		CASE IS < 56
			RETURN [[キャラ:스코그스라]], 30
		CASE IS < 70
			RETURN [[キャラ:야카]], 29
		CASE IS < 80
			RETURN [[キャラ:시완나]], 32
		CASE IS < 90
			RETURN [[キャラ:와일드헌트]], 33
		CASE IS < 95
			RETURN [[キャラ:비프론스]], 34
		CASE IS < 100
			RETURN [[キャラ:가샤도쿠로]], 34
	ENDSELECT

;=======================================================================
;階段置き場
;=======================================================================
@UPSTAIRS_92
;位置とIDが対応しているはずなので、同IDの階段を探させれば良い
SELECTCASE FLAG:현M
	CASEELSE
		CALL DUNGEON_UPSTAIRS_ID, FLAG:현M+1 , DA:(FLAG:현X):(FLAG:현Y) + 1000 + 1
ENDSELECT
RETURN 1

@DOWNSTAIRS_92
SELECTCASE FLAG:현M
	CASEELSE
		CALL DUNGEON_DOWNSTAIRS_ID, FLAG:현M-1 , DA:(FLAG:현X):(FLAG:현Y) - 1000 - 1
ENDSELECT
RETURN 1


;=======================================================================
;宝箱の中身
;=======================================================================
@TREASURE_92
#LOCALSIZE 9
LOCAL = FLAG:현M + 70
LOCAL:1 = (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		CALL GET_TREASURE,[[아이템:은의마니샤]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 1
		CALL GET_TREASURE,[[아이템:헤드헌팅스푼]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 100
		CALL GET_TREASURE_MAG, , 3000,FLAG:현던전, LOCAL , LOCAL:1
	CASE 200
		CALL GET_TREASURE,[[아이템:동방태산의모자]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 300
		CALL GET_TREASURE,[[아이템:남방형산의반지]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 400
		CALL GET_TREASURE,[[아이템:북방항산의구족]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 500
		CALL GET_TREASURE,[[아이템:챠크라포트]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 600
		CALL GET_TREASURE,[[아이템:서방화산의옷]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 700
		CALL GET_TREASURE_MAG, , 4500, FLAG:현던전, LOCAL , LOCAL:1
	CASE 800
		CALL GET_TREASURE,[[아이템:챠크라포트]],1,FLAG:현던전, LOCAL , LOCAL:1
	CASE 900
		CALL GET_TREASURE,[[아이템:물반경]],1,FLAG:현던전, LOCAL , LOCAL:1
ENDSELECT
RETURN 1

;=================================
;사고패턴
;=================================
;에리카の사고패턴
;本来は마린카린も「성인って～」の패턴ですが、
;某４コマでの조마を매료した際の台詞が妙に印象に残ったのでそちらをしゃべります。
;別に２패턴しかないから추가したかった訳でｈ（ｒｙ
@ENEMY_BATTLE_MESSAGE_K1012, ARG
IF CFLAG:ARG:입력행동 == 2050
	PRINTFORML ┏에리카━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃내 신고를 빼앗아가지 마！！　　　　　　 ┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━┛
ELSEIF CFLAG:ARG:입력행동 == 1211
	PRINTFORML ┏에리카━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃신고는 건네주지 않을 테니까！　　　　　 ┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━┛
ELSE
	SELECTCASE RAND:100
		;30％
		CASE IS < 30
			PRINTFORML ┏에리카━━━━━━━━━━━━━━━━━┓
			PRINTFORML ┃어른은 정말 싫어！　　　　　　　　　　　┃
			PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━┛
	ENDSELECT
ENDIF

@EVENT_BATTLE_ACTEND_DUNGEON92
#DIM L_ENEMY
;에리카死亡
IF FINDCHARA_ENEMY([[キャラ:에리카]]) == 3 && !GETBIT(L_ENEMY,0)
	SETCOLOR 0xff0033
	PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃신고……도망…쳐……　　　　　　　　　┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━┛	
	SETBIT L_ENEMY,0
	RESETCOLOR
ENDIF
;에리카存命でないと返る
SIF FINDCHARA_ENEMY([[キャラ:에리카]]) != 1
	RETURN
VARSET LOCALS
IF FINDCHARA_ENEMY([[キャラ:고기]]) == 3 && !GETBIT(L_ENEMY,1)
	LOCALS = 고기！
	SETBIT L_ENEMY,1
ENDIF
IF FINDCHARA_ENEMY([[キャラ:루게이에]]) == 3 && !GETBIT(L_ENEMY,2)
	LOCALS = %LOCALS%루게이에！
	SETBIT L_ENEMY,2
ENDIF
IF FINDCHARA_ENEMY([[キャラ:버그스]]) == 3 && !GETBIT(L_ENEMY,3)
	LOCALS = %LOCALS%버그스！
	SETBIT L_ENEMY,3
ENDIF
IF LOCALS != ""
	SETCOLOR 0xff0033
	PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃%LOCALS,22,LEFT%　　　　　　　　　┃
	IF ( L_ENEMY & 14 ) == 14 && !GETBIT(L_ENEMY,4)	
		PRINTFORML ┃모두… 모두 죽어버렸어…　　　　　┃
		SETBIT L_ENEMY,4
	ENDIF
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━┛	
	RESETCOLOR
ENDIF

;고기の行動패턴
;1ターン目orワンモアor20%で베어먹기、それ以外は랜덤행동
@SET_ACTION_D92_881,ARG
IF FLAG:경과턴수 == 0 || CFLAG:ARG:１more플래그 > 0 || !RAND:5
	CALL CHECK_ACTIONABLE_AND_SET(ARG,[[스킬:베어먹기]])
ELSE
	CALL 랜덤행동,ARG
ENDIF

;루게이에の行動패턴
;1ターン目orワンモアor20%で스쿤・다、それ以外は랜덤행동
@SET_ACTION_D92_465,ARG
IF FLAG:경과턴수 == 0 || CFLAG:ARG:１more플래그 > 0 || !RAND:5
	CALL CHECK_ACTIONABLE_AND_SET(ARG,[[스킬:스쿤・다]])
ELSE
	CALL 랜덤행동,ARG
ENDIF

;버그스の行動패턴
;1ターン目orワンモアor20%で마구날뛰기、それ以外は랜덤행동
@SET_ACTION_D92_556,ARG
IF FLAG:경과턴수 == 0 || CFLAG:ARG:１more플래그 > 0 || !RAND:5
	CALL CHECK_ACTIONABLE_AND_SET(ARG,[[스킬:마구날뛰기]])
ELSE
	CALL 랜덤행동,ARG
ENDIF

;에리카の사고패턴
@SET_ACTION_1012,ARG
;1moreでは마하부흐라か마린카린をしてきます
;自分ひとりの場合は메기도라も使ってきます。
IF CFLAG:ARG:１more플래그 > 0
	IF RAND:3 == 0
		IF POS(8) == -1 && POS(10) == -1 && POS(14) == -1
			;메기도라
			CALL CHECK_ACTIONABLE,ARG,2002
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 2002
			CALL RANDOM_TARGET,ARG,2002
			RETURN 1
		ELSE
			;마하부흐라
			CALL CHECK_ACTIONABLE,ARG,805
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 805
			CALL RANDOM_TARGET,ARG,805
			RETURN 1
		ENDIF
	ELSEIF RAND:2 == 0
		;마하부흐라
		CALL CHECK_ACTIONABLE,ARG,805
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 805
		CALL RANDOM_TARGET,ARG,805
		RETURN 1
	ELSE
		;마린카린
		CALL CHECK_ACTIONABLE,ARG,1211
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 1211
		CALL RANDOM_TARGET,ARG,1211
		RETURN 1
	ENDIF
;夜の魔物たちがいる時は메기도라と마하무드は使ってきません。
;전열にいるとたまにポカポカしてくる。かわうい。
ELSEIF POS(8) >= 0 || POS(10) >= 0 || POS(14) >= 0
	SELECTCASE RAND:100
		;35％　마하부흐라
		CASE IS < 35
			CALL CHECK_ACTIONABLE,ARG,805
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 805
			CALL RANDOM_TARGET,ARG,805
			RETURN 1
		;35％　마린카린
		CASE IS < 70
			CALL CHECK_ACTIONABLE,ARG,1211
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 1211
			CALL RANDOM_TARGET,ARG,1211
			RETURN 1
		;20％　하테나・박스
		CASE IS < 90
			CALL CHECK_ACTIONABLE,ARG,2050
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 2050
			CALL RANDOM_TARGET,ARG,2050
			RETURN 1
		;10％　전열：ポカポカ叩く　후열：하테나・박스
		CASE IS < 100
			IF CPOS(ARG) == 9
				CALL CHECK_ACTIONABLE,ARG,0
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 0
				CALL RANDOM_TARGET,ARG,0
				RETURN 1
			ELSE
				CALL CHECK_ACTIONABLE,ARG,2050
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 2050
				CALL RANDOM_TARGET,ARG,2050
				RETURN 1
			ENDIF
	ENDSELECT
;自分ひとりの場合は메기도라と마하무드も使ってきます。
;たまにポカポカしてくる。かわうい。
ELSEIF POS(8) == -1 && POS(10)== -1 && POS(14) == -1
	SELECTCASE RAND:100
		;20％　메기도라
		CASE IS < 20
			CALL CHECK_ACTIONABLE,ARG,2002
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 2002
			CALL RANDOM_TARGET,ARG,2002
			RETURN 1
		;20％　마하부흐라
		CASE IS < 40
			CALL CHECK_ACTIONABLE,ARG,805
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 805
			CALL RANDOM_TARGET,ARG,805
			RETURN 1
		;20％　마하무드
		CASE IS < 60
			CALL CHECK_ACTIONABLE,ARG,1402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 1402
			CALL RANDOM_TARGET,ARG,1402
			RETURN 1
		;15％　마린카린
		CASE IS < 75
			CALL CHECK_ACTIONABLE,ARG,1211
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 1211
			CALL RANDOM_TARGET,ARG,1211
			RETURN 1
		;15％　하테나・박스
		CASE IS < 90
			CALL CHECK_ACTIONABLE,ARG,2050
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 2050
			CALL RANDOM_TARGET,ARG,2050
			RETURN 1
		;10％　ポカポカ叩く
		CASE IS < 100
			CALL CHECK_ACTIONABLE,ARG,0
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 0
			CALL RANDOM_TARGET,ARG,0
			RETURN 1
	ENDSELECT
ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
	LOCAL = RAND:RESULT
	;스킬번호決定
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬번호を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1
ENDIF


;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_92
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:야카]] , 3 + RAND:10 , CSVBASE([[キャラ:야카]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:비프론스]] , 3 + RAND:10 , CSVBASE([[キャラ:비프론스]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:와일드헌트]] , 3 + RAND:10 , CSVBASE([[キャラ:와일드헌트]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
