;=======================================================================
;バール城
;突入には史人君必須、これ以降の偽典던전も同条件とする
;使用フラグ
;59:0 ムールムール撃破フラグ
;59:1 突入フラグ

;2021/8/XX	名無	88行目の던전플래그:70を던전플래그:59に修正
;=======================================================================

;=======================================================================
;攻略조건
;=======================================================================

@PREREQUISITE_DUNGEON_59
SIF (이벤트플래그:70:0 == 10 && FINDCHARA_B(4761,0) == 2 && (FINDCHARA_B(4763,0) == 2 || FINDCHARA_B(4764,0) == 2)) || (이벤트플래그:70:0 == 11 && FINDCHARA_B(4761,0) == 2)  
	RETURN 1
RETURN 0

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_59
RESULTS = 바알 성

;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_59
PRINT 바알 성
SELECTCASE FLAG:현M
	CASE 0
		PRINTL   １Ｆ
	CASE 1
		PRINTL   ２Ｆ
	CASE 2
		PRINTL   ３Ｆ
	CASE 3
		PRINTL   ４Ｆ
	CASE 4
		PRINTL   ５Ｆ
	CASE 5
		PRINTL   ６Ｆ
	CASE 6
		PRINTL   ７Ｆ
	CASE 7
		PRINTL   ８Ｆ
	CASE 8
		PRINTL   ９Ｆ
	CASE 9
		PRINTL   １０Ｆ
	CASE 10
		PRINTL   ６０Ｆ
	CASEELSE
		PRINTL
ENDSELECT


;=======================================================================
;特殊タイル표시
;=======================================================================




;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_59,ARG
FLAG:현M = 0
FLAG:현X = 7
FLAG:현Y = 1
;CALL AUTOMAP

;=======================================================================
;攻略開始時の이벤트
;=======================================================================
@EVENT_DUNGEON_START_59
IF 던전플래그:59:0 == 0
	CALL MESSAGE_WINDOW_D, "", "＞" + CALLNAME:MASTER + "는 카츠라기와 함께/＞바알 성에 찾아왔다"
	CALL MESSAGE_WINDOW_D, "", "＞생각해보면 카츠라기와 함께 여기까지 길고 괴로운 여행이었다"
	IF 이벤트플래그:70:0 == 10
		CALL MESSAGE_WINDOW_D, "", "＞그러나 이슈타르는 마침내 부활했고、/＞나머지는 분령으로서 카츠라기를 노려대는 바알만 쓰러뜨리면 모든 게 끝난다"
	ELSE
		CALL MESSAGE_WINDOW_D, "", "＞그러나 부활한 이슈타르는 카츠라기와 " + CALLNAME:MASTER + "에게 패하고/＞나머지는 분령으로서 카츠라기를 노려대는 바알만 쓰러뜨리면 모든 게 끝난다"
	ENDIF
	CALL MESSAGE_WINDOW_D, "", "＞카츠라기의 운명에 종지부를 찍기 위해、지금 " + CALLNAME:MASTER + " 일행은 바알 성에 도전한다…"
	던전플래그:59:0 = 1
ENDIF

;=======================================================================
;탈출時の이벤트
;=======================================================================
@EVENT_DUNGEON_END_59

;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_59,ARG,ARG:1

CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_59
SELECTCASE FLAG:현M
	CASE 0
	;１階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"       8      "
		CALL MAKE_FLOOR_LINE, 1,"   111111111  "
		CALL MAKE_FLOOR_LINE, 2,"    2     2   "
		CALL MAKE_FLOOR_LINE, 3,"    1     1   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       1      "
		CALL MAKE_FLOOR_LINE,12,"       6      "
		CALL MAKE_FLOOR_LINE,13,"              "
							    ;012345678


	CASE 1
	;２階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       6      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"    1     1   "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 7,"  2         2 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  1         1 "
		CALL MAKE_FLOOR_LINE,10,"  11111111111 "
		CALL MAKE_FLOOR_LINE,11,"       1      "
		CALL MAKE_FLOOR_LINE,12,"       7      "
		CALL MAKE_FLOOR_LINE,13,"              "

	CASE 2
	;３階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       6      "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "

	CASE 3
	;４階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       6      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       7      "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "


	CASE 4
	;５階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  11111111111 "
		CALL MAKE_FLOOR_LINE, 9,"       1      "
		CALL MAKE_FLOOR_LINE,10,"       6      "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "
	


	CASE 5
	;６階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       6      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  11111111111 "
		CALL MAKE_FLOOR_LINE, 9,"       1      "
		CALL MAKE_FLOOR_LINE,10,"       7      "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "
		

	CASE 6
	;７階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"       1      "
		CALL MAKE_FLOOR_LINE, 3,"       1      "
		CALL MAKE_FLOOR_LINE, 4,"       1      "
		CALL MAKE_FLOOR_LINE, 5,"       1      "
		CALL MAKE_FLOOR_LINE, 6,"       4      "
		CALL MAKE_FLOOR_LINE, 7,"       6      "
		CALL MAKE_FLOOR_LINE, 8,"              "
		CALL MAKE_FLOOR_LINE, 9,"              "
		CALL MAKE_FLOOR_LINE,10,"              "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "


	CASE 7
	;８階
		FLAG:최대X = 14
		FLAG:최대Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"   1114111    "
		CALL MAKE_FLOOR_LINE, 2,"   1111111    "
		CALL MAKE_FLOOR_LINE, 3,"    11111     "
		CALL MAKE_FLOOR_LINE, 4,"     111      "
		CALL MAKE_FLOOR_LINE, 5,"      1       "
		CALL MAKE_FLOOR_LINE, 6,"      1       "
		CALL MAKE_FLOOR_LINE, 7,"      7       "
		CALL MAKE_FLOOR_LINE, 8,"              "
		CALL MAKE_FLOOR_LINE, 9,"              "
		CALL MAKE_FLOOR_LINE,10,"              "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "

	CASEELSE

ENDSELECT

;=======================================================================
;[5]調べる　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_59

;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
;% 10は10で割ったあまり、つまり下一桁がでてきます
;そして、下一桁はタイルの종류を表す
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
;	CALL TREASURE_59
;	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 6
SELECTCASE FLAG:현M
	CASE 0
		CALL DUNGEON_UPSTAIRS,1,7,11
	CASE 1
		CALL DUNGEON_UPSTAIRS,2,7,2
	CASE 2
		CALL DUNGEON_UPSTAIRS,3,7,10
	CASE 3
		CALL DUNGEON_UPSTAIRS,4,7,2
	CASE 4
		CALL DUNGEON_UPSTAIRS,5,7,9
	CASE 5
		CALL DUNGEON_UPSTAIRS,6,7,2
	CASE 6
		CALL DUNGEON_UPSTAIRS,7,7,6
	CASE 7

	CASEELSE
ENDSELECT

RETURN 1

ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 7
SELECTCASE FLAG:현M
	CASE 0

	CASE 1
		CALL DUNGEON_DOWNSTAIRS,0,7,11
	CASE 2
		CALL DUNGEON_DOWNSTAIRS,1,7,2
	CASE 3
		CALL DUNGEON_DOWNSTAIRS,2,7,10
	CASE 4
		CALL DUNGEON_DOWNSTAIRS,3,7,2
	CASE 5
		CALL DUNGEON_DOWNSTAIRS,4,7,9
	CASE 6
		CALL DUNGEON_DOWNSTAIRS,5,7,2
	CASE 7
		CALL DUNGEON_DOWNSTAIRS,6,7,6

	CASEELSE
ENDSELECT
RETURN 1
;========
;이벤트
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4

ELSE
	CALL MESSAGE_WINDOW_D, "", "＞아무것도 없는 것 같다"
	RETURN 0
ENDIF

;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_59,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	SELECTCASE FLAG:현M
	CASE 0
	CASE 1
	CASE 2
	CASE 3
	CASE 4
	CASE 5
	CASE 6
		
	CASE 7

		
	CASEELSE
ENDSELECT
	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 6
SELECTCASE FLAG:현M
	CASE 0
		CALL DUNGEON_UPSTAIRS,1,7,11
	CASE 1
		CALL DUNGEON_UPSTAIRS,2,7,2
	CASE 2
		CALL DUNGEON_UPSTAIRS,3,7,10
	CASE 3
		CALL DUNGEON_UPSTAIRS,4,7,2
	CASE 4
		CALL DUNGEON_UPSTAIRS,5,7,9
	CASE 5
		CALL DUNGEON_UPSTAIRS,6,7,2
	CASE 6
		CALL DUNGEON_UPSTAIRS,7,6,6
	CASE 7

	CASEELSE
ENDSELECT

RETURN 1
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 7
SELECTCASE FLAG:현M
	CASE 0

	CASE 1
		CALL DUNGEON_DOWNSTAIRS,0,7,11
	CASE 2
		CALL DUNGEON_DOWNSTAIRS,1,7,2
	CASE 3
		CALL DUNGEON_DOWNSTAIRS,2,7,10
	CASE 4
		CALL DUNGEON_DOWNSTAIRS,3,7,2
	CASE 5
		CALL DUNGEON_DOWNSTAIRS,4,7,9
	CASE 6
		CALL DUNGEON_DOWNSTAIRS,5,7,2
	CASE 7
		CALL DUNGEON_DOWNSTAIRS,6,7,6

	CASEELSE
ENDSELECT
RETURN 1
;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
;========================
;이벤트
;========================
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
SELECTCASE FLAG:현M
	CASE 6
		IF 던전플래그:59:0 == 0
		CALL MESSAGE_WINDOW_D, "", "＞바알 성을 위로 위로 계속 올라가는 " + CALLNAME:MASTER + " 일행 앞에 한 악마가 모습을 드러냈다"
		CALL MESSAGE_WINDOW_D, "악마", "카츠라기 아야토… 오랜만이구나… 기다리고 있었다…"	
		CALL MESSAGE_WINDOW_D, "", "＞문득 쳐다보니 카츠라기는 덜덜 떨면서도 분노로 눈을 불태우는 걸 알 수 있다…/＞아마도 놈이 하츠다이를 멸망시킨 무르무르이리라…"
		CALL MESSAGE_WINDOW_D, "무르무르", "보잘 것 없던 무력한 소년이、꽤나 다부지게 변했구나。/인간은 모를 노릇이로고…"
		CALL MESSAGE_WINDOW_D, "무르무르", "허나 네놈의 명운도 여기까지… 그 분의 손을 번거롭게 할 것도 없다/어차피 버러지임을 깨닫게 해주마！！"
		CALL MESSAGE_WINDOW_D, "", "＞타천사　무르무르　가　1명　나타났다！"
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
		CALL SET_ENEMY,9,1707,70,0,5;무르무르
		MAXBASE:(CHARANUM-1):파마 = 0
		MAXBASE:(CHARANUM-1):주살 = 0
		CFLAG:(CHARANUM-1):행동횟수 = 2
		BASE:(CHARANUM-1):힘 += 6
		BASE:(CHARANUM-1):지혜 += 6
		BASE:(CHARANUM-1):마력 += 6
		BASE:(CHARANUM-1):인내력 += 5
		BASE:(CHARANUM-1):속도 += 5
		BASE:(CHARANUM-1):운 += 5
		CALL BATTLE_START
		FLAG:도주불가플래그 = 0
		FLAG:회화불능플래그 = 0
		FLAG:선제기습취소 = 0
		CALL MESSAGE_WINDOW_D, "무르무르", "말도 안 돼… 네 녀석 따위에게… 이 몸이…！"
		CALL MESSAGE_WINDOW_D, "", "＞무르무르는 사라졌다…"
		던전플래그:59:0 =1
		ELSE
			CALL MESSAGE_WINDOW_D, "", "＞아무도 없다"
		ENDIF
	CASE 7
		CALL MESSAGE_WINDOW_D, "", "＞대청 안에 한 악마가 자리 잡고 있다…"
		IF 이벤트플래그:70:0 == 10
			CALL MESSAGE_WINDOW_D, "바알", "잘 왔도다… 내 아내 이슈타르여…/그리고 내 아들、카츠라기 아야토여…"
			CALL MESSAGE_WINDOW_D, "바알", "자아、어머니 신 이슈타르여、깨어나서 아들의 피로 그대의 죄를 갚을지어다！"
			IF FINDCHARA_B(4763,0) == 2
				CALL MESSAGE_WINDOW_D, "유우카", "거절합니다。그리고 나는、이승에서는 당신의 아내가 아닙니다。"
				CALL MESSAGE_WINDOW_D, "바알", "이슈타르여、눈을 뜨시오！ 그리고 내 사랑에 응답해주시오！"
				CALL MESSAGE_WINDOW_D, "유우카", "나를 공포와 증오의 피로 더럽히고、심지어 내가 사랑하는 사람까지 앗아가려 하는가…/이 타락한 자야！"
				CALL MESSAGE_WINDOW_D, "유우카", "나의 손으로 그에 걸맞은 곳으로 가거라！"
			ELSE
				CALL MESSAGE_WINDOW_D, "루이", "싫어、난 아야토를 따라갈 거야。"
				CALL MESSAGE_WINDOW_D, "바알", "무어라！ 네 이년、아무리 내 아내라고 해도 용서 못한다！"
			ENDIF
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			CALL SET_ENEMY,9,270,70,0,5;바엘
			MAXBASE:(CHARANUM-1):파마 = 0
			MAXBASE:(CHARANUM-1):주살 = 0
			CFLAG:(CHARANUM-1):행동횟수 = 2
			BASE:(CHARANUM-1):힘 += 6
			BASE:(CHARANUM-1):지혜 += 6
			BASE:(CHARANUM-1):마력 += 6
			BASE:(CHARANUM-1):인내력 += 5
			BASE:(CHARANUM-1):속도 += 5
			BASE:(CHARANUM-1):운 += 5
			CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			CALL MESSAGE_WINDOW_D, "바알", "내 패배다、옛 왕의 살해자가 그러했듯이 내 혈육을 받고 마왕이 되어 이 제도에 군림하여라。"
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", "＞카츠라기는…"
			CALL INPUT_SELECT_D("[1] 승낙한다/[2] 거부한다")
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D, "", "＞그러자 놀랍게도 바알은 카츠라기에게서 힘을 빨아들인다！"
					CALL MESSAGE_WINDOW_D, "바알", "후후、훌륭하도다 성왕의 힘、사람의 몸으로 용케 여기까지 키웠노라/허나 어리석은 아들아、이미 내 적은 없다/자아、어리석은 아내와 함께 사라지도록 하라！"
					CALL SET_ENEMY,9,270,90,0,5;バエル
					MAXBASE:(CHARANUM-1):파마 = 0
					MAXBASE:(CHARANUM-1):주살 = 0
					CFLAG:(CHARANUM-1):행동횟수 = 3
					BASE:(CHARANUM-1):힘 += 6
					BASE:(CHARANUM-1):지혜 += 6
					BASE:(CHARANUM-1):마력 += 6
					BASE:(CHARANUM-1):인내력 += 5
					BASE:(CHARANUM-1):속도 += 5
					BASE:(CHARANUM-1):운 += 5
					CALL BATTLE_START
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					CALL MESSAGE_WINDOW_D, "바알", "말도 안 돼… 성왕의… 힘이… 패하리라…고는…"
				ELSE
				ENDIF
					CALL MESSAGE_WINDOW_D, "", "＞그러자 바알은 한 마리 두꺼비가 되고 말았다…/＞카츠라기가 밟아버리자 두꺼비는 마왕이었다는 생각이 들지 않는 소리를 지르며 납작해져버렸다"
					CALL MESSAGE_WINDOW_D, "", "＞이제 카츠라기와 이슈타르를 방해할 자는 없다…/＞두 사람은 행복하게 살겠지"
					CALL MESSAGE_WINDOW_D, "", "＞카츠라기에게서 보수로 500000엔을 받았다"
					MONEY += 500000
					이벤트플래그:70:0 = 12
					FLAG:탈출 = 1
		ELSEIF 이벤트플래그:70:0 == 11
			CALL MESSAGE_WINDOW_D, "바알", "어리석은 아들이여… 설마 내 아내、이슈타르를 멸하려들 줄이야…"
			CALL MESSAGE_WINDOW_D, "바알", "네놈들… 용서 못한다！/두 사람 다 저승의 어둠에 떨어뜨려주리라！！"
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			CALL SET_ENEMY,9,270,90,0,5;바엘
			MAXBASE:(CHARANUM-1):파마 = 0
			MAXBASE:(CHARANUM-1):주살 = 0
			CFLAG:(CHARANUM-1):행동횟수 = 3
			BASE:(CHARANUM-1):힘 += 6
			BASE:(CHARANUM-1):지혜 += 6
			BASE:(CHARANUM-1):마력 += 6
			BASE:(CHARANUM-1):인내력 += 5
			BASE:(CHARANUM-1):속도 += 5
			BASE:(CHARANUM-1):운 += 5
			CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			CALL MESSAGE_WINDOW_D, "바알", "내 패배다、옛 왕의 살해자가 그러했듯이 내 혈육을 받고 마왕이 되어 이 제도에 군림하여라。"
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", "＞카츠라기는…"
			CALL INPUT_SELECT_D("[1] 승낙한다/[2] 거부한다")
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D, "", "＞그러자 놀랍게도 바알은 카츠라기에게서 힘을 빨아들인다！"
					CALL MESSAGE_WINDOW_D, "바알", "후후、훌륭하도다 성왕의 힘、사람의 몸으로 용케 여기까지 키웠노라/허나 어리석은 아들아、이미 내 적은 없다/자아、어리석은 아내와 함께 사라지도록 하라！"
					CALL SET_ENEMY,9,270,105,0,5;바엘、이슈타르倒せてればこの位勝てるでしょうきっと
					MAXBASE:(CHARANUM-1):파마 = 0
					MAXBASE:(CHARANUM-1):주살 = 0
					CFLAG:(CHARANUM-1):행동횟수 = 4
					BASE:(CHARANUM-1):힘 += 10
					BASE:(CHARANUM-1):지혜 += 10
					BASE:(CHARANUM-1):마력 += 10
					BASE:(CHARANUM-1):인내력 += 10
					BASE:(CHARANUM-1):속도 += 10
					BASE:(CHARANUM-1):운 += 10
					CALL BATTLE_START
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					CALL MESSAGE_WINDOW_D, "바알", "말도 안 돼… 성왕의… 힘이… 패하리라…고는…"
					;撃破ボーナス：バエル解禁
					CALL LIFTING_A_BAN([[キャラ:바엘]])
				ELSE
				ENDIF
			CALL MESSAGE_WINDOW_D, "", "＞그러자 바알은 한 마리 두꺼비가 되고 말았다…/＞카츠라기가 밟아버리자 두꺼비는 마왕이었다는 생각이 들지 않는 소리를 지르며 납작해져버렸다"
			CALL MESSAGE_WINDOW_D, "", "＞・・・・・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・・・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・"
			PRINTFORML 
			CUSTOMDRAWLINE =
			PRINTFORML 
			PRINTFORMW 이리하여 %조사처리(CALLNAME:MASTER,"는")% 카츠라기와 함께 마도(魔都) 도쿄의 새로운 지배자가 되었다.
			PRINTFORML 
			PRINTFORMW 성왕의 힘 앞에서 수많은 악마들이 소멸되어 몸뚱아리는 폐허에 산더미처럼 쌓여 있었다.
			PRINTFORMW 그 압도적인 힘의 비호를 원해 도쿄에 사는 많은 주민들이 성왕에게 복종을 맹세했다.
			PRINTFORMW 성왕에 대항하고자 옛날 %조사처리(CALLNAME:MASTER,"가")% 소속되어있던 팬텀은 숙적 쿠즈노하와 손을 잡았다는 소문도 있다.
			PRINTFORML 
			PRINTFORMW 그러나 그래도 이미 카츠라기의 적은 되지 못할 것이다.
			PRINTFORMW 모든 바알 신의 분령을 무찌르고 바알 신 그 자체라고 해도 과언이 아닌 카츠라기에게 있어 적이라고 하면 유일신 정도.
			PRINTFORMW 그리고 그 곁에는 최강의 악마사역자, %조사처리(CALLNAME:MASTER,"가")% 있다.
			PRINTFORMW 유일신조차 손을 댈 수 없을 만큼 카츠라기와 %CALLNAME:MASTER%의 전력은 강대한 것이다.
			PRINTFORML 
			PRINTFORMW 이리하여 도쿄는 악마마저도 두려워하는 마도로서 그 이름을 마계에까지 퍼뜨리게 되었다.
			PRINTFORMW 성왕 카츠라기 아야토와 그 \@ TALENT:MASTER:140 ? 파트너 # 아내 \@, %CALLNAME:MASTER%의 이름과 함께…
			PRINTFORML 
			PRINTFORMW 　　　　　　　　―― Ending No.016 (위전・여신전생　"신・성왕전설")
			PRINTFORML 
			이벤트플래그:70:0 = 13
			FLAG:5 = 9
			SETBIT FLAG:취소된ED,16
			SETBIT FLAG:발견ED,16
			FLAG:탈출 = 1
			PRINTFORML [0]끝낸다 [1]계속한다 [2]일부 데이터를 인계해 새로 시작한다
			CALL INPUTINT,0, 1, 2
				IF RESULT == 0
					QUIT
				ELSEIF RESULT == 1
					CALL REQUEST_50_DAY_END
				ELSEIF RESULT == 2
					CALL START_NEWGAME
					RETURN 1
				ENDIF
		ENDIF
	CASEELSE
ENDSELECT

ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 9
SELECTCASE FLAG:현M
	CASE 0
	CASE 1
		
	CASE 2
		
	CASE 3
		
	CASE 4

	CASE 5

	CASE 6
		
	CASE 7

ENDSELECT
ENDIF


;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_59
FLAG:인카운트율 = FLAG:미조우걸음수*5

;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_59
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF

;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_59
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_59, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)

;=======================================================================
;적の종류
;=======================================================================
@ENEMY_59, ARG
	IF RAND:4 == 0
		RETURN 1621, 55;다곤
	ELSEIF RAND:3 == 0
		RETURN 675, 57;헤카톤케일
	ELSEIF RAND:2 == 0
		RETURN 708, 60;티아마트
	ELSE
		RETURN 475, 60;와일드헌트
	ENDIF

