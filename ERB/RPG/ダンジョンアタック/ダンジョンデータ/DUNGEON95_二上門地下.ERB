
;=======================================================================
;던전フラグ:95:0 == 2 クリア
;던전フラグ:95:1 == 1 아푸스撃破
;던전フラグ:95:1 == 2 티아마트撃破
;=======================================================================

;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_95
SIF 의뢰フラグ:35:0 == 1 && 던전フラグ:95:0 == 0
	RETURN 1
RETURN 0

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_95
RESULTS = 니카미몬지하

;=======================================================================
;스타ト地点입력
;=======================================================================
@START_DUNGEON_95, ARG
FLAG:現M = 0
FLAG:現X = 4
FLAG:現Y =21
CALL AUTOMAP
RETURN 0
;=======================================================================
;フ로어名표시
;=======================================================================
@FLOORNAME_95
	PRINT 니카미몬지하
SELECTCASE FLAG:現M
	CASE 0
		PRINTL ・１
	CASE 1
		PRINTL ・２
	CASE 2
		PRINTL ・３
	CASE 3
		PRINTL ・４
ENDSELECT
;=======================================================================
;스타ト時이벤트
;=======================================================================
@EVENT_DUNGEON_START_95
IF 던전フラグ:95:0 == 0
CALL MESSAGE_WINDOW_D, "", "＞나오미와 함류하여, 니카미몬 지하로 향했다."
CALL SET_GUEST_D95
CALL MESSAGE_WINDOW_D, "", "………/……/…"
CALL MESSAGE_WINDOW_D, "나오미", "후우…/꽤 깊숙한 곳까지 내려왔네…"
CALL MESSAGE_WINDOW_D, "나오미", "분명 미스터 니시(西)한테 받은 자료에는/「북쪽으로 한동안 가다보면 유적이 있다. 그 앞부터는 길이 두갈래로 나뉘어 있다/서쪽엔 압수(아푸스), 동쪽에는 티아마트가 있다」고 써져있었는데"
CALL MESSAGE_WINDOW_D, "나오미", "티아마트와 압수…"
CALL MESSAGE_WINDOW_D, "나오미", "어느쪽을 상대할지는 가면서 상담하자"
FLAG:탈출스킬금지 = 1
던전フラグ:95:0 = 1
ENDIF

;=======================================================================
;指定したマスに進入가능か
;=======================================================================
@CAN_ENTER_95, ARG, ARG:1
SELECTCASE DA:ARG:(ARG:1)
ENDSELECT
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;フ로어데이터
;=======================================================================
@MAKE_FLOOR_95
SELECTCASE FLAG:現M
	CASE 0
		FLAG:최대X = 10
		FLAG:최대Y = 23 
							;	  01234567890
   		CALL MAKE_FLOOR_LINE, 0, "    a     "
   		CALL MAKE_FLOOR_LINE, 1, " 1  1 1 1 "
   		CALL MAKE_FLOOR_LINE, 2, " 1  111 1 "
   		CALL MAKE_FLOOR_LINE, 3, " 11 1 111 "
   		CALL MAKE_FLOOR_LINE, 4, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  1 111 1 "
   		CALL MAKE_FLOOR_LINE, 6, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 7, " 1111 1 1 "
   		CALL MAKE_FLOOR_LINE, 8, "  1 1 1   "
   		CALL MAKE_FLOOR_LINE, 9, "  1 1 1   "
   		CALL MAKE_FLOOR_LINE,10, "  1 11111 "
   		CALL MAKE_FLOOR_LINE,11, "        1 "
   		CALL MAKE_FLOOR_LINE,12, "   1111 1 "
   		CALL MAKE_FLOOR_LINE,13, "   1  1 1 "
   		CALL MAKE_FLOOR_LINE,14, "   1  111 "
   		CALL MAKE_FLOOR_LINE,15, "   1      "
   		CALL MAKE_FLOOR_LINE,16, " 11111    "
   		CALL MAKE_FLOOR_LINE,17, "     1111 "
   		CALL MAKE_FLOOR_LINE,18, "  1  1  1 "
   		CALL MAKE_FLOOR_LINE,19, "  11 11 1 "
   		CALL MAKE_FLOOR_LINE,20, "   1  1 1 "
   		CALL MAKE_FLOOR_LINE,21, "   1111   "
   		CALL MAKE_FLOOR_LINE,22, "    8     "
							;	  01234567890
	CASE 1
		FLAG:최대X = 10
		FLAG:최대Y = 33
							;	  01234567890
   		CALL MAKE_FLOOR_LINE, 0, "  b       "
   		CALL MAKE_FLOOR_LINE, 1, "  1   1   "
   		CALL MAKE_FLOOR_LINE, 2, "  111 1   "
   		CALL MAKE_FLOOR_LINE, 3, "    1 1 c "
   		CALL MAKE_FLOOR_LINE, 4, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  111 111 "
   		CALL MAKE_FLOOR_LINE, 6, "  1     1 "
   		CALL MAKE_FLOOR_LINE, 7, "  1     1 "
   		CALL MAKE_FLOOR_LINE, 8, "  111   1 "
   		CALL MAKE_FLOOR_LINE, 9, "    1 111 "
   		CALL MAKE_FLOOR_LINE,10, " 11111 1  "
   		CALL MAKE_FLOOR_LINE,11, " 1 1   11 "
   		CALL MAKE_FLOOR_LINE,12, " 1 1111 1 "
   		CALL MAKE_FLOOR_LINE,13, " 1      1 "
   		CALL MAKE_FLOOR_LINE,14, " 1 11 1 1 "
   		CALL MAKE_FLOOR_LINE,15, " 1 1  111 "
   		CALL MAKE_FLOOR_LINE,16, " 111111   "
   		CALL MAKE_FLOOR_LINE,17, "  1   1   "
   		CALL MAKE_FLOOR_LINE,18, "  1 T 1   "
   		CALL MAKE_FLOOR_LINE,19, " 1111111  "
   		CALL MAKE_FLOOR_LINE,20, "  11111   "
   		CALL MAKE_FLOOR_LINE,21, " 1111111  "
   		CALL MAKE_FLOOR_LINE,22, "  11111   "
   		CALL MAKE_FLOOR_LINE,23, " 1111111  "
   		CALL MAKE_FLOOR_LINE,24, "  11111   "
   		CALL MAKE_FLOOR_LINE,25, " 1111111  "
   		CALL MAKE_FLOOR_LINE,26, "  11111   "
   		CALL MAKE_FLOOR_LINE,27, "  1       "
   		CALL MAKE_FLOOR_LINE,28, "  1   111 "
   		CALL MAKE_FLOOR_LINE,29, "  1   1 1 "
   		CALL MAKE_FLOOR_LINE,30, "  11111 1 "
   		CALL MAKE_FLOOR_LINE,31, "    1     "
   		CALL MAKE_FLOOR_LINE,32, "    A     "
   		
	CASE 2
		FLAG:최대X = 35
		FLAG:최대Y = 10
							;	  012345678901234567890123456789012345
   		CALL MAKE_FLOOR_LINE, 0, "  d                                "
   		CALL MAKE_FLOOR_LINE, 1, "  1   1   11   1111      1   111 e "
   		CALL MAKE_FLOOR_LINE, 2, "  1 1111111   11      11111  1   1 "
   		CALL MAKE_FLOOR_LINE, 3, "  1  1    11111     1 1   1 1111 1 "
   		CALL MAKE_FLOOR_LINE, 4, "  1  1111   1     111111 11 1  1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  1     1  11   111    1 1  1  1 1 "
   		CALL MAKE_FLOOR_LINE, 6, " 111111 11 1      111 11 11 1  1 1 "
   		CALL MAKE_FLOOR_LINE, 7, " 1    1  1 1111     1 1     1  1 1 "
   		CALL MAKE_FLOOR_LINE, 8, " 111  1111    1     1 1111111  111 "
   		CALL MAKE_FLOOR_LINE, 9, "              B     C              "
							;	  012345678901234567890123456789012345

	CASE 3
		FLAG:최대X = 17
		FLAG:최대Y = 9
							;	  012345678901234567
   		CALL MAKE_FLOOR_LINE, 0, "                 "
   		CALL MAKE_FLOOR_LINE, 1, "  1 % 1   1 & 1  "
   		CALL MAKE_FLOOR_LINE, 2, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 3, "  11111   11111  "
   		CALL MAKE_FLOOR_LINE, 4, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 5, "  11111   11111  "
   		CALL MAKE_FLOOR_LINE, 6, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 7, "  1 1 1   1 1 1  "
   		CALL MAKE_FLOOR_LINE, 8, "    D       E    "
							;	  0123456789

			CASEELSE
ENDSELECT

;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_95, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 던전フラグ:84~99
;LOCAL:4 이벤트
;(0/0)でLOCALを소거
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
SELECTCASE ARG
	CASE 3
		IF GETBIT(던전フラグ:(FLAG:現던전):(FLAG:現M+70), LOCAL:3)
			DA:(ARG:1):(ARG:2) = 1
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:3 * 10 + 3
		ENDIF
		LOCAL:3++
	CASE 4
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:4 * 10 + 4
		LOCAL:4++
	CASE 5
		;DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:5 * 10 + 5
		;LOCAL:5++
	CASE 6
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:6 * 10 + 6
		LOCAL:6++
	CASE 7
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:7 * 10 + 7
		LOCAL:7++
	CASE 8
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:8 * 10 + 8
		LOCAL:8++
	CASE 9
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:9 * 10 + 9
		LOCAL:9++

ENDSELECT
;=======================================================================
;特殊タイル표시
;=======================================================================
@TILE_MARK_COMMON_95_1, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 10 , 20 , 30 , 40 , 50
		RESULTS = ↑
	CASE 11 , 21 , 31 , 41 , 51
		RESULTS = ↓
	CASEELSE
		RETURN 1
ENDSELECT

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_95, ARGS, ARG, ARG:1
SELECTCASE ARGS
	CASE "a"
		RETURN 101
	CASE "A"
		RETURN 111
	CASE "b"
		RETURN 201
	CASE "B"
		RETURN 211
	CASE "c"
		RETURN 301
	CASE "C"
		RETURN 311
	CASE "d"
		RETURN 401
	CASE "D"
		RETURN 411
	CASE "e"
		RETURN 501
	CASE "E"
		RETURN 511

	CASE "%"
		RETURN 3004
	CASE "&"
		RETURN 3104
ENDSELECT

;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_95
CALL EVENT_DUNGEON_95
RETURN RESULT

;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_95,ARG
;ARG = 進入時の向き　0の場合ワープなど
CALL EVENT_DUNGEON_95, ARG , 0
RETURN RESULT

@EVENT_DUNGEON_95, ARG, ARG:1
#DIM 交渉가능キャラ , 7
SELECTCASE DA:(FLAG:現X):(FLAG:現Y) % 10
;==========
;ワープの処理
;==========
	CASE 1
	CALL FLOOR_95
	RETURN RESULT
;==========
;出입の処理
;==========
	CASE 8
		IF 던전フラグ:(FLAG:現던전):0 == 2
		CALL DUNGEON_EXIT
		ELSE
		CALL MESSAGE_WINDOW_D, "나오미", "안에 있는 악마를 쓰러트리기 전까진 탈출하지 않아"
		FLAG:現Y -= 1
		ENDIF
	RETURN 1
;==========
;扉の処理
;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
;==========
;이벤트
;==========
	CASE 4
		SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 300
	IF 던전フラグ:95:0 == 1
		CALL MESSAGE_WINDOW_D, "", "＞대렬석영실(大列石霊室)"
		CALL MESSAGE_WINDOW_D, "나오미", "이쪽은 모든 것을 태어나게 한 원초의 물, 압수가 잠들어있는 모양이네./어떡할개…？"
		CALL INPUT_SELECT_D, @"[1]압수와 싸운다/[2]싸우지 않는다"
		SELECTCASE RESULT
		CASE 1
		던전フラグ:95:1 = 1
		CALL MESSAGE_WINDOW_D, "나오미", "그러네. 쓰러트릴거라면/완전히 깨어나기 전인 지금이 찬스일지도 몰라./단박에 처리해버리자"
		CALL MESSAGE_WINDOW_D, "나오미", "그럼! 고대의 신 압스여!/나 이곳에서 그대에게 도전한다!/시간도 빛도 없는 곳으로 돌아가라!"
		CALL MESSAGE_WINDOW_D, "아푸스", "……싸움으로부터 멀어진지 오래된 이몸에게/어째서 그 검을 휘두르는가 인간의 아이여……"
		CALL MESSAGE_WINDOW_D, "아푸스", "저주받은 피에서 태어난 이몸을/그대들 같은 사람들이 쓰러트리겠는가……"
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
			CALL SET_ENEMY,9,[[キャラ:아푸스]],50,0,1
			CFLAG:(CHARANUM-1):ＨＰ보정 = 5000
			CFLAG:(CHARANUM-1):ＭＰ보정 = 5000
			CFLAG:(CHARANUM-1):행동횟수 = 2
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		CALL BATTLE_START
		FLAG:도주불가플래그 = 0
		FLAG:회화불능플래그 = 0
		FLAG:선제기습취소 = 0
		CALL MESSAGE_WINDOW_D, "나오미", "후우…조금 힘들었네./이게 불완전이라는 거니까……"
		CALL MESSAGE_WINDOW_D, "나오미", "가능하면 사역마로 삼고 싶었는데……/조금 무리였겠네."
		CALL MESSAGE_WINDOW_D, "나오미", "그건 그렇고, 계획상의 메인 시스템을/배치하는 모양인데/이정도 공간이 필요한건가"
		CALL MESSAGE_WINDOW_D, "나오미", "마니투…/분명 그런 이름이었어……"
		CALL MESSAGE_WINDOW_D, "목소리", "어리석은 인간이여……/신이 이정도로 죽을 것이라 생각한 건가……/자신의 어리석음을 후회하며 죽어라……"
		CALL MESSAGE_WINDOW_D, "", "＞압수가 있던 장소에 강한 힘이 빨려들고 있다……！"
		CALL MESSAGE_WINDOW_D, "나오미", "마, 말도 안돼, 우리들이 이겼을텐데……"
		CALL MESSAGE_WINDOW_D, "나오미", "수, 숨이……이대로라면……"
		CALL MESSAGE_WINDOW_D, "", "＞몽롱해져가는 의식 속에서, 당신은 토라에스트 스톤으로 나오미와 함께 탈출했다."
		CALL MESSAGE_WINDOW_D, "", "………/……/…"
		CALL MESSAGE_WINDOW_D, "", "＞당신과 나오미는 니카미몬지하에서 탈출했다"
		CALL MESSAGE_WINDOW_D, "나오미", "어떻게 살아 돌아왔네……/당신 덕분이야. 고마워."
		CALL MESSAGE_WINDOW_D, "나오미", "…당신이라면 신용할 수 있을 것 같아/도와줬으면 하는 일이 있어/이쪽에서 의뢰를 낼 테니까 가능하다면 받아줄래?"
		CALL MESSAGE_WINDOW_D, "", "＞아무래도 나오미로부터 의뢰에 대한 이야기가 있는 모양이다. 그녀와 헤어져 보수를 받았다./계좌에 ￥30000이 지불되었고, 명성 100을 얻었다"
		MONEY += 30000
		FLAG:명성 += 100
		FLAG:탈출스킬금지 = 0
		LOCAL = GETCHARA([[キャラ:나오미]])
		SIF LOCAL >= 0 && CFLAG:LOCAL:引継ぎ횟수 == 0
		CALL DEL_GUEST, LOCAL, "큰곰자리별의궁", "알즈・록", "백칠겁팔식철귀", "맥시밀리언", "라우린의반지", "신기루부츠", "도사뱃지"
		던전フラグ:95:0 = 2
		CALL LIFTING_A_BAN([[キャラ:아푸스]])
		;FLAG:11561 = 1
		FLAG:탈출 = 1
		CASE 2
		CALL MESSAGE_WINDOW_D, "나오미", "그러네, 신중하게 정하자."
		ENDSELECT
	ENDIF
	CASE 310
	IF 던전フラグ:95:0 == 1
		CALL MESSAGE_WINDOW_D, "", "＞대렬석영실(大列石霊室)"
		CALL MESSAGE_WINDOW_D, "나오미", "이쪽은 거대한 바다의 힘, 티아마트가 잠들어 있는 모양이네/어떡할래…？"
		CALL INPUT_SELECT_D, @"[1]티아마트와 싸운다/[2]싸우지 않는다"
		SELECTCASE RESULT
			CASE 1
		던전フラグ:95:1 = 2
		CALL MESSAGE_WINDOW_D, "나오미", "그러네…/쓰러트릴 거라면, 완전히 깨어나기 전인/지금이 찬스네."
		CALL MESSAGE_WINDOW_D, "나오미", "그럼！　고대의 신 티아마트여!/나 이곳에서 그대에게 도전한다!/그 운명 저주할 일 없이 여기서 사라져라!"
		CALL MESSAGE_WINDOW_D, "티아마트", "이제와 다툼을 잊어버린 이몸을 잠에서 깨우려 하는가……"
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
			CALL SET_ENEMY,9,[[キャラ:티아마트]],50,0,1
			CFLAG:(CHARANUM-1):ＨＰ보정 = 5000
			CFLAG:(CHARANUM-1):ＭＰ보정 = 5000
			CFLAG:(CHARANUM-1):행동횟수 = 2
			ABL:(CHARANUM-1):스킬1 = [[스킬:지온가]]
			ABL:(CHARANUM-1):스킬2 = [[스킬:아기라오]]
			ABL:(CHARANUM-1):스킬3 = [[스킬:부흐라]]
			ABL:(CHARANUM-1):스킬4 = [[스킬:메기도]]
			ABL:(CHARANUM-1):스킬5 = [[스킬:우뢰의세례]]
			BASE:(CHARANUM-1):검격 = 150
			BASE:(CHARANUM-1):비구 = 150
			BASE:(CHARANUM-1):타격 = 150
			BASE:(CHARANUM-1):전술 = 150
			BASE:(CHARANUM-1):화염 = 50
			BASE:(CHARANUM-1):빙결 = 50
			BASE:(CHARANUM-1):전격 = 50
			BASE:(CHARANUM-1):충격 = 50
			BASE:(CHARANUM-1):신경 = 0
			BASE:(CHARANUM-1):정신 = 0
			BASE:(CHARANUM-1):파마 = 0
			BASE:(CHARANUM-1):주살 = 0
			BASE:(CHARANUM-1):지변 = 50
			BASE:(CHARANUM-1):수격 = 50
			BASE:(CHARANUM-1):질풍 = 50
			BASE:(CHARANUM-1):중력 = 50
			BASE:(CHARANUM-1):핵열 = 50
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
			CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
		CALL MESSAGE_WINDOW_D, "나오미", "후우…조금 힘들었네./이게 불완전이라는 거니까……"
		CALL MESSAGE_WINDOW_D, "나오미", "가능하면 사역마로 삼고 싶었는데……/조금 무리였겠네."
		CALL MESSAGE_WINDOW_D, "나오미", "그건 그렇고, 계획상의 메인 시스템을/배치하는 모양인데/이정도 공간이 필요한건가"
		CALL MESSAGE_WINDOW_D, "나오미", "마니투…/분명 그런 이름이었어……"
		CALL MESSAGE_WINDOW_D, "목소리", "어리석은 인간이여……/신이 이정도로 죽을 것이라 생각한 건가……/자신의 어리석음을 후회하며 죽어라……"
		CALL MESSAGE_WINDOW_D, "", "＞티아마트가 있던 장소에 강한 힘이 빨려들고 있다……！"
		CALL MESSAGE_WINDOW_D, "나오미", "마, 말도 안돼, 우리들이 이겼을텐데……"
		CALL MESSAGE_WINDOW_D, "나오미", "수, 숨이……이대로라면……"
		CALL MESSAGE_WINDOW_D, "", "＞몽롱해져가는 의식 속에서, 당신은 토라에스트 스톤으로 나오미와 함께 탈출했다."
		CALL MESSAGE_WINDOW_D, "", "………/……/…"
		CALL MESSAGE_WINDOW_D, "", "당신과 나오미는 니카미몬지하에서 탈출했다"
		CALL MESSAGE_WINDOW_D, "나오미", "어떻게 살아 돌아왔네……/당신 덕분이야. 고마워."
		CALL MESSAGE_WINDOW_D, "나오미", "…당신이라면 신용할 수 있을 것 같아/도와줬으면 하는 일이 있어/이쪽에서 의뢰를 낼 테니까 가능하다면 받아줄래?"
		CALL MESSAGE_WINDOW_D, "", "＞아무래도 나오미로부터 의뢰에 대한 이야기가 있는 모양이다. 그녀와 헤어져 보수를 받았다./계좌에 ￥30000이 지불되었고, 명성 100을 얻었다"
		MONEY += 30000
		FLAG:명성 += 100
		FLAG:탈출스킬금지 = 0
		LOCAL = GETCHARA([[キャラ:나오미]])
		SIF LOCAL >= 0 && CFLAG:LOCAL:引継ぎ횟수 == 0
		CALL DEL_GUEST, LOCAL, "큰곰자리별의궁", "알즈・록", "백칠겁팔식철귀", "맥시밀리언", "라우린의반지", "신기루부츠", "도사뱃지"
		던전フラグ:95:0 = 2
		FLAG:탈출 = 1
		CASE 2
		CALL MESSAGE_WINDOW_D, "나오미", "그러네, 신중히 정하자."
		ENDSELECT
	ENDIF

	ENDSELECT
	ENDSELECT
RETURN 0
;-----------------------------------------------------------------------
;タイル이벤트
;-----------------------------------------------------------------------
@FLOOR_95, ARG
#LOCALSIZE 4
#LOCALSSIZE 2
SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	;ワープゾーン
	CASE 0
		RETURN 0
	CASEELSE
		;ワープゾーン関係
		;100の位がID
		;10の位が0なら上層に、1なら下層に行く
		LOCAL = DA:(FLAG:現X):(FLAG:現Y) / 10 % 10 ? DA:(FLAG:現X):(FLAG:現Y) -10 # DA:(FLAG:現X):(FLAG:現Y) + 10
		LOCAL:1 = DA:(FLAG:現X):(FLAG:現Y) / 10 % 10 ? FLAG:現M - 1 # FLAG:現M + 1
		CALL SHOW_PICTURE, "EMPTY"
		CALL DUNGEON_WORP_ID, LOCAL:1, LOCAL, 1
ENDSELECT
;-----------------------------------------------------------------------
;ゲストキャラ
;-----------------------------------------------------------------------
@SET_GUEST_D95
	CALL ADD_GUEST_COMPANION([[キャラ:나오미]], 300)
	SIF RESULT:1 >= 0
		PRINTFORMW %조사처리(CALLNAME:(RESULT:1), "를")% COMP로 되돌렸으므로 주의해주세요
	;新規加入ならRESULT:2は1、引継ぎキャラならRESULT:2は0
	IF RESULT:2 == 1
		LOCAL = GETCHARA([[キャラ:나오미]])
		BASE:LOCAL:ＭＡＧ = 50000
	ENDIF
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL

;=======================================================================
;필요레벨눈安
;권장LV 雑물고기최저LV 雑물고기最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_95
RETURN 40, 35 , 42, 50
;=======================================================================
;인카운터율
;=======================================================================
@ENCOUNT_RATE_95
	FLAG:인카운터율 = FLAG:未遭遇歩数*5 +3
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_95
IF RAND:100 < FLAG:인카운터율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_95
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_95, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_95, ARG
SELECTCASE FLAG:現M
CASE 0
SELECTCASE RAND:7
	CASE IS < 1
		RETURN [[キャラ:드베르가]], 35
	CASE IS < 2
		RETURN [[キャラ:누에]],35
	CASE IS < 3
		RETURN [[キャラ:다프네]], 35
	CASE IS < 4
		RETURN [[キャラ:알라우네]], 35
	CASE IS < 5
		RETURN [[キャラ:스튐팔리데스]], 38
	CASE IS < 6
		RETURN [[キャラ:웬디고]], 36
	CASE IS < 7
		RETURN [[キャラ:콥스]], 35
ENDSELECT

CASE 1
SELECTCASE RAND:7
	CASE IS < 1
		RETURN [[キャラ:미즈치]], 39
	CASE IS < 2
		RETURN [[キャラ:오르트로스]], 39
	CASE IS < 3
		RETURN [[キャラ:틀랄테쿠흐틀리]], 39
	CASE IS < 4
		RETURN [[キャラ:쿠드락]], 39
	CASE IS < 5
		RETURN [[キャラ:발로르]], 37
	CASE IS < 6
		RETURN [[キャラ:카마조츠]], 37
	CASE IS < 7
		RETURN [[キャラ:쿠치사케]], 38
ENDSELECT

CASE 2 , 3 , 4
SELECTCASE RAND:6
	CASE IS < 1
		RETURN [[キャラ:파이몬]], 42
	CASE IS < 2
		RETURN [[キャラ:그레이맨]], 42
	CASE IS < 3
		RETURN [[キャラ:무슈후슈]],40
	CASE IS < 4
		RETURN [[キャラ:비비안]], 43
	CASE IS < 5
		RETURN [[キャラ:스코그스라]], 42
	CASE IS < 6
		RETURN [[キャラ:치치미틀]], 41
ENDSELECT

ENDSELECT

;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_95
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:누에]] , 3 + RAND:10 , CSVBASE([[キャラ:누에]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:쿠드락]] , 3 + RAND:10 , CSVBASE([[キャラ:쿠드락]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:무슈후슈]] , 3 + RAND:10 , CSVBASE([[キャラ:무슈후슈]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT

