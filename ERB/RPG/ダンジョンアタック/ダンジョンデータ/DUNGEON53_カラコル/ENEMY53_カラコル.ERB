;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_53
RETURN 31, 28, 31, 35
;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_53
IF DA:(FLAG:현X):(FLAG:현Y) == 11
	FLAG:인카운트율 = 0
ELSE
	FLAG:인카운트율 = 5 * MAX(FLAG:미조우걸음수 - 5 , 0)
ENDIF
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_53
IF DA:(FLAG:현X):(FLAG:현Y) == 11
	FLAG:인카운트율 = 0
	RETURN 0
ENDIF
IF RAND:100 < FLAG:인카운트율
	IF !RAND:3
		SELECTCASE FLAG:현M
			;LV42~45
			CASE 0,1,2,3,4
				SELECTCASE RAND:100
					CASE IS < 30
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 42 + RAND:2 * 3, 0
					CASE IS < 50
						CALL SET_ENEMY,8, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
					CASE IS < 70
						CALL SET_ENEMY,7, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 42 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 42 + RAND:2 * 3, 0
				ENDSELECT
			;LV45~48
			CASE 5,6,7,8,9
				SELECTCASE RAND:100
					CASE IS < 20
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
					CASE IS < 40
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,7, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
					CASE IS < 80
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 45 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 45 + RAND:2 * 3, 0
				ENDSELECT
			;LV50~53
			CASE 9,10,11,12,13
				SELECTCASE RAND:100
					CASE IS < 15
						CALL SET_ENEMY,7, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
					CASE IS < 30
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 50 + RAND:2 * 3, 0
					CASE IS < 50
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 50 + RAND:2 * 3, 0
					CASE IS < 80
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 50 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 50 + RAND:2 * 3, 0
				ENDSELECT
			;LV54
			CASE 14,15,16,17,18
				SELECTCASE RAND:100
					CASE IS < 10
						CALL SET_ENEMY,7, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
					CASE IS < 30
						CALL SET_ENEMY,7, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
					CASE IS < 52
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
					CASE IS < 75
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
					CASE IS < 90
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,7, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍ졸다트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,12, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓ슛체]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:코만단트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,16, [[キャラ:Ｖ크래프트]], 52 + RAND:2 * 3, 0
				ENDSELECT
		ENDSELECT
	ELSEIF RAND:2
		LOCAL:1 = [[キャラ:황소가면Ｒ]]
		LOCAL:2 = [[キャラ:사자가면Ｒ]]
		LOCAL:3 = [[キャラ:전갈가면Ｒ]]
		LOCAL:4 = [[キャラ:물병가면Ｒ]]
		FOR LOCAL, 1, 5
			SWAP LOCAL:(RAND:4+1), LOCAL:(RAND:4+1)
		NEXT
		;LOCAL:5 テーブル패턴
		;LOCAL:6 레벨
		SELECTCASE FLAG:현M
			;LV45
			CASE 0,1,2,3,4
				SELECTCASE RAND:100
					CASE IS < 20
						LOCAL:5 = 0
					CASE IS < 40
						LOCAL:5 = 1
					CASE IS < 55
						LOCAL:5 = 2
					CASE IS < 70
						LOCAL:5 = 3
					CASE IS < 0
						LOCAL:5 = 4
					CASE IS < 85
						LOCAL:5 = 5
					CASE IS < 0
						LOCAL:5 = 6
					CASE IS < 100
						LOCAL:5 = 7
					CASE IS < 0
						LOCAL:5 = 8
					CASE IS < 0
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 40 + RAND:2 * 3
			;LV48
			CASE 5,6,7,8,9
				SELECTCASE RAND:100
					CASE IS < 15
						LOCAL:5 = 0
					CASE IS < 0
						LOCAL:30 = 1
					CASE IS < 45
						LOCAL:5 = 2
					CASE IS < 60
						LOCAL:5 = 3
					CASE IS < 75
						LOCAL:5 = 4
					CASE IS < 80
						LOCAL:5 = 5
					CASE IS < 85
						LOCAL:5 = 6
					CASE IS < 95
						LOCAL:5 = 7
					CASE IS < 100
						LOCAL:5 = 8
					CASE IS < 0
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 42 + RAND:2 * 3
			;LV51
			CASE 9,10,11,12,13
				SELECTCASE RAND:100
					CASE IS < 10
						LOCAL:5 = 0
					CASE IS < 20
						LOCAL:5 = 1
					CASE IS < 30
						LOCAL:5 = 2
					CASE IS < 40
						LOCAL:5 = 3
					CASE IS < 50
						LOCAL:5 = 4
					CASE IS < 60
						LOCAL:5 = 5
					CASE IS < 70
						LOCAL:5 = 6
					CASE IS < 80
						LOCAL:5 = 7
					CASE IS < 90
						LOCAL:5 = 8
					CASE IS < 100
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 48 + RAND:2 * 3
			;LV54
			CASE 14,15,16,17,18
				SELECTCASE RAND:100
					CASE IS < 0
						LOCAL:5 = 0
					CASE IS < 15
						LOCAL:39 = 1
					CASE IS < 0
						LOCAL:5 = 2
					CASE IS < 30
						LOCAL:5 = 3
					CASE IS < 45
						LOCAL:5 = 4
					CASE IS < 0
						LOCAL:5 = 5
					CASE IS < 60
						LOCAL:5 = 6
					CASE IS < 0
						LOCAL:5 = 7
					CASE IS < 80
						LOCAL:5 = 8
					CASE IS < 100
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 50 + RAND:2 * 3
		ENDSELECT
		SELECTCASE LOCAL:5
			;１열一色
			CASE 0
				FOR LOCAL, 7, 12
					CALL SET_ENEMY, LOCAL, LOCAL:1, LOCAL:6, 0
				NEXT
			;二列一色
			CASE 1
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:1, LOCAL:6, 0
				NEXT
			;１열二色
			CASE 2
				FOR LOCAL, 7, 12
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + LOCAL % 2), LOCAL:6, 0
				NEXT
			;二列二色
			CASE 3
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + (LOCAL > 11)), LOCAL:6, 0
				NEXT
			;二列二色B
			CASE 4
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + LOCAL % 2), LOCAL:6, 0
				NEXT
			;三色１열
			CASE 5
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 9, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:1, LOCAL:6, 0
			;三色二列
			CASE 6
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 9, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 14, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:1, LOCAL:6, 0
			;4色１열
			CASE 7
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:4, LOCAL:6, 0
			;4色二列A
			CASE 8
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:4, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:4, LOCAL:6, 0
			;4色2列B
			CASE 9
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:4, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:4, LOCAL:6, 0
		ENDSELECT
		CALL ADJUST_IMPERIAL
		CALL ADJUST_KAMEN
	ELSE
		CALL ENEMY_TABLE
	ENDIF
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_53
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_53, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_53, ARG
SELECTCASE FLAG:현M
;LV45
	CASE 0,1,2,3,4
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:타마모]],38 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:오토히메]], 42+ RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:라이라]],39 + RAND:2 * 3
			CASE IS < 75
				RETURN [[キャラ:청우괴]], 37 + RAND:2 * 3
			CASE IS < 90
				RETURN [[キャラ:카마조츠]], 40 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:레기온]],40  + RAND:2 * 3
		ENDSELECT
	;LV48
	CASE 5,6,7,8,9
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:버쳐]],44 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:서큐버스]],43 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:타마모]],42 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:틀랄테쿠흐틀리]],46 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:베르세르크]],45 + RAND:2 * 3
		ENDSELECT
	;LV51
	CASE 9,10,11,12,13
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:틀라솔테오틀]], 46 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:브리이트]], 50 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:스핑크스]],49 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:틀랄테쿠흐틀리]], 48 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:쿠라마텐구]],48 + RAND:2 * 3
		ENDSELECT
	;LV54
	CASE 14,15,16,17,18
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:틀라솔테오틀]], 50 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:스로네]],51 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:바스테트]], 52 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:틀랄테쿠흐틀리]],50 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:케찰코아틀]], 55 
		ENDSELECT
ENDSELECT
;=======================================================================
;가면당원스테이터스보정
;=======================================================================
@ADJUST_KAMEN
FOR LOCAL:1, 7 , 17
	LOCAL = POS(LOCAL:1)
	SIF LOCAL < 0
		CONTINUE
	SELECTCASE NO:LOCAL
		CASE [[キャラ:황소가면Ｒ]]
			CFLAG:LOCAL:속도보정 = -10
		CASE [[キャラ:사자가면Ｒ]]
			CFLAG:LOCAL:속도보정 = -10
		CASE [[キャラ:전갈가면Ｒ]]
			CFLAG:LOCAL:속도보정 = -10
		CASE [[キャラ:물병가면Ｒ]]
			CFLAG:LOCAL:속도보정 = -10
		CASE [[キャラ:조커]]
			CSTR:LOCAL:사고패턴 = 조커
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 120 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 20
			CFLAG:LOCAL:행동횟수 = 2
		CASE [[キャラ:엔젤조커]]
			CSTR:LOCAL:사고패턴 = 엔젤조커
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 120 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 20
			CFLAG:LOCAL:행동횟수 = 2
		CASE [[キャラ:메탈・맘]]
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 60 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 12 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = -20
			CFLAG:LOCAL:COOP피데미지보정 = 100
			CFLAG:LOCAL:행동횟수 = 2
	ENDSELECT
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL
NEXT
;=======================================================================
;제국병스테이터스보정
;=======================================================================
@ADJUST_IMPERIAL
FOR LOCAL:1, 7 , 17
	LOCAL = POS(LOCAL:1)
	SIF LOCAL < 0
		CONTINUE
	SELECTCASE NO:LOCAL
		CASE [[キャラ:Ｓ졸다트]]
			CSTR:LOCAL:사고패턴 = 졸다트
			CFLAG:LOCAL:물리피데미지보정 = 100
			CFLAG:LOCAL:마법피데미지보정 = -50
		CASE [[キャラ:Ｍ졸다트]]
			CSTR:LOCAL:사고패턴 = 졸다트
			CFLAG:LOCAL:물리피데미지보정 = 100
			CFLAG:LOCAL:마법피데미지보정 = -75
		CASE [[キャラ:Ｓ슛체]]
			CSTR:LOCAL:사고패턴 = シャルフシュッチェ
			CFLAG:LOCAL:물리피데미지보정 = 150
			CFLAG:LOCAL:마법피데미지보정 = -75
		CASE [[キャラ:Ｖ크래프트]]
			CSTR:LOCAL:사고패턴 = ヴィンス크래프트
		CASE [[キャラ:코만단트]]
			CSTR:LOCAL:사고패턴 = 코만단트
			CFLAG:LOCAL:물리피데미지보정 = 100
			CFLAG:LOCAL:마법피데미지보정 = -75
		CASE [[キャラ:롱기누스１１]], [[キャラ:롱기누스１２]], [[キャラ:롱기누스１３]]
			CSTR:LOCAL:사고패턴 = 聖創騎士団１
			;HP5000 MP1500
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 50 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 15 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 15
		CASE [[キャラ:롱기누스１０]], [[キャラ:롱기누스９]], [[キャラ:롱기누스８]]
			CSTR:LOCAL:사고패턴 = 聖創騎士団２
			;HP6000 MP2000
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 60 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 20 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 20
		CASE [[キャラ:롱기누스５]], [[キャラ:롱기누스６]], [[キャラ:롱기누스７]]
			CSTR:LOCAL:사고패턴 = 聖創騎士団３
			;HP7000 MP2500
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 70 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 25 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 20
		CASE [[キャラ:롱기누스２]], [[キャラ:롱기누스３]], [[キャラ:롱기누스４]]
			CSTR:LOCAL:사고패턴 = 聖創騎士団４
			;HP4000 MP3000
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 80 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:속도보정 = 20
		CASE [[キャラ:롱기누스１]]
			CSTR:LOCAL:사고패턴 = 聖創騎士団５
			LOCAL:2 = FLAG:전투난이도 - 3 > 0 ? 100 + (FLAG:전투난이도 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 100 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
	ENDSELECT
	CALL SET_BATTLE_STATUS(LOCAL, MAXBASE:LOCAL:공격, "총공격")
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL
NEXT
;=======================================================================
;제국병사고패턴
;코만단트がいる場合、指令を出す
;なお、자폭は指令があったときのみ
;いない場合、50％の확률로逃げる
;=======================================================================
@SET_ACTION_졸다트, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
SIF CFLAG:ARG:입력행동 == [[스킬:도주]] || CFLAG:ARG:입력행동 == [[스킬:자폭]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:코만단트]]) && RAND:2
	CFLAG:ARG:입력행동 = [[스킬:도주]]
	RETURN 0
ENDIF
SELECTCASE RAND:100
	CASE IS < 50
		CFLAG:ARG:입력행동 = [[스킬:ＧＵＮ]]
	CASE IS < 70
		CFLAG:ARG:입력행동 = ABL:ARG:스킬1
	CASE IS < 90
		CFLAG:ARG:입력행동 = ABL:ARG:스킬2
	CASEELSE
		CFLAG:ARG:입력행동 = ABL:ARG:스킬3
ENDSELECT
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = [[스킬:ＧＵＮ]]
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1

@SET_ACTION_シャルフシュッチェ, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
SIF CFLAG:ARG:입력행동 == [[스킬:도주]] || CFLAG:ARG:입력행동 == [[스킬:자폭]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:코만단트]]) && RAND:2
	CFLAG:ARG:입력행동 = [[스킬:도주]]
	RETURN 0
ENDIF

SELECTCASE RAND:100
	CASE IS < 50
		CFLAG:ARG:입력행동 = [[스킬:ＧＵＮ]]
	CASE IS < 70
		CFLAG:ARG:입력행동 = ABL:ARG:스킬1
	CASE IS < 90
		CFLAG:ARG:입력행동 = ABL:ARG:스킬2
	CASEELSE
		CFLAG:ARG:입력행동 = ABL:ARG:스킬3
ENDSELECT
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = [[스킬:ＧＵＮ]]
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1

@SET_ACTION_ヴィンス크래프트, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
SIF CFLAG:ARG:입력행동 == [[스킬:도주]] || CFLAG:ARG:입력행동 == [[스킬:자폭]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:코만단트]]) && RAND:2
	CFLAG:ARG:입력행동 = [[스킬:도주]]
	RETURN 0
ENDIF
SELECTCASE RAND:100
	CASE IS < 30
		CFLAG:ARG:입력행동 = [[스킬:스파이럴밤]]
	CASE IS < 60
		CFLAG:ARG:입력행동 = [[스킬:스턴그레네이드]]
	CASE IS < 75
		CFLAG:ARG:입력행동 = [[스킬:독가스]]
	CASE IS < 90
		CFLAG:ARG:입력행동 = [[스킬:신경가스]]
	CASEELSE
		CFLAG:ARG:입력행동 = [[스킬:마반경]]
ENDSELECT
;アクション実行不能か랜덤でガードにする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
IF RESULT == 0 || RAND:4 == 0
	CFLAG:ARG:입력행동 = -1
	CFLAG:ARG:방어플래그 = 1
	RETURN 1
ENDIF
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
@SET_ACTION_코만단트, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
TSTR = 
;指令
IF RAND:3 == 0 && FLAG:경과턴수 > 1
	TSTR = 特攻指令
ELSE
	IF RAND:2 && 현HP비율(ARG) < 30
		TSTR = 철수지령
	ELSE
		SIF RAND:3 == 0
			TSTR = 돌격지령
	ENDIF
ENDIF
IF STRLENS(TSTR)
	CFLAG:ARG:입력행동 = [[스킬:ＤＵＭＭＹ]]
	CFLAG:ARG:타겟 = 22
	RETURN 1
ENDIF
IF RAND:2
	CFLAG:ARG:입력행동 = [[스킬:싱글샷]]
ELSE
	CFLAG:ARG:입력행동 = [[스킬:연속사격]]
ENDIF
;アクション実行不能か랜덤でガードにする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
IF RESULT == 0 || RAND:4 == 0
	CFLAG:ARG:입력행동 = -1
	CFLAG:ARG:방어플래그 = 1
	RETURN 1
ENDIF
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
;----------------------------
;周期行動　３속성공격は５ターンに一回づつ来るだけなので壁で余裕なきもする
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;반사も有効。とくにガイスティブ
;----------------------------
@SET_ACTION_聖創騎士団１, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	IF RAND:2
		CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 0
	SELECTCASE (FLAG:경과턴수 + NO:ARG) % 5
		CASE 0
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
				CFLAG:ARG:행동횟수 = 2
		CASE 1
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASE 2
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
			CFLAG:ARG:행동횟수 = 2
		CASE 3
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
		CASE 4
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 1
	SELECTCASE (FLAG:경과턴수 + NO:ARG) % 5
		CASE 2
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASEELSE
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDSELECT
	CFLAG:ARG:행동횟수 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1

;----------------------------
;周期行動　３속성공격は５ターンに一回づつ来るだけなので壁で余裕なきもする
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;----------------------------
@SET_ACTION_聖創騎士団２, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	IF RAND:3
		CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
	ELSEIF RAND:2
		CFLAG:ARG:입력행동 = ABL:ARG:스킬5
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 0
	SELECTCASE (FLAG:경과턴수 + NO:ARG) % 5
		CASE 0
			CFLAG:ARG:입력행동 = ABL:ARG:스킬5
		CASE 1
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASE 2
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
			CFLAG:ARG:행동횟수 = 2
		CASE 3
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
			CFLAG:ARG:행동횟수 = 2
		CASE 4
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 1
	SELECTCASE (FLAG:경과턴수 + NO:ARG) % 5
		CASE 2
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASEELSE
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDSELECT
	CFLAG:ARG:행동횟수 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
@ENEMY_BATTLE_MESSAGE_K4023, ARG
IF CFLAG:ARG:입력행동 == [[스킬:ＤＵＭＭＹ]]
	PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 아군에게 %TSTR%을(를) 내밀었다！
	FOR LOCAL, 7, 17
		LOCALS = 포지션{LOCAL}
		SIF FLAG:LOCALS < 0
			CONTINUE
		IF TSTR == "돌격지령"
			CFLAG:(FLAG:LOCALS):공격강화 += 4
			SIF CFLAG:(FLAG:LOCALS):공격강화 > 32
				CFLAG:(FLAG:LOCALS):공격강화 = 32
			CFLAG:(FLAG:LOCALS):방어강화 += 4
			SIF CFLAG:(FLAG:LOCALS):방어강화 > 32
				CFLAG:(FLAG:LOCALS):방어강화 = 32
			CFLAG:(FLAG:LOCALS):마법위력강화 += 4
			SIF CFLAG:(FLAG:LOCALS):마법위력강화 > 32
				CFLAG:(FLAG:LOCALS):마법위력강화 = 32
			CFLAG:(FLAG:LOCALS):명중강화 += 4
			SIF CFLAG:(FLAG:LOCALS):명중강화 > 32
				CFLAG:(FLAG:LOCALS):명중강화 = 32
				CFLAG:(FLAG:LOCALS):회피강화 += 4
			SIF CFLAG:(FLAG:LOCALS):회피강화 > 32
				CFLAG:(FLAG:LOCALS):회피강화 = 32
		ELSEIF TSTR == "철수지령"
			SIF FLAG:LOCALS != ARG
				CFLAG:(FLAG:LOCALS):입력행동 = [[스킬:도주]]
				CALL RANDOM_TARGET, FLAG:LOCALS, CFLAG:ARG:입력행동
		ELSE
			IF NO:(FLAG:LOCALS) == [[キャラ:Ｍ졸다트]] || NO:(FLAG:LOCALS) == [[キャラ:Ｓ졸다트]]
				CFLAG:(FLAG:LOCALS):입력행동 = [[스킬:자폭]]
				CALL RANDOM_TARGET, FLAG:LOCALS, CFLAG:(FLAG:LOCALS):입력행동
			ENDIF
		ENDIF
	NEXT
	IF TSTR == "돌격지령"
		PRINTFORMW 적의 모든 능력이 올라갔다！
	ELSEIF TSTR == "철수지령"
		CFLAG:ARG:도주플래그 = 1
		PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 도망쳤다！
	ENDIF
ENDIF
;----------------------------
;周期行動　６속성に증가。サブは中랭크
;周期見るのはわりとむずいけど、스킬増えた分반사が使いやすく
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;----------------------------
@SET_ACTION_聖創騎士団３, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	IF !RAND:4
		CFLAG:ARG:입력행동 = ABL:ARG:스킬1
	ELSEIF !RAND:3
		CFLAG:ARG:입력행동 = ABL:ARG:스킬2
	ELSEIF RAND:2
		CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 0
	SELECTCASE (FLAG:경과턴수 + NO:ARG) % 8
		CASE 0
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
		CASE 1
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASE 2
			CFLAG:ARG:입력행동 = ABL:ARG:스킬2
			CFLAG:ARG:행동횟수 = 2
		CASE 3
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
		CASE 4
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
		CASE 5
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
			CFLAG:ARG:행동횟수 = 2
		CASE 6
			CFLAG:ARG:입력행동 = ABL:ARG:스킬2
			CFLAG:ARG:행동횟수 = 2
		CASE 7
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 1
	CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:롱기누스카피]] # [[스킬:ＭＧ３４]]
	CFLAG:ARG:행동횟수 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
;----------------------------
;9ターン周期　他より랜덤性が高めだが
;속성스킬のタイミングは固定
;使うターンは3つ重なるので注意
;반사と壁は使いにくくなってる
;
;DDMと페르소나사용자とシフターは스킬ターンにあわせて行動すればかなり有利
;스킬ターン以外は물리対策にテトラ有利・ガイスティブ반사は相変わらず有効
;전격はめは相変わらず有効
;穴はこのへん
;----------------------------
@SET_ACTION_聖創騎士団４, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	SELECTCASE RAND:100
		CASE IS < 50
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
		CASE IS < 25
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASEELSE
			CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 0
	SELECTCASE FLAG:경과턴수 % 9
		CASE 0
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
		CASE 3
			CFLAG:ARG:입력행동 = ABL:ARG:스킬2
		CASE 6
			CFLAG:ARG:입력행동 = ABL:ARG:스킬3
		CASEELSE
			SELECTCASE RAND:100
				CASE IS < 20
					CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
				CASE IS < 60
					CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
				CASEELSE
					CFLAG:ARG:입력행동 = [[스킬:ＭＧ３４]]
			ENDSELECT
			CFLAG:ARG:행동횟수 = RAND(1, 3)
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 1
	CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:롱기누스카피]] # [[스킬:ＭＧ３４]]
	CFLAG:ARG:행동횟수 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
@SET_ACTION_聖創騎士団５, ARG
#LOCALSIZE 1
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	SELECTCASE RAND:100
		CASE IS < 50
			CFLAG:ARG:입력행동 = [[스킬:가이스티브블릿츠]]
		CASE IS < 30
			CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
		CASEELSE
			CFLAG:ARG:입력행동 = [[스킬:메기도라온]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 0
	SELECTCASE FLAG:경과턴수 % 9
		CASE 0
			CFLAG:ARG:입력행동 = ABL:ARG:스킬1
		CASE 1
			CFLAG:ARG:입력행동 = [[스킬:돌격의봉화]]
		CASE 3
			CFLAG:ARG:입력행동 = ABL:ARG:스킬2
		CASE 5
			CFLAG:ARG:입력행동 = [[스킬:메기도라온]]
		CASE 6
			CFLAG:ARG:입력행동 = ABL:ARG:스킬3
		CASE 8
			CFLAG:ARG:입력행동 = [[스킬:메기도라온]]
		CASEELSE
			CFLAG:ARG:입력행동 = RAND:3 ? [[스킬:롱기누스카피]] # [[스킬:가이스티브블릿츠]]
	ENDSELECT
ELSEIF CFLAG:ARG:행동한횟수 == 1
	CFLAG:ARG:입력행동 = [[스킬:롱기누스카피]]
	FOR LOCAL, 1, 7
		SIF POS(LOCAL) >= 0 && CFLAG:POS(LOCAL):상태이상 == GET_STATE_NUM("SHOCK")
			CFLAG:ARG:입력행동 = [[스킬:나이스・샷]]
	NEXT
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
@SET_ACTION_조커, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
IF CFLAG:ARG:１more플래그 > 0
	CFLAG:ARG:입력행동 = [[스킬:요화열풍]]
ELSEIF CFLAG:ARG:행동한횟수 == 0
	IF CFLAG:ARG:집중플래그
		CFLAG:ARG:입력행동 = [[스킬:도화일섬]]
	ELSE
		SELECTCASE RAND:100
			CASE IS < 10
				CFLAG:ARG:입력행동 = [[스킬:백화요란]]
			CASE IS < 20
				CFLAG:ARG:입력행동 = [[스킬:도화일섬]]
			CASE IS < 60
				CFLAG:ARG:입력행동 = [[스킬:요화열풍]]
			CASEELSE
				CFLAG:ARG:입력행동 = 0
		ENDSELECT
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 1
	FOR LOCAL, GETNUM(CFLAG, "공격강화"), GETNUM(CFLAG, "BS부착률강화") + 1
		IF CFLAG:ARG:LOCAL < -8
			CFLAG:ARG:입력행동 = [[스킬:데・쿤다]]
			CFLAG:ARG:타겟 = 22
			CFLAG:ARG:행동횟수 = 3
			RETURN 1
		ENDIF
	NEXT
	IF CFLAG:ARG:집중플래그
		CFLAG:ARG:입력행동 = [[스킬:선풍진]]
	ELSE
		SELECTCASE RAND:100
			CASE IS < 20
				CFLAG:ARG:입력행동 = [[스킬:컨센트레이트]]
			CASE IS < 35
				CFLAG:ARG:입력행동 = [[스킬:백화요란]]
			CASE IS < 50
				CFLAG:ARG:입력행동 = [[스킬:도화일섬]]
			CASE IS < 75
				CFLAG:ARG:입력행동 = [[스킬:요화열풍]]
			CASEELSE
				CFLAG:ARG:입력행동 = 0
		ENDSELECT
	ENDIF
ELSE
	CFLAG:ARG:입력행동 = [[스킬:백화요란]]
	CFLAG:ARG:행동횟수 = 2
ENDIF

;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1

@SET_ACTION_엔젤조커, ARG
;입력행동を-1と타겟を-1にしておく
CFLAG:ARG:입력행동 = -1
CFLAG:ARG:타겟 = -1
;HP25%以下から3回行動
SIF 현HP비율(ARG) <= 25
	CFLAG:ARG:행동횟수 = 3
IF !GETBIT(TFLAG:알파블라스터, 1)
	CFLAG:ARG:입력행동 = [[스킬:알파블라스터]]
ELSE
	SELECTCASE TFLAG:435 % 12
		CASE 0
			CFLAG:ARG:입력행동 = [[스킬:갈다인]]
		CASE 1
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:티없는위광]] # 0
		CASE 2
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:성왕광림검]] # 0
		CASE 3
			CFLAG:ARG:입력행동 = [[스킬:아쿠아다인]]
		CASE 4
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:성왕광림검]] # 0
		CASE 5
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:랜더마이저]] # 0
		CASE 6
			CFLAG:ARG:입력행동 = [[스킬:아기다인]]
		CASE 7
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:성왕광림검]] # 0
		CASE 8
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:티없는위광]] # 0
		CASE 9
			CFLAG:ARG:입력행동 = [[스킬:마그다인]]
		CASE 10
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:랜더마이저]] # 0
		CASE 11
			CFLAG:ARG:입력행동 = RAND:2 ? [[스킬:성왕광림검]] # 0
	ENDSELECT
	TFLAG:435++
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
SIF RESULT == 0
	CFLAG:ARG:입력행동 = 0
;ここまで타겟が決まってなかったら、랜덤타겟をよんで決定
SIF CFLAG:ARG:타겟 == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1


;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_53
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:4
	CASE 0
		RETURN [[キャラ:스로네]] , 3 + RAND:10 , CSVBASE([[キャラ:스로네]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:레기온]] , 3 + RAND:10 , CSVBASE([[キャラ:레기온]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:카마조츠]] , 3 + RAND:10 , CSVBASE([[キャラ:카마조츠]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:프린시펄리티]] , 3 + RAND:10 , CSVBASE([[キャラ:프린시펄리티]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
