;=======================================================================
;데바・유가
;ボス　초인 칸도리 타카히사
;던전ナンバー11 MAP0-5
;=======================================================================
;던전플래그:(FLAG:현던전):0 = 初回進入フラグ
;던전플래그:(FLAG:현던전):1-4 = 宝箱
;던전플래그:(FLAG:현던전):5 = 5F北東のスイッチ
;던전플래그:(FLAG:현던전):6 = 5F中央のスイッチ
;던전플래그:(FLAG:현던전):7 = クリアフラグ (1:ファントムに報告、この件は종료 2:마키を救うルート 3:ゆきのルート)
;
;던전플래그:(FLAG:현던전):8 = 아야세・에리・マキ(・ゆきの)の상태
;										1:いずれかの和解ルートで、全員仲間 
;										2:3人奴隷化 (これまであまり関わっていない상태で데바・유가内で黒옷倒して確保した)
;										3:3人해방 (これまであまり関わっていない상태で데바・유가内の3人を助けて플라즈마소드もらった)
;										4:3人SSSに강간された (これまであまり関わっていない상태で데바・유가内でも放置した)
;
;SEBEC빌딩のフラグ
;던전플래그:10:10 = 아야세・에리・マキの상태
;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_11
;SEBEC빌딩クリア
IF 던전플래그:10:9 == 1 && 던전플래그:11:7 == 0
	RETURN 1
ELSE
	RETURN 0
ENDIF

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_11
RESULTS = 데바・유가


;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_11
PRINT 데바・유가
SELECTCASE FLAG:현M
	CASE 0
		PRINTL   １Ｆ
	CASE 1
		PRINTL   ２Ｆ
	CASE 2
		PRINTL   ３Ｆ
	CASE 3
		PRINTL   ４Ｆ
	CASE 4
		PRINTL   ５Ｆ
	CASE 5
		PRINTL   ６Ｆ
	CASEELSE
		PRINTL
ENDSELECT


;=======================================================================
;特殊タイル표시
;=======================================================================
@TILE_MARK_11_1_16_6
RESULTS = Ｔ
@TILE_MARK_11_3_8_6
RESULTS = Ｔ
@TILE_MARK_11_3_13_3
RESULTS = Ｔ
@TILE_MARK_11_0_1_17
RESULTS = Ｔ
@TILE_MARK_ID_11_0_19
RESULTS = Ｅ
@TILE_MARK_ID_11_1_19
RESULTS = Ｅ
@TILE_MARK_ID_11_2_19
RESULTS = Ｅ

;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_11,ARG
FLAG:현M = 0
FLAG:현X = 9
FLAG:현Y = 18
;CALL AUTOMAP
;=======================================================================
;スタート時이벤트
;=======================================================================
@EVENT_DUNGEON_START_11
IF 던전플래그:(FLAG:현던전):0++ == 0
	CALL SHOW_PICTURE, "NONFLOORD", @"%CALLNAME:MASTER%の私室"
	CALL MESSAGE_WINDOW, "", "＞SEBEC 빌딩을 답파하고 잠시 후의 일이었다/＞변함 없이 결계에 갇혀 있어서 침입할 수 없을 미카게쵸에、/＞갑자기, 거대한 성이 나타났다는 정보가 들어왔다" , "/" , , "CENTER"
	CALL MESSAGE_WINDOW, "", "＞이것도 칸도리가 한 짓 일까？/＞팬텀으로부터 나와 있는 미카게쵸의 사건 해결의 의뢰는 삭제되지 않았다/＞내버려두고 가지 않을 수도 없는 일이다" , "/" , , "CENTER"
	CALL MESSAGE_WINDOW, "", "………………/…………/……" , "/" , , "CENTER"
	CALL SHOW_PICTURE, "EMPTY"
	CALL SHOW_PICTURE, "D"
	CALL MESSAGE_WINDOW_D, "", "＞침입해 보니 성의 내부는 보다 한층 이상한 분위기에 싸여 있었다/＞악마가 배회하고 있는 것은 그렇다고쳐도, SEBEC의 사원 같은 사람들이 한결같이、/＞텅 빈 얼굴로 인류에 대한 혐오와 파멸의 소망을 입에 담고있다"
	CALL MESSAGE_WINDOW_D, "", "＞정신조작의 일종일까?/＞그렇다라고 한다면, 이 성에 오래 머무르는 것은 위험하다고 봐야 한다/＞빨리 이 것을 해결하지 않으면 안된다……"
ENDIF

;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_11,ARG,ARG:1
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_11
SELECTCASE FLAG:현M
	CASE 0
	;１階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 111   1   1     1 "
		CALL MAKE_FLOOR_LINE, 2,"   1   11  1 1   1 "
		CALL MAKE_FLOOR_LINE, 3,"   111  1111 11111 "
		CALL MAKE_FLOOR_LINE, 4,"   1111 1  11111 1 "
		CALL MAKE_FLOOR_LINE, 5,"   1  111    1 1 1 "
		CALL MAKE_FLOOR_LINE, 6," 1 1    1 1111 111 "
		CALL MAKE_FLOOR_LINE, 7," 1 1    1 1        "
		CALL MAKE_FLOOR_LINE, 8," 111      111      "
		CALL MAKE_FLOOR_LINE, 9,"   1        1      "
		CALL MAKE_FLOOR_LINE,10," 1111       11  61 "
		CALL MAKE_FLOOR_LINE,11," 1           1   1 "
		CALL MAKE_FLOOR_LINE,12," 11111111    1   1 "
		CALL MAKE_FLOOR_LINE,13,"   1         1   1 "
		CALL MAKE_FLOOR_LINE,14,"   11    E   1   1 "
		CALL MAKE_FLOOR_LINE,15,"   1111  1   1   1 "
		CALL MAKE_FLOOR_LINE,16,"   1  1  1   11111 "
		CALL MAKE_FLOOR_LINE,17," 921 61  2         "
		CALL MAKE_FLOOR_LINE,18,"         8         "
		
		CALL SET_TILE,17,1,던전플래그:(FLAG:현던전):8,0,4

	CASE 1
	;２階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 61    1111 1   11 "
		CALL MAKE_FLOOR_LINE, 2,"  1    1    1   1  "
		CALL MAKE_FLOOR_LINE, 3," 1111  1    1   1  "
		CALL MAKE_FLOOR_LINE, 4,"  111  11   11111  "
		CALL MAKE_FLOOR_LINE, 5,"  111   1   111    "
		CALL MAKE_FLOOR_LINE, 6," 11 11111   111 9  "
		CALL MAKE_FLOOR_LINE, 7,"        1  11 1 2  "
		CALL MAKE_FLOOR_LINE, 8," 1 1111 1111  1111 "
		CALL MAKE_FLOOR_LINE, 9," 1 1  1       1    "
		CALL MAKE_FLOOR_LINE,10," 1111 1       1 7  "
		CALL MAKE_FLOOR_LINE,11,"    1 1       1111 "
		CALL MAKE_FLOOR_LINE,12," 1111 1            "
		CALL MAKE_FLOOR_LINE,13,"   1  1    1       "
		CALL MAKE_FLOOR_LINE,14," 1 1 11  E 1 11111 "
		CALL MAKE_FLOOR_LINE,15," 111 1  1111 1   1 "
		CALL MAKE_FLOOR_LINE,16,"   1 1     111   1 "
		CALL MAKE_FLOOR_LINE,17,"  61 7         121 "
		CALL MAKE_FLOOR_LINE,18,"                   "
		
		;宝箱の設置
		CALL SET_TILE,15,17,던전플래그:(FLAG:현던전):1,0,3

	CASE 2
	;3階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 71    1    111111 "
		CALL MAKE_FLOOR_LINE, 2,"  1 1111       1 1 "
		CALL MAKE_FLOOR_LINE, 3," 1111  1      11 1 "
		CALL MAKE_FLOOR_LINE, 4,"  111  1 111  11 1 "
		CALL MAKE_FLOOR_LINE, 5,"  1      111   1 6 "
		CALL MAKE_FLOOR_LINE, 6," 1111     2    1   "
		CALL MAKE_FLOOR_LINE, 7," 1  11111111   1   "
		CALL MAKE_FLOOR_LINE, 8," 11        1   1   "
		CALL MAKE_FLOOR_LINE, 9,"           1   1   "
		CALL MAKE_FLOOR_LINE,10,"           11111   "
		CALL MAKE_FLOOR_LINE,11,"                   "
		CALL MAKE_FLOOR_LINE,12,"  1111             "
		CALL MAKE_FLOOR_LINE,13,"  1             1  "
		CALL MAKE_FLOOR_LINE,14,"  1      E      1  "
		CALL MAKE_FLOOR_LINE,15,"  1111  1111111111 "
		CALL MAKE_FLOOR_LINE,16,"   1 1           1 "
		CALL MAKE_FLOOR_LINE,17,"  71 1111111111111 "
		CALL MAKE_FLOOR_LINE,18,"                   "
		
		;宝箱の設置
		CALL SET_TILE,9,4,던전플래그:(FLAG:현던전):2,0,3

	CASE 3
	;4階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 111  1111 11 1 1  "
		CALL MAKE_FLOOR_LINE, 2,"   1111  111  111  "
		CALL MAKE_FLOOR_LINE, 3," 1 1     111 9 1   "
		CALL MAKE_FLOOR_LINE, 4," 121      1  2 1   "
		CALL MAKE_FLOOR_LINE, 5," 1 11     11111117 "
		CALL MAKE_FLOOR_LINE, 6,"    1   9     1    "
		CALL MAKE_FLOOR_LINE, 7,"  111   2    11 11 "
		CALL MAKE_FLOOR_LINE, 8,"   1    1111 1   1 "
		CALL MAKE_FLOOR_LINE, 9,"   11    1 1 1 1 1 "
		CALL MAKE_FLOOR_LINE,10,"    1    1 1 111 1 "
		CALL MAKE_FLOOR_LINE,11," 1111      1   1 1 "
		CALL MAKE_FLOOR_LINE,12," 1         1 11111 "
		CALL MAKE_FLOOR_LINE,13," 1 1       6 1   1 "
		CALL MAKE_FLOOR_LINE,14," 1 1         1  11 "
		CALL MAKE_FLOOR_LINE,15," 111         1     "
		CALL MAKE_FLOOR_LINE,16,"  1                "
		CALL MAKE_FLOOR_LINE,17," 111116            "
		CALL MAKE_FLOOR_LINE,18,"                   "

		
		;宝箱の設置
		CALL SET_TILE,1,4,던전플래그:(FLAG:현던전):3,0,3

	CASE 4
	;5階
		FLAG:최대X = 19
		FLAG:최대Y = 19
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1," 1111     1111111  "
		CALL MAKE_FLOOR_LINE, 2,"  1 111     1   11 "
		CALL MAKE_FLOOR_LINE, 3," 11   1111111    1 "
		CALL MAKE_FLOOR_LINE, 4," 1     11111     1 "
		CALL MAKE_FLOOR_LINE, 5," 1     11111     1 "
		CALL MAKE_FLOOR_LINE, 6," 1 11  11111       "
		CALL MAKE_FLOOR_LINE, 7," 1  1              "
		CALL MAKE_FLOOR_LINE, 8," 1 11 1  1         "
		CALL MAKE_FLOOR_LINE, 9," 111  1 111        "
		CALL MAKE_FLOOR_LINE,10,"   1  11111        "
		CALL MAKE_FLOOR_LINE,11," 1 1    111        "
		CALL MAKE_FLOOR_LINE,12," 1 1               "
		CALL MAKE_FLOOR_LINE,13," 1 1       7 11111 "
		CALL MAKE_FLOOR_LINE,14," 111       111     "
		CALL MAKE_FLOOR_LINE,15,"   1         12111 "
		CALL MAKE_FLOOR_LINE,16,"   1           111 "
		CALL MAKE_FLOOR_LINE,17," 111117   61112111 "
		CALL MAKE_FLOOR_LINE,18,"                   "

		CALL SET_TILE,17,5,던전플래그:(FLAG:현던전):5,0,4
		CALL SET_TILE,9,7,던전플래그:(FLAG:현던전):5,1,1
		CALL SET_TILE,6,8,던전플래그:(FLAG:현던전):6,0,4
		CALL SET_TILE,9,10,던전플래그:(FLAG:현던전):6,1,4

		;宝箱の設置
		CALL SET_TILE,16,16,던전플래그:(FLAG:현던전):4,0,3

	CASE 5
	;6階
		FLAG:최대X = 19
		FLAG:최대Y = 19
							    ;0123456789012345678
		CALL MAKE_FLOOR_LINE, 0,"                   "
		CALL MAKE_FLOOR_LINE, 1,"                   "
		CALL MAKE_FLOOR_LINE, 2,"                   "
		CALL MAKE_FLOOR_LINE, 3,"                   "
		CALL MAKE_FLOOR_LINE, 4,"                   "
		CALL MAKE_FLOOR_LINE, 5,"                   "
		CALL MAKE_FLOOR_LINE, 6,"                   "
		CALL MAKE_FLOOR_LINE, 7,"  111              "
		CALL MAKE_FLOOR_LINE, 8,"  111              "
		CALL MAKE_FLOOR_LINE, 9,"  111              "
		CALL MAKE_FLOOR_LINE,10,"   2               "
		CALL MAKE_FLOOR_LINE,11,"   1               "
		CALL MAKE_FLOOR_LINE,12,"   1               "
		CALL MAKE_FLOOR_LINE,13," 11111             "
		CALL MAKE_FLOOR_LINE,14," 1 1 1             "
		CALL MAKE_FLOOR_LINE,15," 1111111111        "
		CALL MAKE_FLOOR_LINE,16," 1 1 1    1        "
		CALL MAKE_FLOOR_LINE,17," 11111    7        "
		CALL MAKE_FLOOR_LINE,18,"                   "

		CALL SET_TILE,3,9,던전플래그:(FLAG:현던전):7,0,4

	CASEELSE





ENDSELECT



;=======================================================================
;[5]調べる　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_11
;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 3
	CALL TREASURE_11
	RETURN 1
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 6
	CALL UPSTAIRS_11
	RETURN RESULT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 7
	CALL DOWNSTAIRS_11
	RETURN RESULT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 9
	CALL DUNGEON_TERMINAL
	RETURN 1
;========
;이벤트の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 4
	IF FLAG:현M == 4 && FLAG:현X == 17 && FLAG:현Y == 5
		CALL MESSAGE_WINDOW_D, "", "＞스위치가 있다"
		CALL INPUT_YN_D, "누른다", "누르지 않는다"
		IF RESULT == 0
			CALL MESSAGE_WINDOW_D, "", "＞스위치를 눌렀다"
			던전플래그:(FLAG:현던전):5 = 1
		ENDIF
	ELSEIF FLAG:현M == 4 && FLAG:현X == 6 && FLAG:현Y == 8
		CALL MESSAGE_WINDOW_D, "", "＞스위치가 있다"
		CALL INPUT_YN_D, "누른다", "누르지 않는다"
		IF RESULT == 0
			CALL MESSAGE_WINDOW_D, "", "＞스위치를 눌렀다"
			던전플래그:(FLAG:현던전):6 = 1
		ENDIF
	ENDIF
	CALL MAKE_FLOOR, FLAG:현던전
	CALL AUTOMAP
ELSE
	CALL MESSAGE_WINDOW_D, "", "＞아무 일도 일어나지 않았다"
	RETURN 0
ENDIF
;=======================================================================
;エレベーター定義
;=======================================================================
@DUNGEON_ELEVATOR_11, ARG
VARSET RESULT, -1
VARSET RESULTS
RESULT:1 = 0
RESULT:2 = 1
RESULT:3 = 2
RESULTS:1 = 1F
RESULTS:2 = 2F
RESULTS:3 = 3F
RETURN -1
;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_11,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 3
	CALL TREASURE_11
	RETURN RESULT

;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 6
	CALL UPSTAIRS_11
	RETURN RESULT

ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 7
	CALL DOWNSTAIRS_11
	RETURN RESULT


ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 9
	CALL DUNGEON_TERMINAL
	RETURN 1
;========
;이벤트の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 4
	IF FLAG:현M == 4 && FLAG:현X == 17 && FLAG:현Y == 5
		CALL MESSAGE_WINDOW_D, "", "＞스위치가 있다"
		CALL INPUT_YN_D, "누른다", "누르지 않는다"
		IF RESULT == 0
			CALL MESSAGE_WINDOW_D, "", "＞스위치를 눌렀다"
			던전플래그:(FLAG:현던전):5 = 1
			CALL MAKE_FLOOR, FLAG:현던전
		ENDIF
	ELSEIF FLAG:현M == 4 && FLAG:현X == 6 && FLAG:현Y == 8
		CALL MESSAGE_WINDOW_D, "", "＞스위치가 있다"
		CALL INPUT_YN_D, "누른다", "누르지 않는다"
		IF RESULT == 0
			CALL MESSAGE_WINDOW_D, "", "＞스위치를 눌렀다"
			던전플래그:(FLAG:현던전):6 = 1
			CALL MAKE_FLOOR, FLAG:현던전
		ENDIF
	ELSEIF FLAG:현M == 4 && FLAG:현X == 9 && FLAG:현Y == 10
		CALL MESSAGE_WINDOW_D, "", "＞떨어지는 구멍이다！"
		CALL DUNGEON_WORP, 3, FLAG:현X, FLAG:현Y
	ELSEIF FLAG:현M == 5 && FLAG:현X == 3 && FLAG:현Y == 9
		;部屋をアナライズし표시更新
		;FOR LOCAL:1, 5, 7
			FOR LOCAL, 1, 6
				CALL SET_FLOOR_ANALYZE(2, FLAG:현던전, FLAG:현M, LOCAL, 6)
			NEXT
		;NEXT
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D, "", "＞거기에는、SEBEC사 사장 칸도리 타카히사가 책상다리를 한 채 앉아서는 혼자 술을 마시고 있다/＞홀짝홀짝 술을 자작하는 모습이 어쩐지 속이 빈 물건 같이 느껴진다"
		CALL MESSAGE_WINDOW_D, "칸도리", "……나를 멈추러 왔는가？/……안심하게/더 이상은 하지 않아, 아무 것도, 아……"
		CALL MESSAGE_WINDOW_D, "", @"＞칸도리는 공허한 미소를 지으며、인류에 대한 혐오와 허무감을 입에 담았다/＞그 이야기의 대부분은、%CALLNAME:MASTER%에게는 별 관심 없는 내용이었다/＞팬텀의 서머너로서、자신의 힘만을 추구하는 삶을 살고 있는 %CALLNAME:MASTER%에게는 공감 할 수 없는 마음이었는지도 모른다"
		CALL MESSAGE_WINDOW_D, "칸도리", "……흐음, 하등한 사람과 이야기하는 것은 무의미한 일이었나……/좋아, 그렇다라면 나는 신으로서, 중재를 내릴 뿐이다"
		CALL MESSAGE_WINDOW_D, "", "＞초인 칸도리 타카히사가 １체 나타났다！"
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
		CALL SET_ENEMY,9,4204,45,0,1
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)
		CFLAG:(CHARANUM-1):행동횟수 = 2
		CALL BATTLE_START
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D, "", "＞칸도리를 쓰러뜨렸……？/＞칸도리의 모습이 이상하다……"
		CALL MESSAGE_WINDOW_D, "목소리", "……길을 잃어 해매이는 어리석은 남자여、/＞네가 바라는 힘을 주마……"
		CALL MESSAGE_WINDOW_D, "", "＞어디선가 울리는 목소리와 함께, 칸도리는 괴로운듯한 소리를 지르면서 변이 해간다/＞거기에 나타난 모습은 황금의 조각상을 생각하게 하는 「무언가」였다"
		CALL MESSAGE_WINDOW_D, "목소리", "……칸도리 타카히사 라고 하는 남자는 죽고、여기에 있는 것은 신이다……"
		CALL MESSAGE_WINDOW_D, "", "＞장엄하게조차 울리는 그 소리는, 부정할 수 없는 위엄을 가지면서도 어딘가 속이 빈 것 같다/＞이것이 자기 제어를 잃은 페르소나 사용자가 영락한 모습인 것일까？/＞이래서는 이미 사람이라고 말할 수 없다"
		CALL MESSAGE_WINDOW_D, "", "＞초인 갓칸도리가 １체 나타났다！"
		CALL SET_ENEMY,9,4205,50,0,1
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)
		CFLAG:(CHARANUM-1):행동횟수 = 2
		CALL BATTLE_START
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D, "", "＞……칸도리를 쓰러뜨렸다"
		IF 던전플래그:10:10 != 1 && 던전플래그:10:10 != 2 && 의뢰플래그:15:0 != 1 && 의뢰플래그:15:0 != 2
			;SEBECルートもゆきのルートも潰れてる
			CALL MESSAGE_WINDOW_D, "검은 옷의 소녀", "……잘도, 파파를 죽였겠다!"
			CALL MESSAGE_WINDOW_D, "", "＞언제 나타났는지, 칸도리의 시체 바로 곁에 검은 옷을 입은 소녀가 서 있었다/＞칸도리에게 아이가 있다거나 하는 이야기는 없었던 것 같지만……/＞그러나, 이 소녀가 %CALLNAME:MASTER%를 향하는 증오는 진짜다/＞소녀는 눈에 눈물을 그렁거리며, %CALLNAME:MASTER%를 쳐다본다"
			CALL MESSAGE_WINDOW_D, "검은 옷의 소녀", "파파를 죽여버리다니、이젠 끝이야……/＞너 때문에……"
			CALL MESSAGE_WINDOW_D, "", "＞그런데, 원망을 계속 늘어 놓는 이 아가씨를 어떻게 할까？"
			CALL INPUT_YN_D("납치해서 돌아간다", "방치한다")
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "", @"＞아무리 원한을 불태운다고 해도, 결국은 무력한 아이이다/＞%조사처리(CALLNAME:MASTER,"는")% 소녀에게 급소 지르기를 먹였다/＞아키를 손에 넣었다"
				CALL ADD_NEW_COMPANION,4593,0
			ELSE
				CALL MESSAGE_WINDOW_D, "", @"＞아무리 원한을 불태운다고 해도, 결국은 무력한 아이이다/＞%조사처리(CALLNAME:MASTER,"는")% 울며 아우성치는 소녀의 일을 뇌리로부터 지워버렸다"
			ENDIF
		ENDIF
		CALL MESSAGE_WINDOW_D, "", "＞그 후에, 이 사건에 대해 좀 더 조사해 팬텀에 보고하였더니……"
		CALL MESSAGE_WINDOW_D, "", "………………/…………/……"
		;아야세か에리と和解ルート
		IF 던전플래그:10:10 == 1 || 던전플래그:10:10 == 2
			CALL SHOW_PICTURE, "EMPTY"
			CALL SHOW_PICTURE, "NONFLOORD", @"%CALLNAME:MASTER%の私室"
			CALL MESSAGE_WINDOW_D, "", "＞귀찮은 일이 되었다/＞아무래도 이 건은 SEBEC이 개발한 DEVA 시스템이라는 장치에 의한 일인것 같다/＞이 장치는 접속된 인간의 정신세계에 독립한 이계를 구축하고、/＞한편, 시스템 자체가 매개가 되어, 그 이계를 현실세상과 연결한다"
			CALL MESSAGE_WINDOW_D, "", "＞실로 독특한 시스템으로, 팬텀에 보고하면、/＞필시 높은 평가를 받을 것이다…/＞하지만、문제는 현재 장치에 연결되고 있는 것이, 소노무라 마키라고 하는 일이다"
			CALL MESSAGE_WINDOW_D, "", @"＞%CALLNAME:MASTER%과 행동을 함께 하고 있는 소녀는、/＞시스템에 의해 구축된 이계에 머물고 있는 소노무라 마키 라는 것이 된다。＞그런데, 이것을 근거로 해 어떻게 할 것인가?"
			CALL INPUT_YN_D("팬텀에 보고하고, 끝낸다", "마키를 구할 방법을 찾는다")
			IF RESULT == 0
				CALL INCREASE_LD,-8
				CALL MESSAGE_WINDOW_D, "", @"＞안된 일이지만, 일은 일이다/＞%조사처리(CALLNAME:MASTER,"는")% 팬텀에 보고를 실시해, 이 건을 끝내기로 했다/＞잠시 지나면, 이 대참사도, 매우 흔히 있던 사고、/＞흔히 있던 비극으로서 인지되게 되는 것일까"
				CALL MESSAGE_WINDOW_D, "", "＞……잠시 후에, 팬텀으로부터 DEVA 시스템의 해체의 보고와、/＞그 조사에 의해 얻을 수 있던 기술에 대한 자료가 도착했다/＞하지만, 거기에는 소녀에 대한 기술은 아무것도 없었다……/＞이 건의 보수로서, ￥100000이 지불되었다"
				MONEY += 100000
				던전플래그:(FLAG:현던전):7 = 1
			ELSE
				CALL INCREASE_LD,8
				CALL MESSAGE_WINDOW_D, "", "＞그렇다고 정해지면, 바빠진다/＞다른 서머너가 이쪽에 깊이 관여해 오지 않게、/＞적당한 보고를 보낼 필요가 있고、/＞DEVA 시스템에 대한 조사도, 주위의 주의를 끌지 않게 진행하지 않으면 안 된다"
				CALL MESSAGE_WINDOW_D, "", "＞……현재는 이 일은, 미카게쵸에서 알게 된 소녀들에게 알리지 말아야 할지도 모른다/＞어느 정도는 전하지 않으면 안 되겠지만"
				던전플래그:(FLAG:현던전):7 = 2
			ENDIF
		ELSEIF 의뢰플래그:15:0 == 1 || 의뢰플래그:15:0 == 2
			;ゆきのルート
			CALL MESSAGE_WINDOW_D, "", "＞귀찮은 일이 되었다/＞아무래도 이 건은 SEBEC이 개발한 DEVA 시스템이라는 장치에 의한 일인것 같다/＞이 장치는 접속된 인간의 정신세계에 독립한 이계를 구축하고、/＞한편, 시스템 자체가 매개가 되어, 그 이계를 현실세상과 연결한다"
			CALL MESSAGE_WINDOW_D, "", "＞실로 독특한 시스템으로, 팬텀에 보고하면、/＞필시 높은 평가를 받을 것이다…/＞하지만、현재의 상태로, 장치를 정지시켰을 경우, 이계에 있는 인간이 어떻게 될까는 모른다"
			CALL INPUT_YN_D("팬텀에 보고하고, 끝낸다", "일단보류하고 대책을 생각한다")
			IF RESULT == 0
				CALL INCREASE_LD,-8
				CALL MESSAGE_WINDOW_D, "", @"＞안된 일이지만, 일은 일이다/＞%조사처리(CALLNAME:MASTER,"는")% 팬텀에 보고를 실시해, 이 건을 끝내기로 했다/＞잠시 지나면, 이 대참사도, 매우 흔히 있던 사고、/＞흔히 있던 비극으로서 인지되게 되는 것일까"
				CALL MESSAGE_WINDOW_D, "", "＞……잠시 후에, 팬텀으로부터 DEVA 시스템의 해체의 보고와、/＞그 조사에 의해 얻을 수 있던 기술에 대한 자료가 도착했다/＞하지만, 거기에는 얼마나 희생이 나왔는지에 대해서는 무엇 하나 쓰여있지 않았다……/＞이 건의 보수로서, ￥100000이 지불되었다"
				MONEY += 100000
				던전플래그:(FLAG:현던전):7 = 1
			ELSE
				CALL INCREASE_LD,8
				CALL MESSAGE_WINDOW_D, "", "＞그렇다고 정해지면, 바빠진다/＞다른 서머너가 이쪽에 깊이 관여해 오지 않게、/＞적당한 보고를 보낼 필요가 있고、/＞DEVA 시스템에 대한 조사도, 주위의 주의를 끌지 않게 진행하지 않으면 안 된다"
				던전플래그:(FLAG:현던전):7 = 3
			ENDIF
		ELSE
			CALL MESSAGE_WINDOW_D, "", "아무래도 이 건은 SEBEC이 개발한 DEVA 시스템이라는 장치에 의한 일인것 같다/＞이 장치는 접속된 인간의 정신세계에 독립한 이계를 구축하고、/＞한편, 시스템 자체가 매개가 되어, 그 이계를 현실세상과 연결한다"
			CALL MESSAGE_WINDOW_D, "", @"＞로 독특한 시스템으로, 팬텀에 보고하면、/＞필시 높은 평가를 받을 것이다…/＞%조사처리(CALLNAME:MASTER,"는")% 팬텀에 보고를 실시해, 이 건을 끝내기로 했다"
			CALL MESSAGE_WINDOW_D, "", "＞……잠시 후에, 팬텀으로부터 DEVA 시스템의 해체의 보고와、/＞그 조사에 의해 얻을 수 있던 기술에 대한 자료가 도착했다/＞하지만, 거기에는 얼마나 희생이 나왔는지에 대해서는 무엇 하나 쓰여있지 않았다……/＞이 건의 보수로서, ￥100000이 지불되었다"
			MONEY += 100000
			던전플래그:(FLAG:현던전):7 = 1
		ENDIF
		FLAG:도주불가플래그 = 0
		FLAG:회화불능플래그 = 0
		FLAG:선제기습취소 = 0
		DA:(FLAG:현X):(FLAG:현Y) = 1
		FLAG:탈출 = 1
	ELSEIF FLAG:현M == 0 && FLAG:현X == 17 && FLAG:현Y == 1
		;아야세和解ルート
		IF 던전플래그:10:10 == 1
			CALL MESSAGE_WINDOW_D, "", "＞두 명의 소녀와 검은 옷의 남자들이 싸우고 있다/＞한 명은、SEBEC빌딩에서 만났던 에리다/＞또 한 사람, 짧은 머리의 소녀에 대한 기억은 없지만、/＞엘민의 학생임에 틀림없는 같다"
			IF FINDCHARA_B(4515,0) == 2
				CALL MESSAGE_WINDOW_D, "아야세", @"키리시마! 유키노상!　%ANATANAME( ,"さん、")%빨리 돕지 않으면！！"
				CALL MESSAGE_WINDOW_D, "", "＞아야세는 이쪽을 뒤돌아 보면서 당황한 것처럼 호소했다"
			ELSEIF FINDCHARA_B(4519,0) == 2
				CALL MESSAGE_WINDOW_D, "마키", "아、에리！　유키노상！　도와 줘！！"
				CALL MESSAGE_WINDOW_D, "", "＞마키는 이쪽을 뒤돌아 보면서 그렇게 호소했다"
			ENDIF
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "뭐야, 또 침입자인가！？"
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "아무튼 좋아, 누구든 배제할 뿐이다"
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			CALL SET_ENEMY,9, 4203,35,0,0
			CALL SET_ENEMY,10,4203,35,0,0
			CALL SET_ENEMY,11,4203,35,0,0
			CALL BATTLE_START
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", ""
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			CALL MESSAGE_WINDOW_D, "", "검은 옷의 남자들을 쓰러뜨렸다。"
			CALL MESSAGE_WINDOW_D, "에리", "Thank you……또, 도움을 받았네요……"
			CALL MESSAGE_WINDOW_D, "", "＞에리가 피로한 것처럼 입을 열었다…"
			CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "에리코、더 이상은……"
			CALL INPUT_YN_D, "회복하는 것을 추천한다", "동행하는 것을 추천한다"
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "에리", "죄송합니다만, 그렇게 하죠"
				CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "성의 밖에서 기다리겠습니다/이번에 만나면, 저희들도 협력하기 때문에……"
			ELSE
				CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "아니、동행해도 방해만 될 거라고 생각해요/에리、우리는 일단 되돌아가자。괜찮지？"
				CALL MESSAGE_WINDOW_D, "에리", "……어쩔 수 없네요/＞But、다음에 만날 때는 분명히 도움이 될거에요"
			ENDIF
			CALL MESSAGE_WINDOW_D, "", "＞두 사람은 그렇게 말하고 떠나갔다…"
			CALL MESSAGE_WINDOW_D, "", "＞마유즈미 유키노와 키리시마 에리코가 동료가 되었다"
			CALL ADD_NEW_COMPANION,4514,300
			;전투참가가능で加入するが、조교で전투참가불가능になる
			SIF RESULT
				CFLAG:(RESULT:1):전투참가불가능 = -1
			CALL ADD_NEW_COMPANION,4535,300
			SIF RESULT
				CFLAG:(RESULT:1):전투참가불가능 = -1
			던전플래그:(FLAG:현던전):8 = 1
			DA:(FLAG:현X):(FLAG:현Y) = 1
		;에리和解ルート
		ELSEIF 던전플래그:10:10 == 2
			CALL MESSAGE_WINDOW_D, "", "＞두 명의 소녀와 검은 옷의 남자들이 싸우고 있다/＞한 명은、SEBEC빌딩에서 만났던 아야세다/＞또 한 사람, 짧은 머리의 소녀에 대한 기억은 없지만、/＞엘민의 학생임에 틀림없는 같다"
			IF FINDCHARA_B(4515,0) == 2
				CALL MESSAGE_WINDOW_D, "에리", @"Ayase! Yukino!　%CALLNAME:MASTER% 빨리 돕지 않으면！！"
				CALL MESSAGE_WINDOW_D, "", "＞에리는 이쪽을 뒤돌아 보면서 당황한 것처럼 호소했다"
			ELSEIF FINDCHARA_B(4519,0) == 2
				CALL MESSAGE_WINDOW_D, "마키", "아、유우카！　유키노상！　도와 줘！！"
				CALL MESSAGE_WINDOW_D, "", "＞마키는 이쪽을 뒤돌아 보면서 그렇게 호소했다"
			ENDIF
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "뭐야, 또 침입자인가！？"
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "아무튼 좋아, 누구든 배제할 뿐이다"
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			WAIT
			CALL SET_ENEMY,9, 4203,35,0,0
			CALL SET_ENEMY,10,4203,35,0,0
			CALL SET_ENEMY,11,4203,35,0,0
			CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			CALL MESSAGE_WINDOW_D, "", "검은 옷의 남자들을 쓰러뜨렸다。"
			CALL MESSAGE_WINDOW_D, "아야세", "살았다아……"
			CALL MESSAGE_WINDOW_D, "", "＞아야세는 털석 주저앉더니, 그렇게 말했다"
			CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "아야세、더 이상은……"
			CALL INPUT_YN_D, "회복하는 것을 추천한다", "동행하는 것을 추천한다"
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "아야세", "응, 뒤를 부탁해도 좋겠죠"
				CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "성의 밖에서 기다리겠습니다/이번에 만나면, 저희들도 협력하기 때문에……"
			ELSE
				CALL MESSAGE_WINDOW_D, "머리카락이 짧은 소녀", "아니、동행해도 방해만 될 거라고 생각해요/에리、우리는 일단 되돌아가자。괜찮지？"
				CALL MESSAGE_WINDOW_D, "에리", "그래/뒤를 맡겨요/＞하지만, 이번에 만날 때는 힘낼께요"
			ENDIF
			CALL MESSAGE_WINDOW_D, "", "＞두 사람은 그렇게 말하고 떠나갔다…"
			CALL MESSAGE_WINDOW_D, "", "＞마유즈미 유키노와 아야세 유우카가 동료가 되었다"
			CALL ADD_NEW_COMPANION,4515,300
			;전투참가가능で加入するが、조교で전투참가불가능になる
			SIF RESULT
				CFLAG:(RESULT:1):전투참가불가능 = -1
			CALL ADD_NEW_COMPANION,4535,300
			SIF RESULT
				CFLAG:(RESULT:1):전투참가불가능 = -1
			던전플래그:(FLAG:현던전):8 = 1
			DA:(FLAG:현X):(FLAG:현Y) = 1
		;放置
		ELSEIF 던전플래그:10:10 == 3 || 던전플래그:10:10 == 7
			CALL MESSAGE_WINDOW_D, "", "＞복도의 막다른 곳에서 검은 옷의 남자들이, 세 명의 소녀를 둘러싸고 있었다/＞3명 모두 살아는 있는 것 같지만, 부상과 피로로 움직일 수 없는 것 같다"
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "이런이런‥‥번거롭게 하는구만‥‥"
			CALL MESSAGE_WINDOW_D, "또 다른 검은 옷의 남자", "처분 전에 즐겨볼까?　/어쩐지 저 년들도 범해주길 기다리고 있는 것 같고"
			CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "……뭐、우리들이 이상하게 기다리게 한다고 해도 주변에서 어쩔 수는 없겠지……"
			CALL MESSAGE_WINDOW_D, "소녀", "크윽‥‥풀어、줘어‥‥"
			CALL INPUT_YN_D("남자들을 쓰러뜨린다", "방치한다")
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "검은 옷의 남자", "뭐야, 또 침입자인가!?"
				CALL MESSAGE_WINDOW_D, "또 다른 검은 옷의 남자", "아무튼 좋아, 누구든 배제할 뿐이다"
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CALL SET_ENEMY,9, 4203,35,0,0
				CALL SET_ENEMY,10,4203,35,0,0
				CALL SET_ENEMY,11,4203,35,0,0
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				CALL SHOW_PICTURE, "D"
				CALL MESSAGE_WINDOW_D, "", "＞검은 옷의 남자들을 쓰러뜨렸다"
				CALL MESSAGE_WINDOW_D, "", "＞3명의 소녀들은, 찢어진 옷을 여며 나체를 숨기려고 하면서、/＞어떻게든 일어나 감사를 표한다。"
				CALL INPUT_YN("소녀들을 확보한다", "방치한다")
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "", "＞피로와 부상으로 너덜너덜의 3명에게 차례차례 급소 지르기를 먹여서 잠재웠다/＞소노무라 마키와 키리시마 에리코、아야세 유우카를 손에 넣었다"
					CALL ADD_NEW_COMPANION,4514,200
					CALL ADD_NEW_COMPANION,4515,200
					CALL ADD_NEW_COMPANION,4519,200
					던전플래그:(FLAG:현던전):8 = 2
				ELSE
					CALL INCREASE_LD(4)
					CALL MESSAGE_WINDOW_D, "", "＞소녀들은 감사의 대가로 검을 건네주고는/＞다친 몸을 서로 부축하며 떠나갔다"
					CALL MESSAGE_WINDOW_D, "", "＞플라즈마소드를 손에 넣었다"
					ITEM:플라즈마소드 += 1
					던전플래그:(FLAG:현던전):8 = 3
				ENDIF
			ELSE
				CALL INCREASE_LD(-4)
				CALL MESSAGE_WINDOW_D, "", "모르는 일이기 때문에 등을 돌린다/＞등 뒤로부터 옷이 찢어지는 소리와 소녀들의 비명, 남자의 흉소가 희미하게 들려 왔다"
				CALL MESSAGE_WINDOW_D, "", "………………/…………/……"
				CALL MESSAGE_WINDOW_D, "", "＞방치되어 남자들의 희롱의 대상이 되기 시작한지 얼마의 시간이 지났다/＞소녀들의 교복은 모두 찢어져서 넝마가 되었고、/＞남은 부분이 약간 매달려 있는 정도이다"
				CALL MESSAGE_WINDOW_D, "", "＞주근깨의 소녀는 체격이 좋은 남자가 안아 올린 후에、/＞극도로 큰 페니스를 깊이 찔러 올리자, 끔찍한 고통에 비명다운 비명도 지르지 못하고 그대로 기절 했다"
				CALL MESSAGE_WINDOW_D, "", "＞트윈테일의 소녀는 넙죽 엎드린채 앞뒤로부터 질과 입을 범해지고 있다/＞가끔 남자의 변덕에 고삐처럼 긴 머릿카락이 당겨질 때면、/＞그 때마다 매번 뒤로 몸을 젖히고 자신의 침으로 더럽혀진 흰 목을 드러내고 있다"
				CALL MESSAGE_WINDOW_D, "", "＞머리카락이 짧은 소녀는 누워있는 남자 위에서 허리를 흔들라고 강요당하고 있다/＞상처의 아픔인가、아니면 수치심인가、움직이지 못하는 것을 반항이라고 받아들인 듯/＞이제는 다른 남자에게 엉덩이 구멍마저 범해지며 비참하게 울부짓고 있다"
				CALL MESSAGE_WINDOW_D, "", "＞모든 소녀들의 가랑이에 붉은 색이 보이는 것으로 보아、/＞전원이 동시에 순결을 빼앗긴 것 같다＞당연히, 한 번이나 두 번의 사정으로는 끝나지 않고、/＞서로 상대를 몇번이고 바꾸어가며, 가련한 소녀들에 대한 능욕은 끝없이 계속 되었다……"
				던전플래그:(FLAG:현던전):8 = 4
			ENDIF
			DA:(FLAG:현X):(FLAG:현Y) = 1
		;그외
		ELSE
			CALL MESSAGE_WINDOW_D, "남자", "인류에게 가치는 없다……"
			CALL MESSAGE_WINDOW_D, "남자", "……멸망해야 하는 것이다……"
			CALL MESSAGE_WINDOW_D, "", "＞헛말과 같이, 투덜투덜 무엇인가 중얼거리고 있는 남자들이 있다…"
		ENDIF
	ENDIF
RETURN 1
;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
ENDIF
RETURN 0

;=======================================================================
;宝箱の中身
;=======================================================================
@TREASURE_11
SELECTCASE FLAG:현M
	CASE 1
		CALL GET_TREASURE,1004,1,FLAG:현던전,1
	CASE 2
		CALL GET_TREASURE,1030,1,FLAG:현던전,2
	CASE 3
		CALL GET_TREASURE,1006,1,FLAG:현던전,3
	CASE 4
		CALL GET_TREASURE,1009,1,FLAG:현던전,4
ENDSELECT
RETURN 1

;=======================================================================
;階段置き場
;=======================================================================
@UPSTAIRS_11
SELECTCASE FLAG:현M
	CASE 0
		SIF FLAG:현X == 16 && FLAG:현Y == 10
			CALL DUNGEON_UPSTAIRS,1,16,10
		SIF FLAG:현X == 5 && FLAG:현Y == 17
			CALL DUNGEON_UPSTAIRS,1,5,17
	CASE 1
		SIF FLAG:현X == 1 && FLAG:현Y == 1
			CALL DUNGEON_UPSTAIRS,2,1,1
		SIF FLAG:현X == 2 && FLAG:현Y == 17
			CALL DUNGEON_UPSTAIRS,2,2,17
	CASE 2
		SIF FLAG:현X == 17 && FLAG:현Y == 5
			CALL DUNGEON_UPSTAIRS,3,17,5
	CASE 3
		SIF FLAG:현X == 6 && FLAG:현Y == 17
			CALL DUNGEON_UPSTAIRS,4,6,17
		SIF FLAG:현X == 11 && FLAG:현Y == 13
			CALL DUNGEON_UPSTAIRS,4,11,13
	CASE 4
		SIF FLAG:현X == 10 && FLAG:현Y == 17
			CALL DUNGEON_UPSTAIRS,5,10,17
	CASEELSE
ENDSELECT
RETURN 1

@DOWNSTAIRS_11
SELECTCASE FLAG:현M
	CASE 1
		SIF FLAG:현X == 16 && FLAG:현Y == 10
			CALL DUNGEON_DOWNSTAIRS,0,16,10
		SIF FLAG:현X == 5 && FLAG:현Y == 17
			CALL DUNGEON_DOWNSTAIRS,0,5,17
	CASE 2
		SIF FLAG:현X == 1 && FLAG:현Y == 1
			CALL DUNGEON_DOWNSTAIRS,1,1,1
		SIF FLAG:현X == 2 && FLAG:현Y == 17
			CALL DUNGEON_DOWNSTAIRS,1,2,17
	CASE 3
		SIF FLAG:현X == 17 && FLAG:현Y == 5
			CALL DUNGEON_DOWNSTAIRS,2,17,5
	CASE 4
		SIF FLAG:현X == 6 && FLAG:현Y == 17
			CALL DUNGEON_DOWNSTAIRS,3,6,17
		SIF FLAG:현X == 11 && FLAG:현Y == 13
			CALL DUNGEON_DOWNSTAIRS,3,11,13
	CASE 5
		SIF FLAG:현X == 10 && FLAG:현Y == 17
			CALL DUNGEON_DOWNSTAIRS,4,10,17
	CASEELSE
ENDSELECT
RETURN 1



;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_11
	FLAG:인카운트율 = FLAG:미조우걸음수*5
SIF FLAG:미조우걸음수 < 4
	FLAG:인카운트율 = 0
;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_11
RETURN 33, 30, 31, 50
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_11
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_11
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_11, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_11, ARG
SELECTCASE RAND:100
	CASE IS < 20
		;20%でSSS
		RETURN 4203, 30,0
	CASE IS < 40
		;20%で사라시나히메
		RETURN 605, 30,0
	CASE IS < 60
		;20%で모스맨
		RETURN 952, 30,0
	CASE IS < 80
		;20%で프린시펄리티
		RETURN 355, 31,0
	CASE IS < 90
		;10%で용왕미즈치LV33(31)
		RETURN [[キャラ:미즈치]], 31
	CASE IS < 100
		;10%で알라우네
		RETURN 405, 31,0
ENDSELECT
;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_11
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:프린시펄리티]] , 3 + RAND:10 , CSVBASE([[キャラ:프린시펄리티]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:모스맨]] , 3 + RAND:10 , CSVBASE([[キャラ:모스맨]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:SSS]] , 3 + RAND:10 , CSVBASE([[キャラ:SSS]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT

