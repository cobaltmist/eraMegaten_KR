;=======================================================================
;샘플던전
;던전のテン플레이트みたいなものです
;던전ナンバー0
;=======================================================================




;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_16
;체크맨クリア
IF 투기장플래그:13:0 == 1 && 던전フラグ:16:14 == 0
	RETURN 1
ELSE
	RETURN 0
ENDIF

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_16
RESULTS = 시부야센터거리

;=======================================================================
;フ로어名표시
;=======================================================================
@FLOORNAME_16
PRINT 시부야센터거리
SELECTCASE FLAG:현M
	CASE 0
		PRINTL 지하 B2F
	CASE 1
		PRINTL 지하 B1F
	CASE 2
		PRINTL 큰 길
	CASE 3
		PRINTL 가이아교・시부야 지부1F
	CASE 4
		PRINTL 가이아교・시부야 지부2F
	CASE 5
		PRINTL 가이아교・시부야 지부3F
	CASE 6
		PRINTL 가이아교・시부야 지부4F
	CASEELSE
		PRINTL
ENDSELECT

;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_16,ARG
FLAG:현M = 2
FLAG:현X = 1
FLAG:현Y = 6
;CALL AUTOMAP

;=======================================================================
;スタート時이벤트
;=======================================================================
@EVENT_DUNGEON_START_16
;T.D.L.の설정ずれやすでにシンジュク到達していることや
;가운純に東京を扱う事が多いのでテ키스トを調整しておきます
IF 던전フラグ:(FLAG:현던전):10 == 0
	CALL SHOW_PICTURE, "D"
	CALL MESSAGE_WINDOW_D,  "", "＞시부야…/＞ 이전에는 멋을 부린 젊은이들이 흥청거리는 활기 넘치는 거리였던 것 같지만/＞현재는 대낮에 당당히 개조 오토바이를 타고 돌아다니는 모히칸 머리들이나/＞마치 예전부터 거기에 있었던 것 같은 악마들이 거리를 활보 하고 있다"
	CALL MESSAGE_WINDOW_D,  "", "＞「가이아교」, 악마와 인간과의 융화를 목표로 한다고 하는/＞도저히 제정신이 박혔다라고는 생각되지 않는 교리를 숭배하는 집단···/＞여기 시부야는 놈들의 활동 거점 중 하나로,/＞거리 전체가 기분 나쁘게 변해 버렸던 것이다"
	CALL MESSAGE_WINDOW_D,  "", "＞체크 맨은 여기 시부야의 가이아교에, 별의 힘 가운데 1개가 있다고 했다/＞그들이 말한 「별의 힘」을 손에 넣어,/＞「새로운 세계」에 도달하기 위해서는/＞아마 가이아 교단과의 전투는 피할 수 없을 것이다……"
	던전フラグ:(FLAG:현던전):10 = 1
ENDIF

;=======================================================================
;フ로어데이터
;=======================================================================
@MAKE_FLOOR_16
SELECTCASE FLAG:현M
	CASE 0
		;地下街B2F
		FLAG:최대X = 19
		FLAG:최대Y = 13
		;						 0000000000111111111
		;						 0123456789012345678
		CALL MAKE_FLOOR_LINE, 0,"0000000000000000000"
		CALL MAKE_FLOOR_LINE, 1,"0       9 3       0"
		CALL MAKE_FLOOR_LINE, 2,"0       2 2       0"
		CALL MAKE_FLOOR_LINE, 3,"0      11111      0"
		CALL MAKE_FLOOR_LINE, 4,"0        1        0"
		CALL MAKE_FLOOR_LINE, 5,"0921112111111     0"
		CALL MAKE_FLOOR_LINE, 6,"0           1     0"
		CALL MAKE_FLOOR_LINE, 7,"0           1111160"
		CALL MAKE_FLOOR_LINE, 8,"0           1     0"
		CALL MAKE_FLOOR_LINE, 9,"0      111111     0"
		CALL MAKE_FLOOR_LINE,10,"0       2 2       0"
		CALL MAKE_FLOOR_LINE,11,"0       1 9       0"
		CALL MAKE_FLOOR_LINE,12,"0000000000000000000"
	CASE 1
		;地下街B1F
		FLAG:최대X = 16
		FLAG:최대Y = 16
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"0000000000000000"
		CALL MAKE_FLOOR_LINE, 1,"0         9 9 90"
		CALL MAKE_FLOOR_LINE, 2,"0         2 2 20"
		CALL MAKE_FLOOR_LINE, 3,"0  1      111110"
		CALL MAKE_FLOOR_LINE, 4,"032111111   1  0"
		CALL MAKE_FLOOR_LINE, 5,"0  1    11211  0"
		CALL MAKE_FLOOR_LINE, 6,"0421           0"
		CALL MAKE_FLOOR_LINE, 7,"0  1    9 9 9  0"
		CALL MAKE_FLOOR_LINE, 8,"0 71116 2 2 2  0"
		CALL MAKE_FLOOR_LINE, 9,"0       11111  0"
		CALL MAKE_FLOOR_LINE,10,"0       1 1 1160"
		CALL MAKE_FLOOR_LINE,11,"0       1 1 1  0"
		CALL MAKE_FLOOR_LINE,12,"0       11111  0"
		CALL MAKE_FLOOR_LINE,13,"0       2 2 2  0"
		CALL MAKE_FLOOR_LINE,14,"0       9 9 9  0"
		CALL MAKE_FLOOR_LINE,15,"0000000000000000"
	CASE 2
	;表通り
		FLAG:최대X = 14
		FLAG:최대Y = 12
		CALL MAKE_FLOOR_LINE, 0,"00000008080000"
		CALL MAKE_FLOOR_LINE, 1,"0      1 1 7 0"
		CALL MAKE_FLOOR_LINE, 2,"0      1 111 0"
		CALL MAKE_FLOOR_LINE, 3,"0      1 1   0"
		CALL MAKE_FLOOR_LINE, 4,"0    6 1 1   0"
		CALL MAKE_FLOOR_LINE, 5,"0    G 1 1   0"
		CALL MAKE_FLOOR_LINE, 6,"81111111111118"
		CALL MAKE_FLOOR_LINE, 7,"0      1 1   0"
		CALL MAKE_FLOOR_LINE, 8,"0      111   0"
		CALL MAKE_FLOOR_LINE, 9,"0        1 7 0"
		CALL MAKE_FLOOR_LINE,10,"0        11118"
		CALL MAKE_FLOOR_LINE,11,"00000000000000"

	CASE 3
		;ガイア教・渋谷支部1F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"00000000000000000"
		CALL MAKE_FLOOR_LINE, 1,"01111111 11111110"
		CALL MAKE_FLOOR_LINE, 2,"0111   1   2 1  0"
		CALL MAKE_FLOOR_LINE, 3,"0111 3 11111 1 60"
		CALL MAKE_FLOOR_LINE, 4,"01   2 2 111 2 20"
		CALL MAKE_FLOOR_LINE, 5,"0121 1 1 111 1 10"
		CALL MAKE_FLOOR_LINE, 6,"01   1       1 10"
		CALL MAKE_FLOOR_LINE, 7,"01 11111 1 111 10"
		CALL MAKE_FLOOR_LINE, 8,"01   1   2 1   20"
		CALL MAKE_FLOOR_LINE, 9,"01 1 1 T 1 121110"
		CALL MAKE_FLOOR_LINE,10,"02 2 1 2 1     20"
		CALL MAKE_FLOOR_LINE,11,"01111111111121 10"
		CALL MAKE_FLOOR_LINE,12,"01     11111   10"
		CALL MAKE_FLOOR_LINE,13,"01 321 1111121 10"
		CALL MAKE_FLOOR_LINE,14,"01   1 1 2     10"
		CALL MAKE_FLOOR_LINE,15,"011111 1 7 111110"
		CALL MAKE_FLOOR_LINE,16,"00000000000000000"
	CASE 4
		;ガイア教・渋谷支部2F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"00000000000000000"
		CALL MAKE_FLOOR_LINE, 1,"011111 1111111110"
		CALL MAKE_FLOOR_LINE, 2,"01           2 20"
		CALL MAKE_FLOOR_LINE, 3,"0121 111112121 70"
		CALL MAKE_FLOOR_LINE, 4,"01     111   1  0"
		CALL MAKE_FLOOR_LINE, 5,"0121112111 111110"
		CALL MAKE_FLOOR_LINE, 6,"0U       1     10"
		CALL MAKE_FLOOR_LINE, 7,"011111R121 111210"
		CALL MAKE_FLOOR_LINE, 8,"0    D     U    0"
		CALL MAKE_FLOOR_LINE, 9,"012111 121L111110"
		CALL MAKE_FLOOR_LINE,10,"01     1       D0"
		CALL MAKE_FLOOR_LINE,11,"011111 1112111210"
		CALL MAKE_FLOOR_LINE,12,"0  1   111     10"
		CALL MAKE_FLOOR_LINE,13,"04 121211111 3210"
		CALL MAKE_FLOOR_LINE,14,"02 2           10"
		CALL MAKE_FLOOR_LINE,15,"0111111123 621110"
		CALL MAKE_FLOOR_LINE,16,"00000000000000000"
		;UDLR 一方通行タイル
	CASE 5
		;ガイア教・渋谷支部3F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"00000000000000000"
		CALL MAKE_FLOOR_LINE, 1,"032111 4 111 1110"
		CALL MAKE_FLOOR_LINE, 2,"0  1   2   1   10"
		CALL MAKE_FLOOR_LINE, 3,"0111 11111 111 10"
		CALL MAKE_FLOOR_LINE, 4,"0111 11111 111 10"
		CALL MAKE_FLOOR_LINE, 5,"0111 11411 111 10"
		CALL MAKE_FLOOR_LINE, 6,"0  1   1   1   10"
		CALL MAKE_FLOOR_LINE, 7,"01 111 1 111 3 10"
		CALL MAKE_FLOOR_LINE, 8,"02   1 1 1   2 10"
		CALL MAKE_FLOOR_LINE, 9,"0111 6 1 1 111 10"
		CALL MAKE_FLOOR_LINE,10,"0  1 1 G 1 1   10"
		CALL MAKE_FLOOR_LINE,11,"01 121 1 121 1 10"
		CALL MAKE_FLOOR_LINE,12,"02 1   2   1 1 20"
		CALL MAKE_FLOOR_LINE,13,"01111111111111210"
		CALL MAKE_FLOOR_LINE,14,"0  2   2 2   1 10"
		CALL MAKE_FLOOR_LINE,15,"011111 T 1 721 10"
		CALL MAKE_FLOOR_LINE,16,"00000000000000000"
	CASE 6
		;ガイア教・渋谷支部4F
		FLAG:최대X = 11
		FLAG:최대Y = 11
		CALL MAKE_FLOOR_LINE, 0,"00000000000"
		CALL MAKE_FLOOR_LINE, 1,"03 11111110"
		CALL MAKE_FLOOR_LINE, 2,"02 1     10"
		CALL MAKE_FLOOR_LINE, 3,"0111 111 10"
		CALL MAKE_FLOOR_LINE, 4,"0    2 1 10"
		CALL MAKE_FLOOR_LINE, 5,"0111 1 1 10"
		CALL MAKE_FLOOR_LINE, 6,"0111   1 10"
		CALL MAKE_FLOOR_LINE, 7,"01111111 10"
		CALL MAKE_FLOOR_LINE, 8,"02 11111 20"
		CALL MAKE_FLOOR_LINE, 9,"01 11711210"
		CALL MAKE_FLOOR_LINE,10,"00000000000"
	CASEELSE





ENDSELECT


;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_16, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 던전フラグ:75~99
;LOCAL:4 이벤트
;LOCAL:8 メッセンジャー
;(0/0)でLOCALを소거
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
IF ARG == 3
	IF GETBIT(던전フラグ:(FLAG:현던전):(FLAG:현M+75), LOCAL:3)
		DA:(ARG:1):(ARG:2) = 1
	ELSE
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:3 * 10 + 3
	ENDIF
	LOCAL:3++
ENDIF
;이벤트扉
IF ARG == 12
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:2 * 10 + 12
	LOCAL:2++
ENDIF
;이벤트
IF ARG == 4
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:4 * 10 + 4
	LOCAL:4++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
		;베스フラグ
		CASE 400
			SIF 던전フラグ:(FLAG:현던전):12
				DA:(ARG:1):(ARG:2) = 1
		;공개処刑
		CASE 501
			SIF 던전フラグ:(FLAG:현던전):13
				DA:(ARG:1):(ARG:2) = 1
	ENDSELECT
ENDIF
;上り階段
IF ARG == 6
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:6 * 100 + 6
	LOCAL:6++
ENDIF
;下り階段
IF ARG == 7
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:7 * 100 + 7
	LOCAL:7++
ENDIF
;メッセンジャー
IF ARG == 9
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:9 * 10 + 9
	LOCAL:9++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
	ENDSELECT
ENDIF

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_16, ARGS, ARG, ARG:1
;G 이벤트扉
SIF ARGS == "G"
	RETURN 12
SIF ARGS == "U"
	RETURN 22
SIF ARGS == "D"
	RETURN 32
SIF ARGS == "L"
	RETURN 42
SIF ARGS == "R"
	RETURN 52
;=======================================================================
;指定したマスに進入가능か
;及び、ドア이벤트
;=======================================================================
;-----------------------------------------------------------------------
;ドアの표시定義
;-----------------------------------------------------------------------
@TILE_MARK_COMMON_16_2, ARG, ARG:1, ARG:2
SELECTCASE ARG
	CASE 12
		SETCOLOR 0x00ff00
		RESULTS = ｍ
	CASE 22
		RESULTS = ↑
	CASE 32
		RESULTS = ↓
	CASE 42
		RESULTS = →
	CASE 52
		RESULTS = ←
	CASEELSE
		RESULTS = 문
ENDSELECT
@CAN_ENTER_16,ARG,ARG:1
SELECTCASE DA:ARG:(ARG:1)
	;↑
	CASE 22
		RETURN ARG:1 < FLAG:현Y
	;↓
	CASE 32
		RETURN ARG:1 > FLAG:현Y
	;→
	CASE 42
		RETURN ARG > FLAG:현X
	;←
	CASE 52
		RETURN ARG < FLAG:현X
	CASE 2012
		IF 던전フラグ:(FLAG:현던전):14 == 2
			CALL MESSAGE_WINDOW_D,  "수위", "호오, 너희들이냐/이 안에 들어가려는 사람들이"
		ELSE
			CALL MESSAGE_WINDOW_D,  "수위", "여기는 가이아 교단 시부야 지부이다/ 네놈들은, 도대체 누구냐?"
			IF !던전フラグ:(FLAG:현던전):11
				CALL MESSAGE_WINDOW_D,  "수위", "... ... 앙? /이 안에 들어가고 싶은가? / 그럼, 언제나처럼, 그것을 보여라"
				CALL MESSAGE_WINDOW_D,  "수위", "어이 가지고 있지 않나？/……어라 뭘 말하냐고？/그런 것도 모르면서 여기에 들어가려는 생각이었나？"
				CALL MESSAGE_WINDOW_D,  "수위", "뜨거운 맛을 보고 싶지 않았으면 당장 꺼져!"
				RETURN 0
			ELSE
				CALL MESSAGE_WINDOW_D,  "수위", "... 그렇지, 단원증을 제대로 가지고 있구만/ 빡빡하게 굴어서 미안하군"
				CALL MESSAGE_WINDOW_D,  "수위", "이전에는 이정도까지는 아니었는데 / 최근, 템플 나이트 모두가 그것을 빙자해 잠입 해온 일이 있었지 / 이후 신원 확인을 철저히 하라는 지시가 있었다구"
				CALL MESSAGE_WINDOW_D,  "수위", "그러고 보니 그중 완고하게 살아남은 한 사람을 / 오늘 본보기로 공개 처형하는 것 같아 / 아무래도 어린 아이 정도의 계집아이 였기 때문에 안되었다고도 느끼지만은 ... / 아 미안하군. 안에 들어가도 좋아 "			
			ENDIF
		ENDIF
	CASE 5012
		IF 던전フラグ:(FLAG:현던전):13
			CALL MESSAGE_WINDOW_D,  "", "＞반대편에서 열쇠로 잠겨 있는 것 같다"
			RETURN 0
		ENDIF
ENDSELECT
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT


;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_16
;==========
;出입の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;==========
;이벤트の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
	CALL EVENT_16
	RETURN RESULT
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_16
	RETURN RESULT
;=======
;ワープゾーン
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6 || DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL WORP_16
	RETURN RESULT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 9
	CALL MESSAGE_16, 0
	RETURN 1
ENDIF

;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_16,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出입の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_16
	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6 || DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL WORP_16
	RETURN RESULT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 9
	CALL MESSAGE_16, 0
	RETURN 1

;========
;이벤트の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
	CALL EVENT_16
	RETURN RESULT
;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y)  % 10 == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
ENDIF
RETURN 0

;=======================================================================
;宝箱の中身
;=======================================================================
@TREASURE_16
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		CALL GET_TREASURE, GETNUM(ITEM, "마석"), 3, FLAG:현던전,0
	CASE 100
		CALL GET_TREASURE, GETNUM(ITEM, "메디컬파우더"), 1, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 300
		CALL GET_TREASURE, GETNUM(ITEM, "랜턴탄"), 10, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 301
		CALL GET_TREASURE, GETNUM(ITEM, "챠크라드롭"), 1 , FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 400
		CALL GET_TREASURE, GETNUM(ITEM, "보옥"), 1, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 401
		CALL GET_TREASURE, GETNUM(ITEM, "외상약"), 1, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 500
		CALL GET_TREASURE, GETNUM(ITEM, "화염의곡옥"), 1, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 501
		CALL GET_TREASURE, GETNUM(ITEM, "마석"), 2 , FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	CASE 600
		CALL GET_TREASURE, GETNUM(ITEM, "힘의향"), 1, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ENDSELECT
RETURN 1

@EVENT_16
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 100
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D,  "", "디스코다…/디스코 내는 사람으로 들끓고 있다"
		IF 던전フラグ:(FLAG:현던전):11 == 0
			CALL MESSAGE_WINDOW_D,  "", "＞여기서라면 무엇인가 정보를 수집할 수 있을 것 같다/＞이야기를 들어둘까? "
			CALL INPUT_YN_D
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D,  "", "………………/…………/……"
				CALL MESSAGE_WINDOW_D,  "몹시 취한 젊은이", "워이 네놈/네놈, 우리들을、쳐다보냐！？"
				CALL MESSAGE_WINDOW_D,  "또 다른 취객", "낮부터 취해있다고 뭔가 꼽냐！"
				CALL MESSAGE_WINDOW_D,  "화가 난 젊은이", "짜증나게하네！"
				CALL MESSAGE_WINDOW_D,  "", "＞만취한 젊은이 집단에 휘말려 버렸다…"
				CALL INPUT_YN_D, "때려눕힌다", "사과해 장소를 피한다"
				IF RESULT == 0
					CALL INCREASE_LC, -4
					CALL MESSAGE_WINDOW_D,  "술 취한 사람", "네 놈！　해볼테냐！"
					CALL MESSAGE_WINDOW_D,  "몹시 취한 젊은이", "확실하게 죽여준다！"
				ELSE
					CALL INCREASE_LD, 4
					CALL MESSAGE_WINDOW_D,  "술 취한 사람", "이러쿵저러쿵 시끄러ー！"
					CALL MESSAGE_WINDOW_D,  "몹시 취한 젊은이", "확실하게 죽여준다！"
				ENDIF
				CALL MESSAGE_WINDOW_D,  "", "＞젊은이들이 습격해 왔다！"
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CALL SET_ENEMY,7,[[キャラ:하이웨이스타]],33,0,0
				CALL SET_ENEMY,8,[[キャラ:하이웨이스타]],33,0,0
				CALL SET_ENEMY,9,[[キャラ:하이웨이스타]],33,0,0
				CALL SET_ENEMY,10,[[キャラ:하이웨이스타]],33,0,0
				CALL SET_ENEMY,11,[[キャラ:하이웨이스타]],33,0,0
				CALL BATTLE_START
				CALL SHOW_PICTURE, "D"
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				CALL MESSAGE_WINDOW_D,  "", @"＞젊은이들을 때려 눕힌/＞……젊은이들의 포켓에서 무엇인가가 튀어나와 있다"
				CALL MESSAGE_WINDOW_D,  "", "＞가이아 교단의 단원증을 손에 넣었다"
				CALL MESSAGE_WINDOW_D,  "", @"＞%조사처리(CALLNAME:MASTER,"는")% 더 이상 시끄러워지기 전에 그 자리를 벗어났다……"
				ITEM:가이아교단단원증 = 1
				던전フラグ:(FLAG:현던전):11 = 1
			ENDIF
		ELSE
			CALL MESSAGE_WINDOW_D,  "", "＞이제 여기에 용무는 없다"
		ENDIF
	CASE 400
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D,  "", "＞방안에는 성인을 책형(주; 기둥에 묶은 뒤 창으로 찔러죽이는 형벌)에 처할 수 있을 만큼 큰 십자가가 있고、/＞바닥에는 다양한 고문 도구들이 흩어져 있다 ……"
		IF 던전フラグ:(FLAG:현던전):13 == 0
			CALL MESSAGE_WINDOW_D,  "", "＞고문도구와 바닥에는 바로 얼마 전에 생긴듯한 핏자국이 남아있다……"
			CALL MESSAGE_WINDOW_D,  "목소리", "…크윽！……아악！……"
			CALL MESSAGE_WINDOW_D,  "", "＞돌연, 어디에선가 여성이라고 생각되는 괴로운 듯한 신음 소리가 들려 왔다"
			CALL MESSAGE_WINDOW_D,  "목소리", "…꺄악！……크윽！……"
			CALL MESSAGE_WINDOW_D,  "목소리", "……………도와줘………"
			CALL MESSAGE_WINDOW_D,  "", "＞이 방에는 아무도 없다……/＞목소리의 주인은 다른 방에 있는 것 같다……"
			던전フラグ:(FLAG:현던전):12 = 1
		ENDIF
	CASE 500
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D,  "", "＞홀의 안쪽, 커텐으로 나누어진 방안에는 거대한 악마가 있었다…"
		IF 던전フラグ:(FLAG:현던전):13 == 1
			CALL MESSAGE_WINDOW_D,  "악마", "…메시아 교도라든가 하는 놈들은 아닌 것 같지만…/그러나 즐겁디 즐거운 우리들의 미사를 방해하다니 무슨 짓이냐? /아무튼이야 좋아…. 네놈들이 누구든지 상관 없다/가이아교의 미사를 방해한 죄는, 죽음으로 갚아라! "
		ELSE
			CALL MESSAGE_WINDOW_D,  "악마", "……무슨 일인가, 당신들은? /지금은 우리들의 미사 시간이다/용무가 있다면 다음으로 해……"
			CALL MESSAGE_WINDOW_D,  "악마", "아니, 기다려봐, 딱 좋구만/미사를 봐 피가 끓어오르고 있던 참이다/8조각으로 찢어발기면서 나도 즐겨볼까! "
		ENDIF
		CALL MESSAGE_WINDOW_D,  "", "＞마왕 바람이 １체 나타났다！"
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
		;SET_ENEMY,적の포지션, 적のキャラ번호、레벨、시체잔존フラグ,보스플래그となっています
		CALL SET_ENEMY,9,[[キャラ:바람]],35,0,1
		CFLAG:(CHARANUM-1):ＨＰ보정 = 1000
		CFLAG:(CHARANUM-1):ＭＰ보정 = 8000
		CSTR:(CHARANUM-1):사고패턴 = 209
		CFLAG:(CHARANUM-1):행동횟수 = 4
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)

		CALL SET_ENEMY,7,[[キャラ:뮤턴트]],35,0,0
		CFLAG:(CHARANUM-1):ＨＰ보정 = 150
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)

		CALL SET_ENEMY,8,[[キャラ:헬]],35,0,0
		CFLAG:(CHARANUM-1):ＨＰ보정 = 150
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)

		CALL SET_ENEMY,10,[[キャラ:헬]],35,0,0
		CFLAG:(CHARANUM-1):ＨＰ보정 = 150
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)

		CALL SET_ENEMY,11,[[キャラ:뮤턴트]],35,0,0
		CFLAG:(CHARANUM-1):ＨＰ보정 = 150
		CALL SYNC_STATUS,(CHARANUM-1)
		CALL HEALTH_CHARA,(CHARANUM-1)

		CALL BATTLE_START
		
		FLAG:도주불가플래그 = 0
		FLAG:회화불능플래그 = 0
		FLAG:선제기습취소 = 0

		CALL MESSAGE_WINDOW_D,  "마왕 바람", "…그…、그런…바보같은…"
		CALL MESSAGE_WINDOW_D,  "", @"＞마왕 바람은 숨이 끊어졌다/＞바람의 시체로부터 별의 형태를 한 보석이 떠오르고 있다/＞달의 필라를 손에 넣었다! "
		CALL MESSAGE_WINDOW_D,  "", @"＞바람을 잃은 가이아 교도들은 시부야 지부를 버려 도망쳤다/＞이것으로 %조사처리(CALLNAME:MASTER,"는")% 완전히 가이아 교단에게 주목의 대상이 되었을 것이다…"
		던전フラグ:(FLAG:현던전):13 = 2 
		던전フラグ:(FLAG:현던전):14 = 1
		FLAG:탈출스킬금지 = 0
		IF 던전フラグ:(FLAG:현던전):12 == 1
			CALL MESSAGE_WINDOW_D,  "", "………………/…………/……"
			CALL SHOW_PICTURE, "EMPTY"
			CALL SHOW_PICTURE, "NONFLOORD", "아지트의 어느 방"
			CALL MESSAGE_WINDOW_D,  "소녀", "…우으…구세주…님…"
			CALL MESSAGE_WINDOW_D,  "", "＞폭행을 당하고 있던 소녀가 눈을 떴다…"
			CALL MESSAGE_WINDOW_D,  "소녀", "당신은…구세주 님…이시군요…"
			CALL INPUT_YN_D
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D,  "소녀", "아아…역시…！"
			ELSE
				CALL MESSAGE_WINDOW_D,  "소녀", "아니、틀려요/저는 알 수 있습니다…"
			ENDIF
			CALL MESSAGE_WINDOW_D,  "소녀", "나의…목소리를…듣고 있었겠지요 …? /고문 당하고 있는…동안…꿈을…꾸고 있었어요/제…생명의 위기에…구세주가…나타나는"
			CALL MESSAGE_WINDOW_D,  "소녀", "그렇지만…이제…안된다고 생각하고 있었어요…/구원은 없는 것이라고도…/그러던 중에 당신이 와 주셨어요…/정말로…감사합니다"
			CALL MESSAGE_WINDOW_D,  "소녀", "그러나……당신은 메시아 교도는 아니지요……?"
			CALL INPUT_YN_D
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D,  "소녀", "그렇습니까…역시…/그러나…당신이 저를 도와,/가이아 교단과 싸워 주다는 것에는 변함이 없습니다"
			ELSE
				CALL MESSAGE_WINDOW_D,  "소녀", "그랬었습니까 ... ... / 그러나 ... 교단 내에서 직을 가지고있는 것은 ... 아닌 것 같네요 ... ... / 당신 같은 분이 템플 나이트가 아니라는 것은 아쉽네요 ... / 그나저나 그것보다 ... ... "
			ENDIF
			CALL MESSAGE_WINDOW_D,  "소녀", "부탁합니다 ... / 저를 함께 데려가주세요 ... / 난 ... 님의 ... 기대에 ... 응할 ... 수가 없었습니다"
			CALL MESSAGE_WINDOW_D,  "소녀", "모처럼…모아…주셨는데…동료까지 잃었고…/이제 돌아갈…수도 없습니다…/그렇지만…전는…가이아 교단을 용서할…수는 없습니다…! "
			CALL MESSAGE_WINDOW_D,  "소녀", "놈들이 토쿄에 있는 한…그 땅에 안식은 찾아오지 않을 것입니다/그렇기기 때문에 적어도 놈들과 싸우는 당신의 힘이 되고 싶습니다/…당신은 당신대로…자신의 목적을 실현해 준다면…상관하지 않을테니까…/뭐든지 하겠습니다…. 그러니까…당신의…곁에…"
			CALL MESSAGE_WINDOW_D,  "", "＞소녀를 데려갑니까？"
			CALL INPUT_YN_D
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D,  "소녀", "…감사합니다/뭐든지…할테니까/저의 이름은…베스…잘 부탁드립니다"
				CALL MESSAGE_WINDOW_D,  "베스", "정말로…감사합니다…"
				CALL MESSAGE_WINDOW_D,  "", "＞베스는 눈물을 뚝뚝 흘리기 시작했다"
				CALL MESSAGE_WINDOW_D,  "베스", "미안 해요 ... / 정말 ... 기뻐서 ... ... / 왜냐하면 ... 나는 당신과 ... ... ... ..."
				CALL MESSAGE_WINDOW_D,  "", "＞원래 템플나이트였던 소녀・베스가 동료가 되었다"
				CALL ADD_NEW_COMPANION,4501, 500, 1
				SIF RESULT
					CFLAG:(RESULT:1):전투참가불가능 = -1
				CFLAG:GETCHARA([[キャラ:베스]], 0):이벤트加入 = 1
			ELSE
				CALL MESSAGE_WINDOW_D,  "소녀", "…그렇습니까…알았습니다/…어쩔수…없지요…/상처가…나으면…나가겠습니다…"
				CALL MESSAGE_WINDOW_D,  "", "소녀는 매우 슬픈 듯이  그렇게 중얼거렸다……"
			ENDIF
		ENDIF
		CALL MESSAGE_WINDOW_D,  "", @"＞상금금·가이아 교단 간부·마왕 바람을 토벌 한 것에 의해 %CALLNAME:MASTER%의 계좌에 ￥250000이 지불되었다"
		MONEY += 250000
		FLAG:탈출 = 1
	CASE 501
		CALL SHOW_PICTURE, "D"
		CALL MESSAGE_WINDOW_D,  "", "＞홀에 발을 디뎠을 때/＞그곳에서는 한 소녀의 공개 처형이 이뤄지고 있었다"
		CALL MESSAGE_WINDOW_D,  "", "＞벌써 너덜너덜하져서, 움직이는 것도 마음대로 되지 않는 소녀에 대해/＞가이아 교도나 악마들이 때리고 차는 정도도 아니고, 채찍이나 마법도 사용하며,/＞제각각 방법으로 소녀에게 폭행을 가하고 있었다/＞그리고, 소녀가 맞을 때마다, 주위의 관객들로부터 큰 환성을 터진다"
		CALL MESSAGE_WINDOW_D,  "", "＞이 상황에서는 소녀의 목숨이 끊어지는 것도 시간 문제일 것이다……"
		CALL INPUT_YN_D, "소녀를 돕는다", "갈 길을 서두른다"
		IF RESULT == 0
			CALL MESSAGE_WINDOW_D,  "가이아교도", "뭐야？　네놈은"
			CALL MESSAGE_WINDOW_D,  "악마", "우리들은 지금 즐기고 있는데？"
			CALL MESSAGE_WINDOW_D,  "여악마", "좋아좋아！/어울리지 못하는 놈은…죽이면 되는거지！"
			CALL MESSAGE_WINDOW_D,  "", "＞가이아교도와 악마들이 습격해 왔다！"
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			CALL SET_ENEMY,7,[[キャラ:하이웨이스타]],33,0,0
			CALL SET_ENEMY,8,[[キャラ:고르곤]],29,0,0
			CALL SET_ENEMY,9,[[キャラ:뮤턴트]],32,0,0
			CALL SET_ENEMY,10,[[キャラ:고르곤]],29,0,0
			CALL SET_ENEMY,11,[[キャラ:하이웨이스타]],33,0,0
			CALL SET_ENEMY,12,[[キャラ:유키죠로]],27,0,0
			CALL SET_ENEMY,13,[[キャラ:파계승]],28,0,0
			CALL SET_ENEMY,14,[[キャラ:익스타브]],29,0,0
			CALL SET_ENEMY,15,[[キャラ:파계승]],28,0,0
			CALL SET_ENEMY,16,[[キャラ:유키죠로]],27,0,0
			CALL BATTLE_START
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D,  "", "＞악마들은 힘이 다했다……/＞그러나 홀에는 아직 다수의 적들이 남아있다……/＞가이아교도와 악마들이 습격해 왔다！"
			CALL SET_ENEMY,7,[[キャラ:뮤턴트]],32,0,0
			CALL SET_ENEMY,8,[[キャラ:고르곤]],29,0,0
			CALL SET_ENEMY,9,[[キャラ:뮤턴트]],32,0,0
			CALL SET_ENEMY,10,[[キャラ:고르곤]],29,0,0
			CALL SET_ENEMY,11,[[キャラ:뮤턴트]],32,0,0
			CALL SET_ENEMY,12,[[キャラ:유키죠로]],27,0,0
			CALL SET_ENEMY,13,[[キャラ:파계승]],28,0,0
			CALL SET_ENEMY,14,[[キャラ:헬]],30,0,0
			CALL SET_ENEMY,15,[[キャラ:파계승]],28,0,0
			CALL SET_ENEMY,16,[[キャラ:유키죠로]],27,0,0
			CALL BATTLE_START
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D,  "", "＞악마들은 힘이 다했다……/＞주위에서 격렬하게 야유하는 소리가 들리기 시작하고 있다……"
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			IF 던전フラグ:(FLAG:현던전):12 == 1
				CALL MESSAGE_WINDOW_D,  "", @"＞폭행을 받고 있던 소녀를 보니……/＞희미하기는 하지만 아직 숨을 쉬고 있었다……/＞%조사처리(CALLNAME:MASTER,"는")% 응급 처치를 실시하기 위해 먼저 빠져 나가기로 했다"
			ELSE
				CALL MESSAGE_WINDOW_D,  "", "＞폭행당하던 소녀를 보니……/＞이미 숨이 끊어져 있었다……"
			ENDIF
			던전フラグ:(FLAG:현던전):13 = 1
		ELSE
			CALL MESSAGE_WINDOW_D,  "", @"＞%조사처리(CALLNAME:MASTER,"는")% 공개 처형에 열중하는 악마들이 알아차리지 못하게/＞살그머니 홀을 빠져나기로 했다……"
			던전フラグ:(FLAG:현던전):13 = 2
		ENDIF
		FLAG:탈출스킬금지 = 1
ENDSELECT
CALL MAKE_FLOOR, FLAG:현던전
RETURN 1
;=======================================================================
;ワープ
;=======================================================================
@TILE_MARK_COMMON_16_6, ARG, ARG:1, ARG:2
IF ARG == 2006
	RESULTS = 入
ELSE
	RESULTS = 승
ENDIF
@TILE_MARK_COMMON_16_7, ARG, ARG:1, ARG:2
IF ARG == 3007
	RESULTS = 출
ELSE
	RESULTS = 강
ENDIF
@WORP_16
SELECTCASE DA:(FLAG:현X):(FLAG:현Y)
	CASE 2006
		CALL MESSAGE_WINDOW_D,  "", "가이아 교단 시부야 지부의 입구다"
		CALL INPUT_YN_D, "入る", "入らない"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 3, 3007, 1
	CASE 3007
		CALL MESSAGE_WINDOW_D,  "", "가이아 교단 시부야 지부의 입구다"
		CALL INPUT_YN_D, "나간다", "나가지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 2, 2006, 1
	CASEELSE
		IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
			CALL DUNGEON_UPSTAIRS_ID, FLAG:현M+1, DA:(FLAG:현X):(FLAG:현Y)+1001
		ELSE
			CALL DUNGEON_DOWNSTAIRS_ID, FLAG:현M-1, DA:(FLAG:현X):(FLAG:현Y)-1001
		ENDIF
ENDSELECT
RETURN 1

;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_16
SELECTCASE FLAG:현M
	CASE 0
		FLAG:인카운트율 = FLAG:미조우걸음수*4
	CASE 1
		FLAG:인카운트율 = FLAG:미조우걸음수*4
	CASE 2
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 3
		FLAG:인카운트율 = FLAG:미조우걸음수*2
	CASE 4
		FLAG:인카운트율 = FLAG:미조우걸음수*2
	CASE 5
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 6
		FLAG:인카운트율 = FLAG:미조우걸음수*10
ENDSELECT

SIF FLAG:미조우걸음수 < 5
	FLAG:인카운트율 = 0
SIF FLAG:인카운트율 > 25
	FLAG:인카운트율 = 25

SIF 던전フラグ:(FLAG:현던전):14 == 1
	FLAG:인카운트율 = 0
	
;=======
;メッセンジャー(9)
;=======
@TILE_MARK_COMMON_16_9, ARG, ARG:1, ARG:2
SETCOLOR 0x00ff00
RESULTS = ｍ
@MESSAGE_16, ARG
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		CALL MESSAGE_WINDOW_D,  "악마", "바람님은 약점은 없어! /그렇지만 검공격과 전격은 비교적 효과를 주기 쉽지만! /…이것은 비밀이야! "
	CASE 1
		CALL MESSAGE_WINDOW_D,  "악마", "TOKYO의 세력도는 지금 가이아 교단이 압도적으로 우세하지/메시아 교단도 타개책을 여러가지 준비하고 있는 것 같지만 말이야/나는 딱히 어느 쪽의 편도 아니지만/우리 악마들로서는 가이아 교단이 이겨 주는 편이 편한 것은 확실하지"
	CASE 2
		CALL MESSAGE_WINDOW_D,  "여자", "가이아 교단의 No, 1은, TOKYO의 패자, 마왕 바엘 같아요/그 다음에 이케부쿠로의 고즈텐노우님, 그리고 여기 시부야의 바람님으로 이어져요"
	CASE 100
		CALL MESSAGE_WINDOW_D,  "파계승", "악마와의 공생을 인정하지 않는 메시아 교단 놈들…"
	CASE 101
		CALL MESSAGE_WINDOW_D,  "모히칸 머리", "시부야에서 제일 큰 빌딩이 가이아 교단의 지부야/3 F는 거대한 홀로 되어 있어 다양한 모임을 하고 있지/너도 가이아 교도라면 가 보면 좋을거야/다만, 몹시 취한 교도나 악마도 많기 때문에 조심하고"
	CASE 102
		CALL MESSAGE_WINDOW_D,  "악마", "토쿄…, 아! 이것은 옛 통칭인가! /지금 우리들의 사이에서는 TOKYO라고 하지! /어쩐지 세기말 같고 근사하잖아! "
	CASE 103
		CALL MESSAGE_WINDOW_D,  "모히칸 머리", "여기 시부야 가이아 교단 지부의 지도자는, 바람님 같아"
	CASE 104
		CALL MESSAGE_WINDOW_D,  "여자", "신주쿠에 카지노가 오픈한 것 같아요/뭐랄까 오너는 악마라고…/조금 무섭지만 대단한 것이 있을 듯 해요"
	CASE 105
		CALL MESSAGE_WINDOW_D,  "모히칸 머리", "일전에 바람님이 생포로 한 템플 나이트…/…귀여웠어…"
	CASE 106
		CALL MESSAGE_WINDOW_D,  "파계승", "가이아교의 교리가 사람들을 구한다"
	CASE 107
		CALL MESSAGE_WINDOW_D,  "모히칸 머리", "템플 나이트라고 하는 것은 메시아 교단의 정예 부대야/아무튼 우리들 가이아 교단의 가이아즈에 비하면 쓰레기라고 해도 좋을 정도이지만"
	CASE 108
		CALL MESSAGE_WINDOW_D,  "모히칸 머리", "여기의 지하도에는 디스코는 없다구/북측의 지하도에서 들어오는 거지"
ENDSELECT
;=======================================================================
;필요레벨눈安
;권장LV 雑물고기최저LV 雑물고기最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_16
RETURN 25, 24, 28, 35
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_16
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_16
RETURN CLASS_NUM_COMMON("中級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_16, ARG
RETURN ENEMY_NUM_COMMON("中級", ARG)

;=======================================================================
;적の종류
;=======================================================================
@ENEMY_16, ARG
;인간込みLv22-30
;악마のみLv24-30
SELECTCASE FLAG:현M
	CASE 0, 1, 2
		SELECTCASE RAND:100
			CASE IS < 15
				;15%で펑크스Lv13　랭크3
				RETURN [[キャラ:펑크스]], 24
			CASE IS < 30
				;15%で킹즈헤드Lv15　랭크3
				RETURN [[キャラ:킹즈헤드]], 25
			CASE IS < 45
				;15%で메탈Lv19　랭크2
				RETURN [[キャラ:메탈]], 26
			CASE IS < 60
				;15%で하이웨이스타Lv21　랭크1
				RETURN [[キャラ:하이웨이스타]], 24
			CASE IS < 70
				;10%で유키죠로Lv21　랭크1
				RETURN [[キャラ:유키죠로]], 24
			CASE IS < 80
				;10%で굴라Lv22　랭크1
				RETURN [[キャラ:굴라]], 25
			CASE IS < 90
				;10%で익스타브Lv23　랭크1
				RETURN [[キャラ:익스타브]], 26
			CASE IS < 100
				;10%で뷔브르Lv23　랭크1
				RETURN [[キャラ:뷔브르]], 26
		ENDSELECT
	CASEELSE
		SELECTCASE RAND:100
			CASE IS < 15
				;15%で프라이데이Lv24　랭크1
				RETURN [[キャラ:프라이데이]],27
			CASE IS < 30
				;15%で파계승Lv25　랭크1
				RETURN [[キャラ:파계승]],28
			CASE IS < 45
				;15%で메탈Lv19　랭크3
				RETURN [[キャラ:메탈]],28
			CASE IS < 60
				;15%で하이웨이스타Lv21　랭크2
				RETURN [[キャラ:하이웨이스타]],27
			CASE IS < 70
				;10%で사라시나히메Lv30
				RETURN [[キャラ:사라시나히메]],27
			CASE IS < 80
				;10%で맨이터Lv27
				RETURN [[キャラ:맨이터]],27
			CASE IS < 90
				;10%で아에슈마
				RETURN [[キャラ:아에슈마]],27
			CASE IS < 100
				;10%で고르곤Lv29
				RETURN [[キャラ:고르곤]],28
		ENDSELECT
ENDSELECT
;=================================
;特殊調整
;=================================
@SET_ENEMY_STATUS_16, ARG
SELECTCASE NO:ARG
	CASE [[キャラ:뷔브르]]
		ABL:ARG:아이템2 = 1002
		ABL:ARG:입수확률2 = 15
	CASE [[キャラ:아에슈마]]
		ABL:ARG:아이템1 = 1002
		ABL:ARG:입수확률1 = 10
		ABL:ARG:아이템2 = 1017
		ABL:ARG:입수확률2 = 5
	CASE [[キャラ:맨이터]]
		ABL:ARG:아이템2 = 3501
		ABL:ARG:입수확률2 = 5
		ABL:ARG:아이템3 = 1018
		ABL:ARG:입수확률3 = 5
ENDSELECT
;=================================
;사고패턴
;=================================
;바람の사고패턴
@SET_ACTION_209,ARG
IF CFLAG:ARG:행동한횟수 == 0
	CALL CHECK_ACTIONABLE,ARG,405
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = 405
	CALL RANDOM_TARGET,ARG,405
ELSEIF CFLAG:ARG:행동한횟수 == 1
	IF RAND:2 == 0
		CALL CHECK_ACTIONABLE,ARG,602
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 602
		CALL RANDOM_TARGET,ARG,602
		RETURN 1
	ELSE
		CALL CHECK_ACTIONABLE,ARG,603
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 603
		CALL RANDOM_TARGET,ARG,603
		RETURN 1
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 2
	IF RAND:3 == 0
		CALL CHECK_ACTIONABLE,ARG,706
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 706
		CALL RANDOM_TARGET,ARG,706
		RETURN 1
	ELSEIF RAND:3 == 0
		CALL CHECK_ACTIONABLE,ARG,806
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 806
		CALL RANDOM_TARGET,ARG,806
		RETURN 1
	ELSE
		CALL CHECK_ACTIONABLE,ARG,1006
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 1006
		CALL RANDOM_TARGET,ARG,1006
		RETURN 1
	ENDIF
ELSEIF CFLAG:ARG:행동한횟수 == 3
	IF RAND:2 == 0
		CALL CHECK_ACTIONABLE,ARG,505
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 505
		CALL RANDOM_TARGET,ARG,505
		RETURN 1
	ELSE
		CALL CHECK_ACTIONABLE,ARG,0
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 0
		CALL RANDOM_TARGET,ARG,0
		RETURN 1
	ENDIF
ELSE
		$DECIDE_ACTION
		CALL SEARCH_ACT,ARG
		IF RESULT == 0
			CFLAG:ARG:입력행동 = -1
			CFLAG:ARG:방어플래그 = 1
			RETURN 0
		ENDIF
;		PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
		LOCAL = RAND:RESULT
		;스킬번호決定
		LOCAL:1 = S:(10+LOCAL)
;		PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
		$TARGET_LOOP
		
		CALL RANDOM_TARGET,ARG,LOCAL:1
		CALLFORM SKILL_TARGET_{LOCAL:1}
		;ここで스킬번호を行動内容に代入
		SIF CFLAG:ARG:타겟 == -1
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = LOCAL:1
ENDIF

;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_16
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:4
	CASE 0
		RETURN [[キャラ:메탈]] , 3 + RAND:10 , CSVBASE([[キャラ:메탈]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:펑크스]] , 3 + RAND:10 , CSVBASE([[キャラ:펑크스]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:파계승]] , 3 + RAND:10 , CSVBASE([[キャラ:파계승]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:하이웨이스타]] , 3 + RAND:10 , CSVBASE([[キャラ:하이웨이스타]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
