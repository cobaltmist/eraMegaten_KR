;=======================================================================
;軽子坂高校
;ボス オキュペテー または モー・ショボー２体
;ダンジョンナンバー2　ＭＡＰ0~5
;=======================================================================
;フラグ
;던전플래그:2:0-10 = 宝箱
;던전플래그:2:11 = ボス撃破フラグ(1.倒した)
;던전플래그:2:12 = レイコフラグ(1.奴隷にした 2.放っておいた)

;=======================================================================
;攻略条件
;=======================================================================
@PREREQUISITE_DUNGEON_2
;REQ2 軽子坂高校体育館(1)＆（２）をクリアしていなければダメ
IF (의뢰플래그:2:0 == 1 && 의뢰플래그:3:0 == 1) && 던전플래그:2:11 == 0
	RETURN 1
ELSE
	RETURN 0
ENDIF


;=======================================================================
;ダンジョン名
;=======================================================================
@GET_DUNGEON_NAME_2
RESULTS = 카루코자카 고교


;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_2,ARG,ARG:1
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT


;=======================================================================
;[5]調べる　実行時のイベント
;=======================================================================
@EVENT_CHECK_DUNGEON_2

;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 8
	CALL DUNGEON_EXIT
	RETURN 1

;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_2_0
	
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
	CALL UPSTAIRS_2_0
	
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL DOWNSTAIRS_2_0

;========
;イベント
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
	CALL DUNGEON_EVENT_2_0
ELSE
	CALL MESSAGE_WINDOW_D, "", "＞아무것도 없는 것 같다"
	RETURN 0
ENDIF

;=======================================================================
;タイル進入時のイベント
;=======================================================================
@EVENT_ENTER_DUNGEON_2,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 8
	CALL DUNGEON_EXIT
	RETURN 1

;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_2_0

;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
	CALL UPSTAIRS_2_0

ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL DOWNSTAIRS_2_0

;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1

;===========
;イベント
;===========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
	CALL DUNGEON_EVENT_2_0
ENDIF
RETURN 0

;=======================================================================
;輪姦参加悪魔
;=======================================================================
@DUNGEON_RAPE_DEVIL_2
;ランダムにどの悪魔が出るか決定
;RETURN CSV番号 , 人数 , レベル
SELECTCASE RAND:4
	CASE 0
		RETURN [[キャラ:잇폰다타라]] , 3 + RAND:10 , CSVBASE([[キャラ:잇폰다타라]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:코볼트]] , 3 + RAND:10 , CSVBASE([[キャラ:코볼트]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:안드라스]] , 3 + RAND:10 , CSVBASE([[キャラ:안드라스]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:브라우니]] , 3 + RAND:10 , CSVBASE([[キャラ:브라우니]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT

