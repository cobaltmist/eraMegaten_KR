;=======================================================================
;指定したマスに進入가능か
;=======================================================================
@rabo_ENTER,ARG,ARG:1
;DA:ARG:(ARG:1)
;ARG、ARG:1はそれぞれ대상のマスのX、Y座標を表しています。
;この던전ではエレベーターの扉が一度右側から開けておかないと左側からは開けられない、という処理に사용しています。
SELECTCASE FLAG:現M
	CASE 37
		IF ARG:1 < 2 && 던전フラグ:13:15 == 9
			CALL MESSAGE_WINDOW_D, "게일", "EGG는 그쪽이 아니다"
			RETURN 0
		ENDIF
	CASE 32
		IF ARG == 7 && ARG:1 == 9 && 던전フラグ:13:15 < 2
			CALL MESSAGE_WINDOW_D, "", "＞０１표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
	CASE 34
		IF ARG == 5 && ARG:1 == 30 && 던전フラグ:13:15 < 5
			CALL MESSAGE_WINDOW_D, "", "＞０３표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
		IF ARG == 17 && ARG:1 == 7 && 던전フラグ:13:15 < 6
			CALL MESSAGE_WINDOW_D, "", "＞０４표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
		IF ARG == 22 && ARG:1 == 4 && 던전フラグ:13:15 < 7
			CALL MESSAGE_WINDOW_D, "", "＞０５표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
	CASE 35
		IF ARG == 7 && ARG:1 == 20 && 던전フラグ:13:15 < 3
			CALL MESSAGE_WINDOW_D, "", "＞０１표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
		IF ARG == 7 && ARG:1 == 24 && 던전フラグ:13:15 < 4
			CALL MESSAGE_WINDOW_D, "", "＞０２표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
		;레어宝箱
		IF ARG == 16 && ARG:1 == 9 && 던전フラグ:13:15 < 7
			CALL MESSAGE_WINDOW_D, "", "＞０５표시가 된 문은 닫혀 있다"
			RETURN 0
		ENDIF
	CASE 9
		IF ARG == 3 && ARG:1 == 4 && 던전フラグ:13:4 < 14
			CALL MESSAGE_WINDOW_D, "", "＞엘리베이터다"
			CALL MESSAGE_WINDOW_D, "", "＞문은 닫혀 있다"
			RETURN 0
		ENDIF
		
ENDSELECT
RETURN 1
;=======================================================================
;ラボタイル
;=======================================================================
;이벤트タイル特殊표시4
@rabo_TILE, ARG
SELECTCASE ARG / 10
	CASE 3100,3612,3801
		SETCOLOR 0x00ff00
		RESULTS = 竜
	CASE 3101,3605,3802
		SETCOLOR 0x00ff00
		RESULTS = 杏
	CASE 3102,3608,3803
		SETCOLOR 0x00ff00
		RESULTS = 祐
	CASE 3103,3607,3804
		SETCOLOR 0x00ff00
		RESULTS = 春
	CASE 3104,3609,3805
		SETCOLOR 0x00ff00
		RESULTS = 真
	;알지라
	CASE 3105,3603,3806
		SETCOLOR 0x00ff00
		RESULTS = ア
	CASE 3106,3401,3611,3807
		SETCOLOR 0x00ff00
		RESULTS = シ
	CASE 3107,3601,3800,3701
		SETCOLOR 0x00ff00
		RESULTS = ゲ
	CASE 3108,3610,3808,3900
		SETCOLOR 0x00ff00
		RESULTS = ロ
	CASE 3109,3600
		SETCOLOR 0x00ff00
		RESULTS = サ
	CASE 3300
		SETCOLOR 0x00ff00
		RESULTS = サ
	CASE 3501
		SETCOLOR 0x00ff00
		RESULTS = 春
	CASE 3500
		SETCOLOR 0x00ff00
		RESULTS = ｍ
	CASE 3700
		IF 던전フラグ:13:16 % 5 > 0
			SETCOLOR 0x00ff00
			RESULTS = Ｈ
		ELSE
			RESULTS = □
		ENDIF
	CASE 3400
		IF 던전フラグ:13:16 % 3 > 0
			SETCOLOR 0x00ff00
			RESULTS = Ｈ
		ELSE
			RESULTS = □
		ENDIF
	CASE 3602,3604,3606
		RESULTS = ！
	CASE 501
		SETCOLOR 0x00ff00
		RESULTS = ア
	CASEELSE
		SETCOLOR 0x00ff00
		RESULTS = ｍ
ENDSELECT

;이벤트タイル特殊표시9
@rabo_TILE2, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 100, 200, 300
		RESULTS = ↑
	CASE 3300
		IF 던전フラグ:13:15 < 1
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 3200
		IF 던전フラグ:13:15 < 2
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 3503,3502,3501,3400,3403,3402,3401
		RESULTS = □
	CASEELSE
		RESULTS = ！
ENDSELECT

;=======================================================================
;ラボ調べ이벤트(4)
;=======================================================================
@rabo_event_sw

SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 3100
			CALL MESSAGE_WINDOW_D, "류지", "그 제나라는 녀석/자기 아이를 뭐로 생각하는 거야… "
	CASE 3101
			CALL MESSAGE_WINDOW_D, "안", "류지…/엔젤이란 사람 때문에 엄청 화나 있어"
			CALL MESSAGE_WINDOW_D, "안", "우리도 그렇지만 류지는 특히/과거의 일도 있어서 가족을 아끼지 않는 사람을 싫어해"
	CASE 3102
			CALL MESSAGE_WINDOW_D, "유스케", "나도 밖에서 많은 조각상을 보고 왔어・・・/정확히는 조각상이 아니지만"
			CALL MESSAGE_WINDOW_D, "유스케", "처음에는 인간의 표정이 매우 리얼한 상이라고 생각했는데/앞으로 나아가도 나아가도 조각상뿐이어서…"
			CALL MESSAGE_WINDOW_D, "유스케", "도중부터 돌로 된 인간이 아닐까 싶었는데/설마 정말로 그랬을 줄은…"
	CASE 3103
			CALL MESSAGE_WINDOW_D, "하루", "저、처음에는 카르마 시티에 있었어요"
			CALL MESSAGE_WINDOW_D, "하루", "잠시 걷다 보니/곤란해 하는 아이가 있어서/그 아이를 도와주었어요"
			CALL MESSAGE_WINDOW_D, "하루", "그리고 나서 그 아이가 비밀 기지에 데려가줬는데/갑자기 이상한 사람들에게 습격당했어요"
			CALL MESSAGE_WINDOW_D, "하루", "필사적으로 저항했지만/수가 많아서 도망갈 수 없었어요…"
	CASE 3104
			CALL MESSAGE_WINDOW_D, "마코토", "후타바쨩、구하러 못 가서 미안해…/기다려줘、금방 끝낼 테니까…"
	;알지라
	CASE 3105
			CALL MESSAGE_WINDOW_D, "알지라", "히트、세라…"
			CALL MESSAGE_WINDOW_D, "알지라", "우리가 만들어진/”진정한 이유”란 것이 뭐야…"
	CASE 3106
			CALL MESSAGE_WINDOW_D, "시에로", "우리들、하늘도 바다도 푸르고 모두 웃고 있고/아무도 서로 죽이지 않는… "
			CALL MESSAGE_WINDOW_D, "시에로", "그런 니르바나에 가고 싶었을 뿐이었어 "
			CALL MESSAGE_WINDOW_D, "시에로", "왜 이렇게 되어버린 거야… "
	CASE 3107
		CALL MESSAGE_WINDOW_D, "게일", "대중은 쉽게 안이함에 휩쓸려서/체제에 매몰하고 사고를 정지한다 "
		CALL MESSAGE_WINDOW_D, "게일", "어떤 숭고한 이상도 퇴색하고/개개인의 양심과 죄의식도 사라진다 "
		CALL MESSAGE_WINDOW_D, "게일", "이것이 관리된 낙원의 실상인가 "
		CALL MESSAGE_WINDOW_D, "게일", "보였다 제나、너의 본심이/하지만 그래서는 너무나 차가워… "
	CASE 3108
			CALL MESSAGE_WINDOW_D, "로알드", "도가 지나친 질서도 혼란도 사양하겠어/길은 가운데로 갈 수도 있는 거야 "
			CALL MESSAGE_WINDOW_D, "로알드", "자、세라를 찾아주자 "
			CALL MESSAGE_WINDOW_D, "로알드", "사람의 업 같은 거창한 것/어느 한 사람이 짊어져도 괜찮은 게 아니야 "
	CASE 3109
		CALL MESSAGE_WINDOW_D, "서프", "아마도 우리는 엔젤에게/이용당하고 있겠지 "
		CALL MESSAGE_WINDOW_D, "서프", "그렇지만 지금은 세라를 구하기 위해/그 요구에 응할 수밖에 없어 "
	CASE 3300
		CALL MESSAGE_WINDOW_D, "서프", "총 소리가 대단하군… "
		CALL MESSAGE_WINDOW_D, "서프", "이 틈에 준비를 하고 갈까？ "
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[0]아무것도 아니다 "
		SIF RESULT == 1
			CALL RECONSTRUCTION
	CASE 3500
		IF 던전フラグ:13:15 < 3
			CALL MESSAGE_WINDOW_D, "연구원", "머… 먹지 말아주세요！//……응？ "
			CALL MESSAGE_WINDOW_D, "연구원", "당신들이 그 사람들인가요…/아까는 도망가서 죄송합니다/놀라서 정신이 없어서… "
			CALL MESSAGE_WINDOW_D, "연구원", "기술 부장으로부터 협력하라는 지시가 있었습니다/레벨１의 해제 키밖에 안 가지고 있지만/잘 써주세요 "
			CALL MESSAGE_WINDOW_D, "", "시큐리티 카드０１을 입수했다 "
			던전フラグ:13:15 = 3
		ENDIF
		CALL MESSAGE_WINDOW_D, "연구원", "시설은 마담파 일당들에게 제압당했지만/연구원은 아직 살아남아 있을 겁니다 "
		CALL MESSAGE_WINDOW_D, "연구원", "안으로 들어가려면 다른 키가 필요해요/그들에게서 키를 입수하세요 "
		CALL MESSAGE_WINDOW_D, "연구원", "…그리고 제가 여기 있다는 것은/놈들이 알지 못하게… "
	CASE 3501
		CALL MESSAGE_WINDOW_D, "하루", "…뭐랄까/생각했던 것보다 심하네요/자세한 건 말하고 싶지 않지만요… "
		CALL MESSAGE_WINDOW_D, "하루", "세라쨩、무사했으면 좋겠네요 "
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[0]아무것도 아니다 "
		SIF RESULT == 1
			CALL RECONSTRUCTION
	CASE 3402
		CALL MESSAGE_WINDOW_D, "연구원", "히、히이이이이이이이…… "
		CALL MESSAGE_WINDOW_D, "연구원", "죄…죄송합니다 봐주세요！/뭐든지 할게요！ "
		CALL INPUT_SELECT_D, "[1]응？지금 뭐든지 한다고 했지？/[0]그래・・・（무관심） "
		IF RESULT == 1
			CALL MESSAGE_WINDOW_D, "연구원", "뭐든지 할 테니 먹는 것만은 제바알… "
			IF 던전フラグ:13:15 < 6
				CALL INPUT_SELECT_D, "[0]네 발로 엎드려라。빨리 하라고/[1]어이 임마！ 내놔！ 키 갖고 있냐 쨔샤！ "
			ELSE
				CALL INPUT_SELECT_D, "[0]네 발로 엎드려라。빨리 하라고/[1]그래・・・（무관심） "
			ENDIF
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "연구원", "아…네에… "
				CALL MESSAGE_WINDOW_D, "", "연구원은 네 발로 엎드린다 "
				CALL INPUT_SELECT_D, "[0]야、멍멍 짖어봐라 이 자식아/[1]이 정도로 봐주지 "
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "연구원", "멍！  멍！  멍！ "
					CALL INPUT_SELECT_D, "[0]바보냐？ 웃기고 있네/[1]이 정도로 봐주지 "
					IF RESULT == 0
						IF RAND:10 == 0
							CALL MESSAGE_WINDOW_D, "서프", "뭐 하고 있어。빨리 세라를 구하러 가자 "
						ELSEIF RAND:9 == 0
							CALL MESSAGE_WINDOW_D, "게일", "이봐、시덥잖은 일은 그만두고 서두르자 "
						ELSEIF RAND:8 == 0
							CALL MESSAGE_WINDOW_D, "알지라", "…거기까지만 하는 게 좋지 않을까？ "
						ELSEIF RAND:7 == 0
							CALL MESSAGE_WINDOW_D, "시에로", "어이、무슨 짓이야/이런 일에 시간 들이지 말라고 "
						ELSEIF RAND:6 == 0
							CALL MESSAGE_WINDOW_D, "로알드", "…그거、아직 시간 걸리는 건가？/갈 길을 서두르자 "
						ELSEIF RAND:5 == 0
							CALL MESSAGE_WINDOW_D, "류지", "…아직 시간 걸릴 것 같나… "
						ELSEIF RAND:4 == 0
							CALL MESSAGE_WINDOW_D, "안", "…슬슬 그만하는 게 좋지 않을까… "
						ELSEIF RAND:3 == 0
							CALL MESSAGE_WINDOW_D, "유스케", "뭐 하고 있어？/그렇게까지 해도 아무것도 안 나올 것 같은데… "
						ELSEIF RAND:2 == 0
							CALL MESSAGE_WINDOW_D, "마코토", "…저기요、뭘 하는 건가요？ "
						ELSE
							CALL MESSAGE_WINDOW_D, "하루", "저기ー　거기까지만 하는 게… "
						ENDIF
					ENDIF
				ENDIF
			ELSE
				CALL MESSAGE_WINDOW_D, "연구원", "아…네… "
				CALL MESSAGE_WINDOW_D, "", "시큐리티 카드０４를 입수했다 "
				던전フラグ:13:15 = 6
			ENDIF
		
		ENDIF
	CASE 3403
		CALL MESSAGE_WINDOW_D, "타케미", "세라쨩을 부탁할게 "
	CASE 3401
		CALL MESSAGE_WINDOW_D, "시에로", "이 문 너머에서 안 좋은 예감이 들어… "
		CALL MESSAGE_WINDOW_D, "시에로", "준비는 게을리 하지 말라구 "
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[0]아무것도 아니다 "
		SIF RESULT == 1
			CALL RECONSTRUCTION
	CASE 3600,3601
		CALL MESSAGE_WINDOW_D, "게일", "서프、알지라가 발견한 자료를 봤나？ "
		CALL MESSAGE_WINDOW_D, "서프", "응、내가 공격했던 녹색의 구체/그것이 초기화 코드였던 모양이야… "
		CALL MESSAGE_WINDOW_D, "게일", "색은 다르지만 월등히 커다랗고/비슷한 것이 이곳의 하늘에도 떠 있다 "
		CALL MESSAGE_WINDOW_D, "게일", "불길한 일이군 "
	CASE 3603
		CALL MESSAGE_WINDOW_D, "알지라", "이 자료, 정크야드의 실험에 관한 것이/적혀 있어 "
		CALL INPUT_SELECT_D, "[1]읽는다/[0]읽지 않는다 "
		IF RESULT == 1
			CALL MESSAGE_WINDOW_D, "", "테크노 샤먼 19호의 강제 샐비지 및/바이러스 검증 실험에 관한 경과 보고"
			CALL MESSAGE_WINDOW_D, "", "2025년 XX월 XX일 XX시 XX분/제 96트라이브 엠브리온의 조건 달성에 의해、/EGG 하드 프로텍트 및/산사라 소프트 프로젝트의 해제를 확인"
			CALL MESSAGE_WINDOW_D, "", "같은 날 XX시 XX분/스테이지1으로 강제 다이브했던/19호의 의식 각성을 확인하고/같은 날 같은 시각/스테이지1의 전 데이터 완전 소멸을 확인"
			CALL MESSAGE_WINDOW_D, "", "특별 조사 위원회는、/기술부장을 비롯한 27명의 직원에 대한 심문 및/기술부 사찰 결과、이러한 사태를/19호가 설정했던 초기화 코드의/우발적 오작동에 의한 예측 대처 불가능한 사고로/인정하는 바다"
			CALL MESSAGE_WINDOW_D, "", "또한 악마화 바이러스의 시험 실험 데이터는/사고 전에 97％가 백업을 마쳐서、/니르바나 계획에 주는 영향은 경미한/것으로 확인되었다。"
			CALL MESSAGE_WINDOW_D, "", "이상으로 볼 때、장기간 방치 상태였던/스테이지1과 아수라 계획의 이용 가치가/사고 당시 완전히 소멸했던 것/이를 인정하여 기술부의 과실을 묻지 않기로 한다"
		ENDIF
	CASE 3605
		CALL MESSAGE_WINDOW_D, "안", "테크노 샤먼 19호라는 건… 세라쨩 말이야？ "
	CASE 3602,3604,3606
		CALL MESSAGE_WINDOW_D, "", "퀴비에 증후군으로 인해 결정화한/인간이 아무렇게나 놓여있다"
	CASE 3607
		CALL MESSAGE_WINDOW_D, "하루", "…왠지 인간이 그대로 돌이 된 듯한/석상이 많이 있네… "
		CALL MESSAGE_WINDOW_D, "유스케", "아니、이건 퀴비에 증후군에 걸린 인간일 거야/나는 이런 것을 밖에서 많이 보고 왔거든 "
		CALL MESSAGE_WINDOW_D, "유스케", "카르마 시티에서 하늘이 보이지？/거기서 보이는 검은 태양에 의해 이런 모습이 된 거야 "
		CALL MESSAGE_WINDOW_D, "하루", "…여、역시 그렇구나/퀴비에 증후군은 로알드 씨네한테 들었어 "
	CASE 3608
		CALL MESSAGE_WINDOW_D, "하루", "아케치 군、어떻게 된 걸까/전에 싸웠을 때보다 무척 화가 나 있었어… "
		CALL MESSAGE_WINDOW_D, "유스케", "애초에 그가 왜 살아있는 거지？/그 녀석은 시도의 팰리스 안에서 죽었을 텐데… "
		CALL MESSAGE_WINDOW_D, "유스케", "어떻게 부활한 걸까… "
		CALL MESSAGE_WINDOW_D, "하루", "그런데…　왠지 우리가 아는 아케치 군이 아닌 느낌이 드는데…？ "
	CASE 3609
		CALL MESSAGE_WINDOW_D, "로알드", "고로라는 소년에게서는 증오밖에 느껴지지 않았어… "
		CALL MESSAGE_WINDOW_D, "로알드", "마코토 군、그와 무슨 일이 있었던 거지？ "
		CALL MESSAGE_WINDOW_D, "마코토", "네、그와 우리 사이엔 이런저런 관계가 있는데요/우리가 아는 그는… "
	CASE 3610
		CALL MESSAGE_WINDOW_D, "로알드", "업(카르마)이라… "
		CALL MESSAGE_WINDOW_D, "로알드", "사람의 혼은 윤회의 법칙에 의해/죽어서도 현세에 묶여있다고 하지 "
		CALL MESSAGE_WINDOW_D, "로알드", "엔젤이 말했던 해탈이란/업을 끊어서 그 굴레에서 벗어나는 것이다 "
		CALL MESSAGE_WINDOW_D, "로알드", "그곳에 뭐가 있는지는 모르지만/그것이야말로 사람 본연의 모습… "
		CALL MESSAGE_WINDOW_D, "로알드", "엔젤은 그것을 생물학적인 진화와/결부시켜 생각했던 모양이군 "
		CALL MESSAGE_WINDOW_D, "로알드", "엔젤이 말했던 해탈이란/업을 끊어서 그 굴레에서 벗어나는 것이다 "
		CALL MESSAGE_WINDOW_D, "로알드", "생명의 업을 가장 단적으로 보여주는 도태/그것을 추구한 끝에 깨달음이 있다。 다만… "
		CALL MESSAGE_WINDOW_D, "로알드", "말을 바꾸면 ”멸망”이 아닌가…？ "
	CASE 3611,3612
		CALL MESSAGE_WINDOW_D, "시에로", "그 녀석은 도대체 뭐야？/왠지 너희들을 엄청나게 원망하고 있었어 "
		CALL MESSAGE_WINDOW_D, "류지", "확실히 우리가 아는 사람이긴 한데/나도 뭐가 뭔지 모르겠어ー "
		CALL MESSAGE_WINDOW_D, "류지", "그때 늬우쳤던 게 아니었냐고… "
	CASE 3701
		IF 던전フラグ:13:15 == 9
			CALL MESSAGE_WINDOW_D, "게일", "세라가 걱정된다/빨리 EGG로 가자 "
		ELSE
			CALL MESSAGE_WINDOW_D, "게일", "아무래도 이 문 너머가 EGG인 것 같군 "
		ENDIF
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[0]아무것도 아니다 "
		SIF RESULT == 1
			CALL RECONSTRUCTION
	CASE 3700
		IF 던전フラグ:13:16 % 5 > 0
			PRINTL 힐 스폿이 있다。
			CALL INPUT_YN,"사용한다（한 번 사용하면 사라집니다）","사용하지 않는다"
			IF RESULT == 0
				PRINTFORMW %CALLNAME:MASTER% 일행은 회복했다
				FOR LOCAL, 1, 7
					SIF POS(LOCAL) > -1
						CALL HEALTH_CHARA, POS(LOCAL)
				NEXT
				DA:(FLAG:現X):(FLAG:現Y) = 1
				던전フラグ:13:16 *= 5
			ENDIF
		ENDIF
	CASE 3800
		CALL MESSAGE_WINDOW_D, "게일", "어쨌든 이곳에서 탈출하자 "
		CALL MESSAGE_WINDOW_D, "게일", "준비는 확실히 하고 가라 "
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[2]세이브한다/[0]아무것도 아니다 "
		IF RESULT == 1
			CALL RECONSTRUCTION
		ELSEIF RESULT == 2
			CALL TITLE_SAVEGAME
		ENDIF
	CASE 3801
		CALL MESSAGE_WINDOW_D, "류지", "도대체 뭐냐고 그 녀석들 "
	CASE 3802
		CALL MESSAGE_WINDOW_D, "안", "있잖아、여기는 건물？/왠지 벽이나 바닥 같은 게 미묘하게 부드러운 것 같은데… "
	CASE 3803
		CALL MESSAGE_WINDOW_D, "유스케", "왠지 또 이상한 곳으로 날려졌네… "
	CASE 3804
		CALL MESSAGE_WINDOW_D, "하루", "다신 연합은 세라쨩에게 응큼한 짓 안 하겠죠…？ "
	CASE 3805
		CALL MESSAGE_WINDOW_D, "마코토", "조금 전 위쪽 방에서 우리 동료가 보인 것 같은 느낌이 들었어요 "
	CASE 3806
		CALL MESSAGE_WINDOW_D, "알지라", "아무튼 빨리 여기서 나가서 서프와 세라를 구하자 "
	CASE 3807
		CALL MESSAGE_WINDOW_D, "시에로", "형님… 괜찮겠지…？/세라도 걱정된다고 "
	CASE 3808
		CALL MESSAGE_WINDOW_D, "로알드", "도대체 이곳은 어디지？/카르마 시티의 안인가？ "
	CASE 3400
		IF 던전フラグ:13:16 % 3 > 0
			PRINTL 힐 스폿이 있다。
			CALL INPUT_YN,"사용한다（한 번 사용하면 사라집니다）","사용하지 않는다"
			IF RESULT == 0
				PRINTFORMW %CALLNAME:MASTER% 일행은 회복했다
				FOR LOCAL, 1, 7
					SIF POS(LOCAL) > -1
						CALL HEALTH_CHARA, POS(LOCAL)
				NEXT
				DA:(FLAG:現X):(FLAG:現Y) = 1
				던전フラグ:13:16 *= 3
			ENDIF
		ENDIF
	CASE 3900
		CALL MESSAGE_WINDOW_D, "로알드", "이 문 너머에서 기척이 있다… "
		CALL MESSAGE_WINDOW_D, "로알드", "준비 하는 것이 좋겠어 "
		CALL INPUT_SELECT_D, "[1]동료를 교체한다/[2]세이브한다/[0]아무것도 아니다 "
		IF RESULT == 1
			CALL RECONSTRUCTION
		ELSEIF RESULT == 2
			CALL TITLE_SAVEGAME
		ENDIF
	CASE 500
			PRINTL 힐 스폿이 있다。
			CALL INPUT_YN,"사용한다（한 번 사용하면 사라집니다）","사용하지 않는다"
			IF RESULT == 0
				PRINTFORMW %CALLNAME:MASTER% 일행은 회복했다
				FOR LOCAL, 0, 6
					SIF POS(LOCAL) > -1
						CALL HEALTH_CHARA, POS(LOCAL)
				NEXT
				DA:(FLAG:現X):(FLAG:現Y) = 1
				던전フラグ:13:3 = 1
			ENDIF
ENDSELECT


;=======================================================================
;ラボ調べ이벤트(9)
;=======================================================================
@rabo_event2_sw
;=======================================================================
;ラボ侵入이벤트(4)
;=======================================================================
@rabo_event
#LOCALSIZE 3

SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 405
		IF 던전フラグ:13:2 < 7
			CALL MESSAGE_WINDOW_D, "프레드", "부탁해！/구해줘… "
			;この命令で이벤트は破壊され、ただの床になる
			DA:(FLAG:現X):(FLAG:現Y) = 1
			던전フラグ:13:2 = 7
		ENDIF
ENDSELECT
;=======================================================================
;ラボ侵入이벤트（9）
;=======================================================================
@rabo_event2
SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 3300
		IF 던전フラグ:13:15 == 0
			CALL MESSAGE_WINDOW_D, "마담파 카르마병", "침입자！/그 아수라다！！ "
					PRINTW 적이 나타났다！
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
			
				CALL SET_ENEMY,8,[[キャラ:크투가]],45
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,9,[[キャラ:히노카구츠치]],45
				ABL:(CHARANUM-1):스킬4 = 724
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:비야키]],45
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			FLAG:인카운터율 = 0
			FLAG:未遭遇歩数 = 0
				
				던전フラグ:13:15 = 1
		ENDIF
	CASE 3200
		IF 던전フラグ:13:15 < 2
			CALL MESSAGE_WINDOW_D, "마담파 카르마병", "네놈들 벌써 이런 곳까지！ "
					PRINTW 적이 나타났다！
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
			
				CALL SET_ENEMY,8,[[キャラ:제파르]],45
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:틀랄테쿠흐틀리]],45
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
				
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			FLAG:인카운터율 = 0
			FLAG:未遭遇歩数 = 0
				
				던전フラグ:13:15 = 2
			CALL MESSAGE_WINDOW_D, "연구원", "히、히이이이이이이이！ "
			CALL MESSAGE_WINDOW_D, "", "방에 있던 연구원은 달아났다 "
			CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-2
			CALL MESSAGE_WINDOW_D, "", "달아난 곳으로 쫓아가보니/오른쪽 문을 열고 달아났다 "
		ENDIF
	CASE 3403
		IF 던전フラグ:13:15 < 5
			CALL MESSAGE_WINDOW_D, "", "문 너머에서 기척이 있다 "
			CALL INPUT_SELECT_D, "[1]문을 연다/[0]열지 않는다 "
			IF RESULT == 1
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-2
				CALL MESSAGE_WINDOW_D, "마담파 카르마병", "아수라인가 "
				CALL MESSAGE_WINDOW_D, "마담파 카르마병", "마침 잘됐군。여기 놈들은/기개가 없어서 넌더리가 나던 참이다 "
				
					PRINTW 적이 나타났다！
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
			
				CALL SET_ENEMY,8,[[キャラ:파주주]],46
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:카나로아]],46
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
				
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				FLAG:인카운터율 = 0
				FLAG:未遭遇歩数 = 0
				CALL MESSAGE_WINDOW_D, "", "시큐리티 카드０３를 입수했다 "
				던전フラグ:13:15 = 5
			ELSE
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)+1
			ENDIF
		ENDIF
	CASE 3401
		IF 던전フラグ:13:15 < 7
			CALL MESSAGE_WINDOW_D, "", "문 너머에서 기척이 있다 "
			CALL INPUT_SELECT_D, "[1]문을 연다/[0]열지 않는다 "
			IF RESULT == 1
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)+2
				CALL MESSAGE_WINDOW_D, "마담파 카르마병", "아직 큰 쥐새끼가 남아있었나/해수 구제도 쉽지 않군 "
				
					PRINTW 적이 나타났다！
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
			
				CALL SET_ENEMY,9,[[キャラ:히노카구츠치]],48
				ABL:(CHARANUM-1):스킬4 = 724
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,8,[[キャラ:파주주]],48
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:히노카구츠치]],48
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
				
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				FLAG:인카운터율 = 0
				FLAG:未遭遇歩数 = 0
				CALL MESSAGE_WINDOW_D, "", "시큐리티 카드０５를 입수했다 "
				던전フラグ:13:15 = 7
			ELSE
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-1
			ENDIF
		ENDIF
	CASE 3402
		IF 던전フラグ:13:16 % 2 > 0
			CALL MESSAGE_WINDOW_D, "", "문 너머에서 기척이 있다 "
			CALL INPUT_SELECT_D, "[1]문을 연다/[0]열지 않는다 "
			IF RESULT == 1
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-2
				CALL MESSAGE_WINDOW_D, "", "여성 연구원과 카르마병이 있다 "
				CALL MESSAGE_WINDOW_D, "연구원", "그만둬！ "
				CALL MESSAGE_WINDOW_D, "연구원", "이 약이 없으면 세라쨩이 죽어버릴 거야！ ";減速剤
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "알 바 아냐、우리 보스 명령이다！ "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "우리의 먹이가 되기 싫으면/당장 그 약을 내놔！ "
				CALL MESSAGE_WINDOW_D, "서프", "뭐 하는 거지？ "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "뭐야、아수라냐/테크노 샤먼은 여기 없어 "
				CALL MESSAGE_WINDOW_D, "연구원", "아수라… "
				CALL MESSAGE_WINDOW_D, "연구원", "들어줘！ 이 약은 세라쨩을/연명시키기 위한 감속제야！ "
				CALL MESSAGE_WINDOW_D, "연구원", "이 사람들은 약을 파괴하려고 해！ "
				CALL MESSAGE_WINDOW_D, "서프", "뭐라고！？ "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "네、네 년！ "
				CALL MESSAGE_WINDOW_D, "서프", "우리는 세라를 구하기 위해 이곳에 왔어 "
				CALL MESSAGE_WINDOW_D, "서프", "파괴하지 말고 우리에게 넘겨줄 수 없어？ "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "헷、지긋지긋해/네놈들 같이 숫자로 된 놈들 따위에게 넘길까 보냐！ "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "전투하지 말라고 명령받았지만/나는 네놈들이 마음에 안 든다고 "
				CALL MESSAGE_WINDOW_D, "제나파 카르마병", "먹어주마！ "
				
					PRINTW 적이 나타났다！
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
			
				CALL SET_ENEMY,9,[[キャラ:아타파구]],50
				ABL:(CHARANUM-1):스킬4 = 724
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,8,[[キャラ:나타태자]],50
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:스라오샤]],50
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
				
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				FLAG:인카운터율 = 0
				FLAG:未遭遇歩数 = 0
				
				CALL MESSAGE_WINDOW_D, "연구원", "…고마워 "
				CALL MESSAGE_WINDOW_D, "연구원", "그래도 하나만 대답해줘/왜 세라쨩을 구하려는 거야？ "
				CALL MESSAGE_WINDOW_D, "서프", "세라는 동료니까 "
				CALL MESSAGE_WINDOW_D, "서프", "정크야드에서 그 녀석과 함께 살았고/우리를 구해줬어 "
				CALL MESSAGE_WINDOW_D, "서프", "동료를 구하는 데 그 이상의 이유가 필요해？ "
				CALL MESSAGE_WINDOW_D, "연구원", "…믿어도 되겠지？ "
				CALL MESSAGE_WINDOW_D, "서프", "응、믿어줘 "
				CALL MESSAGE_WINDOW_D, "연구원", "알았어 "
				CALL MESSAGE_WINDOW_D, "", "연구원은 서프에게 감속제를 건넨다 "
				CALL MESSAGE_WINDOW_D, "서프", "너는 다른 연구원과는 다르군/세라를 걱정해주고 있어 "
				CALL MESSAGE_WINDOW_D, "연구원", "당연하지！ "
				CALL MESSAGE_WINDOW_D, "연구원", "10살도 안 된 아이가 희생되고 있는 거야！ "
				CALL MESSAGE_WINDOW_D, "연구원", "그런데…/어떻게 그런 심한 짓을 할 수 있는 거야/믿겨지지 않아… "
				CALL MESSAGE_WINDOW_D, "서프", "…너、이름은 뭐라고 하지？ "
				CALL MESSAGE_WINDOW_D, "연구원", "타케미…　타케미 타에야 "
				CALL MESSAGE_WINDOW_D, "서프", "타케미… 세라를 걱정해줘서 고맙다… "
				CALL MESSAGE_WINDOW_D, "타케미", "응… 세라쨩을 구해줘 "
				던전フラグ:13:16 *= 2
			ELSE
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X)-1,(FLAG:現Y)
			ENDIF
		ENDIF
	CASE 3400
		CALL INPUT_SELECT_D, "[1]문을 연다/[0]열지 않는다 "
		IF RESULT == 1
			
			FLAG:未遭遇歩数 = 0
			IF 던전フラグ:13:15 < 8
				CALL MESSAGE_WINDOW_D, "", "문 너머에는 3인조 카르마병이 있다 "
				CALL MESSAGE_WINDOW_D, "류지", "켁…　또 나왔다… "
				CALL MESSAGE_WINDOW_D, "트리브바나 지", "트리브바나의 체면을 걸고/그 앞은 한 걸음도 나아갈 수 없다 "
				CALL MESSAGE_WINDOW_D, "트리브바나 기", "우습게 봤다 이거지 "
				CALL MESSAGE_WINDOW_D, "트리브바나 기", "날 수 있어서 괜찮지만/하마터면 죽을 뻔했다고 "
				CALL MESSAGE_WINDOW_D, "트리브바나 기", "네 녀석들도 지옥을 봐라 "
				CALL MESSAGE_WINDOW_D, "류지", "멋대로 뛰어내린 거잖아 "
				CALL MESSAGE_WINDOW_D, "시에로", "이봐、누구야 이 녀석들… "
				CALL MESSAGE_WINDOW_D, "로알드", "트리브바나다/우리가 카르마 협회에서 싸웠던 상대야 "
				CALL MESSAGE_WINDOW_D, "안", "꽤 이상한 사람들인데 말이지… "
				CALL MESSAGE_WINDOW_D, "트리브바나 천", "쫑알쫑알거리지 마！ "
				CALL MESSAGE_WINDOW_D, "", "그때、그들 뒤에 있는 문이 열리며/소년 하나가 들어왔다 "
				CALL MESSAGE_WINDOW_D, "마코토", "아케치 군！？ "
				CALL MESSAGE_WINDOW_D, "트리브바나 지", "뭐냐/불량배가 있는 장소를 보고했던 악마술사냐 "
				CALL MESSAGE_WINDOW_D, "트리브바나 지", "여기는 네가 나설 자리가 아니다/물러나 있어라！ "
				CALL MESSAGE_WINDOW_D, "", "아케치는 검은 페르소나를 꺼내/3명에게 검은 마법 같은 것을 끼얹는다 "
				CALL MESSAGE_WINDOW_D, "트리브바나 지", "으…으극… "
				CALL MESSAGE_WINDOW_D, "트리브바나 기", "뭐야…이거… "
				CALL MESSAGE_WINDOW_D, "트리브바나 천", "머…머리가… "
				CALL MESSAGE_WINDOW_D, "", "그러자 3명은 폭주한 것처럼 변신했다 "
				CALL MESSAGE_WINDOW_D, "게일", "뭐지？ "
				CALL MESSAGE_WINDOW_D, "서프", "이봐、이 녀석은 도대체 누구지？ "
				CALL MESSAGE_WINDOW_D, "마코토", "그는 아케치 고로/우리와 같은 페르소나구사자야 "
				CALL MESSAGE_WINDOW_D, "마코토", "그의 저 검은 페르소나에는/정신을 폭주시키는 힘이 있어 "
				CALL MESSAGE_WINDOW_D, "시에로", "하아？ 그런 거 처음 듣는다고 "
				CALL MESSAGE_WINDOW_D, "고로", "여어… 기다렸다고오…/이번엔 전원 다 있잖냐 "
				CALL MESSAGE_WINDOW_D, "고로", "가장 죽이고 싶은 그 녀석이 없는 게 조금 마음에 안 들지만… "
				CALL MESSAGE_WINDOW_D, "고로", "너희의 시체를 그 녀석에게 보여주면서/죽이는 것도 재미있을 것 같다고 "
				CALL MESSAGE_WINDOW_D, "고로", "외야들도 모조리/한꺼번에 지옥으로 보내주겠어！ "
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			CALL SET_ENEMY,8,[[キャラ:커시]],55,0,1
				;충격、질풍
				CFLAG:(CHARANUM-1):행동횟수 = 2
				CFLAG:(CHARANUM-1):ＭＰ보정 = 4000
				CFLAG:(CHARANUM-1):속도보정 = 3
				CSTR:(CHARANUM-1):사고패턴 = トリブ・小野坂2
				MAXBASE:(CHARANUM-1):전술 = 100
				BASE:(CHARANUM-1):전술 = 100
				ABL:(CHARANUM-1):스킬1 = [[스킬:파워브레스]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:다크브레스]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:사마・카쟈]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:텐타라후]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:브레인버스트]]
				ABL:(CHARANUM-1):스킬6 = [[스킬:마계의조사]]
				ABL:(CHARANUM-1):스킬7 = [[스킬:파라라・웨이브]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,9,[[キャラ:우벨루리]],55,0,1
				CFLAG:(CHARANUM-1):ＭＰ보정 = 4000
				MAXBASE:(CHARANUM-1):검격 = 10
				BASE:(CHARANUM-1):검격 = 10
				MAXBASE:(CHARANUM-1):타격 = 10
				BASE:(CHARANUM-1):타격 = 10
				MAXBASE:(CHARANUM-1):비구 = 10
				BASE:(CHARANUM-1):비구 = 10
				MAXBASE:(CHARANUM-1):전술 = 10
				BASE:(CHARANUM-1):전술 = 10
				ABL:(CHARANUM-1):스킬1 = [[스킬:산산조각베기]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:암흑쌍비조]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:신등거출팔백만격]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:묵시록]]
				ABL:(CHARANUM-1):스킬5 = 0
				CSTR:(CHARANUM-1):사고패턴 = トリブ・地2
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
				
			CALL SET_ENEMY,10,[[キャラ:강가]],55,0,1
				ABL:(CHARANUM-1):스킬1 = [[스킬:엑스트라원]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:파이어스톰]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:아이온의비]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:우뢰의세례]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:피어트렌트]]
				ABL:(CHARANUM-1):스킬6 = [[스킬:선풍진]]
				ABL:(CHARANUM-1):스킬7 = [[스킬:다무도라온]]
				ABL:(CHARANUM-1):스킬8 = [[스킬:프레이다인]]
				ABL:(CHARANUM-1):스킬9 = [[스킬:림도라온]]
				ABL:(CHARANUM-1):스킬10 = [[스킬:메기도라]]
				CSTR:(CHARANUM-1):사고패턴 = トリブ・天2
				CFLAG:(CHARANUM-1):ＭＰ보정 = 4000
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
				
				
			CALL SET_ENEMY,14,[[キャラ:고로]],55,0,1
				CFLAG:(CHARANUM-1):속도보정 = 50
				CFLAG:(CHARANUM-1):ＭＰ보정 += 5000
				CSTR:(CHARANUM-1):사고패턴 = ラボ明智
				EQUIP:(CHARANUM-1):검 = 2059
				EQUIP:(CHARANUM-1):몸통 = 3599
				ABL:(CHARANUM-1):초기페르소나 = [[キャラ:로키]]
				ABL:(CHARANUM-1):스킬1 = [[스킬:코우가온]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:에이가온]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:마한마온]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:마하무도온]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:레바테인]]
				ABL:(CHARANUM-1):스킬6 = [[스킬:랜더마이저]]
				ABL:(CHARANUM-1):스킬7 = [[스킬:데들리번]]
				ABL:(CHARANUM-1):스킬8 = [[스킬:메기도라온]]
				ABL:(CHARANUM-1):스킬9 = [[스킬:진・전문내성]]
				ABL:(CHARANUM-1):스킬10 = [[스킬:브레이브재퍼]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
			
				CALL BATTLE_START
			
			FLAG:선제공격플래그 = 0
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			FLAG:인카운터율 = 0
			FLAG:未遭遇歩数 = 0
				
				CALL MESSAGE_WINDOW_D, "고로", "젠장… "
				CALL MESSAGE_WINDOW_D, "고로", "젠장젠장젠장젠장젠장！ "
				CALL MESSAGE_WINDOW_D, "고로", "왜 죽일 수 없는 거야！/왜 죽일 수 없냐고！ "
				CALL MESSAGE_WINDOW_D, "고로", "카르마 협회 놈들도 잘란다라 놈들도 쓸모가 없어！ "
				CALL MESSAGE_WINDOW_D, "고로", "…뭐、됐어/나에게는 아직 연줄이 있으니까… "
				CALL MESSAGE_WINDOW_D, "고로", "다음에야말로 죽여주겠어！ "
				CALL MESSAGE_WINDOW_D, "", "고로는 달아났다… "
				
				던전フラグ:13:15 = 8
			ENDIF
			CALL DUNGEON_WORP,(FLAG:現M)+2,3,12
		ELSE
			CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)+1
		ENDIF
	CASE 3600
		CALL INPUT_SELECT_D, "[1]문을 연다/[0]열지 않는다 "
		IF RESULT == 1
			CALL DUNGEON_WORP,(FLAG:現M)-2,16,2
		ELSE
			CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-1
		ENDIF
	CASE 3500
		CALL MESSAGE_WINDOW_D, "", "이상한 방에 도달했다 "
		CALL MESSAGE_WINDOW_D, "", "좌우에는 사람이 들어갈 것 같은 캡슐 몇 개/안쪽에 있는 유리 너머에는 거대한 악마가/얼음덩이가 되어 있다 "
		CALL MESSAGE_WINDOW_D, "서프", "연구원이 두 명 있군/그들에게서 열쇠에 대해 듣자 "
		$LP1
		CALL INPUT_SELECT_D, "[0]시에로、류지와 이야기한다/[1]게일、마코토와 이야기한다/[2]로알드、유스케、하루와 이야기한다/[3]알지라、안과 이야기한다/[4]바로 앞에 있는 연구원과 이야기한다/[5]안쪽에 있는 연구원과 이야기한다/[6]방에서 나간다 "
			IF RESULT == 0
				CALL MESSAGE_WINDOW_D, "시에로", "안쪽에 뭔가 있다고/움직이고 있어 "
				CALL MESSAGE_WINDOW_D, "류지", "다…당장이라도 깨부수고 나올 것 같은 느낌이네… "
				GOTO LP1
			ELSEIF RESULT == 1
				CALL MESSAGE_WINDOW_D, "게일", "제… 엔젤은 이곳에서/악마 연구를 하고 있던 것 같군 "
				CALL MESSAGE_WINDOW_D, "게일", "본래 악마의 정보는 햇빛 속에서 분산되어/통상적으로는 생명을 변질시키는 일은 없다 "
				CALL MESSAGE_WINDOW_D, "게일", "그것을 발견해서 5년에 걸쳐/바이러스로 구성했다… "
				CALL MESSAGE_WINDOW_D, "마코토", "이 캡슐에 들어있는 건/설마… "
				CALL MESSAGE_WINDOW_D, "게일", "실험의 재료겠지/이 녀석들을 사용해서 바이러스를 완성시켰을 것이다 "
				GOTO LP1
			ELSEIF RESULT == 2
				CALL MESSAGE_WINDOW_D, "로알드", "생명의 구성 정보에 침입하여 변질시킨다/이건 이미 바이러스라고 부를 수밖에 없군 "
				CALL MESSAGE_WINDOW_D, "로알드", "가상 세계를 구성하는 정보도/이 세계를 구성하는 정보도 본질은 동일… "
				CALL MESSAGE_WINDOW_D, "로알드", "그렇게 생각해서 서프 일행을 실험에 선택했다는군 "
				CALL MESSAGE_WINDOW_D, "로알드", "과학의 영역을 넘어섰어。이건 철학이다 "
				CALL MESSAGE_WINDOW_D, "하루", "그 발상으로 가상 세계에서 효과가 있다면/현실에서도 효과가 있다니、어떻게 보면 굉장한 생각이네요 "
				CALL MESSAGE_WINDOW_D, "유스케", "게임에 나오는 캐릭터로 가능하다면/현실에서도 효과가 있다는 거나 마찬가지인 얘기니까 "
				CALL MESSAGE_WINDOW_D, "유스케", "게다가 현실에서 성공했지 "
				CALL MESSAGE_WINDOW_D, "로알드", "정크야드는 신의 지식을 이용해서 만들어졌으니까/상당히 성공할 거란 확신이 있었겠지 "
				GOTO LP1
			ELSEIF RESULT == 3
				CALL MESSAGE_WINDOW_D, "알지라", "힌두、유대、신토、타오… "
				CALL MESSAGE_WINDOW_D, "알지라", "신이나 악마가 등장하는 신화가/이렇게 많았구나… "
				CALL MESSAGE_WINDOW_D, "알지라", "어쩌면 악마만의 세계가/정말 있었을지도 몰라… "
				CALL MESSAGE_WINDOW_D, "안", "악마만의 세계？ "
				CALL MESSAGE_WINDOW_D, "알지라", "정크야드가 있었을 정도인걸 "
				CALL MESSAGE_WINDOW_D, "알지라", "이 세계가 다른 세계와 연결되어 있어도/이상하지 않을 것 같지 않아？ "
				CALL MESSAGE_WINDOW_D, "안", "듣고 보니 그럴 수도 있겠네/내가 있던 곳도 팰리스라는 세계가 있었지… "
				CALL MESSAGE_WINDOW_D, "안", "팰리스 안도 악마투성이였어… "
				CALL MESSAGE_WINDOW_D, "안", "그런데 이 커다란 건 뭐지？ "
				CALL MESSAGE_WINDOW_D, "알지라", "잠깐만 "
				CALL MESSAGE_WINDOW_D, "알지라", "메가나다…/마왕 라바나의 자식、 천둥의 정령이자/불사하는 자、 또 하나의 이름은… "
				CALL MESSAGE_WINDOW_D, "알지라", "… "
				CALL MESSAGE_WINDOW_D, "안", "… "
				CALL MESSAGE_WINDOW_D, "알지라", "…농담이겠지 "
				GOTO LP1
			ELSEIF RESULT == 4
				CALL MESSAGE_WINDOW_D, "연구원", "너、너희들…스테이지１에서/전이되어 온 아수라도 있잖아！ "
				$LP2
				CALL MESSAGE_WINDOW_D, "연구원", "부、부탁할게！　뭐든지 말할 테니까/먹지 말아줘！ "
				CALL INPUT_SELECT_D, "[0]너에게 물어볼 것 따위 없다！/[1]세라는 어디 있지/[2]히트에게 무슨 짓을 했지/[3]카드키는 어디 있지 "
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "연구원", "제、제발 먹지 말아줘！ "
					GOTO LP1
				ELSEIF RESULT == 1
					CALL MESSAGE_WINDOW_D, "연구원", "세라피타는 ＥＧＧ 안에 있어…/영원히 진혼의 노래를 부르게 하는 "
					CALL MESSAGE_WINDOW_D, "연구원", "튜너가 된 인류의 혼을/진정시키기 위한 산제물이야… "
					GOTO LP2
				ELSEIF RESULT == 2
					CALL MESSAGE_WINDOW_D, "연구원", "마담이 무엇을 불어넣었는지는 몰라 "
					CALL MESSAGE_WINDOW_D, "연구원", "세라가 말을 잘 듣게 하려면/너희들이 필요했어！ "
					GOTO LP2
				ELSEIF RESULT == 3
					CALL MESSAGE_WINDOW_D, "연구원", "카、카드키？/모、몰라。나는 모른다고！ "
					CALL MESSAGE_WINDOW_D, "연구원", "저쪽에 있는 녀석에게 물어보는 게 어때？ "
					GOTO LP2
				ENDIF
			ELSEIF RESULT == 5
				$LP3
				CALL MESSAGE_WINDOW_D, "연구원", "나、나도 뭐든지 말할 거야！/말하게 해주세요！ "
				IF 던전フラグ:13:15 < 4
					CALL INPUT_SELECT_D, "[0]너에게 물어볼 것 따위 없다！/[1]저 유리 너머에 있는 녀석은 뭐지/[2]5년 전에 도대체 무슨 일이 있었지/[3]카드키는 어디 있지 "
				ELSE
					CALL INPUT_SELECT_D, "[0]너에게 물어볼 것 따위 없다！/[1]저 유리 너머에 있는 녀석은 뭐지/[2]5년 전에 도대체 무슨 일이 있었지 "
				ENDIF
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "연구원", "제、제발 먹지 말아줘！ "
					GOTO LP1
				ELSEIF RESULT == 1
					CALL MESSAGE_WINDOW_D, "연구원", "저、저건… 메가나다야 "
					CALL MESSAGE_WINDOW_D, "연구원", "5년 전에 바루나와 함께 발현한/최흉의 식노야 "
					CALL MESSAGE_WINDOW_D, "연구원", "바루나는 죽일 수 밖에 없었지만/저 녀석은 어찌저찌 봉인할 수 있었거든 "
					CALL MESSAGE_WINDOW_D, "연구원", "기술부장은 ＥＧＧ의 정보와/저 녀석으로부터 바이러스를 구성한 거야 "
					GOTO LP3
				ELSEIF RESULT == 2
					CALL MESSAGE_WINDOW_D, "연구원", "그、그건… 이 녀석이 가장 잘/알고 있지 않아！？ "
					CALL MESSAGE_WINDOW_D, "서프", "나 말인가？ "
					CALL MESSAGE_WINDOW_D, "연구원", "그래！/거기 동료들과 같은 얼굴을 한/동료를 물어죽인 너가 말이야！ "
					CALL MESSAGE_WINDOW_D, "연구원", "도대체 어느 쪽이야！？/그 녀석이야？ 아바타야？ "
					CALL MESSAGE_WINDOW_D, "서프", "……？？ "
					GOTO LP3
				ELSEIF RESULT == 3
					CALL MESSAGE_WINDOW_D, "연구원", "아、알았어 "
					CALL MESSAGE_WINDOW_D, "연구원", "이게 필요하다면 줄게/물지 말아줘… "
					CALL MESSAGE_WINDOW_D, "", "시큐리티 카드０２를 입수했다 "
						던전フラグ:13:15 = 4
					CALL MESSAGE_WINDOW_D, "연구원", "봤지？　나 도움이 됐지？/그러니까… 응？ "
					GOTO LP1
				ENDIF
			ELSEIF RESULT == 6
				CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)-2
			ENDIF
	CASE 3700
			IF 던전フラグ:13:15 < 9
				CALL MESSAGE_WINDOW_D, "", "EGG로 보이는 곳에 들어갔더니 그곳은 이미 습격당하고 있었다 "
				CALL MESSAGE_WINDOW_D, "", "히트는 황색의 악마와 싸우고 있었다 "
				CALL MESSAGE_WINDOW_D, "", "세라는 흑인 남성에게 안겨 있었고/바닥에는 마담의 시체가 있었다 "
				CALL MESSAGE_WINDOW_D, "", "그 흑인 남자는 녹색 옷을 입고서 허공에 떠있다 "
				CALL MESSAGE_WINDOW_D, "히트", "하아…하아…/세라를…돌려줘… "
				CALL MESSAGE_WINDOW_D, "흑인 악마", "호오…　여기까지 당해도/아직 그런 기운이 남아있는 건가 "
				CALL MESSAGE_WINDOW_D, "황색 악마", "이 이상 싸우면 너는 죽는다/내가 쓸데없는 살생을 하게 하지 말거라… "
				CALL MESSAGE_WINDOW_D, "히트", "시끄…러워… "
				CALL MESSAGE_WINDOW_D, "", "서프가 히트를 감싸듯이 앞으로 나선다 "
				CALL MESSAGE_WINDOW_D, "서프", "히트、가세할게 "
				CALL MESSAGE_WINDOW_D, "히트", "ㄴ…너… "
				CALL MESSAGE_WINDOW_D, "흑인 악마", "이런？ 벌써 온 건가/허나 이미 늦었다 "
				CALL MESSAGE_WINDOW_D, "", "그러자 위에서 마법이 날아와 일행을 모두 날려버렸다！ "
				CALL MESSAGE_WINDOW_D, "", "그때 서프에게 마법이 직격하여 피를 흘리는 것이 보였다 "
				CALL MESSAGE_WINDOW_D, "", "그리고서 서프와 히트는 EGG 안으로 들어가버렸다 "
				SIF GETCHARA([[キャラ:서프]]) > 0
					CFLAG:GETCHARA([[キャラ:서프]]):この場に居ないフラグ = 1
				CALL MESSAGE_WINDOW_D, "알지라", "서프！！ "
				CALL MESSAGE_WINDOW_D, "", "알지라는 곧바로 일어나서 EGG 쪽으로 달려간다"
				CALL MESSAGE_WINDOW_D, "게일", "알지라！　달리지 마！ "
				CALL MESSAGE_WINDOW_D, "", "그러자 위에서 다른 악마 하나가 나타났다"
				CALL MESSAGE_WINDOW_D, "악마", "나는 다신(多神) 연합의 일좌/브륀힐드"
				CALL MESSAGE_WINDOW_D, "악마", "다신 연합의 야망의 실현을 위해/시간을 끌어줘야겠다！"
				CALL MESSAGE_WINDOW_D, "", "악마의 손에서 빛이 방출되었다！"
				CALL DUNGEON_WORP,(FLAG:現M)+1,3,4
				CALL MESSAGE_WINDOW_D, "", "그러자 단숨에 경치가 변했다"
				CALL MESSAGE_WINDOW_D, "", "아무래도 다른 장소로 날려진 것 같다"
				CALL MESSAGE_WINDOW_D, "시에로", "뭐、뭐야、뭐야？/뭐가 일어난 거야… "
				CALL MESSAGE_WINDOW_D, "로알드", "아니… 전혀 모르겠어/마코토 군、류지 군/다들 무사해？ "
				CALL MESSAGE_WINDOW_D, "마코토", "네…/어떻게든…"
				CALL MESSAGE_WINDOW_D, "류지", "근데～/도대체 뭐냐고 그 녀석들"
				CALL MESSAGE_WINDOW_D, "유스케", "왠지 보스 할머니의 시신도 있었던 것 같은데…"
				CALL MESSAGE_WINDOW_D, "게일", "이상하군。만일 그 놈들이 제나파였더라도/우리를 공격하지는 않았을 것이다 "
				CALL MESSAGE_WINDOW_D, "하루", "그럼 그 사람들은 카르마 협회 사람이 아니라는 건가요？"
				CALL MESSAGE_WINDOW_D, "로알드", "확실히 다신 연합이라고 이름을 댔었지 "
				CALL MESSAGE_WINDOW_D, "알지라", "다신 연합？ 뭐야 그거？ "
				CALL MESSAGE_WINDOW_D, "로알드", "들어본 적이 없어/또 카르마 협회에서 배신자가 나온 건가？ "
				CALL MESSAGE_WINDOW_D, "게일", "생각해도 소용이 없다/지금은 이곳에서 탈출하자 "
		
			ELSE
				CALL MESSAGE_WINDOW_D, "EGG？", "그오오오오오오오오… "
				CALL MESSAGE_WINDOW_D, "", "황색 악마와 흑인 악마가 작동 중인 EGG를 쓰러뜨리고 있었다 "
				CALL MESSAGE_WINDOW_D, "게일", "어이、네놈들！ 무슨 짓이냐 "
				CALL MESSAGE_WINDOW_D, "흑인 악마", "너희는…/그렇군、브륀힐드의 결계에서 돌아온 건가… "
				CALL MESSAGE_WINDOW_D, "로알드", "너는 뭐냐？/너희의 목적은 뭐냐？ "
				CALL MESSAGE_WINDOW_D, "흑인 악마", "나는 다신 연합의 일좌　크리슈나 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "우리는 이 세계를 구원하기 위해/모인 동지다 "
				CALL MESSAGE_WINDOW_D, "알지라", "구원？ "
				CALL MESSAGE_WINDOW_D, "크리슈나", "이 세계는 함부로 유일신을 칭하는/창조주에 의해 지배되고 있다 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "놈은 우리를 이단신이라 비방할 뿐 아니라/인간을 육신에 가두고 우주로 둘러싸 언어로 속박했다 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "창조주는 우리나 너희의 본질을/자신의 구미에 맞도록 왜곡하고 있다 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "그런 방자함、용서할 수 없겠지？/그래서 우리는 놈을 쓰러뜨리고자 한다 "
				CALL MESSAGE_WINDOW_D, "게일", "과연、훌륭한 이야기군/하지만 그런 말을 믿을 것 같나？ "
				CALL MESSAGE_WINDOW_D, "로알드", "찬성이다。신을 죽여버리면/지구로 정보가 오지 않게 되어 생명이 태어나지 않게 된다 "
				CALL MESSAGE_WINDOW_D, "로알드", "퀴비에 증후군을 막을 수는 있겠지만/머지않아 지구가 멸망하고 말 거야 "
				CALL MESSAGE_WINDOW_D, "류지", "무엇보다 니들 악마잖냐！/전혀 설득력이 없다고！ "
				CALL MESSAGE_WINDOW_D, "유스케", "구원 운운 하려면 검은 태양을 어떻게든 하고 나서 말해 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "하아… 너희에게는 무슨 말을 해도/통하지 않을 것 같군 "
				CALL MESSAGE_WINDOW_D, "크리슈나", "미륵、뒤는 맡기겠다 "
				CALL MESSAGE_WINDOW_D, "황색 악마", "존명 "
				CALL MESSAGE_WINDOW_D, "황색 악마", "나는 다신 연합의 일좌　미륵 "
				CALL MESSAGE_WINDOW_D, "미륵보살", "나의 목적은 사람들을 환생이라는 고행의 윤회로부터/해방하여 구원하는 것 "
				CALL MESSAGE_WINDOW_D, "미륵보살", "그대들은 그것마저 부정하겠다는 건가 "
				CALL MESSAGE_WINDOW_D, "마코토", "하아？ 무슨 소리야？/누가 그런 일을 해달라고 부탁했어！？ "
				CALL MESSAGE_WINDOW_D, "안", "그래！　윤회고 뭐고 전혀 안 바라거든！ "
				CALL MESSAGE_WINDOW_D, "시에로", "아무래도 여기엔 너희들한테 찬성하는 사람이 없는 모양이야 "
				CALL MESSAGE_WINDOW_D, "미륵보살", "참으로 애석하구나…우리의 구원을 이해하지 못하다니… "
				CALL MESSAGE_WINDOW_D, "미륵보살", "그러나 나는 그런 애처로운 그대들에게 자비를 베푼다/일찌감치 그 고행의 윤회로부터 해방해주마 "
				CALL MESSAGE_WINDOW_D, "미륵보살", "그것이 내가 그대들에게 해줄 수 있는/최선이자 유일한 구세다 "
				
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			
			CALL SET_ENEMY,9,[[キャラ:미륵보살]],58,0,2
				CFLAG:(CHARANUM-1):행동횟수 = 3
				CFLAG:(CHARANUM-1):ＭＰ보정 = 4000
				CFLAG:(CHARANUM-1):속도보정 = 0
				CSTR:(CHARANUM-1):사고패턴 = 弥勒菩薩
				ABL:(CHARANUM-1):스킬1 = [[스킬:56억7천만의장]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:마하・부흐다인]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:신등거출팔백만격]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:티없는위광]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:브레인버스트]]
				ABL:(CHARANUM-1):스킬6 = [[스킬:마계의조사]]
				ABL:(CHARANUM-1):스킬7 = [[스킬:묵시록]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				ABL:(CHARANUM-1):아이템1 = 10618
				ABL:(CHARANUM-1):입수확률1 = 20
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
			
				CALL BATTLE_START
				
			FLAG:선제공격플래그 = 0
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			FLAG:인카운터율 = 0
			FLAG:未遭遇歩数 = 0
			
				CALL MESSAGE_WINDOW_D, "미륵보살", "큭… "
				CALL MESSAGE_WINDOW_D, "", "미륵보살은 달아나려 한다 "
				CALL MESSAGE_WINDOW_D, "", "그러나 갑자기 EGG 안에서 나온 서프의 공격을 받는다 "
				
				CALL MESSAGE_WINDOW_D, "미륵보살", "끄아아아아아아아아아아아… "
				CALL MESSAGE_WINDOW_D, "미륵보살", "아직 수행이 부족했나… "
				CALL MESSAGE_WINDOW_D, "미륵보살", "그러나 나는 윤회한다…어머니의 힘으로…/후훗… 다신 연합은 결속을 잃지 않는다 "
				CALL MESSAGE_WINDOW_D, "", "미륵보살은 소멸했다 "
				CALL MESSAGE_WINDOW_D, "알지라", "서프！ "
				CALL MESSAGE_WINDOW_D, "게일", "서프！ "
				CALL MESSAGE_WINDOW_D, "", "그러자 뒤에 있는 EGG 같은 것이 붉은 안개를 뿜는다 "
				CALL MESSAGE_WINDOW_D, "", "안개가 걷히자 변신을 해제한 서프가 있었다 "
				CALL MESSAGE_WINDOW_D, "시에로", "형님이야…？ "
				CALL MESSAGE_WINDOW_D, "서프", "걱정 끼쳐서 미안했어 "
				CALL MESSAGE_WINDOW_D, "", "서프의 옆에는 히트가 있다 "
				CALL MESSAGE_WINDOW_D, "히트", "역시…너냐、서프 "
				CALL MESSAGE_WINDOW_D, "히트", "네가 그 정도로 죽을 리가 없지 "
				CALL MESSAGE_WINDOW_D, "서프", "히트… "
				CALL MESSAGE_WINDOW_D, "히트", "너라면 나의 여기를 이해할 거다 "
				CALL MESSAGE_WINDOW_D, "", "히트는 엄지로 가슴을 가리키며 말한다 "
				CALL MESSAGE_WINDOW_D, "서프", "응… "
				CALL MESSAGE_WINDOW_D, "히트", "결착을 내자/시작의 장소인 그곳에서 "
				CALL MESSAGE_WINDOW_D, "서프", "물론이야。봐주지는 않겠어 "
				CALL MESSAGE_WINDOW_D, "", "그렇게 말하고서 히트는 EGG가 있는 방에서 나갔다 "
				CALL MESSAGE_WINDOW_D, "", "서프도 히트를 따라 나간다 "
				CALL MESSAGE_WINDOW_D, "알지라", "둘 다 그만둬！ "
				CALL MESSAGE_WINDOW_D, "알지라", "더 이상 싸울 필요는… "
				CALL MESSAGE_WINDOW_D, "", "알지라가 두 사람을 말리러 가려고 하지만/시에로가 그것을 제지한다 "
				CALL MESSAGE_WINDOW_D, "시에로", "하게 해주자/마음껏 말이야 "
				CALL MESSAGE_WINDOW_D, "게일", "싸움으로만/자기 자신을 확인할 수 있는 자도 있다 "
				CALL MESSAGE_WINDOW_D, "게일", "싸우는 것이 구원이 될 때도 있다 "
				CALL MESSAGE_WINDOW_D, "게일", "가게 해줘 "
				
				CALL MESSAGE_WINDOW_D, "", "서프와 히트를 남기고/당신들은 돌아갔다 "
				던전フラグ:13:1 = 7
			
				CALL DUNGEON_WORP,0,14,18
				
				CALL MESSAGE_WINDOW_D, "", "나중에 돌아온 서프의 말에 따르면/히트는 방에 도착했을 때/숨을 거두고 말았다고 한다 "
				CALL MESSAGE_WINDOW_D, "", "히트는 마지막에 세라를 부탁한다는 말을 남기고/죽었다고 서프는 말했다 "
				CALL MESSAGE_WINDOW_D, "", " "
				SIF GETCHARA([[キャラ:서프]]) > 0
					CFLAG:GETCHARA([[キャラ:서프]]):この場に居ないフラグ = 0
					
				CALL MESSAGE_WINDOW_D, "", @"＞명성 250을 얻었다"
				FLAG:명성 += 250
			ENDIF
	CASE 3800
		CALL MESSAGE_WINDOW_D, "게일", "지금은 이 문을 나아갈 수밖에 없군… "
		CALL MESSAGE_WINDOW_D, "게일", "먼저 갈까？ "
		CALL INPUT_SELECT_D, "[1]나아간다/[0]나아가지 않는다"
		IF RESULT == 1
			CALL DUNGEON_WORP,(FLAG:現M)+1,1,2
PRINTL ※이 층에는 높낮이 차이가 있습니다 
PRINTW 　숫자가 클수록 높습니다（□가 가장 낮음）
PRINTL 
PRINTL 　숫자가 한 단계 크면 기어오를 수 있지만 
PRINTW 　□→２　혹은　１→３ 같이 두 단계 이상 크면 오를 수 없습니다
PRINTW 　숫자가 낮으면 어디서나 뛰어내릴 수 있습니다
PRINTL 
PRINTL 　２□２　혹은　３１３ 같이 양쪽 타일이 같은 높이이고
PRINTL 　사이에 끼어있는 타일이 낮으면
PRINTW 　[5]조사한다 로 2타일 앞까지 날아갈 수 있습니다
		ELSE
			CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)+1
		ENDIF
	CASE 3900
		FLAG:도주불가플래그 = 1
		FLAG:회화불능플래그 = 1
		FLAG:선제기습취소 = 1
		CALL MESSAGE_WINDOW_D, "악마", "호오… 이곳까지 살아서 온 건가…/인간이여、칭찬해주마"
		CALL MESSAGE_WINDOW_D, "악마", "그러나 나의 앞에 나타난 네놈들에게 내일은 없다… "
		CALL MESSAGE_WINDOW_D, "악마", "이곳을 네놈들의 무덤으로 만들어주마！/와라！ 나의 자매들！ "
		
				CALL SET_ENEMY,9,[[キャラ:브륀힐드(영웅)]],55,0,1
				NAME:(CHARANUM-1) = 브륀힐드
				CALLNAME:(CHARANUM-1) = 브륀힐드
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				ABL:(CHARANUM-1):스킬1 = [[스킬:작열차가]]
				ABL:(CHARANUM-1):스킬2 = [[스킬:마하・부흐다인]]
				ABL:(CHARANUM-1):스킬3 = [[스킬:소닉무버]]
				ABL:(CHARANUM-1):스킬4 = [[스킬:포효]]
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,8,[[キャラ:브륀힐드]],53
				NAME:(CHARANUM-1) = ワルキューレ
				CALLNAME:(CHARANUM-1) = ワルキューレ
				ABL:(CHARANUM-1):스킬4 = [[스킬:소닉무버]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:수호의방패]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,7,[[キャラ:브륀힐드]],53
				NAME:(CHARANUM-1) = ワルキューレ
				CALLNAME:(CHARANUM-1) = ワルキューレ
				ABL:(CHARANUM-1):스킬4 = [[스킬:소닉무버]]
				ABL:(CHARANUM-1):스킬5 = [[스킬:수호의방패]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:발키리]],53
				ABL:(CHARANUM-1):스킬4 = [[스킬:마하・그라다인]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,11,[[キャラ:발키리]],53
				ABL:(CHARANUM-1):스킬4 = [[스킬:마하・그라다인]]
				CFLAG:(CHARANUM-1):BS무효플래그 = 1
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL BATTLE_START
			
			FLAG:선제공격플래그 = 0
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			FLAG:인카운터율 = 0
			FLAG:未遭遇歩数 = 0
			
			던전フラグ:13:15 = 9
		CALL MESSAGE_WINDOW_D, "악마", "끄핫… 아버님…　죄송…합니다…"
		CALL MESSAGE_WINDOW_D, "악마", "그렇지만…　시간은 벌었습니다…/기필코… 야망의…　실현을… "
		CALL DUNGEON_WORP,(FLAG:現M)-2,2,2
		CALL MESSAGE_WINDOW_D, "", "원래 있던 장소로 돌아왔다 "
		CALL MESSAGE_WINDOW_D, "", "악마를 쓰러뜨려서 결계에서 나온 것 같다 "
		CALL MESSAGE_WINDOW_D, "게일", "서프가 걱정된다/빨리 EGG로 가자 "
	CASE 100
		CALL DUNGEON_WORP,(FLAG:現M),(FLAG:現X),(FLAG:現Y)
		CALL DUNGEON_WORP,2,3,22
ENDSELECT

;=======================================================================
;ラボ宝箱
;=======================================================================
@rabo_takara
#LOCALSIZE 3
;宝箱のフラグ管理用変数の번호
LOCAL = FLAG:現M / 5 + 80
;そのマップの何番눈の宝箱か
LOCAL:1 = (DA:(FLAG:現X):(FLAG:現Y) / 10) % 100
LOCAL:1 += FLAG:現M % 5 * 10

SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 3300
		CALL GET_TREASURE, [[아이템:보옥]] , 1 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3200
		CALL GET_TREASURE, 11514 , 1 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3500
		CALL GET_TREASURE, [[아이템:물반경]] , 1 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3501
		CALL GET_TREASURE, 11206 , 1 , FLAG:現던전, LOCAL , LOCAL:1
	;マップ번호*100+そのマップで何番눈の宝箱かを示す数値でどの宝箱かを判別します。
	;例えば0の場合、0版のマップの0番눈の宝箱であることを表しています。
	CASE 3410
		CALL GET_TREASURE, [[아이템:살라만더탄]] , 5 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3411
		CALL GET_TREASURE_MONEY , 0 , 20000 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3900
		CALL GET_TREASURE, 11815 , 1 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 3901
		CALL GET_TREASURE, 11614 , 1 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 4000
		CALL GET_TREASURE_MONEY , 0 , 20000 , FLAG:現던전, LOCAL , LOCAL:1
	CASE 4001
		CALL GET_TREASURE, [[아이템:도반옥]] , 3 , FLAG:現던전, LOCAL , LOCAL:1

ENDSELECT
RETURN 1
;=======================================================================
;ラボ적
;=======================================================================
@rabo_enemy, ARG
		IF ARG == 0 && FLAG:現M == 39
			SIF RAND:4 == 0
				RETURN [[キャラ:브륀힐드]]
			SIF RAND:3 == 0
				RETURN [[キャラ:발키리]]
			SIF RAND:5 == 0
				RETURN [[キャラ:야마타노오로치]]
			SIF RAND:4 == 0
				RETURN [[キャラ:아드라멜레크]]
			SIF RAND:3 == 0
				RETURN [[キャラ:로렐라이]]
			SIF RAND:2 == 0
				RETURN [[キャラ:모리안]]
				
				RETURN [[キャラ:크르스니크]]
		ELSEIF ARG == 0
			IF RAND:8 == 0
				RETURN [[キャラ:히노카구츠치]]
			ELSEIF RAND:16 == 0
				RETURN [[キャラ:파주주]]
			ELSEIF RAND:15 == 0
				RETURN [[キャラ:틀랄테쿠흐틀리]]
			ELSEIF RAND:14 == 0
				RETURN [[キャラ:타나토스]]
			ELSEIF RAND:13 == 0
				RETURN [[キャラ:보라색거울]]
			ELSEIF RAND:12 == 0
				RETURN [[キャラ:트리글라프]]
			ELSEIF RAND:11 == 0
				RETURN [[キャラ:벨로보그]]
			ELSEIF RAND:10== 0
				RETURN [[キャラ:카나로아]]
			ELSEIF RAND:9 == 0
				RETURN [[キャラ:비야키]]
			ELSEIF RAND:8 == 0
				RETURN [[キャラ:봉황]]
			ELSEIF RAND:7 == 0
				RETURN [[キャラ:제파르]]
			ELSEIF RAND:6 == 0
				RETURN [[キャラ:바이브・카흐]]
			ELSEIF RAND:5 == 0
				RETURN [[キャラ:나타태자]]
			ELSEIF RAND:4 == 0
				RETURN [[キャラ:아타파구]]
			ELSEIF RAND:3 == 0
				RETURN [[キャラ:크투가]]
			ELSEIF RAND:2 == 0
				RETURN [[キャラ:루흐]]
			ELSE
				RETURN [[キャラ:스라오샤]]
			ENDIF
		ELSEIF ARG == 1
			
			IF FLAG:現M == 34
				RETURN 47 + RAND:4
			ELSEIF FLAG:現M < 36
				RETURN 45 + RAND:4
			ELSEIF FLAG:現M > 38
				RETURN 48 + RAND:4
			ENDIF
		ENDIF
;=======================================================================
;ラボ적스테이터스설정
;=======================================================================
@rabo_ENEMY_STATUS,ARG

SELECTCASE NO:ARG
	CASE [[キャラ:히노카구츠치]]
		ABL:(CHARANUM-1):스킬4 = [[스킬:대염상]]
	CASE [[キャラ:브륀힐드]]
		NAME:(CHARANUM-1) = ワルキューレ
		CALLNAME:(CHARANUM-1) = ワルキューレ
		ABL:(CHARANUM-1):스킬4 = [[스킬:소닉무버]]
	CASE [[キャラ:발키리]]
		ABL:(CHARANUM-1):스킬4 = [[스킬:소닉무버]]
ENDSELECT


@EVENT_BATTLE_rabo
SIF !FINDCHARA_ENEMY([[キャラ:미륵보살]])
	RETURN 0
LOCAL= RESULT:1


IF !RAND:3
	LOCAL:1 = CPOS(LOCAL)

	SETCOLOR 0xff0033
	PRINTFORML ┏>CHARA━━━━━━━━━━┓　┏>ACT━━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃[ 9] 미륵보살           ┃　┃독각　　　　　　　　　　　　　　　　　　┃
	PRINTFORMW ┗━━━━━━━━━━━━━┛　┗━━━━━━━━━━━━━━━━━━━━┛

	RESETCOLOR
	CFLAG:LOCAL:독각플래그 = 2


	PRINTFORMW %CALLNAME:LOCAL%은 다음 턴까지 약점에 강해졌다
ENDIF

@SET_ACTION_弥勒菩薩,ARG
IF RAND:4 == 0 && (CFLAG:ARG:공격강화 < -4 || CFLAG:ARG:방어강화 < -4 || CFLAG:ARG:마법위력강화 < -4 || CFLAG:ARG:명중강화 < -4 || CFLAG:ARG:회피강화 < -4)
	CFLAG:ARG:입력행동 = 505
	CALL RANDOM_TARGET,ARG,505
	RETURN 1
ENDIF
IF RAND:4 == 0
	LOCAL:3 = 0
	FOR LOCAL, 1, 7
		SIF POS(LOCAL) < 0
			CONTINUE
		SIF CFLAG:POS(LOCAL):ステート == GET_STATE_NUM("DYING")
			CONTINUE
		SIF CFLAG:POS(LOCAL):공격강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):공격강화
		SIF CFLAG:POS(LOCAL):방어강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):방어강화
		SIF CFLAG:POS(LOCAL):마법위력강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):마법위력강화
		SIF CFLAG:POS(LOCAL):마법효과강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):마법효과강화
		SIF CFLAG:POS(LOCAL):회피강화 + CFLAG:POS(LOCAL):명중강화 > 0
			LOCAL:3 += (CFLAG:POS(LOCAL):회피강화 + CFLAG:POS(LOCAL):명중강화) / 2
	NEXT
	IF 30 < LOCAL:3 && RAND:2
		CFLAG:ARG:입력행동 = 509
		CALL RANDOM_TARGET,ARG,509
		RETURN 1
	ENDIF
ENDIF

LOCAL:2 = 0
FOR LOCAL, 1, 7
	SIF POS(LOCAL) < 0
		CONTINUE
	SIF CFLAG:POS(LOCAL):ステート == GET_STATE_NUM("DYING")
		CONTINUE
	SIF CFLAG:POS(LOCAL):물리반사플래그 > 0
		LOCAL:2 = 1
	SIF CFLAG:POS(LOCAL):마법반사플래그 > 0
		LOCAL:2 = 1
	SIF CFLAG:POS(LOCAL):무효플래그 > 0
		LOCAL:2 = 1
	SIF LOCAL:2 == 1
		BREAK
NEXT

IF (CFLAG:ARG:기합플래그 == 1 && CFLAG:ARG:집중플래그 == 1) || (CFLAG:ARG:행동한횟수 == 0 && RAND:4)
	CFLAG:ARG:입력행동 = [[스킬:56억7천만의장]]
	CALL RANDOM_TARGET,ARG,[[스킬:56억7천만의장]]
	RETURN 1
ENDIF

IF LOCAL:2 == 1
	IF RAND:3 && CFLAG:ARG:집중플래그 == 0
		CFLAG:ARG:입력행동 = [[스킬:컨센트레이트]]
		CALL RANDOM_TARGET,ARG,[[스킬:컨센트레이트]]
		RETURN 1
	ELSEIF RAND:3 && CFLAG:ARG:기합플래그 == 0
		CFLAG:ARG:입력행동 = [[스킬:기합]]
		CALL RANDOM_TARGET,ARG,[[스킬:기합]]
		RETURN 1
	ELSEIF RAND:2 == 0 && CFLAG:ARG:기합플래그 == 1
		CFLAG:ARG:입력행동 = [[스킬:끝나는세계]]
		CALL RANDOM_TARGET,ARG,[[스킬:끝나는세계]]
		RETURN 1
	ELSEIF RAND:2 == 0 && CFLAG:ARG:집중플래그 == 1
		CFLAG:ARG:입력행동 = [[스킬:메기도라온]]
		CALL RANDOM_TARGET,ARG,[[스킬:메기도라온]]
		RETURN 1
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:56억7천만의장]]
		CALL RANDOM_TARGET,ARG,[[스킬:56억7천만의장]]
		RETURN 1
	ENDIF
ENDIF
CALL 랜덤행동 , ARG
RETURN 1
				
IF CFLAG:ARG:기합플래그 == 1
	IF RAND:8 == 0 && CFLAG:ARG:집중플래그 == 0
		CFLAG:ARG:입력행동 = [[스킬:컨센트레이트]]
		CALL RANDOM_TARGET,ARG,[[스킬:컨센트레이트]]
		RETURN 1
	ELSEIF RAND:3 == 0
		CFLAG:ARG:입력행동 = [[스킬:신등거출팔백만격]]
		CALL RANDOM_TARGET,ARG,[[스킬:신등거출팔백만격]]
		RETURN 1
	ELSEIF RAND:2 == 0
		CFLAG:ARG:입력행동 = [[스킬:묵시록]]
		CALL RANDOM_TARGET,ARG,[[스킬:묵시록]]
		RETURN 1
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:56억7천만의장]]
		CALL RANDOM_TARGET,ARG,[[스킬:56억7천만의장]]
		RETURN 1
	ENDIF
ENDIF
IF CFLAG:ARG:집중플래그 == 1
	IF RAND:8 == 0 && CFLAG:ARG:기합플래그 == 0
		CFLAG:ARG:입력행동 = [[스킬:기합]]
		CALL RANDOM_TARGET,ARG,[[스킬:기합]]
		RETURN 1
	ELSEIF RAND:4 == 0
		CFLAG:ARG:입력행동 = [[스킬:브레인버스트]]
		CALL RANDOM_TARGET,ARG,[[스킬:브레인버스트]]
		RETURN 1
	ELSEIF RAND:3 == 0
		CFLAG:ARG:입력행동 = [[스킬:마계의조사]]
		CALL RANDOM_TARGET,ARG,[[스킬:마계의조사]]
		RETURN 1
	ELSEIF RAND:2 == 0
		CFLAG:ARG:입력행동 = [[스킬:릴리즈제일]]
		CALL RANDOM_TARGET,ARG,[[스킬:릴리즈제일]]
		RETURN 1
	ELSE
		CFLAG:ARG:입력행동 = [[스킬:56억7천만의장]]
		CALL RANDOM_TARGET,ARG,[[스킬:56억7천만의장]]
		RETURN 1
	ENDIF
ENDIF


@SET_ACTION_トリブ・小野坂2,ARG
IF RAND:2 && (CFLAG:ARG:공격강화 < -4 || CFLAG:ARG:방어강화 < -4 || CFLAG:ARG:마법위력강화 < -4 || CFLAG:ARG:명중강화 < -4 || CFLAG:ARG:회피강화 < -4)
	CFLAG:ARG:입력행동 = 505
	CALL RANDOM_TARGET,ARG,505
	RETURN 1
ELSEIF RAND:2
	IF POS(9) > 0 && RAND:3 == 0
		IF CFLAG:POS(9):빙결무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:불의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:불의벽]]
			RETURN 1
		ELSEIF CFLAG:POS(9):충격무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:중력의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:중력의벽]]
			RETURN 1
		ELSEIF CFLAG:POS(9):중력무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:충격의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:충격의벽]]
			RETURN 1
		ELSEIF CFLAG:POS(9):핵열무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:수정의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:수정의벽]]
			RETURN 1
		ENDIF
	ENDIF
	IF POS(10) > 0 && RAND:2 == 0
		IF CFLAG:POS(9):화염무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:물의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:물의벽]]
			RETURN 1
		ELSEIF CFLAG:POS(9):전격무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:대지의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:대지의벽]]
			RETURN 1
		ELSEIF CFLAG:POS(9):핵열무효화횟수 < 1
			CFLAG:ARG:입력행동 = [[스킬:수정의벽]]
			CALL RANDOM_TARGET,ARG,[[스킬:수정의벽]]
			RETURN 1
		ENDIF
	ENDIF
	
	IF CFLAG:ARG:충격무효화횟수 < 1
		CFLAG:ARG:입력행동 = [[스킬:중력의벽]]
		CALL RANDOM_TARGET,ARG,[[스킬:중력의벽]]
		RETURN 1
	ELSEIF CFLAG:ARG:질풍무효화횟수 < 1
		CFLAG:ARG:입력행동 = [[스킬:얼음의벽]]
		CALL RANDOM_TARGET,ARG,[[스킬:얼음의벽]]
		RETURN 1
	ELSEIF CFLAG:ARG:신경무효화횟수 < 1
		CFLAG:ARG:입력행동 = [[스킬:펜타월]]
		CALL RANDOM_TARGET,ARG,[[스킬:펜타월]]
		RETURN 1
	ENDIF
	
		$DECIDE_ACTION
		CALL SEARCH_ACT,ARG
		IF RESULT == 0
			CFLAG:ARG:입력행동 = -1
			CFLAG:ARG:방어플래그 = 1
			RETURN 0
		ENDIF
;		PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
		LOCAL = RAND:RESULT
		;스킬番号決定
		LOCAL:1 = S:(10+LOCAL)
;		PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
		$TARGET_LOOP
		
		CALL RANDOM_TARGET,ARG,LOCAL:1
		CALLFORM SKILL_TARGET_{LOCAL:1}
		;ここで스킬番号を行動内容に代入
		SIF CFLAG:ARG:타겟 == -1
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = LOCAL:1
		
	RETURN 1
;それ以外は通常
ELSE
		$DECIDE_ACTION2
		CALL SEARCH_ACT,ARG
		IF RESULT == 0
			CFLAG:ARG:입력행동 = -1
			CFLAG:ARG:방어플래그 = 1
			RETURN 0
		ENDIF
;		PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
		LOCAL = RAND:RESULT
		;스킬番号決定
		LOCAL:1 = S:(10+LOCAL)
;		PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
		
		CALL RANDOM_TARGET,ARG,LOCAL:1
		CALLFORM SKILL_TARGET_{LOCAL:1}
		;ここで스킬番号を行動内容に代入
		SIF CFLAG:ARG:타겟 == -1
			GOTO DECIDE_ACTION2
		CFLAG:ARG:입력행동 = LOCAL:1
ENDIF

@SET_ACTION_トリブ・地2,ARG
CFLAG:ARG:입력행동 = 0
	;弱点をつく
	IF RAND:3 != 0
		LOCAL = RAND:6 + 1
		IF POS(LOCAL) > 0 && CFLAG:POS(LOCAL):ステート != GET_STATE_NUM("DYING")
			IF RAND:2
				IF MAXBASE:POS(LOCAL):타격 > 100 && MAXBASE:POS(LOCAL):타격 != 999
					CFLAG:ARG:입력행동 = [[스킬:모탈지하드]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ELSEIF MAXBASE:POS(LOCAL):전술 > 100 && MAXBASE:POS(LOCAL):전술 != 999
					CFLAG:ARG:입력행동 = [[스킬:아이언클로]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ELSEIF MAXBASE:POS(LOCAL):검격 > 100 && MAXBASE:POS(LOCAL):검격 != 999
					CFLAG:ARG:입력행동 = [[스킬:대나무베기]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ELSEIF MAXBASE:POS(LOCAL):비구 > 100 && MAXBASE:POS(LOCAL):비구 != 999
					CFLAG:ARG:입력행동 = [[스킬:원샷킬]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ENDIF
			ELSE
				IF MAXBASE:POS(LOCAL):타격 > 100 && MAXBASE:POS(LOCAL):타격 != 999
					CFLAG:ARG:입력행동 = [[스킬:예광구리가라축]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ELSEIF MAXBASE:POS(LOCAL):전술 > 100 && MAXBASE:POS(LOCAL):전술 != 999
					CFLAG:ARG:입력행동 = [[스킬:마음의외침]]
				ELSEIF MAXBASE:POS(LOCAL):검격 > 100 && MAXBASE:POS(LOCAL):검격 != 999
					CFLAG:ARG:입력행동 = [[스킬:부월쇄파]]
				ELSEIF MAXBASE:POS(LOCAL):비구 > 100 && MAXBASE:POS(LOCAL):비구 != 999
					CFLAG:ARG:입력행동 = [[스킬:멸살수전]]
				ENDIF
				IF CFLAG:ARG:입력행동 > 0
					IF LOCAL < 4
						CFLAG:ARG:타겟 = 17
						RETURN 1
					ELSE
						CFLAG:ARG:타겟 = 18
						RETURN 1
					ENDIF
				ENDIF
			ENDIF
		ENDIF
	ENDIF
		$DECIDE_ACTION
		CALL SEARCH_ACT,ARG
		IF RESULT == 0
			CFLAG:ARG:입력행동 = -1
			CFLAG:ARG:방어플래그 = 1
			RETURN 0
		ENDIF
;		PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
		LOCAL = RAND:RESULT
		;스킬番号決定
		LOCAL:1 = S:(10+LOCAL)
;		PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
		$TARGET_LOOP
		
		CALL RANDOM_TARGET,ARG,LOCAL:1
		CALLFORM SKILL_TARGET_{LOCAL:1}
		;ここで스킬番号を行動内容に代入
		SIF CFLAG:ARG:타겟 == -1
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = LOCAL:1
		
@SET_ACTION_トリブ・天2,ARG
	LOCAL:3 = 0
	FOR LOCAL, 1, 7
		SIF POS(LOCAL) < 0
			CONTINUE
		SIF CFLAG:POS(LOCAL):ステート == GET_STATE_NUM("DYING")
			CONTINUE
		SIF CFLAG:POS(LOCAL):공격강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):공격강화
		SIF CFLAG:POS(LOCAL):방어강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):방어강화
		SIF CFLAG:POS(LOCAL):마법위력강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):마법위력강화
		SIF CFLAG:POS(LOCAL):마법효과강화 > 0
			LOCAL:3 += CFLAG:POS(LOCAL):마법효과강화
		SIF CFLAG:POS(LOCAL):회피강화 + CFLAG:POS(LOCAL):명중강화 > 0
			LOCAL:3 += (CFLAG:POS(LOCAL):회피강화 + CFLAG:POS(LOCAL):명중강화) / 2
	NEXT
	IF 50 < LOCAL:3 && RAND:2
		CFLAG:ARG:입력행동 = 509
		CALL RANDOM_TARGET,ARG,509
		RETURN 1
	ENDIF
	CFLAG:ARG:입력행동 = 0
	;弱点をつく
	IF RAND:3 != 0
		LOCAL = RAND:6 + 1
		IF POS(LOCAL) > 0 && CFLAG:POS(LOCAL):ステート != GET_STATE_NUM("DYING")
			IF RAND:2
				FOR LOCAL:1, 4, 16
					LOCALS = %GET_TYPE(LOCAL:1)%
					IF MAXBASE:POS(LOCAL):LOCALS > 100 && MAXBASE:POS(LOCAL):LOCALS != 999
						SIF LOCAL:1 > 7 && LOCAL:1 < 12
							CONTINUE
						CFLAG:ARG:입력행동 = (LOCAL:1 + 3) * 100 + 3
						CFLAG:ARG:타겟 = LOCAL
						RETURN 1
					ENDIF
				NEXT
				IF MAXBASE:POS(LOCAL):핵열 > 100 && MAXBASE:POS(LOCAL):핵열 != 999
					CFLAG:ARG:입력행동 = [[스킬:기가리온]]
					CFLAG:ARG:타겟 = LOCAL
					RETURN 1
				ENDIF
			ELSE
				FOR LOCAL:1, 4, 16
					LOCALS = %GET_TYPE(LOCAL:1)%
					IF MAXBASE:POS(LOCAL):LOCALS > 100 && MAXBASE:POS(LOCAL):LOCALS != 999
						SIF LOCAL:1 > 7 && LOCAL:1 < 12
							CONTINUE
						CFLAG:ARG:입력행동 = (LOCAL:1 + 3) * 100 + 6
						IF CFLAG:ARG:입력행동 > 0
							IF LOCAL < 4
								CFLAG:ARG:타겟 = 17
								RETURN 1
							ELSE
								CFLAG:ARG:타겟 = 18
								RETURN 1
							ENDIF
						ENDIF
					ENDIF
				NEXT
				IF MAXBASE:POS(LOCAL):핵열 > 100 && MAXBASE:POS(LOCAL):핵열 != 999
					CFLAG:ARG:입력행동 = [[스킬:마하기가리온]]
					IF CFLAG:ARG:입력행동 > 0
						IF LOCAL < 4
							CFLAG:ARG:타겟 = 17
							RETURN 1
						ELSE
							CFLAG:ARG:타겟 = 18
							RETURN 1
						ENDIF
					ENDIF
				ENDIF
			ENDIF
		ENDIF
	ENDIF
		$DECIDE_ACTION
		CALL SEARCH_ACT,ARG
		IF RESULT == 0
			CFLAG:ARG:입력행동 = -1
			CFLAG:ARG:방어플래그 = 1
			RETURN 0
		ENDIF
;		PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
		LOCAL = RAND:RESULT
		;스킬番号決定
		LOCAL:1 = S:(10+LOCAL)
;		PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
		$TARGET_LOOP
		
		CALL RANDOM_TARGET,ARG,LOCAL:1
		CALLFORM SKILL_TARGET_{LOCAL:1}
		;ここで스킬番号を行動内容に代入
		SIF CFLAG:ARG:타겟 == -1
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = LOCAL:1
		

@SET_ACTION_ラボ明智,ARG

IF FLAG:경과턴수 % 4 == 0
	CFLAG:ARG:입력행동 = 602 + RAND:2
	CALL RANDOM_TARGET,ARG,602
	RETURN 1
ELSEIF RAND:4 == 0
	CFLAG:ARG:입력행동 = [[스킬:랜더마이저]]
	CALL RANDOM_TARGET,ARG,[[스킬:랜더마이저]]
	RETURN 1
ENDIF


CALL 랜덤행동 , ARG
