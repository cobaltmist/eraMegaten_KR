;=======================================================================
;샘플던전
;던전のテンプレートみたいなものです
;던전ナンバー0
;=======================================================================




;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_17
;渋谷クリア
IF 던전플래그:16:14 == 1
	RETURN 1
ELSE
	RETURN 0
ENDIF

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_17
RESULTS = 이케부쿠로

;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_17
PRINT 이케부쿠로
SELECTCASE FLAG:현M
	CASE 0
		PRINTL 지하 상점가 B2F
	CASE 1
		PRINTL 지하 상점가 B1F
	CASE 2
		PRINTL 큰길
	CASE 4
		PRINTL 가이아교・이케부쿠로 지부 1F
	CASE 5
		PRINTL 가이아교・이케부쿠로 지부 2F
	CASE 6
		PRINTL 가이아교・이케부쿠로 지부 3F
	CASE 7
		PRINTL 가이아교・이케부쿠로 지부 4F
	CASE 9
		PRINTL 만트라군 사령부 B1F
	CASE 10
		PRINTL 만트라군 사령부 1F
	CASE 11
		PRINTL 만트라군 사령부 2F
	CASE 12
		PRINTL 만트라군 사령부 3F
	CASE 13
		PRINTL 만트라군 사령부 60F~64F
	CASEELSE
		PRINTL
ENDSELECT

;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_17,ARG
FLAG:현M = 2
FLAG:현X = 4
FLAG:현Y = 18
;=======================================================================
;スタート時이벤트
;=======================================================================
@EVENT_DUNGEON_START_17
IF 던전플래그:(FLAG:현던전):10 == 0
	CALL SHOW_PICTURE, "D"
	CALL MESSAGE_WINDOW_D, "", "＞체크맨의 말에 의하면 , 여기 이케부쿠로에 있는 만트라군의 거점에 「별의 힘」이 있는 것 같다"
	CALL MESSAGE_WINDOW_D, "", "＞만트라군이란, 토쿄를 지배하는 마왕 바엘의 호소에 응한/＞기온신, 고즈 텐노를 탑으로 한 전투 집단이다/＞그러나, 그들이 인간과 악마의 융화를 목표로 하는 가이아교의 이념을/＞그렇게 존중하고 있다는 것은 아니다"
	CALL MESSAGE_WINDOW_D, "", "＞그들은 메시아교의 교리에 의한 지배에 반발해,/＞메시아 교단 배제를 우선시 하는 가이아 교단과 접근하였고,/＞이 시점에서는 가이아 교단의 가장 유력한 동맹이 된 것이다"
	CALL MESSAGE_WINDOW_D, "", "＞즉 이 이케부쿠로도 가이아 교단의 세력권인 것은 시부야와 같다/＞바람을 살해한 이상, 여기서도 싸움을 피할 수는 없을 것이다……"
	던전플래그:(FLAG:현던전):10 = 1
ENDIF



;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_17
SELECTCASE FLAG:현M
	CASE 0
		;地下街B2F
		FLAG:최대X = 9
		FLAG:최대Y = 10
		;						 000000000
		;						 012345678
		CALL MAKE_FLOOR_LINE, 0,"         "
		CALL MAKE_FLOOR_LINE, 1,"    1    "
		CALL MAKE_FLOOR_LINE, 2,"    1113 "
		CALL MAKE_FLOOR_LINE, 3,"    1    "
		CALL MAKE_FLOOR_LINE, 4,"    1    "
		CALL MAKE_FLOOR_LINE, 5,"    1    "
		CALL MAKE_FLOOR_LINE, 6," 9111    "
		CALL MAKE_FLOOR_LINE, 7,"    1    "
		CALL MAKE_FLOOR_LINE, 8,"    6    "
		CALL MAKE_FLOOR_LINE, 9,"         "	
	CASE 1
		;地下街B1F
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;						 000000000011111111112
		;						 012345678901234567890
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 92111129      16   "
		CALL MAKE_FLOOR_LINE, 2,"   1111        1    "
		CALL MAKE_FLOOR_LINE, 3,"   1111      911111 "
		CALL MAKE_FLOOR_LINE, 4,"   1111     1  2 1  "
		CALL MAKE_FLOOR_LINE, 5,"   1 11     1211 1  "
		CALL MAKE_FLOOR_LINE, 6," T216 129   1    1  "
		CALL MAKE_FLOOR_LINE, 7,"   1 11     123  1  "
		CALL MAKE_FLOOR_LINE, 8,"   17 1  6  1    1  "
		CALL MAKE_FLOOR_LINE, 9,"   1 11  1  121121  "
		CALL MAKE_FLOOR_LINE,10,"   1111  1  1    1  "
		CALL MAKE_FLOOR_LINE,11,"   1111 911 1 91 1  "
		CALL MAKE_FLOOR_LINE,12,"   1111 119 1 11 1  "
		CALL MAKE_FLOOR_LINE,13," 921111211121 11 1  "
		CALL MAKE_FLOOR_LINE,14,"    1       1  2 1  "
		CALL MAKE_FLOOR_LINE,15,"    2       11111   "
		CALL MAKE_FLOOR_LINE,16,"    6               "
		CALL MAKE_FLOOR_LINE,17,"                    "
		CALL MAKE_FLOOR_LINE,18,"                    "
		CALL MAKE_FLOOR_LINE,19,"                    "
	CASE 2
		;表通り
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;						 000000000011111111112
		;						 012345678901234567890
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"         6      711 "
		CALL MAKE_FLOOR_LINE, 2,"       11111      1 "
		CALL MAKE_FLOOR_LINE, 3," 92111 11111 111111 "
		CALL MAKE_FLOOR_LINE, 4,"   191 11111     1  "
		CALL MAKE_FLOOR_LINE, 5," 92111 11191 111 1  "
		CALL MAKE_FLOOR_LINE, 6,"    7  1 1 1 1 1 1  "
		CALL MAKE_FLOOR_LINE, 7,"       1 1 1 3 121  "
		CALL MAKE_FLOOR_LINE, 8,"       1 7 1     9  "
		CALL MAKE_FLOOR_LINE, 9,"     921   129      "
		CALL MAKE_FLOOR_LINE,10,"       1   1        "
		CALL MAKE_FLOOR_LINE,11,"      11   11       "
		CALL MAKE_FLOOR_LINE,12,"      11   11       "
		CALL MAKE_FLOOR_LINE,13,"      11   11       "
		CALL MAKE_FLOOR_LINE,14,"      11   11       "
		CALL MAKE_FLOOR_LINE,15,"      111 111       "
		CALL MAKE_FLOOR_LINE,16,"    7 1111111       "
		CALL MAKE_FLOOR_LINE,17,"    1 2  2  2       "
		CALL MAKE_FLOOR_LINE,18,"    1 9  9  3       "
		CALL MAKE_FLOOR_LINE,19,"    8               "

	CASE 4
		;ガイア教・이케부쿠로支部1F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 1 9 11111 1 121 "
		CALL MAKE_FLOOR_LINE, 2," 1 2 1   1 2 1   "
		CALL MAKE_FLOOR_LINE, 3," 11111 921111111 "
		CALL MAKE_FLOOR_LINE, 4,"   1         1   "
		CALL MAKE_FLOOR_LINE, 5," 121 1 9 129 121 "
		CALL MAKE_FLOOR_LINE, 6," 1 1 1 2 1   1   "
		CALL MAKE_FLOOR_LINE, 7," 1 1 111 1 6 111 "
		CALL MAKE_FLOOR_LINE, 8," 1   2 1 1 2 1   "
		CALL MAKE_FLOOR_LINE, 9," 111 1 1 1 1 127 "
		CALL MAKE_FLOOR_LINE,10,"   1 1   2 1 1   "
		CALL MAKE_FLOOR_LINE,11," 121 1111111 111 "
		CALL MAKE_FLOOR_LINE,12," 1     2     1   "
		CALL MAKE_FLOOR_LINE,13," 11111 11111212T "
		CALL MAKE_FLOOR_LINE,14," 1 2 1       1   "
		CALL MAKE_FLOOR_LINE,15," 1 E 11111112111 "
		CALL MAKE_FLOOR_LINE,16,"                 "

	CASE 5
		;ガイア教・이케부쿠로支部2F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 111111111111111 "
		CALL MAKE_FLOOR_LINE, 2," 1         2   1 "
		CALL MAKE_FLOOR_LINE, 3," 1 1111111 1 1 1 "
		CALL MAKE_FLOOR_LINE, 4," 1   1   1   1 1 "
		CALL MAKE_FLOOR_LINE, 5," 123 1 E 11111 1 "
		CALL MAKE_FLOOR_LINE, 6," 1   1 2 1 2 1 1 "
		CALL MAKE_FLOOR_LINE, 7," 1 1111111 7 1 1 "
		CALL MAKE_FLOOR_LINE, 8," 1 1 2 1       1 "
		CALL MAKE_FLOOR_LINE, 9," 1 1 6 1 1111111 "
		CALL MAKE_FLOOR_LINE,10," 1 1   1 1111111 "
		CALL MAKE_FLOOR_LINE,11," 1211111 1111111 "
		CALL MAKE_FLOOR_LINE,12," 1   1   2 1   1 "
		CALL MAKE_FLOOR_LINE,13," 1 3 1 3 1 1 3 1 "
		CALL MAKE_FLOOR_LINE,14," 1 2   2 1 2 2 1 "
		CALL MAKE_FLOOR_LINE,15," 1111111 1 1 121 "
		CALL MAKE_FLOOR_LINE,16,"                 "

	CASE 6
		;ガイア教・이케부쿠로支部3F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 1111111 9 11121 "
		CALL MAKE_FLOOR_LINE, 2," 1   2 1 2 1   1 "
		CALL MAKE_FLOOR_LINE, 3," 1 111 11111 111 "
		CALL MAKE_FLOOR_LINE, 4,"   1         1   "
		CALL MAKE_FLOOR_LINE, 5," 111 1 E 111 1 6 "
		CALL MAKE_FLOOR_LINE, 6,"   1 1 2 1   1 2 "
		CALL MAKE_FLOOR_LINE, 7," 921 11111 6 1 1 "
		CALL MAKE_FLOOR_LINE, 8,"   1     1 2 2 1 "
		CALL MAKE_FLOOR_LINE, 9," 111 7 1 1 1 111 "
		CALL MAKE_FLOOR_LINE,10," 1   2 1 2 1 1   "
		CALL MAKE_FLOOR_LINE,11," 121 1111111 123 "
		CALL MAKE_FLOOR_LINE,12," 1 1     2   1   "
		CALL MAKE_FLOOR_LINE,13," 1 111 1 1 11111 "
		CALL MAKE_FLOOR_LINE,14," 1 2 1 1 2 1 2 1 "
		CALL MAKE_FLOOR_LINE,15," 1 3 1211111 9 1 "
		CALL MAKE_FLOOR_LINE,16,"                 "

	CASE 7
		;ガイア教・이케부쿠로支部4F
		FLAG:최대X = 17
		FLAG:최대Y = 17
		;						 00000000001111111
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 11121 9 1 11111 "
		CALL MAKE_FLOOR_LINE, 2,"   1 1 2 1 2   1 "
		CALL MAKE_FLOOR_LINE, 3," 121 111111111 1 "
		CALL MAKE_FLOOR_LINE, 4,"   1         1 2 "
		CALL MAKE_FLOOR_LINE, 5," 111 1 E 111 1 7 "
		CALL MAKE_FLOOR_LINE, 6," 2   1 2 1 2 1   "
		CALL MAKE_FLOOR_LINE, 7," 111 111 1 7 111 "
		CALL MAKE_FLOOR_LINE, 8,"   1   1 1     1 "
		CALL MAKE_FLOOR_LINE, 9," 921 121 111 121 "
		CALL MAKE_FLOOR_LINE,10,"   1 1     1 1 1 "
		CALL MAKE_FLOOR_LINE,11," 1 1 1111121 1 1 "
		CALL MAKE_FLOOR_LINE,12," 1 2         1 1 "
		CALL MAKE_FLOOR_LINE,13," 1111111211111 1 "
		CALL MAKE_FLOOR_LINE,14,"       1 1 2   1 "
		CALL MAKE_FLOOR_LINE,15," 6111121 1 T 111 "
		CALL MAKE_FLOOR_LINE,16,"                 "

	CASE 9
		;만트라軍本営B1F
		FLAG:최대X = 20
		FLAG:최대Y = 15
		;						 000000000011111111112
		;						 012345678901234567890
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"    6               "
		CALL MAKE_FLOOR_LINE, 2,"    1               "
		CALL MAKE_FLOOR_LINE, 3,"    1               "
		CALL MAKE_FLOOR_LINE, 4,"    1               "
		CALL MAKE_FLOOR_LINE, 5,"    2               "
		CALL MAKE_FLOOR_LINE, 6,"    1               "
		CALL MAKE_FLOOR_LINE, 7,"    1    1 1 1 1    "
		CALL MAKE_FLOOR_LINE, 8,"    1    G G G G    "
		CALL MAKE_FLOOR_LINE, 9,"  111 1211111111    "
		CALL MAKE_FLOOR_LINE,10," E11121             "
		CALL MAKE_FLOOR_LINE,11,"  111 12111111111G3 "
		CALL MAKE_FLOOR_LINE,12,"         G G G G    "
		CALL MAKE_FLOOR_LINE,13,"         1 1 1 1    "
		CALL MAKE_FLOOR_LINE,14,"                    "
	CASE 10
		;만트라軍本営1F
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;						 000000000011111111112
		;						 012345678901234567890
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"    7               "
		CALL MAKE_FLOOR_LINE, 2,"  111   1     6     "
		CALL MAKE_FLOOR_LINE, 3,"  1     1   111     "
		CALL MAKE_FLOOR_LINE, 4,"  111 921    2      "
		CALL MAKE_FLOOR_LINE, 5,"    2   1    1      "
		CALL MAKE_FLOOR_LINE, 6,"    1   129  1 1111 "
		CALL MAKE_FLOOR_LINE, 7,"    1   1    1211118"
		CALL MAKE_FLOOR_LINE, 8,"    1 T21    1 1111 "
		CALL MAKE_FLOOR_LINE, 9,"  911   1    1      "
		CALL MAKE_FLOOR_LINE,10," E111211111211      "
		CALL MAKE_FLOOR_LINE,11,"  111   1    123    "
		CALL MAKE_FLOOR_LINE,12,"        1    1      "
		CALL MAKE_FLOOR_LINE,13,"        2           "
		CALL MAKE_FLOOR_LINE,14,"       111          "
		CALL MAKE_FLOOR_LINE,15,"       111          "
		CALL MAKE_FLOOR_LINE,16,"       111          "
		CALL MAKE_FLOOR_LINE,17,"       111          "
		CALL MAKE_FLOOR_LINE,18,"        7           "
		CALL MAKE_FLOOR_LINE,19,"                    "

	CASE 11
		;만트라軍本営2F
		FLAG:최대X = 18
		FLAG:최대Y = 19
		;						 000000000011111111112
		;						 012345678901234567890
		CALL MAKE_FLOOR_LINE, 0,"                  "
		CALL MAKE_FLOOR_LINE, 1,"    6     9       "
		CALL MAKE_FLOOR_LINE, 2,"    2     2   7   "
		CALL MAKE_FLOOR_LINE, 3,"    1     1   1   "
		CALL MAKE_FLOOR_LINE, 4,"    1     1   111 "
		CALL MAKE_FLOOR_LINE, 5,"    1111111     1 "
		CALL MAKE_FLOOR_LINE, 6,"          2     1 "
		CALL MAKE_FLOOR_LINE, 7,"      111111111 1 "
		CALL MAKE_FLOOR_LINE, 8,"      111111911 1 "
		CALL MAKE_FLOOR_LINE, 9,"  111 111111111 1 "
		CALL MAKE_FLOOR_LINE,10," E111211111111121 "
		CALL MAKE_FLOOR_LINE,11,"  111 111111111 1 "
		CALL MAKE_FLOOR_LINE,12,"    1 119111111   "
		CALL MAKE_FLOOR_LINE,13,"    1 111111111   "
		CALL MAKE_FLOOR_LINE,14,"    1             "
		CALL MAKE_FLOOR_LINE,15,"    11111111      "
		CALL MAKE_FLOOR_LINE,16,"       2  2       "
		CALL MAKE_FLOOR_LINE,17,"       9  3       "
		CALL MAKE_FLOOR_LINE,18,"                  "


	CASE 12
		;만트라軍本営3F
		FLAG:최대X = 18
		FLAG:최대Y = 17
		;						 000000000011111111
		;						 012345678901234567
		CALL MAKE_FLOOR_LINE, 0,"                  "
		CALL MAKE_FLOOR_LINE, 1,"    7             "
		CALL MAKE_FLOOR_LINE, 2,"  111             "
		CALL MAKE_FLOOR_LINE, 3,"  1               "
		CALL MAKE_FLOOR_LINE, 4,"  111             "
		CALL MAKE_FLOOR_LINE, 5,"    2             "
		CALL MAKE_FLOOR_LINE, 6,"    1         1   "
		CALL MAKE_FLOOR_LINE, 7,"    1211111112123 "
		CALL MAKE_FLOOR_LINE, 8,"    1    2    1   "
		CALL MAKE_FLOOR_LINE, 9,"  111   444   129 "
		CALL MAKE_FLOOR_LINE,10," E111   111   1   "
		CALL MAKE_FLOOR_LINE,11,"  111   1A1   123 "
		CALL MAKE_FLOOR_LINE,12,"         2    1   "
		CALL MAKE_FLOOR_LINE,13,"  111211111112129 "
		CALL MAKE_FLOOR_LINE,14," 6111         1   "
		CALL MAKE_FLOOR_LINE,15,"  111         1   "
		CALL MAKE_FLOOR_LINE,16,"                  "
		;A 토르にさらわれきた直後のタイル
		DA:9:11 = 11
		;이벤트:裁判（ボス戦）

	CASE 13
		;만트라軍本営60F~64F
		FLAG:최대X = 20
		FLAG:최대Y = 20
		;						 000000000011111111112
		;						 01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"         GG         "
		CALL MAKE_FLOOR_LINE, 1,"         11         "
		CALL MAKE_FLOOR_LINE, 2,"         11         "
		CALL MAKE_FLOOR_LINE, 3,"         11         "
		CALL MAKE_FLOOR_LINE, 4,"         11         "
		CALL MAKE_FLOOR_LINE, 5,"         11         "
		CALL MAKE_FLOOR_LINE, 6,"         11         "
		CALL MAKE_FLOOR_LINE, 7,"         11         "
		CALL MAKE_FLOOR_LINE, 8,"         111111     "
		CALL MAKE_FLOOR_LINE, 9,"            111     "
		CALL MAKE_FLOOR_LINE,10,"   111111111111     "
		CALL MAKE_FLOOR_LINE,11,"   111              "
		CALL MAKE_FLOOR_LINE,12,"   111111111111     "
		CALL MAKE_FLOOR_LINE,13,"            111     "
		CALL MAKE_FLOOR_LINE,14," 72111111111111     "
		CALL MAKE_FLOOR_LINE,15,"   111          113 "
		CALL MAKE_FLOOR_LINE,16," 111111111111111111 "
		CALL MAKE_FLOOR_LINE,17," 1 11    1          "
		CALL MAKE_FLOOR_LINE,18,"   11    1          "
		CALL MAKE_FLOOR_LINE,19,"                    "
	CASEELSE
ENDSELECT

;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_17, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 던전플래그:75~99
;LOCAL:4 이벤트
;LOCAL:8 メッセンジャー
;(0/0)でLOCALを소거
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
IF ARG == 3
	IF GETBIT(던전플래그:(FLAG:현던전):(FLAG:현M+25), LOCAL:3)
		DA:(ARG:1):(ARG:2) = 1
	ELSE
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:3 * 10 + 3
	ENDIF
	LOCAL:3++
ENDIF
;이벤트扉
IF ARG == 12
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:2 * 10 + 12
	LOCAL:2++
ENDIF
;이벤트
IF ARG == 4
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:4 * 10 + 4
	LOCAL:4++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
		;裁判
		CASE 1200, 1201, 1202
			SIF 던전플래그:(FLAG:현던전):13
				DA:(ARG:1):(ARG:2) = 1
	ENDSELECT
ENDIF
;上り階段
IF ARG == 6
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:6 * 100 + 6
	LOCAL:6++
ENDIF
;下り階段
IF ARG == 7
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:7 * 100 + 7
	LOCAL:7++
ENDIF
;メッセンジャー
IF ARG == 9
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:9 * 10 + 9
	LOCAL:9++
ENDIF

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_17, ARGS, ARG, ARG:1
;G 이벤트扉
SIF ARGS == "G"
	RETURN 12

;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_17
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	;==========
	;出口の処理
	;==========
	CASE 8
		CALL DUNGEON_EXIT
		RETURN 1
	;========
	;宝の処理
	;========
	CASE 3
		CALL TREASURE_17
		RETURN RESULT
	CASE 4
		CALL EVENT_17
	;=======
	;階段
	;=======
	CASE 6, 7
		CALL WORP_17
		RETURN 1
	;=======
	;メッセンジャー
	;=======
	CASE 9
		CALL MESSAGE_17
		RETURN 1
ENDSELECT

;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_17,ARG
;ARG = 進入時の向き　0の場合ワープなど
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	;========
	;扉の処理
	;========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
	;========
	;宝の処理
	;========
	CASE 3
		CALL TREASURE_17
		RETURN RESULT
	CASE 4
		CALL EVENT_17
	;=======
	;階段
	;=======
	CASE 6, 7
		CALL WORP_17
		RETURN RESULT
	;==========
	;出口の処理
	;==========
	CASE 8
		CALL DUNGEON_EXIT
		RETURN 1
	;=======
	;メッセンジャー
	;=======
	CASE 9
		CALL MESSAGE_17, 1
		RETURN 1
ENDSELECT
RETURN 0
;========
;이벤트の処理
;========

;=======================================================================
;指定したマスに進入가능か
;=======================================================================
@CAN_ENTER_17,ARG,ARG:1
#LOCALSSIZE 1
#LOCALSIZE 1
SELECTCASE DA:ARG:(ARG:1)
	CASE 9012
		CALL MESSAGE_WINDOW_D, "악마 같은 소리", "잡―혀 버렸다―/잡―혀 버렸다―아"
		RETURN 0
	CASE 9022
		CALL MESSAGE_WINDOW_D, "젊은 여자의 목소리", "원조교제 같은 것은 일반적, 이라고 말했더니 잡혀 버렸어/고즈텐노우 라는 분은 상당히 고풍스러운 쪽이었구나"
		RETURN 0
	CASE 9032
		CALL MESSAGE_WINDOW_D, "", "＞이 감옥에는 아무도 갇혀 있지 않은 것 같다…"
		RETURN 0
	CASE 9042
		CALL MESSAGE_WINDOW_D, "여자의 목소리", "부부는 다른 성을 써야 합니다! /가족의 변화된 모습을 인정하지 않는 만트라군은 우익! "
		RETURN 0
	CASE 9052
		IF 던전플래그:(FLAG:현던전):14 == 0
			CALL MESSAGE_WINDOW_D, "", "＞거대한 문이 있다……/＞이 문을 열려면  상당한 힘이 필요한 것 같다……/＞누구에게 문을 열게 할지 선택해 주세요"
			LOCALS = 
			FOR LOCAL, 1, 7
				SIF POS(LOCAL) < 0
					CONTINUE
				SIF GET_STATE(CFLAG:POS(LOCAL):상태이상) != "GOOD"
					CONTINUE
				LOCALS += @"[{LOCAL}] %CALLNAME:POS(LOCAL)%/"
			NEXT
			LOCALS += "[9] 문을 내버려둔다"
			CALL INPUT_SELECT_D, LOCALS, , , 2
			LOCAL = RESULT
			IF LOCAL == 9
				CALL MESSAGE_WINDOW_D, "", "＞문에 매달리지 않고 발길을 돌렸다……"
			ELSE
				CALL MESSAGE_WINDOW_D, "", @"＞%CALLNAME:POS(LOCAL)%는 힘껏 문을 밀었다……"
				CALL MESSAGE_WINDOW_D, "", "………………/…………/……"
				IF MAXBASE:POS(LOCAL):힘 >= 50
					CALL MESSAGE_WINDOW_D, "", @"＞%CALLNAME:POS(LOCAL)%는 멋지게 문을 열었다!"
					던전플래그:(FLAG:현던전):14 = 1
					RETURN 1
				ELSE
					CALL MESSAGE_WINDOW_D, "", @"＞문은 열리지 않았다……"
				ENDIF
			ENDIF
			RETURN 0
		ENDIF
	CASE 9062
		CALL MESSAGE_WINDOW_D, "젊은 남자의 목소리", "젠자앙ー！/만트라군의 시대가 되어도 음주운전은 안되는거냐! "
		RETURN 0
	CASE 9072
		CALL MESSAGE_WINDOW_D, "", "＞이 감옥에는 아무도 갇혀 있지 않은 것 같다…"
		RETURN 0
		;IF 던전플래그:(FLAG:현던전):22 == 0
		;	PRINTL 감옥안에는 한사람의 소녀가 있었다。
		;	PRINTL 복장은 생각보다는 평범하지만, 얼굴 생김새를 보면 안다. 아마 좋은 집안 아가씨일 것이다。
		;	PRINTL 「…누구？」
		;	PRINTL 「…뭐야、또 악마술사인가요…」
		;	PRINTL 「내버려두세요。저는 스스로의 의지로 이곳에 있는 거에요…」
		;	PRINTL 「…그 녀석을 만날 수 없는 세상은, 이제 아무래도 좋으니…」
		;	PRINTL 「이제 전부, 아무래도 좋아…」
		;	PRINTL 그렇게 말한 소녀는 몸을 숙여, 일절의 질문에 응하지 않게 되었다。
		;	PRINTL …지금까지는 그림자가 늘어져 있어서 잘 안보였지만, 소녀의 오른 팔은…。
		;	PRINTL 이래서는 데려갈 수 없을 것 같다…。
		;	PRINTFORMW %조사처리(CALLNAME:MASTER,"는")% 부득이하게 방에서 나가기로 했다。
		;	던전플래그:(FLAG:현던전):22 = 1
		;ELSEIF 던전플래그:(FLAG:현던전):22 == 1
		;	PRINTL 소녀는 마음을 열 것 같지 않다…。
		;		IF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애)
		;			PRINTL 
		;			PRINTL 「…이 아이…. 어떻게든 할 수 없을까요…？」
		;			PRINTL 「무슨 일이 있었는지는 모르지만…이런 일을 당하다니…불쌍해요…」
		;			PRINTW 베스는 마음을 닫은 소녀를 걱정스러운 시선으로 응시하고 있다。
		;		ENDIF
		;	PRINTFORMW %조사처리(CALLNAME:MASTER,"는")% 부득이하게 방에서 나가기로 했다。
		;ENDIF
	CASE 9082
		CALL MESSAGE_WINDOW_D, "젊은 남자의 목소리", "젠장……/힘만 있으면 뭐든지 허용되는데……/그러니까 여자라거나 돈이라거나……"
		RETURN 0
		;PRINTL 젊은이가 있다…。
		;PRINTL 「아？내가 뭘 하려고 했더라? 뭐 아무래도 좋겠지」
		;PRINTW 「그런 일보다 근처의 감옥 말인데…. 어째서 저런 상등품이 이케부쿠로 같은 곳에 있는거지?」
	CASE 9092
		CALL MESSAGE_WINDOW_D, "아이의 목소리", "조금 상냥하게 말을 걸었는데 얼어붙어 버렸다 호！/나도 No,1프로스트가 되고 싶었다 호！/토호호…/빨리 재판을 해주었으면 좋겠는데 호…！"
		RETURN 0
	CASE 13012, 13022
		IF 던전플래그:(FLAG:현던전):23
			CALL MESSAGE_WINDOW_D, "", "문은 굳게 닫혀 있다……"
		ELSE
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", "＞고즈 텐노의 방 문에 가까이가자 어둠 속에서 요마 모코이가 나타났다"
			CALL MESSAGE_WINDOW_D, "요마 모코이", "어쩐지 매우 다크니스 / 나, 아마라 우주 데뷔한 스타에욧"
			CALL MESSAGE_WINDOW_D, "요마 모코이", "우힛,/데빌 서머너 쿠즈노하 라이도우 대  팬텀·소사이어티의 서머너…/그 거 잘 나가가려나? "
			CALL MESSAGE_WINDOW_D, "", @"＞%CALLNAME:MASTER%가 모코이에 대답하려고 한 그 때…/＞아래층으로부터 기척이 있었다/＞내려다 보니 거기에는 칠흑의 외투를 걸친 청년과 검은 고양이가 있었다"
			IF 던전플래그:34:12
				CALL MESSAGE_WINDOW_D, "고우토", "그 때의 팬텀의 서머너인가…/여기까지 겨우 도착할 정도의 실력은 늘은 것 같군"
			ELSE
				CALL MESSAGE_WINDOW_D, "검은 고양이", "팬텀의 서머너네…/우선은 그 힘을 확인해 보겠어! "
			ENDIF
			CALL MESSAGE_WINDOW_D, "", "＞계단을 질주하여 흑의의 청년이 닥쳐온다/＞데빌 서머너　쿠즈노하 라이도우가 나타났다！"
			FLAG:도주불가플래그 = 1
			FLAG:회화불능플래그 = 1
			FLAG:선제기습취소 = 1
			;
			;라이도우Lv5　랭크12
			CALL SET_ENEMY,9,[[キャラ:라이도우]],41,0,1
			CFLAG:(CHARANUM-1):ＨＰ보정 += 1500
			CFLAG:(CHARANUM-1):ＭＰ보정 += 9000
			CFLAG:(CHARANUM-1):행동횟수 = 2
			CFLAG:(CHARANUM-1):속도보정 += 10
			EQUIP:(CHARANUM-1):머리 = [[아이템:야크트헬름]]
			EQUIP:(CHARANUM-1):몸통 = [[아이템:야크트아머]]
			EQUIP:(CHARANUM-1):팔 = [[아이템:야크트글러브]]
			EQUIP:(CHARANUM-1):발 = [[아이템:야크트레그]]
			ABL:(CHARANUM-1):스킬6 = 18
			ABL:(CHARANUM-1):스킬7 = 117
			ABL:(CHARANUM-1):스킬8 = 513
			CSTR:(CHARANUM-1):사고패턴 = 4542
			CALL SYNC_STATUS, (CHARANUM-1)
			CALL HEALTH_CHARA, (CHARANUM-1)
			CALL BATTLE_START
			FLAG:도주불가플래그 = 0
			FLAG:회화불능플래그 = 0
			FLAG:선제기습취소 = 0
			CALL MESSAGE_WINDOW_D, "", "＞라이도우는 칼을 칼집에 넣고는 물러났다…"
			IF 던전플래그:34:12
				CALL MESSAGE_WINDOW_D, "고우토", "라이도우가 인정할 정도로 성장했는가/팬텀의 서머너로 내버려 두기에는 아까운 인재군…/이것도 운명이란 것인가…/과연"
			ELSE
				CALL MESSAGE_WINDOW_D, "검은 고양이", "라이도우가 인정하는 그 힘/역시, 꽤 하는군…/사람이면서 사람이 아니고, 그 강함은 보통내기가 아니란건가/도대체 뭐지…"
				CALL MESSAGE_WINDOW_D, "검은 고양이", "지금, 너와 싸운 이 남자의 이름은 라이도우/그리고, 나는 고우토/뭐, 보잘것없는 탐정이다"
			ENDIF
			CALL MESSAGE_WINDOW_D, "고우토", "어느 신사의 의뢰로 너의 모습을 찾으러 왔지만…/라이도우, 네가 말하는 대로 되었군? /그러나…신사의 기대가 신경이 쓰이니까/조금 조사해 볼 필요가 있을 듯 하다"
			CALL MESSAGE_WINDOW_D, "고우토", "경우에 따라서는, 한번 더/라이도우와 겨루게 될지도 모르겠군? /…그것까지는 그 생명, 소중히 해두라구"
			CALL MESSAGE_WINDOW_D, "", "＞검은 고양이 고우토와 청년 쿠즈노하 라이도우는 떠나 갔다…"
			던전플래그:(FLAG:현던전):23 = 1
			DA:9:12 = 1
			DA:10:12 = 1
		ENDIF
		RETURN 0
ENDSELECT
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;エレベーター定義
;=======================================================================
@DUNGEON_ELEVATOR_17, ARG
VARSET RESULT, -1
VARSET RESULTS
SELECTCASE FLAG:현M
	CASE 4, 5, 6, 7
		RESULT:1 = 4
		RESULT:2 = 5
		RESULT:3 = 6
		RESULT:4 = 7
		RESULTS:1 = 1F
		RESULTS:2 = 2F
		RESULTS:3 = 3F
		RESULTS:4 = 4F
	CASE 9, 10, 11, 12
		RESULT:1 = 9
		RESULT:2 = 10
		RESULT:3 = 11
		RESULT:4 = 12
		RESULTS:1 = B1F
		RESULTS:2 = 1F
		RESULTS:3 = 2F
		RESULTS:4 = 3F
ENDSELECT
RETURN -1
;=======================================================================
;宝箱の中身
;=======================================================================
@TREASURE_17
#LOCALSIZE 1
#LOCALSSIZE 3
LOCAL = 1
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		LOCALS = 솔빙오브
	CASE 100
		LOCALS = 순미가라지시
	CASE 200
		LOCALS = 독화살
	CASE 201
		LOCALS = 마석
	CASE 500
		LOCALS = 덫
		LOCALS:1 = ＨＰ
		LOCAL = 25
	CASE 501
		LOCALS = ￥
		LOCAL = 14000
	CASE 502
		LOCALS = 보옥
	CASE 503
		LOCALS = 덫
		LOCALS:1 = POISON
		LOCAL = 30
		LOCALS:2 = 신경
	CASE 600
		LOCALS = 눈속임의구슬
	CASE 601
		LOCALS = 본양조만사쿠
	CASE 800
		LOCALS = 야마타노드링크
		LOCAL = 3
	CASE 900
		LOCALS = 마사카도의투구
	CASE 1000
		LOCALS = 힘의향
	CASE 1100
		LOCALS = 반혼향
		LOCAL = 3
	CASE 1200
		LOCALS = 보옥륜
	CASE 1201
		LOCALS = 챠크라드롭
		LOCAL = 3
	CASE 1300
		LOCALS = 마카
		LOCAL = 3000
ENDSELECT
IF LOCALS == "￥"
	CALL GET_TREASURE_MONEY, 0, LOCAL, FLAG:현던전, FLAG:현M + 25, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "마카"
	CALL GET_TREASURE_MONEY, 1, LOCAL, FLAG:현던전, FLAG:현M + 25, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "MAG" || LOCALS == "ＭＡＧ"
	CALL GET_TREASURE_MAG, 0, LOCAL, FLAG:현던전, FLAG:현M + 25, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "덫"
	;LOCALS:1 종류 LOCAL 데미지量or확률 LOCALS:2 相性
	CALL GET_TREASURE_TRAP, LOCALS:1, LOCAL, GET_TYPE_NUM(LOCALS:2), FLAG:현던전, FLAG:현M + 25, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSE
	IF GETNUM(ITEM, LOCALS) == -1
		PRINTL ＞아이템명의 지정이 잘못 되어 있습니다
		PRINTW ＞아이템의 취득처리를 중단합니다
	ELSE
		CALL GET_TREASURE, GETNUM(ITEM, LOCALS), LOCAL , FLAG:현던전, FLAG:현M + 25, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	ENDIF
ENDIF
RETURN 1
@EVENT_17, ARG
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
ENDSELECT
;=======================================================================
;ワープ
;=======================================================================
@TILE_MARK_COMMON_17_6, ARG, ARG:1, ARG:2
IF ARG == 2006 || ARG == 7006
	RESULTS = 入
ELSEIF ARG == 12006
	RESULTS = Ｅ
ELSE
	RESULTS = 승
ENDIF
@TILE_MARK_COMMON_17_7, ARG, ARG:1, ARG:2
IF ARG == 4007 || ARG == 10107
	RESULTS = 출
ELSEIF ARG == 13007
	RESULTS = Ｅ
ELSE
	RESULTS = 강
ENDIF
@WORP_17
SELECTCASE DA:(FLAG:현X):(FLAG:현Y)
	CASE 2006
		CALL MESSAGE_WINDOW_D, "", "＞가이아 교단・이케부쿠로 지부의 입구다"
		CALL INPUT_YN_D, "들어간다", "들어가지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 4, 4007, 1
	CASE 4007
		CALL MESSAGE_WINDOW_D, "", "＞가이아 교단・이케부쿠로 지부의 입구다"
		CALL INPUT_YN_D, "들어간다", "들어가지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 2, 2006, 1
	CASE 7006
		CALL MESSAGE_WINDOW_D, "", "＞만트라 군 사령부의 입구다"
		CALL INPUT_YN_D, "들어간다", "들어가지 않는다"
		IF !RESULT
			IF 던전플래그:(FLAG:현던전):13 == 0
				CALL MESSAGE_WINDOW_D, "", "＞문을 열려고 손잡이에 손을 대었을 때/＞등 뒤에서 발자국 소리가 크게 들렸기 때문에, 당황해 뒤돌아 보지 않았는데/＞때마침 내려친 거대한 해머에 맞았다…"
				CALL MESSAGE_WINDOW_D, "악마", "너는 시부야에서 바람 님을 살해한 일의 용의자이지만/그것 자체는 만트라군에 있어서는 별로 문제는 아니지/하지만 너를 재판에 회부하라고 하는,/시부야에서 도망나온 이들의 이야기를 무시할 수도 없는 일"
				CALL MESSAGE_WINDOW_D, "악마", "그렇다라면, 쌍방이 납득하는 형태를 제공할 때까지…/그것이 고즈텐노 님의 의사다…"
				CALL MESSAGE_WINDOW_D, "악마", @"악마는 의식을 잃은 %CALLNAME:MASTER%들을 질질 끌고 오라고 했다……"
				CALL MESSAGE_WINDOW_D, "", "………………/…………/……"
				CALL SHOW_PICTURE, "EMPTY"
				던전플래그:(FLAG:현던전):12 = 1
				FLAG:탈출스킬금지 = 1
				DA:(FLAG:현X):(FLAG:현Y) = 1
				CALL DUNGEON_WORP_ID, 12, 11, 1
				CALL SHOW_PICTURE, "D"
				CALL MESSAGE_WINDOW_D, "", @"＞눈을 뜨자, 투기장과 같은 장소에 끌려 와 있었다 /> 주위에는 깊은 해자가 파여있고, 또 그 앞에는 관객석이 보인다 "
				CALL MESSAGE_WINDOW_D, "", @"＞% CALLNAME : MASTER %의 뒤에는 문이 잠겨져있고 눈앞의 도어에는 /> 방금전 둔기로 % CALLNAME : MASTER % 일행을 강타한 거대한 악마가 중앙에 /> 그 옆에는 여성형 악마, 그리고 짐승 형의 악마가 1 체씩 있다 "
				CALL MESSAGE_WINDOW_D, "목소리", "재판을 시작한다…"
				CALL MESSAGE_WINDOW_D, "", "＞어디에선가 둔하고, 굵은 목소리가 들려 온다"
				CALL MESSAGE_WINDOW_D, "목소리", "너는, 시부야에서, 가이아 교단의 시부야 지부 지부장인/마왕 바람 님을 살해하였다/그 죄에 틀린 점은 없는가"
				CALL INPUT_YN_D
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "", @"＞%조사처리(CALLNAME:MASTER, "가")% 깨끗하게 고개를 끄덕이자 /> 장내에서 고성이 나오기 시작한다."
				ELSE
					CALL INCREASE_LD, -2
					CALL MESSAGE_WINDOW_D, "목소리", "여기에 너의 모습을 본 이들이 여럿 있다/그런데도 네 놈은 부정하는가/아무튼 좋다/머지않아 진실은 밝혀질 것이다"
				ENDIF
				CALL MESSAGE_WINDOW_D, "목소리", "그럼 하나 더 묻겠다…/너은 메시아 교도인가…？"
				CALL INPUT_YN_D
				IF RESULT == 0
					;大きくLAWに寄る
					CALL INCREASE_LC, 16
					CALL MESSAGE_WINDOW_D, "", @"＞%조사처리(CALLNAME:MASTER, "가")% 대답을 하자/＞장내가 단번에 소란스러워졌다"
					CALL MESSAGE_WINDOW_D, "관중", "역시나！"
					CALL MESSAGE_WINDOW_D, "관중", "메시아 교도 놈! /생명으로 갚게 해 주마！"
					CALLF STRFLAG_D("메시아교도긍정", 1)
				ELSE
					CALL MESSAGE_WINDOW_D, "", @"＞%조사처리(CALLNAME:MASTER, "가")% 고개를 가로젖자 장내의 일각부터 야유하는 소리가 들려온다"
					CALL MESSAGE_WINDOW_D, "관중", "거짓말 마라！"
					CALL MESSAGE_WINDOW_D, "관중", "메시아 교도도 아닌 녀석이 왜 바람님을 죽이냐!"
				ENDIF
				CALL MESSAGE_WINDOW_D, "망치를 든 악마", "정숙하라！/여기는 재판장이다！"
				CALL MESSAGE_WINDOW_D, "", "＞악마의 일갈에 의해 장내가 다시 아주 조용해졌다"
				CALL MESSAGE_WINDOW_D, "목소리", "계속하겠다"
				IF STRFLAG_D("메시아교도긍정")
					CALL MESSAGE_WINDOW_D, "목소리", "네가 메시아 교도라면 죄는 명백하다/자신의 힘을 부정하고, 다른 사람에게 매달리는 약한 자들의 가르침……/그 자체가 죄이다"
					CALL MESSAGE_WINDOW_D, "목소리", "하지만 그러나 너는 단신으로 바람을 죽였다/게다가 이 땅까지 찾아 들어온 강자이다/자신의 의사를 관철하는, 힘, 그것만 있으면 충분하다/그것이야말로 만트라군의 섭리…"
					CALL MESSAGE_WINDOW_D, "목소리", "이 섭리에 따라, 너에게 살아남을 기회를 주겠다/너를 결투의 형벌에 처한다！"
					CALL MESSAGE_WINDOW_D, "목소리", "네가、살아 남고 싶다면/여기 3명의 강자를 무찌르고 이겨서、/…그 힘의 전부를 우리 모두에게 보여봐라"
				ELSE
					CALL MESSAGE_WINDOW_D, "목소리", "네가 메시아 교도가 아니라는 것은 우리도 안다 / 왜냐하면 메시아 교도는 약하기 때문이다 / 놈들 따위에게 바람이 죽었을 것이라고는 생각되지 않는다"
					CALL MESSAGE_WINDOW_D, "목소리", "너에게 살해당한 바람도 또한 약했다고 하는 것일 것이다/약한 자, 거기에 따르는 이 들에게 뜻을 관철하는 자격 따위는 없다/그대의 목적이 무엇인가 있겠지만 그것은 아무래도 좋다"
					CALL MESSAGE_WINDOW_D, "목소리", "자신의 의사를 관철하는, 힘, 그것만 있으면 충분하다/그것이야말로 만트라군의 섭리…"
					CALL MESSAGE_WINDOW_D, "목소리", "하지만, 바람은 우리들이 동포이다/동포가 살해당했던 것에 대하는 구별을 지어주지 않으면/시부야에서 일부러 여기로 의지해 찾아온 사람들에게 설명할 방법도 없다"
					CALL MESSAGE_WINDOW_D, "목소리", "…따라서 여기서는、너를 결투의 형벌에 처한다！/네가、살아 남고 싶다면/여기 3명의 강자를 무찌르고 이겨서、/…그 힘의 전부를 우리 모두에게 보여봐라"
				ENDIF
				CALL MESSAGE_WINDOW_D, "", "＞장내가 환성으로 들끓는 가운데/＞즉시 일체의 악마가 전투 태세를 정돈해서 앞으로 나선다/＞마수 오르트로스가 １체 나타났다! "
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				;오르트로스Lv23　랭크3
				CALL SET_ENEMY,9,[[キャラ:오르트로스]],32,0,1
				CFLAG:(CHARANUM-1):ＭＰ보정 = 5000
				CFLAG:(CHARANUM-1):행동횟수 = 2
				ABL:(CHARANUM-1):스킬3 = 703
				ABL:(CHARANUM-1):스킬4 = 705
				ABL:(CHARANUM-1):스킬5 = 304
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				CALL CLEAR_TILE_ID, 12004
				CALL SHOW_PICTURE, "D"
				CALL MESSAGE_WINDOW_D, "추를 든 악마", "호오、오르트로스를 쉽게 해치우다니/바람이 당하는 것도 무리는 아닌데…"
				CALL MESSAGE_WINDOW_D, "여자 악마", "... 감탄하고 있을 때야? / 토르 나으리 / 다음은 내 차례야! 인간!"
				CALL MESSAGE_WINDOW_D, "", "＞요귀 야크시니가 １체 나타났다！"
				;야크시니Lv34　랭크2
				CALL SET_ENEMY,9,[[キャラ:야크시니]],40,0,1
				CFLAG:(CHARANUM-1):ＭＰ보정 = 5000
				CFLAG:(CHARANUM-1):행동횟수 = 2
				ABL:(CHARANUM-1):스킬3 = 1003
				ABL:(CHARANUM-1):스킬4 = 1005
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				CALL CLEAR_TILE_ID, 12024
				CALL SHOW_PICTURE, "D"
				CALL MESSAGE_WINDOW_D, "목소리",  "멋지구나 인간이여 /하지만 여흥은 여기까지 이다 ... / 우리 만트라 군 No, 2, 토르는 강한가? / 자, 토르여! 그 힘을 마음껏 발휘하는 것이다! "
				CALL MESSAGE_WINDOW_D, "귀신 토르", "궂이 말할 필요도 없지 / 인간이여. 거듭해서 여기까지 잘도 통과했군 / 만약 네가 이기면, 너는 깨끗하게 무죄 석방이다 / 자, 덤벼와도 좋다! "
				;토르Lv40　랭크1
				CALL SET_ENEMY,9,[[キャラ:토르]],43,0,1
				CFLAG:(CHARANUM-1):ＨＰ보정 = 1000
				CFLAG:(CHARANUM-1):ＭＰ보정 = 9000
				CSTR:(CHARANUM-1):사고패턴 = 1406
				CFLAG:(CHARANUM-1):행동횟수 = 2
				BASE:(CHARANUM-1):화염 = 50
				BASE:(CHARANUM-1):빙결 = 50
				BASE:(CHARANUM-1):지변 = 50
				BASE:(CHARANUM-1):수격 = 50
				BASE:(CHARANUM-1):질풍 = 50
				BASE:(CHARANUM-1):신경 = 0
				BASE:(CHARANUM-1):정신 = 0
				ABL:(CHARANUM-1):공격범위 = 3
				;ちょっぴり長いぷろろーぐ종료
				;そげぶ
				ABL:(CHARANUM-1):입수확률1 = 100
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				;FLAG:11406 = 1
				CALL LIFTING_A_BAN([[キャラ:토르]])
				CALL MESSAGE_WINDOW_D, "목소리", "훌륭하다…인간이여/설마 토르까지도 쓰러뜨릴거라고는…"
				CALL MESSAGE_WINDOW_D, "", "＞장내는 터져나온 박수소리로 뒤덮여 있다"
				CALL MESSAGE_WINDOW_D, "목소리", "무엇보다도 강자야말로 존중 받는 것이 우리들의 섭리/너 정도의 강함이 있다면/바람을 죽인 것도 또한 용서된다"
				CALL MESSAGE_WINDOW_D, "목소리", "그대가 다시 우리에게 싸움을 거는 것이라면 / 우리는 기꺼이 맞받아 줄 것이다 /하지만 그대가 싸움을 바라지 않는다라면 / 우리는 너를 친구로 대우 하도록 한다 "
				CALL MESSAGE_WINDOW_D, "목소리", "라고는 하지만 후후후…、너정도의 강자는 오래간만에 보는군/나도, 실체를 잃지만 않았더라면/당장이라도, 너와 힘 겨루기를 하고 싶을 정도니까"
				CALL MESSAGE_WINDOW_D, "목소리", "…그럼！여기서 폐정한다！"
				CALL MESSAGE_WINDOW_D, "", "………………/…………/……"
				CALL SHOW_PICTURE, "EMPTY"
				CALL SHOW_PICTURE, "D"
				CALL MESSAGE_WINDOW_D, "", @"＞관객들은 떠나 갔다…/＞%CALLNAME:MASTER%도 떠나려고 하는데/＞귀신 토르가 불러 세웠다"
				CALL MESSAGE_WINDOW_D, "귀신 토르", "너의 목적은 이것이 아닌가？"
				CALL MESSAGE_WINDOW_D, "", "＞귀신 토르는 별의 형태를 한 보석을 내밀어 왔다"
				IF STRFLAG_D("메시아교도긍정")
					CALL MESSAGE_WINDOW_D, "귀신 토르", "네가 메시아 교도라는 것은 아쉽지만 / 이것은 아마도 너 같은 자가 / 가지는 것이 어울릴 것이다 / 무엇보다도 한사람의 전사로 그 자리에서 싸웠던 것이다 / 원하는 바 하나 정도는 이루어 줘야겠지"
				ELSE
					CALL MESSAGE_WINDOW_D, "귀신 토르", "최근, 이것을 노려 오는 악마사들이 많으니/어설프게 우리 군의 사람에게 갖게하는 것보다도/힘 있는 자가 갖게하는 편이 좋을 것이다/어쨌거나, 우리로서는 용도를 모르는 것이니까…"
				ENDIF
				CALL MESSAGE_WINDOW_D, "", "＞수성의 필라를 손에 넣었다! "
				던전플래그:(FLAG:현던전):13 = 1
				FLAG:탈출스킬금지 = 0
				CALL CLEAR_TILE_ID, 12014
				CALL MESSAGE_WINDOW_D, "귀신 토르", "그렇지, 이 만트라 군 사령부에있는 보물 상자는 / 자유롭게 가져가도 좋다 / 너는 우리들에게 인정받은 자이니까 / 당연한 일이다"
				IF STRFLAG_D("메시아교도긍정")
					CALL MESSAGE_WINDOW_D, "귀신 토르", "언젠가 생각이 바뀌는 일이 있으면 또 와도 좋다/우리들은 언제라도 너를 환영할 것이다"
				ELSE
					CALL MESSAGE_WINDOW_D, "귀신 토르", "그리고…, 만약 나의 도움을 빌리고 싶으면/적절한 방법으로 나를 호출하면 된다…/그 때는 도와주도록 하지"
				ENDIF
				CALL MESSAGE_WINDOW_D, "", "＞토르는 떠나갔다"
				CALL SHOW_PICTURE, "EMPTY"
				;FLAG:11406 = 1
				CALL LIFTING_A_BAN([[キャラ:토르]])
			ELSE
				CALL DUNGEON_WORP_ID, 10, 10107, 1
			ENDIF
		ENDIF
	CASE 10107
		CALL MESSAGE_WINDOW_D, "", "＞만트라 군 사령부의 입구다"
		CALL INPUT_YN_D, "들어간다", "들어가지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 7, 7006, 1
	CASE 12006
		CALL MESSAGE_WINDOW_D, "", "＞60F 직통 엘리베이터이다"
		CALL INPUT_YN_D, "탄다", "타지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 13, 13007, 1
	CASE 13007
		CALL MESSAGE_WINDOW_D, "", "＞3F 직통 엘리베이터이다"
		CALL INPUT_YN_D, "탄다", "타지 않는다"
		SIF !RESULT
			CALL DUNGEON_WORP_ID, 12, 12006, 1
	CASEELSE
		IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
			CALL DUNGEON_UPSTAIRS_ID, FLAG:현M+1, DA:(FLAG:현X):(FLAG:현Y)+1001
		ELSE
			CALL DUNGEON_DOWNSTAIRS_ID, FLAG:현M-1, DA:(FLAG:현X):(FLAG:현Y)-1001
		ENDIF
ENDSELECT
RETURN 1
;=======
;メッセンジャー(9)
;ARGは進入時の時に真
;ARGがの場合RETURNして打ち切る
;=======
@TILE_MARK_COMMON_17_9, ARG, ARG:1, ARG:2
SETCOLOR 0x00ff00
RESULTS = ｍ
@MESSAGE_17, ARG
SIF ARG
	CALL SHOW_PICTURE, "D"
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		CALL MESSAGE_WINDOW_D, "", "＞모히칸 머리가 있다…/＞모히칸 머리는 생기가 전혀 없는 것 같이/＞벽에 기대고 있는데/＞그 손에는 여전히 COMP를 제대로 쥐고 있다…"
	CASE 100
		CALL MESSAGE_WINDOW_D, "파계승", "이 도시들은 신앙심이 부족한 것은 아닌가 ...? / 아니, 숨어서 보호를 받는 몸이다 ... / 쓸데없는 말을 하지는 않겠다"
	CASE 101
		CALL MESSAGE_WINDOW_D, "파계승", "당신에게는 반드시、가이아의 심판이 내릴 것이다…"
	CASE 102
		CALL MESSAGE_WINDOW_D, "악마", "고즈텐노님이 지배하고 있다고 해도,/기본적으로는 모두 제멋대로야/다만, 너무 도가 지나치거나 교단으로부터의 요청이 있었을 경우에는/특별히 재판을 실시하는 경우도 있는 것 같아"
	CASE 103
		CALL MESSAGE_WINDOW_D, "갸루", "네가 바람님을 죽였어？/…후우ー응…/상당히 잘 나가잖아"
	CASE 104
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "젊은이", "이 거리의 사람들은,/악마가 섞여 있어도 모두 그다지 신경쓰지 않는 것 같아/고즈 텐노님이 『강하기만 하면 뭐든지 (할 수)있다』쪽이니까"
	CASE 105
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "갸루", "가부키쵸에서는 지금 10년에 한 번 있는、/No,1 프로스트 결정전을 하고 있을 건데！/초～보러가고 싶어～잉！"
	CASE 106
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "악마", "고즈텐노님은, 마왕 바엘님과도 어깨를 나란히 하는 대악마야/"
	CASE 107
		CALL MESSAGE_WINDOW_D, "악마", "어？유명인의 행차인가/바람님의 살인범이 와서, 거리가 큰 소란인건가？"
	CASE 200
		CALL MESSAGE_WINDOW_D, "악마", "너는 바람님을 살해한 놈…！/너 같은 놈은 토르 님에게 두드려맞고 살해당해 버리라구！"
	CASE 201
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "모히칸 머리", "바람님을 쓰러뜨렸다고 본궤도에 오르지 마라! /만트라군의 대장, 고즈텐노님은/너 같은 것은 비할 바가 아니다! "
	CASE 202
		CALL MESSAGE_WINDOW_D, "악마", "만트라 군이 숨겨주어서 살았지만 ... / 앞으로 가이아 교는 어떻게 되어 버리는걸까 ...?"
	CASE 203
		CALL MESSAGE_WINDOW_D, "젊은이", "최근에는 이 근처도 아르곤 사의 간판이 많아지고 있군 / 아르곤 사를 모르는가? / 지금 가장 기세가 있는 반도체 정제 메이커인데?"
	CASE 204
		CALL MESSAGE_WINDOW_D, "악마", "여기로부터 이케부쿠로 전체를 바라보면 알 수 있다/……모두 같은 COMP 사용하고 있다는 것을"
	CASE 205
		CALL MESSAGE_WINDOW_D, "갸루", "토르 님을 근사하지용～♪/당신도 그렇게 생각하지？"
	CASE 206
		CALL MESSAGE_WINDOW_D, "갸루", "이 아르곤 사제의 COMP를 사용하면/나도 간단하게 악마사라는 느낌? "
	CASE 207
		CALL MESSAGE_WINDOW_D, "젊은이", "만트라군의 규칙은 단 하나/『강한 것이 정의』다/알기 쉬워서 좋지"
	CASE 208
		CALL MESSAGE_WINDOW_D, "악마", "시부야로부터 도망쳐 온 무리,/무언가 시끄럽다…/가이아교라든지 아무래도 좋아/우리들은"
	;ガイア教団支部
	CASE 400
		CALL MESSAGE_WINDOW_D, "악마", "이 빌딩 옥상에서 만트라군 사령부에 갈 수 있지만/너、교단에서 노리고 있는데/가지 않는 편이 좋지 않아？"
	CASE 401
		CALL MESSAGE_WINDOW_D, "젊은이", "이전에、이전에 이러쿵 저러쿵 말이 많은 아버지를 죽여버렸는데…/살해당한 아버지가 나쁘다는 것으로、/전혀 죄를 거론당하지 않았어…！"
	CASE 402
		CALL MESSAGE_WINDOW_D, "파계승", "바람 님에 이어서, 고즈텐노 님까지 네 손으로 죽이려는 것인가…？"
	CASE 403
		CALL MESSAGE_WINDOW_D, "악마", "엘리베이터라는 기계는 편리하다/눈 깜짝할  순간에 4 F까지 갈 수 있군"
	CASE 600
		CALL MESSAGE_WINDOW_D, "여자", "그 사람이 나쁩니다 ... / 우리는 아무것도하지 않는데 항상 폭력을 휘두르고 ..."
		CALL MESSAGE_WINDOW_D, "여자", "그러니까, COMP를 사용해, 악마를 불러,/처리해 주었습니다/저희들은 나쁘지 않습니다…/고즈텐노님도 보증해 주었습니다"
	CASE 601
		CALL MESSAGE_WINDOW_D, "남자", "일전에、메시아 교도를 죽이고 왔다구"
		CALL MESSAGE_WINDOW_D, "여자", "정말로？/당신도 정말 멋져～！"
	CASE 602
		CALL MESSAGE_WINDOW_D, "악마", "가이아 교단이 이렇게 세력을 늘린 배경에는 / 아르곤 사가 개발한 신형 CPU 『클립트』/ 그리고 그것을 탑재한 신형 COMP의 보급에 의한 영향이 클거야"
		CALL MESSAGE_WINDOW_D, "악마", "종래기기의 몇 배의 처리 스피드로,/우리의 소환을 할 수 있으니까/메시아 교단에서는 당해 낼 도리가 없는거지"
	CASE 700
		CALL MESSAGE_WINDOW_D, "악마", "겨우 여기까지 올 수 있었다 ... / 왜 4F 엘리베이터에서 직통이 아닌거야 / 만트라 군 사령부는 말이지"
	CASE 701
		CALL MESSAGE_WINDOW_D, "젊은이", "어? 너의 그 COMP…/아르곤 사제의 것이 아니네? /요즈음 그렇게 레트로(주; 복고주의를 지향하는 스타일)한 것을 사용하고 있는 경우는 드문데/불편하지 않아? "
	;만트라軍本営
	CASE 1000
		CALL MESSAGE_WINDOW_D, "갸루", "토르 님을 이길 수 있는 사람은 처음 보았다고 할까나ー"
	CASE 1001
		CALL MESSAGE_WINDOW_D, "악마", "만트라군은 영구히 불멸이다！"
	CASE 1002
		CALL MESSAGE_WINDOW_D, "악마", "가이아 교단 전체로부터는 변함 없이 감시받겠지만/적어도 만트라군은 너의 아군이다! "
	CASE 1100
		CALL MESSAGE_WINDOW_D, "악마", "3F의 또 다른 엘리베이터로는 60F에 갈 수 있어! /그것은 그것은 굉장한 장관이야! "
	CASE 1101
		CALL MESSAGE_WINDOW_D, "갸루", "아ー！/당신、굉장히 멋있었어！/사진 찍어도 돼？"
	CASE 1102
		CALL MESSAGE_WINDOW_D, "악마", "결투 재판이라고 하는 것은 요컨데 표면상로,/실제로는 공개 린치야/거기에서 이겨내다니, 너 굉장하구나-"
	CASE 1103
		CALL MESSAGE_WINDOW_D, "젊은이", "모두가 모조리 같은 COMP를 사용한다라니 위험하다고 생각 하지 않아? / 만약 모든 기체에 공통으로 세공이 되어 있다면 ... / 생각만 해도 무서운거야 ...! "
	CASE 1200
		CALL MESSAGE_WINDOW_D, "악마", "네가 싸우는 모습으로부터 용기를 얻었어/나도 절대로 이겨 내, 무죄 방면이 되어 주겠어! "
	CASE 1201
		CALL MESSAGE_WINDOW_D, "젊은이", "괜찮아… 이길 수 있어… 이길 수 있어…/1T째에 사지타리우스…/2T째 부터는 더블 쇼트…"
ENDSELECT
;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_17
SELECTCASE FLAG:현M
	CASE 0, 1, 2
		FLAG:인카운트율 = MAX(FLAG:미조우걸음수 - 5, 0) * 3
	CASE 4, 5, 6, 7
		FLAG:인카운트율 = MAX(FLAG:미조우걸음수 - 5, 0) * 5
	CASEELSE
		FLAG:인카운트율 = 0
ENDSELECT
;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_17
RETURN 30, 30, 35, 43
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_17
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_17
RETURN CLASS_NUM_COMMON("中級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_17, ARG
RETURN ENEMY_NUM_COMMON("中級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_17, ARG
SELECTCASE FLAG:현M
	CASE 0, 1, 2
		SELECTCASE RAND:100
			CASE IS < 10
				RETURN [[キャラ:후리]],30
			CASE IS < 20
				RETURN [[キャラ:밴시]],30
			CASE IS < 25
				RETURN [[キャラ:헬]],30
			CASE IS < 35
				RETURN [[キャラ:알케니]],28
			CASE IS < 45
				RETURN [[キャラ:고르곤]],29
			CASE IS < 55
				RETURN [[キャラ:엘리고르]],29
			CASE IS < 65
				RETURN [[キャラ:모스맨]],30
			CASE IS < 75
				RETURN [[キャラ:모무노후]],28
			CASE IS < 85
				RETURN [[キャラ:파계승]],28
			CASE IS < 95
				RETURN [[キャラ:뮤턴트]],29
			CASE IS < 100
				RETURN [[キャラ:어새신]],32
		ENDSELECT
	CASEELSE
		SELECTCASE RAND:100
			CASE IS < 10
				RETURN [[キャラ:후리]],32
			CASE IS < 20
				RETURN [[キャラ:밴시]],32
			CASE IS < 25
				RETURN [[キャラ:헬]],33
			CASE IS < 35
				RETURN [[キャラ:알케니]],31
			CASE IS < 45
				RETURN [[キャラ:고르곤]],34
			CASE IS < 55
				RETURN [[キャラ:엘리고르]],32
			CASE IS < 65
				RETURN [[キャラ:모스맨]],32
			CASE IS < 75
				RETURN [[キャラ:모무노후]],33
			CASE IS < 80
				RETURN [[キャラ:파계승]],32
			CASE IS < 85
				RETURN [[キャラ:오니죠로]],34
			CASE IS < 95
				RETURN [[キャラ:뮤턴트]],33
			CASE IS < 100
				RETURN [[キャラ:어새신]],35
		ENDSELECT
ENDSELECT
;=================================
;特殊調整
;=================================
@SET_ENEMY_STATUS_17, ARG
SELECTCASE NO:ARG
	CASE [[キャラ:뷔브르]]
		ABL:ARG:아이템2 = 1002
		ABL:ARG:입수확률2 = 15
	CASE [[キャラ:아에슈마]]
		ABL:ARG:아이템1 = 1002
		ABL:ARG:입수확률1 = 10
		ABL:ARG:아이템2 = 1017
		ABL:ARG:입수확률2 = 5
	CASE [[キャラ:맨이터]]
		ABL:ARG:아이템2 = 3501
		ABL:ARG:입수확률2 = 5
		ABL:ARG:아이템3 = 1018
		ABL:ARG:입수확률3 = 5
	CASE [[キャラ:엘프]]
		ABL:ARG:아이템2 = 1002
		ABL:ARG:입수확률2 = 15
	CASE [[キャラ:세이렌]]
		ABL:ARG:아이템1 = 1002
		ABL:ARG:입수확률1 = 10
	CASE [[キャラ:밴시]]
		ABL:ARG:아이템2 = 1002
		ABL:ARG:입수확률2 = 10
	CASE [[キャラ:헬]],30,0, 0
		ABL:ARG:아이템1 = 1002
		ABL:ARG:입수확률1 = 10
		ABL:ARG:아이템2 = 5504
		ABL:ARG:입수확률2 = 2
ENDSELECT


@SET_ACTION_1406,ARG
IF FLAG:경과턴수 % 3 == 2
	IF CFLAG:ARG:행동한횟수 == 0
		CFLAG:(CHARANUM-1):속도보정 = 24
		CALL CHECK_ACTIONABLE,ARG,402
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 402
		CALL RANDOM_TARGET,ARG,402
		RETURN 1
	ELSEIF CFLAG:ARG:행동한횟수 == 1
		CFLAG:(CHARANUM-1):속도보정 = 24
		CALL CHECK_ACTIONABLE,ARG,508
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 508
		CALL RANDOM_TARGET,ARG,508
		RETURN 1
	ENDIF
ELSEIF CFLAG:ARG:공격강화 < 0 || CFLAG:ARG:방어강화 < 0 || CFLAG:ARG:명중강화 < 0
	IF RAND:2 == 0
		CFLAG:(CHARANUM-1):속도보정 = 24
		CALL CHECK_ACTIONABLE,ARG,505
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 505
		CALL RANDOM_TARGET,ARG,505
		RETURN 1
	ELSE
		GOTO DECIDE_ACTION
		RETURN 1
	ENDIF
ELSEIF CFLAG:MASTER:방어강화 > -1
		CFLAG:(CHARANUM-1):속도보정 = 24
		CALL CHECK_ACTIONABLE,ARG,515
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 515
		CALL RANDOM_TARGET,ARG,515
		RETURN 1
ELSEIF CFLAG:MASTER:공격강화 > 4 || CFLAG:MASTER:명중강화 > 4
		CFLAG:(CHARANUM-1):속도보정 = 24
		CALL CHECK_ACTIONABLE,ARG,509
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 509
		CALL RANDOM_TARGET,ARG,509
		RETURN 1
ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
	LOCAL = RAND:RESULT
	;스킬번호決定
	LOCAL:1 = S:(10+LOCAL)
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬번호を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1
ENDIF

;=================================
;사고패턴
;=================================
@ENEMY_BATTLE_MESSAGE_4542, ARG
IF CFLAG:ARG:입력행동 == 527
	IF RAND:2 == 0
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━┓
		PRINTFORML ┃데카쟈ー！！　　　　　　　　┃
		PRINTFORML ┃나의 라이도우를　　　　　　┃
		PRINTFORML ┃이지메 하는 것은 용서하지 않겠어!!　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━┛
	ELSE
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━━┓
		PRINTFORML ┃흉조모・쇼보야　　　　　┃
		PRINTFORML ┃작다구 바보 취급하지 말라구　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━━┛
	ENDIF
ELSEIF CFLAG:ARG:입력행동 == 915
	IF RAND:2 == 0
		PRINTFORML ┏>MESSAGE━━━━┓
		PRINTFORML ┃이…잇잇…　┃
		PRINTFORML ┃이구그극…　　　┃
		PRINTFORMW ┗━━━━━━━━┛
	ELSE
		PRINTFORML ┏>MESSAGE━━━━━━┓
		PRINTFORML ┃우…웃웃…　　　┃
		PRINTFORMW ┃데, 데루우우웃!!　┃
		PRINTFORMW ┗━━━━━━━━━━┛
	ENDIF
ELSEIF CFLAG:ARG:입력행동 == 1709
	IF RAND:2 == 0
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━┓
		PRINTFORML ┃사람을 다루는 것이 난폭하군　　　　　　　　　　┃
		PRINTFORML ┃아차차、나는 악마이지만　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━━━━┛
	ELSE
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━━┓
		PRINTFORML ┃에잇！！　　　　　　　　　　　┃
		PRINTFORML ┃땅 끝까지 날아 가버려　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━━┛
	ENDIF
ELSEIF CFLAG:ARG:입력행동 == 117
	IF RAND:2 == 0
		PRINTFORML ┏>MESSAGE━━━━━━━━┓
		PRINTFORML ┃부 、 붓부붓부부 !!　┃
		PRINTFORMW ┗━━━━━━━━━━━━┛
	ELSE
		PRINTFORML ┏>MESSAGE━━━━━━━━━━┓
		PRINTFORML ┃아、아아아아앗 아앗아！！　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━┛
	ENDIF
ELSEIF CFLAG:ARG:입력행동 == 18
	IF RAND:3 == 0
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━┓
		PRINTFORML ┃정말이지…　　　　　　　　　　　　　　　┃
		PRINTFORML ┃시시한 심부름 같은 일로 말라구　　┃
		PRINTFORML ┃오라오라오라오라오라오라오라오라!!　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━┛
	ELSEIF RAND:2 == 0
		PRINTFORML ┏>MESSAGE━━━━━━━━━━┓
		PRINTFORML ┃이것들은 아나키구만　　　　┃
		PRINTFORML ┃8장으로 잘라 주지！！　　　　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━┛
	ELSE
		PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━┓
		PRINTFORML ┃쿨이 아니야、나는 말야  　　　┃
		PRINTFORML ┃제대로 통풍 시켜주마아아！！　　　┃
		PRINTFORMW ┗━━━━━━━━━━━━━━━━━┛
	ENDIF
ENDIF

;葛葉라이도우の사고패턴
@SET_ACTION_4542,ARG
;1more
IF CFLAG:ARG:１more플래그 > 0
	IF CFLAG:MASTER:방어강화 > -1
		CFLAG:(CHARANUM-1):속도보정 = 25
		CALL CHECK_ACTIONABLE,ARG,515
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 515
		CALL RANDOM_TARGET,ARG,515
		RETURN 1
	ELSEIF CFLAG:MASTER:공격강화 > 4 || CFLAG:MASTER:명중강화 > 4
		CFLAG:(CHARANUM-1):속도보정 = 25
		CALL CHECK_ACTIONABLE,ARG,527
			SIF RESULT == 0
				GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 527
		CALL RANDOM_TARGET,ARG,527
		RETURN 1
	ELSE
		IF RAND:3 == 0
			;모코이부메랑
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,117
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 117
			CALL RANDOM_TARGET,ARG,117
			RETURN 1
		ELSEIF RAND:2 == 0
			;미샤구지雷電
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,915
				SIF RESULT == 0
					GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 915
			CALL RANDOM_TARGET,ARG,915
			RETURN 1
		ELSE
			;히토코토대풍
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,1709
				SIF RESULT == 0
					GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 1709
			CALL RANDOM_TARGET,ARG,1709
			RETURN 1
		ENDIF
	ENDIF
	
;ＨＰ50％以下
ELSEIF 현HP비율(ARG) < 50
	IF CFLAG:ARG:행동한횟수 == 0
		IF CFLAG:MASTER:공격강화 > 4 || CFLAG:MASTER:명중강화 > 4
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,527
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 527
			CALL RANDOM_TARGET,ARG,527
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 50
					;요시츠네등장
					CALL CHECK_ACTIONABLE,ARG,18
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 18
					CALL RANDOM_TARGET,ARG,18
					RETURN 1
				CASE IS < 75
					;미샤구지雷電
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,915
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 915
					CALL RANDOM_TARGET,ARG,915
					RETURN 1
				CASE IS < 100
					;히토코토대풍
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,1709
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1709
					CALL RANDOM_TARGET,ARG,1709
					RETURN 1
			ENDSELECT
		ENDIF

	ELSEIF CFLAG:ARG:행동한횟수 == 1
		SELECTCASE RAND:100
			CASE IS < 15
				;요시츠네등장
				CALL CHECK_ACTIONABLE,ARG,18
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 18
				CALL RANDOM_TARGET,ARG,18
				RETURN 1
			CASE IS < 40
				;모코이부메랑
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,117
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 117
				CALL RANDOM_TARGET,ARG,117
				RETURN 1
			CASE IS < 65
				;미샤구지雷電
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,915
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 915
				CALL RANDOM_TARGET,ARG,915
				RETURN 1
			CASE IS < 90
				;히토코토대풍
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,1709
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 1709
				CALL RANDOM_TARGET,ARG,1709
				RETURN 1
		ENDSELECT
	ENDIF
;ＨＰ50％이상
ELSEIF 현HP비율(ARG) >= 50
	IF CFLAG:ARG:행동한횟수 == 0
		IF CFLAG:MASTER:방어강화 > -1
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,515
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 515
			CALL RANDOM_TARGET,ARG,515
			RETURN 1
		ELSEIF CFLAG:MASTER:공격강화 > 4 || CFLAG:MASTER:명중강화 > 4
			CFLAG:(CHARANUM-1):속도보정 = 25
			CALL CHECK_ACTIONABLE,ARG,527
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 527
			CALL RANDOM_TARGET,ARG,527
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 40
					;부기우기
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,118
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 118
					CALL RANDOM_TARGET,ARG,118
					RETURN 1
				CASE IS < 60
					;적살
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,2032
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2032
					CALL RANDOM_TARGET,ARG,2032
					RETURN 1
				CASE IS < 80
					;모코이부메랑
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,117
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 117
					CALL RANDOM_TARGET,ARG,117
					RETURN 1
				CASE IS < 90
					;미샤구지雷電
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,915
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 915
					CALL RANDOM_TARGET,ARG,915
					RETURN 1
				CASE IS < 100
					;히토코토대풍
					CFLAG:(CHARANUM-1):속도보정 = 25
					CALL CHECK_ACTIONABLE,ARG,1709
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1709
					CALL RANDOM_TARGET,ARG,1709
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 1
		SELECTCASE RAND:100
			CASE IS < 40
				;부기우기
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,118
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 118
				CALL RANDOM_TARGET,ARG,118
				RETURN 1
			CASE IS < 70
				;적살
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,2032
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 2032
				CALL RANDOM_TARGET,ARG,2032
				RETURN 1
			CASE IS < 80
				;모코이
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,117
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 117
				CALL RANDOM_TARGET,ARG,117
				RETURN 1
			CASE IS < 90
				;미샤구지雷電
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,915
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 915
				CALL RANDOM_TARGET,ARG,915
				RETURN 1
			CASE IS < 100
				;히토코토대풍
				CFLAG:(CHARANUM-1):속도보정 = 25
				CALL CHECK_ACTIONABLE,ARG,1709
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:입력행동 = 1709
				CALL RANDOM_TARGET,ARG,1709
				RETURN 1
		ENDSELECT
	ENDIF
ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
	LOCAL = RAND:RESULT
	;스킬번호決定
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬번호を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1
ENDIF

;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_17
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:4
	CASE 0
		RETURN [[キャラ:모무노후]] , 3 + RAND:10 , CSVBASE([[キャラ:모무노후]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:뮤턴트]] , 3 + RAND:10 , CSVBASE([[キャラ:뮤턴트]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:파계승]] , 3 + RAND:10 , CSVBASE([[キャラ:파계승]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:모스맨]] , 3 + RAND:10 , CSVBASE([[キャラ:모스맨]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
