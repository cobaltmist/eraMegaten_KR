
;던전플래그:99:0 던전クリアフラグ　0未クリア　1クリア

;던전플래그:99:1 이벤트進行度:古城を出るまで
;　01　複葉機の部屋、地下闘技場で전투종료
;　02　아라스톨이벤트종료
;　03　シンシザーズ出現（적）
;　04　海中通路戦종료
;　05　팬텀戦종료
;　06　獅子の像バリア해제
;　07　獅子の像破壊、섀도우戦
;　08　吹き抜け階段 地下スイッチ起動
;　09　ネロ・アンジェロ登場
;　10　ネロ・アンジェロ戦종료　섀도우出現（적강화）
;　11　地下水路　ベルゼバブ出現（적강화）
;　12　シン・サイズ戦종료
;　13　팬텀戦2종료
;　14　跳ね橋装置作動
;　15　三叉の矛を사용　1F入り口鉄格子개방
;　16　跳ね橋が再び上がる
;　17　
;　18　
;　19　
;　20　

;던전플래그:99:2 サブ이벤트개방状況管理
;　01　Sミッション1
;　02　Sミッション2
;　03　Sミッション3
;　04　Sミッション4
;　05　Sミッション5

;던전플래그:99:3 鍵フラグ
;　01　マリオネットの持つ古びた鍵(エンカウント開始)
;　02　死神の絵に埋め込まれた古びた鍵
;　03　裁きの宝杖
;　04　獅子の誇り
;　05　死の宣告
;　06　憂鬱なる魂
;　07　地下水路　古びた鍵
;　08　陽光の輝き
;　09　三叉の矛
;　10　
;　11　
;　12　


;던전플래그:99:4 扉解錠管理
;　01　1F階段前の扉解錠
;　02　複葉機の部屋への扉解錠
;　03　獅子の像広場への扉解錠
;　04　獅子の間2F　祭壇階下への蓋개방
;　05　聖堂への扉解錠
;　06　獅子の扉解錠
;　07　地下水路への扉解錠
;　08　地下水路内の扉解錠
;　09　太陽の紋章の扉개방
;　10　
;　11　

;던전플래그:99:5 메시지管理
;　1　外縁部上段で宝箱を取る
;　2　1後메시지확인
;　3　古城へ侵入(1と2消滅)
;　4　아라스톨입수이벤트後の회화
;　5　グリフォン戦後、단테회화
;　6　트리슈合流
;　7　ドリーグ설명

;던전플래그:99:6 レッドオーブ취득フラグ(BIT計算 0:未입수 1:입수済)
;던전플래그:99:7 レッドオーブ취득フラグ(BIT計算 0:未입수 1:입수済)

;■던전플래그:99:11 エネミー管理
;　1　マリオネットの部屋で鍵を取りエンカウント開始 30
;　2　シンシザーズ出現 35
;　3　ネロ・アンジェロ戦종료 40
;　4　ベルゼバブ出現 45
;　5　ブレイド出現 50
;　6　フェティッシュ出現 55

;던전플래그:99:8 ギミックフラグ(BIT管理)
;　00　闘技場　地下A 9,13
;　01　闘技場　地下B 11,15
;　02　闘技場　地下C 5,19
;　03　闘技場　地下D 7.21
;　04　
;　05　

;던전플래그:99:9 霧深き渓谷ギミック
;　1　右通路
;　2　左通路

;!GETBIT(던전플래그:99:10,)
;SETBIT 던전플래그:99:10,
;던전플래그:99:9 그외아이템취득(BIT管理)
;　1　魔光石
;　2　나이트메어β

;던전플래그:99:70 進入불가箇所　とりあえず閉じとく用
;던전플래그:99:80~ 宝箱管理用変数（ビット演算）

;=======================================================================
;DMC1
;=======================================================================

;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_99

SIF 이벤트플래그:92:0 == 1
	RETURN 1



;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_99
RESULTS = 말렛섬（島）


;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_99
SELECTCASE FLAG:현M
	CASE 0
		PRINTL 말렛섬（島）　外縁部
	CASE 1
		PRINTL 말렛섬（島）　外縁部：上段
	CASE 2
		PRINTL 古城1F
	CASE 3
		PRINTL 古城ロビー吹き抜け　2F
	CASE 4
		PRINTL 古城ロビー吹き抜け　3F
	CASE 5
		PRINTL 複葉機の部屋　地下
	CASE 6
		PRINTL 獅子像の間　2F
	CASE 7
		PRINTL 古城　海中通路
	CASE 8
		PRINTL 吹き抜け階段 - 寝室
	CASE 9
		PRINTL 5F　寝室屋根上
	CASE 10
		PRINTL 地下水路
	CASE 11
		PRINTL 太陽の紋章先
	CASE 12
		PRINTL 機械室
	CASE 13
		PRINTL 古城前　跳ね橋
	CASE 14
		PRINTL 闘技場
	CASE 15
		PRINTL 闘技場　2F
	CASE 16
		PRINTL 霧深き渓谷
	CASE 17
		PRINTL 聖杯堂前
	CASE 18
		PRINTL 聖杯堂
	CASE 19
		PRINTL 海賊船へ
	CASE 20
		PRINTL 海賊船　船底
	CASE 21
		PRINTL 海賊船　船上
	CASE 22
		PRINTL 漂着地
	CASE 23
		PRINTL 山岳地
	CASE 24
		PRINTL 闘技場　地下
	CASE 25
		PRINTL 闘技場　下段
	CASE 26
		PRINTL 古城・後編
	CASE 27
		PRINTL 小部屋の絵
	CASE 28
		PRINTL 闘技場の絵
	CASE 29
		PRINTL 浸水牢獄
	CASE 30
		PRINTL 吹き抜け階段
	CASE 31
		PRINTL 変成の間
	CASE 32
		PRINTL 寝室～鏡の世界
	CASE 33
		PRINTL 鏡の世界　屋上
	CASE 34
		PRINTL 魔界門
	CASE 35
		PRINTL 魔界　生贄の間
	CASE 36
		PRINTL 魔界　最深部
	CASE 37
		PRINTL 心臓の間　下段
	CASE 38
		PRINTL 心臓の間　上段
	CASE 39
		PRINTL 謁見の間
ENDSELECT

;=======================================================================
;스타ト地点입력
;=======================================================================
@START_DUNGEON_99,ARG
IF 던전플래그:99:1 >= 16
	FLAG:현M = 13
	FLAG:현X = 6
	FLAG:현Y = 17
ELSE
	FLAG:현M = 0
	FLAG:현X = 27
	FLAG:현Y = 14
ENDIF
;CALL AUTOMAP

;=======================================================================
;攻略開始時の이벤트
;=======================================================================
@EVENT_DUNGEON_START_99


;=======================================================================
;탈출時の이벤트
;=======================================================================
@EVENT_DUNGEON_END_99


;=======================================================================
;指定したマスに進入可能か
;=======================================================================
;DA:ARG:(ARG:1)
;ARG、ARG:1はそれぞれ대상のマスのX、Y座標を表しています。
;この던전ではエレベーターの扉が一度右側から開けておかないと左側からは開けられない、という処理に사용しています。
;どのマップでも座標(2,7)がエレベータの扉。던전플래그:1:13 ＝ エレベータフラグ管理用変数の{現在のマップ番号}番눈のビットが立っていなければ開けられるかどうかの판정を行う
@CAN_ENTER_99, ARG, ARG:1
;#LOCALSIZE 1
LOCAL = DA:ARG:(ARG:1)


CALL 高低差_99,(FLAG:현X),(FLAG:현Y)
LOCAL:0 = RESULT
CALL 高低差_99,ARG,ARG:1
LOCAL:1 = RESULT

IF LOCAL:1 != 99
	IF LOCAL:1 - LOCAL:0 > 1
		IF LOCAL:1 == 10
			CALL ENTER_DUNGEON_99_ORB_NON_ENTER,ARG,ARG:1
			RETURN 0
		ELSEIF LOCAL:1 == 20
			SELECTCASE FLAG:현M
				CASE 26
					IF ARG == 39 && ARG:1 == 3
						SIF !GETBIT(던전플래그:99:4,26)
							RETURN 0
					ELSEIF ARG == 39 && ARG:1 == 7 && !GETBIT(던전플래그:99:4,31)
							RETURN 0
					ENDIF
				CASE 34
					IF (ARG >= 3 && ARG <= 7) && (ARG:1 >= 2 && ARG:1 <=6)
						SIF !GETBIT(던전플래그:99:4,33)
							RETURN 0
					ENDIF
				CASE 35
					IF ARG == 7 && ARG:1 == 1
						IF !GETBIT(던전플래그:99:4,34)
							CALL MESSAGE_WINDOW_D, "", "＞　強い마력で封じられている "
							RETURN 0
						ENDIF
					ENDIF
				CASE 36
					IF ARG == 18 && ARG:1 == 1
						IF !GETBIT(던전플래그:99:4,38)
							CALL MESSAGE_WINDOW_D, "", "＞　巨大な門だ/　　強い마력で封印されている "
							RETURN 0
						ENDIF
					ENDIF
				
				CASEELSE
					RETURN 1
			ENDSELECT
		ELSE
			PRINTW 高すぎてよじ登れない…
			RETURN 0
		ENDIF
	ENDIF
ENDIF


SELECTCASE DA:ARG:(ARG:1)
	CASE 2
		;■ロビー扉
		IF FLAG:현M == 2 && ARG == 8 && ARG:1 == 34 && !GETBIT(던전플래그:99:4,1)
			CALL MESSAGE_WINDOW_D, "", @"＞　この扉は封印されている/45個のレッド・オーブが필요だ/レッド・オーブ소지수：{MONEY:99} "
			IF MONEY:99 >=45
				CALL MESSAGE_WINDOW_D, "", "＞　レッド・オーブを소비して扉を개방した "
				MONEY:99 -= 45
				SETBIT 던전플래그:99:4,1
			ENDIF
			RETURN 0
		;■複葉機の部屋扉
		ELSEIF FLAG:현M == 2 && ARG == 16 && ARG:1 == 30 && !GETBIT(던전플래그:99:4,2)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている/　　開くには古びた鍵が필요だ "
			IF 던전플래그:99:3 == 1
				CALL MESSAGE_WINDOW_D, "", "＞　古びた鍵　を使いますか？ "
				CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
						SETBIT 던전플래그:99:4,2
					ENDIF
			ENDIF
			RETURN 0
		;■玄関前
		ELSEIF FLAG:현M == 2 && ARG == 8 && ARG:1 == 38
			IF 던전플래그:99:1 < 15
				CALL MESSAGE_WINDOW_D, "", "＞　重い鉄の落とし格子が降りている "
				RETURN 0
			ENDIF
		ELSEIF FLAG:현M == 2 && ARG == 8 && ARG:1 == 42 && 던전플래그:99:1 < 6
			IF 던전플래그:99:1 < 14
				CALL MESSAGE_WINDOW_D, "", "＞　跳ね橋が上がっていて、今外へ出ても仕方がないようだ "
				RETURN 0
			ENDIF
		;■複葉機の部屋내부扉
		ELSEIF FLAG:현M == 2 && ARG == 18 && ARG:1 == 27 && 던전플래그:99:1 == 0
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている "
			RETURN 0
		;■書庫の扉
		ELSEIF FLAG:현M == 2 && ARG == 23 && ARG:1 == 11 && 던전플래그:99:1 < 2
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている "
			RETURN 0
		;■獅子の間扉
		ELSEIF FLAG:현M == 2 && ARG == 30 && ARG:1 == 19 && !GETBIT(던전플래그:99:4,3)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている/　　開くには古びた鍵が필요だ "
			IF 던전플래그:99:3 == 2
				CALL MESSAGE_WINDOW_D, "", "＞　古びた鍵　を使いますか？ "
				CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
						SETBIT 던전플래그:99:4,3
					ENDIF
			ENDIF
			RETURN 0
		;■聖堂扉
		ELSEIF FLAG:현M == 2 && ARG == 25 && ARG:1 == 8 && !GETBIT(던전플래그:99:4,5)
			CALL MESSAGE_WINDOW_D, "", "＞　死を司る裁判官のレリーフだ/　　杖をはめこむ場所がある "
			IF 던전플래그:99:3 == 3
				CALL MESSAGE_WINDOW_D, "", "＞　裁きの宝杖　を사용しますか？ "
			CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
					SETBIT 던전플래그:99:4,5
				ENDIF
			ENDIF
			RETURN 0
		;■獅子の間2F扉
		ELSEIF FLAG:현M == 6 && ARG == 13 && ARG:1 == 9 && !GETBIT(던전플래그:99:4,6)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている "
			RETURN 0
		;■吹き抜け階段　最下層　地下水路への扉
		ELSEIF FLAG:현M == 8 && ARG == 2 && ARG:1 == 4 && !GETBIT(던전플래그:99:4,7)
			CALL MESSAGE_WINDOW_D, "", "＞　強힘な힘で封印されている "
			CALL MESSAGE_WINDOW_D, "", "『この道は霊の導きで開かれる』 "
			IF 던전플래그:99:3 == 6
				CALL MESSAGE_WINDOW_D, "", "＞　憂鬱なる魂を사용しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 封印が解かれた "
					SETBIT 던전플래그:99:4,7
				ENDIF
			ENDIF
			RETURN 0
		;■地下水路
		ELSEIF FLAG:현M == 10 && ARG == 19 && ARG:1 == 11 && !GETBIT(던전플래그:99:4,8)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封じられている/　　開くには古びた鍵が필요だ "
			IF 던전플래그:99:3 == 7
				CALL MESSAGE_WINDOW_D, "", "＞　古びた鍵　を使いますか？ "
				CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
						SETBIT 던전플래그:99:4,8
					ENDIF
			ENDIF
			RETURN 0
		;■太陽の紋章先
		ELSEIF FLAG:현M == 11 && ARG == 12 && ARG:1 == 11 && 던전플래그:99:1 < 13
			CALL MESSAGE_WINDOW_D, "", "＞　重い鉄の落とし格子が降りている "
			RETURN 0
		;■闘技場　盾の扉：赤
		ELSEIF FLAG:현M == 14 && ARG == 24 && ARG:1 == 6 && !GETBIT(던전플래그:99:4,18)
			CALL MESSAGE_WINDOW_D, "", "＞　扉に赤い光を放つ盾の紋章が刻まれている "
			IF 던전플래그:99:3 >= 13
				CALL MESSAGE_WINDOW_D, "", "＞　小さな紋章の盾　を사용しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
					SETBIT 던전플래그:99:4,18
				ENDIF
			ENDIF
			RETURN 0
		;■闘技場　盾の扉：青
		ELSEIF FLAG:현M == 14 && ARG == 24 && ARG:1 == 18 && !GETBIT(던전플래그:99:4,19)
			CALL MESSAGE_WINDOW_D, "", "＞　扉に青い光を放つ盾の紋章が刻まれている "
			IF 던전플래그:99:3 >= 13
				CALL MESSAGE_WINDOW_D, "", "＞　小さな紋章の盾　を사용しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
					SETBIT 던전플래그:99:4,19
				ENDIF
			ENDIF
			RETURN 0
		;■闘技場　騎士の扉
		ELSEIF FLAG:현M == 14 && ARG == 24 && ARG:1 == 12 && !GETBIT(던전플래그:99:4,20)
			CALL MESSAGE_WINDOW_D, "", "＞　レリーフに騎士が刻まれている/　　対になっているようだ "
			CALL MESSAGE_WINDOW_D, "", "＞　何かが掛けられる様になっており/　　その下には文字が刻まれている "
			CALL MESSAGE_WINDOW_D, "", "『光を放つ盾と対なる二本の창/　　　全ては戦いの場に繋がる』 "
			IF 던전플래그:99:3 >= 14
				CALL MESSAGE_WINDOW_D, "", "＞　対なる二창　を사용しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 鍵を開けた "
					SETBIT 던전플래그:99:4,20
				ENDIF
			ENDIF
			RETURN 0
		;■闘技場　篝火の扉
		ELSEIF FLAG:현M == 14 && ARG == 24 && ARG:1 == 23 && !GETBIT(던전플래그:99:4,10)
			CALL MESSAGE_WINDOW_D, "", "＞　文字が刻まれている "
			CALL MESSAGE_WINDOW_D, "", "『힘宿る二つの炎が道を開く』 "
			IF 던전플래그:99:1 == 19
				CALL MESSAGE_WINDOW_D, "", "＞　이프리트の힘を使い篝火を灯すと、扉が開いた "
				SETBIT 던전플래그:99:4,10
			ENDIF
			RETURN 0
		;■海賊船　船上
		ELSEIF FLAG:현M == 21 && ARG == 4 && ARG:1 == 3
			IF 던전플래그:99:1 > 23
				CALL MESSAGE_WINDOW_D, "", "＞　水圧がかかって、扉を開けそうにない "
				RETURN 0
			ELSEIF 던전플래그:99:1 < 22
				CALL MESSAGE_WINDOW_D, "", "＞　船長室への扉は固く閉ざされている/　　何か書かれている "
				CALL MESSAGE_WINDOW_D, "", "「我は冥界の狭間行く亡者の船」"
				CALL MESSAGE_WINDOW_D, "", "「舟守を倒せ　その時こそ/　　セントエルモの火を授けよう」 "
				CALL MESSAGE_WINDOW_D, "", "＞　その文字を読んだ途端、上空に気配が産まれた "
				CALL MESSAGE_WINDOW_D, "", "＞　デスサイズが襲いかかってきた！ "
				
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				
				CALL SET_ENEMY,9,[[キャラ:체르노보그]],60,0,1
				NAME:(CHARANUM-1) = デス サイズ
				CALLNAME:(CHARANUM-1) = デス サイズ
				CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
				CFLAG:(CHARANUM-1):ＭＰ보정 += 5000
				CALL SYNC_STATUS, (CHARANUM-1)
				CALL HEALTH_CHARA, (CHARANUM-1)
				
				CALL BATTLE_START
				
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				FLAG:미조우걸음수 = 0
				
				CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
				MONEY:99 += 100
				
				FORCEWAIT
				던전플래그:99:1 = 22
				CALL MESSAGE_WINDOW_D, "", "＞　舟守を倒すと、船首、マスト、船꼬리など4箇所に白い火が灯り船が動き出した "
				RETURN 0
			ENDIF
		;■山岳地
		ELSEIF FLAG:현M == 23 && ARG == 14 && ARG:1 == 25 && !GETBIT(던전플래그:99:4,15)
			CALL MESSAGE_WINDOW_D, "", @"＞　この扉は封印されている/200個のレッド・オーブが필요だ/レッド・オーブ소지수：{MONEY:99} "
			IF MONEY:99 >=45
				CALL MESSAGE_WINDOW_D, "", "＞　レッド・オーブを소비して扉を개방した "
				MONEY:99 -= 200
				SETBIT 던전플래그:99:4,15
			ENDIF
			RETURN 0
		ELSEIF FLAG:현M == 23 && ARG == 5 && ARG:1 == 27 && !GETBIT(던전플래그:99:4,16)
			CALL MESSAGE_WINDOW_D, "", @"＞　この扉は封印されている/100個のレッド・オーブが필요だ/レッド・オーブ소지수：{MONEY:99} "
			IF MONEY:99 >=45
				CALL MESSAGE_WINDOW_D, "", "＞　レッド・オーブを소비して扉を개방した "
				MONEY:99 -= 100
				SETBIT 던전플래그:99:4,16
			ENDIF
			RETURN 0
		;■古城・後編　1F
		ELSEIF FLAG:현M == 26 && ARG == 16 && ARG:1 == 30 && !GETBIT(던전플래그:99:4,24)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封印されている "
			RETURN 0
		ELSEIF FLAG:현M == 26 && ARG == 27 && ARG:1 == 5 && !GETBIT(던전플래그:99:4,25)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封印されている "
			RETURN 0
		;■闘技場の絵
		ELSEIF FLAG:현M == 28 && ARG == 6 && ARG:1 == 21 && !GETBIT(던전플래그:99:4,28)
			CALL MESSAGE_WINDOW_D, "", "＞　固く閉ざされている/　　扉の中央に丸い穴が開いている "
			CALL MESSAGE_WINDOW_D, "", "「月の光を閉じ込めし珠を見せよ」 "
			IF 던전플래그:99:3 >= 16
				CALL MESSAGE_WINDOW_D, "", "＞　月光水　を사용しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
				IF !RESULT
					CALL MESSAGE_WINDOW_D, "", "＞ 月光水　を사용して鍵を開けた "
					SETBIT 던전플래그:99:4,28
				ENDIF
			ENDIF
			RETURN 0
		;■魔界　最深部
		ELSEIF FLAG:현M == 36 && ARG == 15 && ARG:1 == 16
			IF !GETBIT(던전플래그:99:4,35)
				CALL MESSAGE_WINDOW_D, "", "＞　巨大な爪のようなものが入り口を塞いでいる/　　自힘では動かせそうにない "
				RETURN 0
			ENDIF
		
		
		
		ENDIF
		
		
		
		
		
	;■聖堂내부　獅子の誇り
	CASE 2004
		IF 던전플래그:99:1 < 4
			CALL MESSAGE_WINDOW_D, "", "＞　強힘な힘でこれ이상近づけない "
			RETURN 0
		ENDIF
	;■書庫내부　隠し扉
	CASE 2054
		SIF 던전플래그:99:3 < 3
			RETURN 0
	;■海中通路先　塔
	CASE 2014
			CALL MESSAGE_WINDOW_D, "", "＞　「道を戻り、汝が勇猛さで奈落の底から帰り給え」 "
			RETURN 0
	;■獅子の間　獅子の像
	CASE 2139
		IF 던전플래그:99:1 < 6
			IF 던전플래그:99:1 < 6
				CALL MESSAGE_WINDOW_D, "", "＞　強힘な힘でこれ이상近づけない "
				CALL MESSAGE_WINDOW_D, "", "＞　獅子と対面するには「証」が필요だ "
				IF 던전플래그:99:3 == 4
					CALL MESSAGE_WINDOW_D, "", "＞ 獅子の誇りを사용しますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 獅子の像を覆う힘場が消滅した "
						던전플래그:99:1 = 6
				ENDIF
			ENDIF
		ELSEIF 던전플래그:99:1 == 6
			CALL MESSAGE_WINDOW_D, "", "『ここに門番を封ずるなり/魔の힘での破壊が門番を解き放つ』 "
			CALL MESSAGE_WINDOW_D, "", "＞　獅子の像を破壊しますか？ "
				CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 獅子の像を破壊すると、跡から影が染み出し襲いかかってきた！ "
						CALL MESSAGE_WINDOW_D, "", "＞ 섀도우　が一体出た！ "
						
						FLAG:도주불가플래그 = 1
						FLAG:회화불능플래그 = 1
						FLAG:선제기습취소 = 1
						
						CALL SET_ENEMY,9,[[キャラ:데스그리폰]],50,0,1
						NAME:(CHARANUM-1) = 섀도우
						CALLNAME:(CHARANUM-1) = 섀도우
						CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
						CFLAG:(CHARANUM-1):ＭＰ보정 += 5000
						ABL:(CHARANUM-1):스킬1 = 326 ;베어먹기
						ABL:(CHARANUM-1):스킬2 = 48 ;자벨린레인
						ABL:(CHARANUM-1):스킬3 = 328 ;어설트다이브
						;ABL:(CHARANUM-1):스킬4 =2005 ;자폭
						CALL SYNC_STATUS, (CHARANUM-1)
						CALL HEALTH_CHARA, (CHARANUM-1)
						
						CALL BATTLE_START
						FORCEWAIT
						CALL MESSAGE_WINDOW_D, "", "＞ 악마を倒すと、封じていた힘が消え去った気配がする…… "
						FLAG:선제공격플래그 = 0
						FLAG:도주불가플래그 = 0
						FLAG:회화불능플래그 = 0
						FLAG:선제기습취소 = 0
						FLAG:인카운트율 = 0
						FLAG:미조우걸음수 = 0
						
						CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
						MONEY:99 += 100
						
						던전플래그:99:1 = 7
						SETBIT 던전플래그:99:4,6
					ENDIF
		ELSEIF 던전플래그:99:1 == 7
			CALL MESSAGE_WINDOW_D, "", "＞　もうなにもないようだ "
		ENDIF
		RETURN 0
	;■獅子の間　中央　隠しRオーブ
	CASE 2149
		IF !GETBIT(던전플래그:99:6,12)
			CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
			MONEY:99 += 100
			SETBIT 던전플래그:99:6,12
		ENDIF
		RETURN 0
	;■古城ロビー吹き抜け　2F
	CASE 3044
		SIF 던전플래그:99:1 >= 15
			RETURN 0
	;■
	CASE 11069
		IF !GETBIT(던전플래그:99:6,38)
			CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
			MONEY:99 += 100
			SETBIT 던전플래그:99:6,38
		ENDIF
		RETURN 0
	;■古城前
	CASE 13019
		SIF 던전플래그:99:1 >= 16 && !GETBIT(던전플래그:99:4,23)
			RETURN 0
	;■闘技場　霧深き渓谷への扉
	CASE 14029
		IF !GETBIT(던전플래그:99:4,17)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封印されている "
			RETURN 0
		ENDIF
	CASE 14049
		IF !GETBIT(던전플래그:99:4,11)
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封印されている/　　この封印を解くには、200個のレッド・オーブが필요だ "
			IF MONEY:99 >=200
				CALL MESSAGE_WINDOW_D, "", "＞　レッド・オーブを소비して扉を개방した "
				MONEY:99 -= 200
				SETBIT 던전플래그:99:4,11
			ENDIF
			RETURN 0
		ENDIF
	;■성배堂前
	CASE 17009
		IF 던전플래그:99:1 < 20
			CALL MESSAGE_WINDOW_D, "", "＞　この扉は封印されている "
			RETURN 0
		ENDIF
	;■성배堂	
	CASE 18004
		IF 던전플래그:99:1 < 21
			CALL MESSAGE_WINDOW_D, "", "＞　強力な力でこれ以上近づけない "
			RETURN 0
		ENDIF
	CASE 18014
		IF !GETBIT(던전플래그:99:4,12)
			CALL MESSAGE_WINDOW_D, "", "＞　崩れかけている壁を壊した "
			SETBIT 던전플래그:99:4,12
		ENDIF
	CASE 18009
		SIF !GETBIT(던전플래그:99:4,13)
			RETURN 0
	;■海賊船　船底
	CASE 20014
		CALL MESSAGE_WINDOW_D, "", "＞　船体を止め置く巨大なイカリを/　　巻き上げるためのキャプスタンだ "
		RETURN 0
	CASE 20006
		IF 던전플래그:99:1 >= 24
			CALL MESSAGE_WINDOW_D, "", "＞　沈没の影響か、崩れてしまっている/　　他の탈출입を探すしかなさそうだ "
			RETURN 0
		ENDIF
	;■漂流地
	CASE 22029
		IF 던전플래그:99:1 < 25
			CALL MESSAGE_WINDOW_D, "", "＞　鉄柵が降りていて進めない "
			RETURN 0
		ENDIF
	;■山岳地
	CASE 23059
		IF !GETBIT(던전플래그:99:4,17)
			CALL MESSAGE_WINDOW_D, "", "＞　封印を解いた "
			SETBIT 던전플래그:99:4,17
		ENDIF
	;■闘技場　地下
	CASE 24004
		IF !GETBIT(던전플래그:99:4,21)
			CALL MESSAGE_WINDOW_D, "", "＞　崩れかけている壁を壊した "
			SETBIT 던전플래그:99:4,21
		ENDIF
	CASE 24134
		IF !GETBIT(던전플래그:99:4,22)
			CALL MESSAGE_WINDOW_D, "", "＞　崩れかけている壁を壊した "
			SETBIT 던전플래그:99:4,22
		ENDIF
	;■闘技場の絵
	CASE 28009,28019,28039,28049
		IF !GETBIT(던전플래그:99:4,27)
			CALL MESSAGE_WINDOW_D, "", "＞　竜の力で封じられ、先へ進むことができない "
			RETURN 0
		ENDIF
	;■浸水牢獄
	CASE 29019
		SIF !GETBIT(던전플래그:99:4,30)
			RETURN 0
	
ENDSELECT

CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;タイル定義
;=======================================================================
;ARGS  플로어데이터で得た1マスの文字
;ARG   Xｲ
;ARG:1 Yｲ
;ARGSとタイル文字が合えば指定のタイル番号をRETURNする
;使い方
;SIF ARGS == "S"
;	RETURN 22

@DEFINE_TILES_99, ARGS, ARG, ARG:1
#LOCALSIZE 1


;-----------------------------------------------------------------------
;共通
;-----------------------------------------------------------------------
;S 高低差1
SIF ARGS == "S"
	RETURN 11
;M 高低差2
SIF ARGS == "M"
	RETURN 21
;L 高低差3
SIF ARGS == "L"
	RETURN 31

;↑滑り
SIF ARGS == "A"
	RETURN 41
;↓滑り
SIF ARGS == "V"
	RETURN 51
;→滑り
SIF ARGS == ">"
	RETURN 61
;←滑り
SIF ARGS == "<"
	RETURN 71

;滑る床
SIF ARGS == "*"
	RETURN 81

;ループ床
SIF ARGS == "ﾙ"
	RETURN 101

;↑扉
SIF ARGS == "ﾍ"
	RETURN 12
;↓扉
SIF ARGS == "Y"
	RETURN 22
;→扉
SIF ARGS == "}"
	RETURN 32
;←扉
SIF ARGS == "{"
	RETURN 42
;特殊処理
SIF ARGS == "F"
	RETURN 91
;特殊床
SIF ARGS == "I"
	RETURN 92

;レッドオーブの床(高低差有)
;S 高低差1
SIF ARGS == "A"
	RETURN 111
;M 高低差2
SIF ARGS == "B"
	RETURN 121
;L 高低差3
SIF ARGS == "C"
	RETURN 131
;時空神像
SIF ARGS == "J"
	RETURN 181

;空白(落下可能)
SIF ARGS == "H"
	RETURN 171

;レッドオーブ
SIF ARGS == "P"
	RETURN 191

;進入禁止・隠しレッドオーブ有り
SIF ARGS == "R"
	RETURN 201

;=======================================================================
;タイル調整
;=======================================================================
;ARG:1、ARG:2はそれぞれX座標とY座標
;ARGはその座標に現在代入されている番号
;0：壁　1：床또는通路　2：扉　3：宝箱　4：이벤트　5：罠　6：上り階段 7：下り階段　8：出口　9：그외特殊処理等
;これらの内、3～9が代入されているマスに、個別の番号を与える処理を実行します。
;この処理を行った後、これらのマスには 「マップ番号*1000 + そのマスがそのマップで左上から数えて何個눈のARG타입のマスか*10 + ARG」が代入されます
;例えば 2003 であった場合、「2番のマップ＝３Ｆで、左上から数えて0個눈の3＝宝箱である」という事を意味しています
;尚、0～2はどのマップにも大量に設置されるので、ここでは기본的に個別の番号を与えません。
;
;何個눈のARG타입のマスなのか、は左上の(0,0)から右まで探し、その後一つ下の段に移って同様に探す、というのを右下まで繰り返して数えます。
@MAKE_FLOOR_LINE_COMMON_99, ARG, ARG:1, ARG:2
#LOCALSIZE 100
;ARG:3(LOCAL:3) 宝箱 DB:75~99(현M+75)の1ビット눈から、自動的に使う
;LOCAL:4 이벤트
;LOCAL:6 昇り階段　端に6を置くと自動的に置き換わる
;LOCAL:7 降り階段　端に7を置くと自動的に置き換わる

;指定された座標が(0,0)である場合、つまり新しいマップを読み込んだ時はLOCALを소거します
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL


SELECTCASE ARG
	CASE 3
		;宝箱は多くの場合、開けたフラグが立っていると床を代入します
		;そのマップでどの宝箱を開けたかは、そのマップの宝箱管理用変数の何番눈のビットが立っているかで判断します
		IF GETBIT(던전플래그:(FLAG:현던전):(FLAG:현M / 5 + 80), (FLAG:현M % 5 * 10 + LOCAL:3))
			SIF FLAG:현M == 2 && LOCAL:3 == 6
				DA:(ARG:1):(ARG:2) = 21
			SIF FLAG:현M == 18 && LOCAL:3 == 2
				DA:(ARG:1):(ARG:2) = 21
			SIF FLAG:현M == 21 && LOCAL:3 == 0
				DA:(ARG:1):(ARG:2) = 21
			DA:(ARG:1):(ARG:2) = 1
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:3 * 10 + 3
		ENDIF
		LOCAL:3++
	CASE 6
		IF ARG:1 == (FLAG:최대X -1) || ARG:2 == (FLAG:최대Y - 1) || ARG:1 == 0 || ARG:2 == 0
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:16 * 10 + 506
			LOCAL:16++
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:6 * 10 + 6
			LOCAL:6++
		ENDIF
	CASE 7
		IF ARG:1 == (FLAG:최대X -1) || ARG:2 == (FLAG:최대Y - 1) || ARG:1 == 0 || ARG:2 == 0
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:17 * 10 + 507
			LOCAL:17++
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:7 * 10 + 7
			LOCAL:7++
		ENDIF
	CASE 4 TO 9
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:ARG * 10 + ARG
		LOCAL:ARG++
	CASE IS > 9
		DA:(ARG:1):(ARG:2) = ARG
ENDSELECT


;=======================================================================
;ターミナル이름
;=======================================================================
;@GET_FLOORNAME_99





;=======================================================================
;特殊タイル표시
;=======================================================================
;ARG:1がX座標、ARG:2がY座標
;ARGはそこに代入されている値
;RESULTSに代入した文字がマップに표시されますが、必ず全角1文字分になるようにしてください。そうでないと표시が崩れます。
;IF GET_FLOOR_ANALYZE_T(ARG:1, ARG:2) == 2


@TILE_MARK_COMMON_99_1, ARG, ARG:1, ARG:2

;オーブ付き、高低差有りの場合
CALL TILE_MARK_COMMON_99_ORB, ARG, ARG:1, ARG:2
SIF RESULT
	RETURN 0

;それ이외の高低差有りの場合
IF ARG ==11 || ARG == 111
	RESULTS = Ｓ
ELSEIF ARG == 21 || ARG == 121
	RESULTS = Ｍ
ELSEIF ARG == 31 || ARG == 131
	RESULTS = Ｌ
ELSEIF ARG == 91
	RESULTS = □	
ELSEIF ARG == 201
	RESULTS = ■
ELSEIF ARG == 181
	RESULTS = Ω
ELSEIF ARG == 171
	SELECTCASE FLAG:현M
		CASE 26
			IF ARG:1 == 8 && ARG:2 == 42
				RESULTS = 扉
			ELSEIF ARG:1 == 30 && ARG:2 == 5
				RESULTS = 　
			ELSEIF ARG:1 == 31 && ARG:2 == 5
				RESULTS = 　
			ELSEIF ARG:1 == 39 && ARG:2 == 3
				IF !GETBIT(던전플래그:99:4,26)
					RESULTS = ■
				ELSE
					RESULTS = ！
				ENDIF
			ELSEIF ARG:1 == 39 && ARG:2 == 7
				IF !GETBIT(던전플래그:99:4,32)
					RESULTS = ■
				ELSE
					RESULTS = ！
				ENDIF
			ENDIF
		CASE 27
			IF ARG:1 == 2 && ARG:2 == 1
				RESULTS = ↑
			ELSEIF ARG:1 == 2 && ARG:2 == 14
				RESULTS = ！
			ELSEIF ARG:1 == 8 && ARG:2 == 1
				RESULTS = ↑
			ELSEIF ARG:1 == 10 && ARG:2 == 1
				RESULTS = ↓
			ELSEIF ARG:1 == 15 && ARG:2 == 13
				IF !GETBIT(던전플래그:99:4,29)
					RESULTS = □
				ELSE
					RESULTS = ！
				ENDIF
			ELSEIF ARG:1 == 17 && ARG:2 == 1
				RESULTS = ↓
			ELSEIF ARG:1 == 17 && ARG:2 == 13
				RESULTS = ！
			ENDIF
		CASE 28
			IF ARG:1 == 8 && ARG:2 == 10
				RESULTS = ↑
			ELSEIF ARG:1 == 13 && ARG:2 == 28
				RESULTS = ！
			ELSE
				RESULTS = 　
			ENDIF
		CASE 29
			IF ARG:1 == 3 && ARG:2 == 17
				RESULTS = ↑
			ELSEIF ARG:1 == 20 && ARG:2 == 2
				RESULTS = ！
			ELSE
				RESULTS = 　
			ENDIF
		CASE 30
			IF ARG:1 == 1 && ARG:2 == 4
				RESULTS = 扉
			ELSE
				RESULTS = 　
			ENDIF
		CASE 31
			IF ARG:1 == 9 && ARG:2 == 7
				RESULTS = 扉
			ELSE
				RESULTS = 　
			ENDIF
		CASE 32
			IF ARG:1 == 2 && ARG:2 == 6
				RESULTS = ↑
			ELSEIF ARG:1 == 17 && ARG:2 == 3
				RESULTS = ↑
			ELSE
				RESULTS = ！
			ENDIF
		CASE 33
			RESULTS = ↓
		CASE 34
			IF ARG:1 == 1 && ARG:2 == 4
				RESULTS = ↑
			ELSE
				RESULTS = 　
			ENDIF
		CASE 35
			IF ARG:1 == 7 && ARG:2 == 1
				RESULTS = 扉
			ELSE
				RESULTS = ↑
			ENDIF
		CASE 36
			IF ARG:1 == 18 && ARG:2 == 1
				RESULTS = 扉
			ELSEIF ARG:1 == 12 && ARG:2 == 7
				RESULTS = 扉
			ELSEIF ARG:1 == 9 && ARG:2 == 10
				RESULTS = ！
			ELSEIF ARG:1 == 8 && ARG:2 == 14
				RESULTS = ！
			ELSEIF ARG:1 == 18 && ARG:2 == 19
				RESULTS = 扉
			ELSE
				RESULTS = 　
			ENDIF
		CASE 38
			IF ARG:1 == 1 && ARG:2 == 7
				RESULTS = 扉
			ELSE
				RESULTS = 　
			ENDIF
		CASE 39
			RESULTS = 扉
		CASEELSE
			RESULTS = 　
	ENDSELECT
ELSE
	RESULTS = □
ENDIF


@TILE_MARK_COMMON_99_2, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 201
		SIF !GETBIT(던전플래그:99:4,4)
			RESULTS = ！
	CASEELSE
		RETURN 1
ENDSELECT

@TILE_MARK_COMMON_99_3, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 202,204,205
		SIF 던전플래그:99:1 < 16
			RESULTS = □
	CASEELSE
		RETURN 1
ENDSELECT


@TILE_MARK_COMMON_99_4, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 0,206,300,301,302,305,402,505,808
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	CASE 100,400,401,402,404,905,906
		SETCOLOR 0x00ff00
		RESULTS = Ｄ
	CASE 200
		IF 던전플래그:99:1 < 5
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 203
		IF 던전플래그:99:3 < 3
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 205
		IF 던전플래그:99:3 < 3
			RESULTS = ■
		ELSE
			RESULTS = □
		ENDIF
	CASE 207,303,1100
		RESULTS = Ω
	CASE 304
		IF 던전플래그:99:1 >= 15
			RESULTS = ■
		ELSE
			RESULTS = □
		ENDIF
	CASE 308
		RESULTS = ！
	CASE 403
		IF 던전플래그:99:3 == 0
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 800
		IF 던전플래그:99:1 < 8
			RESULTS = □
		ELSE
			RESULTS = ！
		ENDIF
	CASE 805
		IF !GETBIT(던전플래그:99:4,9)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■地下水路　陽光の導き
	CASE 1000
		IF 던전플래그:99:3 < 8
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■地下水路　古びた鍵
	CASE 1001
		IF 던전플래그:99:3 < 7
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■闘技場
	CASE 1400
		IF !GETBIT(던전플래그:99:10,1)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 1401
		RESULTS = ！
	CASE 1402
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	CASE 1403
		IF 던전플래그:99:1 < 26
			RESULTS = ！
		ELSE
			SETCOLOR 0x00ff00
			RESULTS = Ｄ
		ENDIF
	CASE 1404
		IF 던전플래그:99:1 == 26 && 던전플래그:99:5 < 5
			SETCOLOR 0x00ff00
			RESULTS = ｍ
		ENDIF
	CASE 1405
		SETCOLOR 0x00ff00
		RESULTS = Ｄ
	CASE 1406
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	;■성배堂
	CASE 1801
		IF !GETBIT(던전플래그:99:4,12)
			RESULTS = ■
		ELSE
			RESULTS = □
		ENDIF
	CASE 1803
		IF 던전플래그:99:3 >= 10
			RESULTS = □
		ELSE
			RESULTS = ！
		ENDIF
	;■海賊船　船底
	CASE 2000
		RESULTS = ！
	CASE 2001
		RESULTS = ●
	;■漂着地
	CASE 2200
		IF 던전플래그:99:1 < 25
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■闘技場　地下
	CASE 2400
		IF !GETBIT(던전플래그:99:4,21)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;ギミックAスイッチ
	CASE 2401
		IF !GETBIT(던전플래그:99:8,00)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 2402,24011
		RESULTS = ！
	;対なる二창입수
	CASE 2403
		IF 던전플래그:99:3 < 14
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;ギミックBスイッチ
	CASE 2404
		IF !GETBIT(던전플래그:99:8,01)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;ギミックA
	CASE 2405
		IF !GETBIT(던전플래그:99:8,00)
			RESULTS = 　
		ELSE
			RESULTS = ！
		ENDIF
	;ギミックC
	CASE 2406
		IF !GETBIT(던전플래그:99:8,02)
			RESULTS = 　
		ELSE
			RESULTS = ！
		ENDIF
	;ギミックB
	CASE 2407
		IF !GETBIT(던전플래그:99:8,01)
			RESULTS = 　
		ELSE
			RESULTS = ！
		ENDIF
	;ギミックD
	CASE 2408
		IF !GETBIT(던전플래그:99:8,03)
			RESULTS = 　
		ELSE
			RESULTS = ！
		ENDIF
	;ギミックCスイッチ
	CASE 2408
		IF !GETBIT(던전플래그:99:8,02)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;나이트메어β입수
	CASE 2410
		IF !GETBIT(던전플래그:99:10,2)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;ギミックDスイッチ
	CASE 2412
		IF !GETBIT(던전플래그:99:8,03)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 2413
		IF !GETBIT(던전플래그:99:4,22)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
;■古城・後編
	;헬メスの杖
	CASE 2601
		IF !GETBIT(던전플래그:99:4,26)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
;■浸水牢獄
	CASE 2900
		IF !GETBIT(던전플래그:99:4,31)
			RESULTS = □
		ELSE
			RESULTS = ！
		ENDIF
	CASE 2901
		IF !GETBIT(던전플래그:99:4,31)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
;■吹き抜け階段
	CASE 3000
		IF 던전플래그:99:3 < 17
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
;■変成の間
	CASE 3100
		IF 던전플래그:99:3 < 18
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
		
		
	CASEELSE
		RETURN 1
ENDSELECT


@TILE_MARK_COMMON_99_5, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 2200,2201,2202,2203,2204,2206,2207,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,2221,2222,2223,2224,2225,2226,2227,2228,2229,2230
		IF 던전플래그:99:1 < 25
			RESULTS = □
		ELSE
			RESULTS = 덫
		ENDIF
	CASEELSE
		RETURN 1
ENDSELECT


@TILE_MARK_COMMON_99_6, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 200,201,202,203
		RESULTS = ↑
	CASE 300
		IF 던전플래그:99:1 < 13
			RESULTS = ？
		ELSE
			RESULTS = ↑
		ENDIF
	CASE 500
		RESULTS = ↑
	CASEELSE
		RESULTS = ↑
ENDSELECT

@TILE_MARK_COMMON_99_7, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 200,300,301,302,303,801,802,900
		RESULTS = ↓
	CASE 1200
		IF 던전플래그:99:1 >= 13
			RESULTS = ↓
		ELSE
			RESULTS = □
		ENDIF
	CASEELSE
		RESULTS = ↓
ENDSELECT

@TILE_MARK_COMMON_99_9, ARG, ARG:1, ARG:2

CALL TILE_MARK_COMMON_99_ORB, ARG, ARG:1, ARG:2
SIF RESULT
	RETURN 0

SELECTCASE ARG / 10
	CASE 0
		IF 던전플래그:99:5 == 0
			SETCOLOR 0x00ff00
			RESULTS = ｍ
		ELSE
			RESULTS = □
		ENDIF
	CASE 001
		RESULTS = ↓
	CASE 100
		IF 던전플래그:99:5 == 1
			SETCOLOR 0x00ff00
			RESULTS = ｍ
		ELSE
			RESULTS = □
		ENDIF
	CASE 203,204
		RESULTS = □
	CASE 208
		IF 던전플래그:99:1 < 2
			RESULTS = ！
		ENDIF
	CASE 209
		IF 던전플래그:99:1 == 2 && 던전플래그:99:3 == 3
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	CASE 210
		IF 던전플래그:99:1 == 2 && 던전플래그:99:5 < 4
			SETCOLOR 0x00ff00
			RESULTS = ｍ
		ELSE
			RESULTS = □
		ENDIF
	;■ロビー　開始地点へ
	CASE 212
		RESULTS = ↑
	;■獅子の像
	CASE 213
		IF 던전플래그:99:1 < 7
			RESULTS = Ω
		ELSE
			RESULTS = □
		ENDIF
	;■獅子の間　中央　隠しRオーブ
	CASE 214
		RESULTS = ■
	;■獅子の間　中央　隠しRオーブ
	CASE 221
		RESULTS = ■
	;■古城ロビー吹き抜け　2F
	CASE 305,306
		RESULTS = ！
	;■複葉機の部屋　地下　Sミッション有
	CASE 500
		IF 던전플래그:99:1 == 0
			RESULTS = ！
		ELSEIF 던전플래그:99:2 == 4
			RESULTS = Ｂ
		ELSE
			RESULTS = □
		ENDIF
	;■獅子像の間　2F　ワープ
	CASE 600
		RESULTS = ■
	;■吹き抜け階段　吹き抜け部分
	CASE 800,801,802,803,804,805,806,809,810,811,812,813,814,815,816,817,818,819,820,821
		RESULTS = 　
	CASE 900,901,902,903,904,905,906,907,908,909
		RESULTS = 　
	;■吹き抜け階段 - 寝室のワープ箇所
	CASE 807,808
		RESULTS = ■
	;■吹き抜け階段　陽光の導きの扉
	CASE 822
		IF !GETBIT(던전플래그:99:4,9)
			RESULTS = ■
		ELSE
			RESULTS = 扉
		ENDIF
	;■ネロ・アンジェロ戦
	CASE 825
		IF 던전플래그:99:1 == 9
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■吹き抜け階段　最下層へ돌아간다
	CASE 1002
		RESULTS = ■
	;■地下水路　シン・サイズ戦
	CASE 1000
		IF 던전플래그:99:1 < 12
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■太陽の紋章先　ワープ
	CASE 1100
		RESULTS = ■
	CASE 1101,1102,1105
		RESULTS = ！
	;■太陽の紋章先　寝室への扉
	CASE 1103
		RESULTS = 扉
	;■太陽の紋章先　팬텀戦
	CASE 1104
		IF 던전플래그:99:1 < 13
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■太陽の紋章先　隠しRオーブ
	CASE 1106
		RESULTS = ■
	;■太陽の紋章先
	CASE 1108
		RESULTS = ↓
	;■古城前　古城내부へ
	CASE 1300
		RESULTS = ■
	;■古城前　跳ね橋　跳ね橋が上がった後
	CASE 1301
		IF 던전플래그:99:1 >= 16 && !GETBIT(던전플래그:99:4,23)
			RESULTS = 　	
		ELSE
			RESULTS = □
		ENDIF
	;■古城前　탈출입
	CASE 1303
		IF 던전플래그:99:1 >= 16
			RESULTS = 出
		ENDIF
	;■闘技場　ブレイド出現
	CASE 1400
		SIF 던전플래그:99:11 < 5
			RESULTS = ！
	;■闘技場　グリフォン戦
	CASE 1401
		SIF 던전플래그:99:1 == 18
			RESULTS = ！
	;■闘技場　フェティッシュ出現
	CASE 1403
		SIF 던전플래그:99:11 < 6
			RESULTS = ！
	;■闘技場　山岳地/霧深き渓谷への扉
	CASE 1402,1404
		RESULTS = 扉
	;■闘技場2F　仕掛け通路
	CASE 1500,1501
		IF 던전플래그:99:1 >=17
			RESULTS = □
		ELSE
			RESULTS = 　
		ENDIF
	;이프리트
	CASE 1502
		IF 던전플래그:99:1 < 18
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
	;■霧深き渓谷
	CASE 1600,1601
		RESULTS = ↑
	CASE 1602
		RESULTS = 扉
	;■성배堂前
	CASE 1700
		RESULTS = 扉
	CASE 1701
		SIF 던전플래그:99:1 < 20
			RESULTS = ！
	CASE 1702
		RESULTS = ↓
	;성배堂
	CASE 1800
		IF !GETBIT(던전플래그:99:4,13)
			RESULTS = ■
		ELSE
			RESULTS = 扉
		ENDIF
	CASE 1801
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	CASE 1802
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	CASE 1803
		SETCOLOR 0x00ff00
		RESULTS = ○
	CASE 1804
		SETCOLOR 0x00ff00
		RESULTS = ○
	CASE 1805
		RESULTS = 扉
	;■海賊船へ
	CASE 1900,1901
		SETCOLOR COLOR("PASTEL-BLUE")
		RESULTS = Ｄ
	CASE 1902
		RESULTS = 扉
	;■海賊船　船底
	CASE 2000,2001
		SETCOLOR 0x00ff00
		RESULTS = Ｄ
	CASE 2003,2004,2005,2006,2007
		SETCOLOR 0x00ff00
		RESULTS = Ｕ
	CASE 2002
		SIF 던전플래그:99:1 >= 24
			RESULTS = ←
	;■海賊船　船上
	CASE 2100
		SIF 던전플래그:99:1 == 22
			RESULTS = ！
	CASE 2101
		IF 던전플래그:99:1 >= 24
			SETCOLOR 0x00ff00
			RESULTS = Ｄ
		ENDIF
	;■漂着地
	CASE 2200,2201
		SETCOLOR COLOR("PASTEL-BLUE")
		RESULTS = Ｄ
	CASE 2202
		SIF 던전플래그:99:1 < 25
			RESULTS = ！
	;■山岳地
	CASE 2300
		RESULTS = ↑
	CASE 2301
		RESULTS = 扉
	CASE 2302
		RESULTS = ↑
	CASE 2303
		RESULTS = 扉
	CASE 2304
		RESULTS = ↓
	CASE 2305
		RESULTS = 扉
	CASE 2306
		RESULTS = ↑
	;■古城・後編
	CASE 2601
		SIF 던전플래그:99:5 < 6
			RESULTS = ！
	;■闘技場の絵
	CASE 2805
		SIF 던전플래그:99:1 >= 30
			RESULTS = ！
	CASE 2807
		SIF 던전플래그:99:1 < 30
			RESULTS = ！
	;■吹き抜け階段
	CASE 3000
		RESULTS = ↑
	CASE 3001
		RESULTS = ↓
	CASE 3002
		RESULTS = ↑
	CASE 3003
		RESULTS = ↓
	CASE 3004
		RESULTS = ↓
	CASE 3005
		RESULTS = ！
	;■浸水牢獄
	CASE 2900
		SIF !GETBIT(던전플래그:99:4,30)
			RESULTS = ！
	CASE 2901
		SIF !GETBIT(던전플래그:99:4,30)
			RESULTS = ■
	;■変成の間
	CASE 3100,3102,3103
		RESULTS = ↑
	CASE 3101
		SIF 던전플래그:99:1 == 31 ||던전플래그:99:3 >= 18 
			RESULTS = ！
	;■寝室～鏡の世界
	CASE 3200
		SIF 던전플래그:99:3 < 19
			RESULTS = ！
	;■魔界　生贄の間
	CASE 3500
		IF !GETBIT(던전플래그:99:4,34)
			RESULTS = ！
		ELSE
			RESULTS = □
		ENDIF
;■魔界　最深部
	;仕掛け2起動後
	CASE 3600,3601
		IF !GETBIT(던전플래그:99:4,37)
			RESULTS = Ｍ
		ELSE
			RESULTS = ！
		ENDIF
	;仕掛け1起動後
	CASE 3603
		IF !GETBIT(던전플래그:99:4,36)
			RESULTS = Ｌ
		ELSE
			RESULTS = ！
		ENDIF
	;心臓稼働
	CASE 3607
		IF !GETBIT(던전플래그:99:4,38)
			RESULTS = □
		ELSE
			RESULTS = ！
		ENDIF
	;移動処理
	CASE 3602,3604,3605,3606,3608,3609,3610,3611
		RESULTS = ！
	;■心臓の間　上段
	CASE 3800,3801
		RESULTS = ！
	;■謁見の間
	CASE 3900
		RESULTS = ！
	
	CASEELSE
		RESULTS = □
ENDSELECT



;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_99,ARG
SELECTCASE DA:(FLAG:현X):(FLAG:현Y)% 10
	;==========
	;時空神像
	;==========
	CASE 1
		SIF DA:(FLAG:현X):(FLAG:현Y) == 181
			CALL JIKU_GOD_STATUE

	;==========
	;扉の処理
	;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
	;========
	;宝の処理
	;========
	CASE 3
		IF FLAG:현M == 2
			SELECTCASE ARG / 10
				CASE 202,204,205
					SIF 던전플래그:99:1 >= 8
						RETURN 0
			ENDSELECT
		ELSE
			CALL TREASURE_99
			RETURN 1
		ENDIF
		
	;========================
	;이벤트、メッセンジャー
	;========================
	CASE 4
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
		;---------
		;　開始地点
		;---------
			;■開始地点　登攀
			CASE 0
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP,1,12,6
			;■開始地点：上段　降り
			CASE 100
				CALL MESSAGE_WINDOW_D, "", "＞ ここから下に飛び降りることもできるが…… "
				CALL INPUT_YN_D, "飛び降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,0,13,6
		;---------
		;　古城1F
		;---------
			;■聖堂　獅子の誇り
			CASE 200
				IF 던전플래그:99:1 == 4
					CALL MESSAGE_WINDOW_D, "", "【獅子の誇り】/＞　獅子の門番との対面が許される強者の証 "
					CALL INPUT_YN_D, "取る", "取らない"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　獅子の誇り　을 손에 넣었다 "
						CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%が獅子を模した紋章を손に取ると同時か/　　その거체は背後に降り立ち、莫大な熱とともに巨大な威圧感を放ちだす "
						CALL MESSAGE_WINDOW_D, "단테", "「まったく、サービス정신旺盛だな」/　단테は입笛を吹き余裕の表情だ/　どうやらコレもかつてと同じなのだろう……となると、もちろんその強さも "
						CALL MESSAGE_WINDOW_D, "팬텀", "「なんだ　このチビ共は？」 "
						CALL MESSAGE_WINDOW_D, "팬텀", "「大きな闘気を感じたが……/　　　ただの인간か」 "
						CALL MESSAGE_WINDOW_D, "", "＞　거체に見合った顔をこちらへ寄せ一行を見やる様は/　　いかにも힘自慢といった傲慢な自信に溢れている "
						CALL MESSAGE_WINDOW_D, "단테", "「よう化け物　相変わらず暑苦しいな」/「今度はちゃんと、筋肉이외も詰めてきたか？」 "
						CALL MESSAGE_WINDOW_D, "팬텀", "「ほざいたな　虫ケラ」/「踏み潰してやるわ！」 "
						CALL MESSAGE_WINDOW_D, "", "＞　악마　팬텀が襲いかかってきた！ "
						FLAG:도주불가플래그 = 1
						FLAG:회화불능플래그 = 1
						FLAG:선제기습취소 = 1
						CALL PHANTOM_1
						
						CALL BATTLE_START
						
						FLAG:도주불가플래그 = 0
						FLAG:회화불능플래그 = 0
						FLAG:선제기습취소 = 0
						FLAG:미조우걸음수 = 0
						FORCEWAIT
						CALL MESSAGE_WINDOW_D, "", "＞　熔岩蜘蛛は劣勢と見るや、身を翻し去っていった…… "
						CALL MESSAGE_WINDOW_D, "단테", "「まあ、中ボスってやつだ/アトラクションはいよいよ本番へ、ってな」 "
						CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%は軽いノリに相槌を打ちつつも先へと歩みを進めた…… "
						CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
						MONEY:99 += 500
						
						던전플래그:99:1 = 5
						던전플래그:99:3 = 4
					ENDIF
				ENDIF
			;■海中通路先　헬メスの杖
			CASE 202
				CALL MESSAGE_WINDOW_D, "", "＞ 「錬金術で使われる헬メスの杖をかたどったもののようだ」 "
				CALL MESSAGE_WINDOW_D, "", "＞ 「なにか마력のようなものをかんじるが今はどうすることもできない」 "
			;■書庫　裁きの宝杖
			CASE 203
				IF 던전플래그:99:3 < 3
					CALL MESSAGE_WINDOW_D, "", "【裁きの宝杖】/＞　不思議な光を放つ宝杖 "
					CALL INPUT_YN_D, "取る", "取らない"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 裁きの宝杖　을 손에 넣었다 "
						CALL MESSAGE_WINDOW_D, "", "＞ 背後から壁が動くような音が聞こえた…… "
						던전플래그:99:3 = 3
					ENDIF
				ENDIF
			;■書庫　死神の絵
			CASE 204
				IF 던전플래그:99:3 >= 2
					CALL MESSAGE_WINDOW_D, "", "＞ 死神のような악마が描かれている "
				ELSEIF 던전플래그:99:3 < 2
					CALL MESSAGE_WINDOW_D, "", "＞ 死神のような악마が描かれている /　絵には鍵が埋め込まれている "
					CALL INPUT_YN_D, "取る", "取らない"
					SIF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 古びた鍵　을 손에 넣었다 "
						던전플래그:99:3 = 2
				ENDIF
			;■獅子の間　登攀
			CASE 206
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL MESSAGE_WINDOW_D, "", "＞ どちらへ登りますか？ "
				PRINTFORML [ 0] 獅子の扉
				PRINTFORML [ 1] 2F通路
				PRINTFORML [ 2] やはりやめておく
				INPUT
				IF RESULT == 0
					CALL DUNGEON_WORP, 6,14,10
				ELSEIF RESULT == 1
					CALL DUNGEON_WORP, 6,14,12
				ELSE
					RETURN 1
				ENDIF
			;■小部屋　時空神像
			CASE 207
				CALL JIKU_GOD_STATUE
			;■複葉機の間
			CASE 208
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP,2,25,32
			
			
		;---------
		;　古城　吹き抜け
		;---------
			;■古城ロビー吹き抜け　2F
			CASE 300
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 4,11,2
			;■古城ロビー吹き抜け　2F
			CASE 301
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 4,15,4
			;■古城ロビー吹き抜け　2F
			CASE 302
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 4,15,9
			;■古城ロビー吹き抜け　2F　時空神像
			CASE 303
				CALL JIKU_GOD_STATUE
			;■古城ロビー吹き抜け　2F　マリオネットの部屋
			CASE 305
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 4,15,26
			;■古城ロビー吹き抜け　2F
			CASE 306
				CALL MESSAGE_WINDOW_D, "", "＞ ここから反対側へ飛び移ることもできそうだが…… "
				CALL INPUT_YN_D, "飛び移る", "この場に留まる"
				SIF !RESULT
					CALL DUNGEON_WORP, 3,5,26
			;■古城ロビー吹き抜け　2F
			CASE 307
				CALL MESSAGE_WINDOW_D, "", "＞ ここから反対側へ飛び移ることもできそうだが…… "
				CALL INPUT_YN_D, "飛び移る", "この場に留まる"
				SIF !RESULT
					CALL DUNGEON_WORP, 3,11,26
			;■古城ロビー吹き抜け　2F　矛の間
			CASE 308
				CALL MESSAGE_WINDOW_D, "", "＞ 何かを刺す三つの穴が開いている "
				IF 던전플래그:99:3 == 9 && 던전플래그:99:1 < 15
					CALL MESSAGE_WINDOW_D, "", "＞ 三叉の矛を刺しますか？ "
					CALL INPUT_YN_D, "刺す", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　三叉の矛を刺すと仕掛けが作動し、オブジェから水が排出され/　　それを동력に両側の歯車が動き出した "
						CALL MESSAGE_WINDOW_D, "", "＞　下の階で重いものが動いた音がした…… "
						던전플래그:99:1 = 15
					ENDIF
				ENDIF
			;■古城ロビー吹き抜け　3F
			CASE 400
				CALL MESSAGE_WINDOW_D, "", "＞　ここから下に飛び降りることもできるが…… "
				CALL INPUT_YN_D, "飛び降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,3,10,2
			;■古城ロビー吹き抜け　3F
			CASE 401,402
				CALL MESSAGE_WINDOW_D, "", "＞　ここから下に飛び降りることもできるが…… "
				CALL INPUT_YN_D, "飛び降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,3,15,7
			;■古城ロビー吹き抜け　3F　マリオネットの部屋
			CASE 403
				IF 던전플래그:99:3 == 0
					CALL MESSAGE_WINDOW_D, "", "＞　マリオネットが鍵を손に持っている…… "
					CALL INPUT_YN_D, "取る", "取らない"
					SIF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　古びた鍵　을 손에 넣었다 "
						CALL MESSAGE_WINDOW_D, "", "＞　鍵を손に取ると、辺りの空気が変わり악마の気配も漂ってきた/　　どうやらこれからがアトラクションの스타トということなのだろう "
						던전플래그:99:3 = 1
						던전플래그:99:11 = 1
				ENDIF
			;■古城ロビー吹き抜け　3F
			CASE 404
				CALL MESSAGE_WINDOW_D, "", "＞　ここから下に飛び降りることもできるが…… "
				CALL INPUT_YN_D, "飛び降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,3,15,25
		;---------
		;　古城2F
		;---------
			;■獅子像の間　2F　祭壇
			CASE 600
				IF !GETBIT(던전플래그:99:4,4)
					CALL MESSAGE_WINDOW_D, "", "＞　祭壇がある "
					CALL MESSAGE_WINDOW_D, "", "＞『道をひらくたくば、汝が힘で神を退けよ』/『神は汝の눈の前に居る』 "
					CALL INPUT_YN_D, "祭壇を動かす", "動かさない"
					IF !RESULT
						SETBIT 던전플래그:99:4,4
						CALL MESSAGE_WINDOW_D, "", "＞　祭壇が奥へとずれ、隠されていた蓋を開けるた "
						CALL MESSAGE_WINDOW_D, "", "＞　どうやら階下へ飛び降りる事ができるようだ "
						CALL MESSAGE_WINDOW_D, "", "＞　ここから下に飛び降りることもできるが…… "
						CALL INPUT_YN_D, "飛び降りる", "やめておく"
						SIF !RESULT
							CALL DUNGEON_WORP,2,12,11
					ENDIF
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞　どうやら階下へ飛び降りる事ができるようだが…… "
					CALL INPUT_YN_D, "飛び降りる", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,2,12,12
				ENDIF
			;■獅子像の間　2F　導きの魂の像
			CASE 601
				CALL MESSAGE_WINDOW_D, "", "＞ オブジェがある/穴の下に何か彫り込まれている "
				CALL MESSAGE_WINDOW_D, "", "＞ 『導きの魂はここに集う』 "
			;■獅子像の間　2F
			CASE 602,
				CALL MESSAGE_WINDOW_D, "", "＞ ここから下に飛び降りることもできるが…… "
				CALL MESSAGE_WINDOW_D, "", "＞ どちらへ移りますか？ "
				PRINTFORML [ 0] 向かいの通路へ
				PRINTFORML [ 1] 獅子の間1Fへ
				PRINTFORML [ 2] やはりやめておく
				INPUT
				IF RESULT == 0
					CALL DUNGEON_WORP, 6,14,12
				ELSEIF RESULT == 1
					CALL DUNGEON_WORP, 2,22,21
				ELSE
					RETURN 1
				ENDIF
			;■獅子像の間　2F
			CASE 603
				CALL MESSAGE_WINDOW_D, "", "＞ ここから下に飛び降りることもできるが…… "
				CALL MESSAGE_WINDOW_D, "", "＞ どちらへ移りますか？ "
				PRINTFORML [ 0] 獅子の扉へ
				PRINTFORML [ 1] 獅子の間1Fへ
				PRINTFORML [ 2] やはりやめておく
				INPUT
				IF RESULT == 0
					CALL DUNGEON_WORP, 6,14,9
				ELSEIF RESULT == 1
					CALL DUNGEON_WORP, 2,22,21
				ELSE
					RETURN 1
				ENDIF
			;■海中通路　전투フラグ　帰還用ワープ
			CASE 700
				;海中通路から聖堂先の塔へ移動
				IF 던전플래그:99:1 < 4
					CALL MESSAGE_WINDOW_D, "", "＞　海水を押しのけるようにできた円状の部屋/　　その中央に歩みを進めると、床の中央が輝いている "
					던전플래그:99:1 = 4
					CALL MESSAGE_WINDOW_D, "", "＞　どうやらここから上へ帰れそうだ "
					CALL INPUT_YN_D, "돌아간다", "ちょっと待て"
					SIF !RESULT
						CALL DUNGEON_WORP,2,36,5
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞ ここから上に돌아간다ことができそうだ…… "
					CALL INPUT_YN_D, "돌아간다", "ちょっと待て"
					IF !RESULT
						IF !GETBIT(던전플래그:99:4,24)
							CALL DUNGEON_WORP,2,36,5
						ELSE
							CALL DUNGEON_WORP,26,36,5
						ENDIF
					ENDIF
				ENDIF
		;---------
		;　吹き抜け階段 - 寝室
		;---------
			;■最下層　昇降機
			CASE 800
				IF 던전플래그:99:1 >= 8
					CALL MESSAGE_WINDOW_D, "", "＞ 起動すると上まで上がれそうだ…… "
					CALL INPUT_YN_D, "起動する", "ちょっと待て"
						SIF !RESULT
							CALL DUNGEON_WORP,9,13,4
				ENDIF
			;■最下層　スイッチ
			CASE 801
				IF 던전플래그:99:1 < 8
					CALL MESSAGE_WINDOW_D, "", "＞　마법진の描かれているシンボルがある/　　どうやら何かのスイッチになっているようだ…… "
					CALL INPUT_YN_D, "起動する", "ちょっと待て"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞ 背後の地面が光りだした…… "
							던전플래그:99:1 = 8
						ENDIF
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞ これ이상の操作は필요한いようだ "
				ENDIF
			;■女性の像
			CASE 802
				CALL MESSAGE_WINDOW_D, "", "＞　憂鬱な表情をした女性の像だ/　　가슴に何かを刺しこむ穴がある "
				IF 던전플래그:99:3 == 5
					CALL MESSAGE_WINDOW_D, "", "＞　死の宣告を사용しますか？ "
					CALL INPUT_YN_D, "YES", "NO"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞　憂鬱なる魂/　　魂をかたどった装飾品/　　人が触れると、その힘は時間とともに失われてしまう "
							CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%が装飾品を손に取ると、そばに気配を感じた "
							CALL MESSAGE_WINDOW_D, "", "＞　だが視線の先には鏡しかなく/――その鏡に映った自分たちが、こちらをはっきりとみつめている "
							CALL MESSAGE_WINDOW_D, "단테", "「なるほど、こうなるか」 "
							CALL MESSAGE_WINDOW_D, "", "＞　　一人で納得する단테と共に鏡から離れると/なんと鏡の自分たちがこちら側へ出てきた！ "
							CALL MESSAGE_WINDOW_D, "단테", "「Hey,今度はお友達を連れて賑やかなもんだ/　宗旨変えでもしたのか？」 "
							CALL MESSAGE_WINDOW_D, "", "＞　단테が気安く自分に話しかける/だが相手は黒い악마の騎士へと姿を変え、外へ来いとジェスチャーをして出ていった "
							CALL MESSAGE_WINDOW_D, "단테", "「まあ見ての通り、自分と戦えるサービス付きだ」 "
							CALL MESSAGE_WINDOW_D, "", "＞　これも同じらしい/　　アトラクション付きのホ라ハウスとは무서움入る "
						ENDIF
						던전플래그:99:1 = 9
						던전플래그:99:3 = 6
				ENDIF
			;■時空神像
			CASE 803
				CALL JIKU_GOD_STATUE
			;■鏡
			CASE 804
				CALL MESSAGE_WINDOW_D, "", "＞　吸い込まれそうに綺麗な鏡だ "
				CALL MESSAGE_WINDOW_D, "", "＞　鏡の奥に暗黒の波動を感じるが/　　今はどうすることもできない "
			;■太陽の紋章
			CASE 805
				IF !GETBIT(던전플래그:99:4,9)
					CALL MESSAGE_WINDOW_D, "", "＞　太陽の紋章が刻まれている/　　その下に何か書かれている "
					CALL MESSAGE_WINDOW_D, "", "『光輝く陽光の導きは/　　お前を焼き尽くすだろう』"
					CALL MESSAGE_WINDOW_D, "", "『光に耐える힘を持った者だけが/　　　　　　新たな道を개방する』 "
					IF 던전플래그:99:3 == 8
						CALL MESSAGE_WINDOW_D, "", "＞　陽光の導き　を사용しますか？ "
						CALL INPUT_YN_D, "YES", "NO"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞　紋章が上にスライドすると、扉が出現した "
							SETBIT 던전플래그:99:4,9
						ENDIF
					ENDIF
				ENDIF
			;■ベッド
			CASE 806
				CALL MESSAGE_WINDOW_D, "", "＞　領主が使っていただろうベッドだ "
			;■紋章横の机
			CASE 807
				CALL MESSAGE_WINDOW_D, "", "＞　隣国との交渉に使われただろう/　　書面などが置かれている "
			;■5F登攀
			CASE 808
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 9,15,10
			;■外壁　登り
			CASE 809
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 8,4,23
			;■外壁　降り
			CASE 810
				CALL MESSAGE_WINDOW_D, "", "＞ ここから飛び降りる事ができるようだが…… "
				CALL INPUT_YN_D, "降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP, 8,4,21
		;---------
		;　5F　寝室屋根上
		;---------
			;■最上階ジャンプ판정
			CASE 900
				CALL MESSAGE_WINDOW_D, "", "＞　飛び移れる場所が二箇所ある "
				CALL MESSAGE_WINDOW_D, "", "＞ どちらへ移りますか？ "
				PRINTFORML [ 0] 東側の階段へ
				PRINTFORML [ 1] 南側の발場へ
				PRINTFORML [ 2] やはりやめておく
				INPUT
				IF RESULT == 0
					CALL DUNGEON_WORP, 9,15,4
				ELSEIF RESULT == 1
					CALL DUNGEON_WORP, 9,13,6
				ELSE
					RETURN 1
				ENDIF
			CASE 901
				CALL MESSAGE_WINDOW_D, "", "＞　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,9,13,4
			;■最上階で死の宣告입수
			CASE 902
				IF 던전플래그:99:3 < 5
					CALL MESSAGE_WINDOW_D, "", "＞　死の宣告/　　美しい飾りの施された검/　　儀式用の装飾物として作られているので/　　무기としては사용できない "
					CALL INPUT_YN_D, "取る", "取らない"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞ 死の宣告　을 손에 넣었다 "
							던전플래그:99:3 = 5
						ENDIF
				ENDIF
			;■5F　寝室屋根上
			CASE 903
				CALL MESSAGE_WINDOW_D, "", "＞　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,9,10,9
			CASE 904
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP, 9,8,9
			;■寝室前へ
			CASE 905
				CALL MESSAGE_WINDOW_D, "", "＞　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,8,6,18
			;■屋根上へ돌아간다
			CASE 906
				CALL MESSAGE_WINDOW_D, "", "＞　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,8,12,16
		;---------
		;　5F　寝室屋根上
		;---------
			;■陽光の導き
			CASE 1000
				IF 던전플래그:99:3 < 8
					CALL MESSAGE_WINDOW_D, "", "【陽光の導き】/＞　月と対をなす灼熱に輝く鍵/　　소지していると체력を徐々に奪われる "
					던전플래그:99:3 = 8
				ENDIF
			;■地下水路　大部屋
			CASE 1001
				IF 던전플래그:99:3 < 7
					CALL MESSAGE_WINDOW_D, "", "【古びた鍵】/＞　錆びついてはいるが、/　　사용するのに問題はない "
					CALL INPUT_YN_D, "取る", "取らない"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 古びた鍵　을 손에 넣었다 "
						CALL MESSAGE_WINDOW_D, "", "＞　配管の奥から気配を感じる/　　見ると大型犬ほどの大きさの蝿のようなモノが這い出てきている/　　更に油断はできなくなったようだ…… "
						던전플래그:99:1 = 11
						던전플래그:99:3 = 7
						던전플래그:99:11 = 4
					ENDIF
				ENDIF
		;---------
		;　太陽の紋章先
		;---------
			;■時空神像
			CASE 1100
				CALL JIKU_GOD_STATUE
			;■
			CASE 1101
				IF 던전플래그:99:3 < 9
					CALL MESSAGE_WINDOW_D, "", @"【三叉の矛】/＞　重厚な装飾の施された三叉の矛/　　儀式用の品なので무기としては사용できない "
					CALL INPUT_YN_D, "取る", "取らない"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞ 三叉の矛　을 손에 넣었다 "
							던전플래그:99:3 = 9
						ENDIF
				ENDIF
		;---------
		;　太陽の紋章先
		;---------
			;■仕掛け
			CASE 1200
				IF 던전플래그:99:1 < 14
					CALL MESSAGE_WINDOW_D, "", "＞　跳ね橋を巻き上げる機械のレバーだ/　　마력で封じられている "
					CALL MESSAGE_WINDOW_D, "", "＞　強い충격を与えれば動きそうだ "
					CALL INPUT_YN_D, "動かす", "やめておく"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞ 機械が作動し、勢いよく巻き取られていた鎖が降りてゆく/　　暫くすると、外から大きな音がすると共に動きが止まった "
							CALL MESSAGE_WINDOW_D, "", "＞　おそらくこれで表の跳ね橋は降りただろう "
							던전플래그:99:1 = 14
						ENDIF
				ENDIF
			;■骸뼈
			CASE 1201
				CALL MESSAGE_WINDOW_D, "", "＞ この城に迷い込み힘尽きて/　　倒れた전사の亡骸だ "
				CALL MESSAGE_WINDOW_D, "", "＞ なにか持っている "
				CALL MESSAGE_WINDOW_D, "", "【グレネードガン】/＞ 爆発する榴弾を撃ち出す/　　破壊힘は極めて大きい "
				CALL MESSAGE_WINDOW_D, "", "＞ だが、異界も細部までは再現できていないようだ/　　전투で使うことはできそうにない "
		;---------
		;　古城前　跳ね橋
		;---------
			;■발元の文字
			CASE 1300
				CALL MESSAGE_WINDOW_D, "", "＞ くぼみに文字が刻まれている "
				CALL MESSAGE_WINDOW_D, "", "『운命の輪が始まりの地へ誘う』 "
				IF !GETBIT(던전플래그:99:4,23)  && 던전플래그:99:3 == 15
					CALL MESSAGE_WINDOW_D, "", "＞　운命の輪　を使いますか？ "
					CALL INPUT_YN_D, "YES", "NO"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "＞　仕掛けが作動し、跳ね橋が再び降りてきた "
							던전플래그:99:1 = 27
							SETBIT 던전플래그:99:4,23
						ENDIF
				ENDIF
			CASE 1301
				CALL MESSAGE_WINDOW_D, "", "＞ 石版に文字が刻まれている/　 何かの謎掛けのようだ "
				CALL MESSAGE_WINDOW_D, "", "『赤き石が隠されし秘密の空間は/　非常道の行いにより開く事あり』 "
			CASE 1302
				CALL MESSAGE_WINDOW_D, "", "＞ 石版に文字が刻まれている/　 何かの物語のようだ…… "
				CALL MESSAGE_WINDOW_D, "", "『운命は、コロシアムの/　　奥深き地にて主を待っている』 "
		;---------
		;　闘技場
		;---------
			CASE 1400
				IF !GETBIT(던전플래그:99:10,1)
					CALL MESSAGE_WINDOW_D, "", "【魔光石】/＞　暗闇で光り輝く不思議な石/　　魔界に存在する変哲も無い石が、/　　인간世界に放置されて변화を起こしたものと思われる "
					SETBIT 던전플래그:99:10,1
				ENDIF
			CASE 1401
				CALL MESSAGE_WINDOW_D, "", "『ア바롱の王、운命の輪を使い/　　物語を始まりの地に戻す』 "
				IF 던전플래그:99:3 < 15
					CALL MESSAGE_WINDOW_D, "", "【운命の輪】/＞　운命の繰り返しを象徴する/　　円盤状の플레이트 "
					CALL MESSAGE_WINDOW_D, "", "＞　운命の輪　を입수した "
					던전플래그:99:3 = 15
				ENDIF
			CASE 1402
				CALL MESSAGE_WINDOW_D, "", "＞ コロシアムへ移動しますか？ "
				CALL INPUT_YN_D, "移動する", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,14,16,12
			CASE 1403
				IF 던전플래그:99:1 >= 26
					CALL MESSAGE_WINDOW_D, "", "＞ 移動しますか？ "
					CALL INPUT_YN_D, "移動する", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,14,3,12
				ENDIF
			;グリフォン討伐後、단테회화
			CASE 1404
				IF 던전플래그:99:1 == 26 && 던전플래그:99:5 < 5
					CALL MESSAGE_WINDOW_D, "", "＞　단테は気配の消え去った空を睨みつけている "
					CALL MESSAGE_WINDOW_D, "단테", "「わかっちゃいたが、相変わらず汚ねぇことしやがる」 "
					CALL MESSAGE_WINDOW_D, "", "＞　仲間を使い捨てる、たしかにそんな組織は自分も御免被るところだ "
					CALL MESSAGE_WINDOW_D, "단테", @"「さあて、いよいよ終盤戦だ/行こうぜ、%CALLNAME:MASTER%」 "
					CALL MESSAGE_WINDOW_D, "단테", "「何度だろうと変わらない/아버지의이름에맹세코――奴に死を！」 "
					던전플래그:99:5 = 5
				ENDIF
			CASE 1405
				CALL MESSAGE_WINDOW_D, "", "＞　飛び降りますか？ "
				CALL INPUT_YN_D, "飛び降りる", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,14,5,28
			CASE 1406
				CALL MESSAGE_WINDOW_D, "", "＞ ここから上によじ登れそうだが…… "
				CALL INPUT_YN_D, "登る", "登らない"
				SIF !RESULT
					CALL DUNGEON_WORP,14,5,26
		;---------
		;　闘技場　2F
		;---------
			CASE 1500
				IF 던전플래그:99:1 == 16
					CALL MESSAGE_WINDOW_D, "", "＞ 仕掛けを動かしますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞ 背後で何かが動いた音がした…… "
						던전플래그:99:1 = 17
					ENDIF
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞ もう操作の필요はなさそうだ "
				ENDIF
		;---------
		;　霧深き渓谷
		;---------
			CASE 1600
				IF 던전플래그:99:9 == 0
					CALL MESSAGE_WINDOW_D, "", "＞　石碑に文字が刻まれている/　　何かの謎掛けのようだ "
					CALL MESSAGE_WINDOW_D, "", "『きりの渓谷。正しき道を行かねば/　幻の地に踏み入ることかなわず』 "
					CALL MESSAGE_WINDOW_D, "", "『か弱き光の守り손のみ/　正しき道を知る힘を授かる』 "
					IF RAND:2 ==0
						;右が正解
						CALL MESSAGE_WINDOW_D, "", "＞　石碑から光が出現し、右側の通路で漂っている…… "
						던전플래그:99:9 = 1
					ELSE
						;左が正解
						CALL MESSAGE_WINDOW_D, "", "＞　石碑から光が出現し、左側の通路で漂っている…… "
						던전플래그:99:9 = 2
					ENDIF
				ELSEIF 던전플래그:99:9 == 1
					CALL MESSAGE_WINDOW_D, "", "＞　光は右側の通路を漂っている…… "
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞　光は左側の通路を漂っている…… "
				ENDIF
		;---------
		;　성배堂
		;---------
			CASE 1800
				CALL MESSAGE_WINDOW_D, "", "＞　金色の騎士の像がある "
				CALL MESSAGE_WINDOW_D, "", "＞　何かが置かれていた様だ "
				IF !GETBIT(던전플래그:99:4,13)
					CALL MESSAGE_WINDOW_D, "", "＞　성배を使いますか？ "
					CALL INPUT_YN_D, "YES", "NO"
						SIF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　何かが動く音がした…… "
						SETBIT 던전플래그:99:4,13
				ELSEIF GETBIT(던전플래그:99:4,13)
					CALL MESSAGE_WINDOW_D, "", "＞　もうここには用はない "
				ENDIF
			CASE 1802
				IF 던전플래그:99:1 < 21
					CALL MESSAGE_WINDOW_D, "", "＞　힘ある光に守られた台座の上に/　　盃がのっている "
					CALL MESSAGE_WINDOW_D, "", "『証を我に示せ』 "
					CALL MESSAGE_WINDOW_D, "", "＞　純血の証を使いますか？ "
					CALL INPUT_YN_D, "YES", "NO"
						IF !RESULT
							CALL MESSAGE_WINDOW_D, "", "【성배】/＞　聖なる人の死を称え、/　　生からの개방を祈り その生き血を受けた성배 "
							CALL MESSAGE_WINDOW_D, "", "＞　성배　을 손에 넣었다と同時に、背後に気配が生まれる "
							CALL MESSAGE_WINDOW_D, "", "＞　振り返ると、古城で戦ったネロ・アンジェロが再び現れ、こちらを見据えている "
							CALL MESSAGE_WINDOW_D, "단테", @"「さあ%CALLNAME:MASTER%、ラウンド2の始まりだ！」 "
							CALL MESSAGE_WINDOW_D, "", "＞　ネロ・アンジェロが襲いかかってきた！ "
							FLAG:도주불가플래그 = 1
							FLAG:회화불능플래그 = 1
							FLAG:선제기습취소 = 1
							CALL NERO_2
							
							CALL BATTLE_START
							
							FLAG:도주불가플래그 = 0
							FLAG:회화불능플래그 = 0
							FLAG:선제기습취소 = 0
							FLAG:미조우걸음수 = 0
							FORCEWAIT
							
							CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%達に敗れ、ネロ・アンジェロは再び姿を消した "
							CALL MESSAGE_WINDOW_D, "", "＞　まだ決着を付ける時では無いようだ "
							CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
							MONEY:99 += 500
							던전플래그:99:1 = 21
							던전플래그:99:3 = 11
						ENDIF
				ENDIF
			CASE 1803
				IF 던전플래그:99:3 < 10
					CALL MESSAGE_WINDOW_D, "", "【純潔の証】/＞　水晶の膜でコーティングされた剥製/　　성배탐색に불가欠な『純潔の意思』が封じ込められている "
					CALL MESSAGE_WINDOW_D, "", "＞　純潔の証　を입수した "
					던전플래그:99:3 = 10
				ENDIF
			CASE 1804
				CALL MESSAGE_WINDOW_D, "", "＞　ここから向こうの발場に飛び移れそうだ/　　飛び乗りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,18,16,21
		;---------
		;　海賊船　船底
		;---------
			CASE 2000
				CALL MESSAGE_WINDOW_D, "", "【ニードルガン】/＞　水中で사용できる唯一の무기 "
				CALL MESSAGE_WINDOW_D, "", "＞　だが、異界も細部までは再現できていないようだ/　　전투で使うことはできそうにない "
		;---------
		;　海賊船　船上
		;---------
			CASE 2100
				IF 던전플래그:99:3 < 12
					CALL MESSAGE_WINDOW_D, "", "【헬メスの杖】/＞　2匹の뱀が絡みついた意匠が施されている "
					CALL MESSAGE_WINDOW_D, "", "＞　헬メスの杖　を입수した "
					던전플래그:99:3 = 12
					CALL MESSAGE_WINDOW_D, "", "＞　헬メスの杖を손に取ると、それが合図だったかのように/　　海賊船が沈没し始めた！ "
					CALL MESSAGE_WINDOW_D, "", "＞　あっという間に水没してしまいそうだ/　　急ぎ탈출せねばならない "
					던전플래그:99:1 = 24
				ENDIF
			CASE 2101
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,7,11
			CASE 2102
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,12,11
			CASE 2103
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,22,11
			CASE 2104
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,6,22
			CASE 2105
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,13,22
			CASE 2106
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,21,21,22
		;---------
		;　漂着地
		;---------
			CASE 2200
				IF 던전플래그:99:1 < 25 && 던전플래그:99:3 < 13
					CALL MESSAGE_WINDOW_D, "", "「盾に刻まれし共鳴する紋章/　　　扉を封じし盾を退ける」 "
					CALL MESSAGE_WINDOW_D, "", "小さな紋章の盾/＞　小さな盾の形をかたどったレリーフだ/　　コロシアムにある扉を封じている紋章と同じ形をしている "
					CALL MESSAGE_WINDOW_D, "", "＞　小さな紋章の盾　を입수した "
					던전플래그:99:3 = 13
				ELSEIF 던전플래그:99:1 < 25
					CALL MESSAGE_WINDOW_D, "", "＞　骸뼈の팔がレバーになっている "
					CALL MESSAGE_WINDOW_D, "", "＞　レバーを倒しますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　どこかで何かが動いた音がした……/　　それと同時に仕掛けが作動し、床の罠が動き出した "
						던전플래그:99:1 = 25
					ENDIF
				ENDIF
		;---------
		;　闘技場　地下
		;---------
			;スイッチA
			CASE 2401
				IF !GETBIT(던전플래그:99:8,0)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを作動させますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　どこかで何かが動いた音がした…… "
						SETBIT 던전플래그:99:8,0
					ENDIF
				ENDIF
			CASE 2402
				IF GETBIT(던전플래그:99:8,2)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,6,17
				ENDIF
			;対なる二창입수
			CASE 2403
				IF 던전플래그:99:3 < 14
					CALL MESSAGE_WINDOW_D, "", "【対なる二창】/　　『征옷者に破滅の창を託す/コロシアムの扉今こそ開かれん』 "
					CALL MESSAGE_WINDOW_D, "", "＞　対なる二창　을 손에 넣었다 "
					던전플래그:99:3 = 14
					CLEARBIT 던전플래그:99:8,00
					CLEARBIT 던전플래그:99:8,01
				ENDIF
			;スイッチB
			CASE 2404
				IF !GETBIT(던전플래그:99:8,1)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを作動させますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　どこかで何かが動いた音がした…… "
						SETBIT 던전플래그:99:8,1
					ENDIF
				ENDIF
			;ギミックA
			CASE 2405
				IF GETBIT(던전플래그:99:8,0)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,8,15
				ENDIF
			;ギミックC
			CASE 2406
				IF GETBIT(던전플래그:99:8,3)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,7,18
				ENDIF
			;ギミックB
			CASE 2407
				IF GETBIT(던전플래그:99:8,0)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,9,16
				ENDIF
			;ギミックD
			CASE 2408
				IF GETBIT(던전플래그:99:8,3)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,8,19
				ENDIF
			;スイッチC
			CASE 2409
				IF !GETBIT(던전플래그:99:8,2)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを作動させますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　どこかで何かが動いた音がした…… "
						SETBIT 던전플래그:99:8,2
					ENDIF
				ENDIF
			;나이트메어β입수
			CASE 2410
				IF !GETBIT(던전플래그:99:10,2)
					CALL MESSAGE_WINDOW_D, "", "【나이트메어β】/＞　魔界で造られた兵器/　　その위력は未知数である "
					CALL MESSAGE_WINDOW_D, "", "＞　どうやらこちらも完全再現とはいっていないようだ/　　なにかきっかけが필요かも知れない…… "
					
					SETBIT 던전플래그:99:10,2
					CLEARBIT 던전플래그:99:8,02
					CLEARBIT 던전플래그:99:8,03
				ENDIF
			CASE 2411
				IF GETBIT(던전플래그:99:8,1)
					CALL MESSAGE_WINDOW_D, "", "＞　발場へ飛び移りますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					SIF !RESULT
						CALL DUNGEON_WORP,24,10,17
				ENDIF
			;スイッチD
			CASE 2412
				IF !GETBIT(던전플래그:99:8,3)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを作動させますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　どこかで何かが動いた音がした…… "
						SETBIT 던전플래그:99:8,3
					ENDIF
				ENDIF
		;---------
		;　闘技場　地下下段
		;---------
			CASE 2500
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,24,6,15
			CASE 2501
				CALL MESSAGE_WINDOW_D, "", "＞　ここから上の발場に登れそうだ/　　登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,24,10,19
		;---------
		;　古城・後半　1F
		;---------
			CASE 2600
				CALL MESSAGE_WINDOW_D, "", "＞　水溜りが鏡のように透き通っている/　　ここから魔の波動を感じる "
				CALL MESSAGE_WINDOW_D, "", "＞　머리の中に声が響いてくる "
				CALL MESSAGE_WINDOW_D, "", "『魔への門を開かんとする者よ/ 　　　　　青き霊石の힘を借りよ』"
					IF !GETBIT(던전플래그:99:4,25)
						CALL MESSAGE_WINDOW_D, "", "＞　透き通った水の中に蠢く何かが映り、こちら側へ這い出ようとしている "
						CALL MESSAGE_WINDOW_D, "", "＞　それは슬라임のように蠢きながら次第に形を成してゆき/　　巨大な虫を思わせるような姿となり、こちらへ적意を向けてきた "
						CALL MESSAGE_WINDOW_D, "", "＞　나이트메어が襲いかかってきた！ "
						SETBIT 던전플래그:99:8,4
						FLAG:도주불가플래그 = 1
						FLAG:회화불능플래그 = 1
						FLAG:선제기습취소 = 1
						CALL NIGTHMARE
						
						CALL PHANTOM_2
						
						CALL BATTLE_START
						
						FLAG:도주불가플래그 = 0
						FLAG:회화불능플래그 = 0
						FLAG:선제기습취소 = 0
						FLAG:미조우걸음수 = 0
						FORCEWAIT
						CALL MESSAGE_WINDOW_D, "", "＞　나이트메어は叫びとともに蒸発するように消えていった‥‥‥ "
						CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
						MONEY:99 += 500
						던전플래그:99:1 = 28
						CLEARBIT 던전플래그:99:8,4
						SETBIT 던전플래그:99:4,25
					ENDIF
			CASE 2601
				CALL MESSAGE_WINDOW_D, "", "＞　錬金術で使われる헬メスの杖をかたどったもの/　　闇夜の마력を受け　마력が満ちているようだ "
				IF !GETBIT(던전플래그:99:4,26)
					CALL MESSAGE_WINDOW_D, "", "＞　헬メスの杖　を사용しますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　両側のオブジェに小部屋の絵と、寝室の絵が浮かび上がった "
						SETBIT 던전플래그:99:4,26
					ENDIF
				ENDIF
			CASE 2602
				IF !GETBIT(던전플래그:99:4,24)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを作動させますか？ "
					CALL INPUT_YN_D, "YES", "NO"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　起動した途端、背後に稲아내が落ち/　　轟音とともに騎士像が破壊された "
						CALL MESSAGE_WINDOW_D, "", "＞　破壊された像の跡には、뇌광をまとったコウモリが날개짓‥‥‥その姿が人形へと変わった/　　どうやら탐색はさらに困難を増していくようだ‥‥‥ "
						SETBIT 던전플래그:99:4,24
						던전플래그:99:11 = 7
					ENDIF
				ENDIF
		;---------
		;　小部屋の絵
		;---------
			CASE 2700
				IF 던전플래그:99:1 == 30 && !GETBIT(던전플래그:99:4,29)
					CALL MESSAGE_WINDOW_D, "", "＞　ふと見ると、闘技場の絵とは反対側に牢屋のような絵が浮かび上がっている "
					SETBIT 던전플래그:99:4,29
				ENDIF
		;---------
		;　闘技場の絵
		;---------
			;移動
			CASE 2800
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,7,3
			;移動
			CASE 2801
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,1,4
			;移動
			CASE 2802
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,3,4
			;移動
			CASE 2803
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,7,6
			;月光水
			CASE 2804
				IF 던전플래그:99:1 == 29 && 던전플래그:99:3 < 16
					CALL MESSAGE_WINDOW_D, "", "【月光水】/＞　中を水銀で満たされた水晶の玉/　　水銀には月の힘が宿っており、固く閉ざされた扉を開け放つ힘を持つ "
					던전플래그:99:3 = 16
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞　オブジェがある‥‥‥ "
				ENDIF
			;移動
			CASE 2805
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,5,4
			;移動
			CASE 2806
				CALL MESSAGE_WINDOW_D, "", "＞　ここから발場に飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,28,5,6
			;仕掛け
			CASE 2807
				CALL MESSAGE_WINDOW_D, "", "＞　손動式のハンドルがある "
				IF !GETBIT(던전플래그:99:4,27)
					CALL MESSAGE_WINDOW_D, "", "＞　竜の힘で封じられているようだ/　　このままでは動かせない "
				ELSE
					CALL MESSAGE_WINDOW_D, "", "＞　動かしますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　ハンドルを回すと、連動して鏡が向きを変えてゆく "
						CALL MESSAGE_WINDOW_D, "", "＞　180度回転すると、鏡に반사された月の光が天井にも設置されていた鏡に반사し/　　奥に設置されたオブジェを照らす "
						CALL MESSAGE_WINDOW_D, "", "＞　するとオブジェに光が集まり、球が産み出されたようだ "
						던전플래그:99:1 = 29
					ENDIF
				ENDIF
			;鏡
			CASE 2808
				CALL MESSAGE_WINDOW_D, "", "＞　鏡が天井から差し込む月の光を반사している "
			;石碑
			CASE 2809
				CALL MESSAGE_WINDOW_D, "", "『行く손を阻みし冥界の竜』/『검で勇気の証を見せよ/　　　竜は自らの炎で滅ぶだろう』 "
				CALL MESSAGE_WINDOW_D, "", "『月の雫は鏡を渡りて珠となる』/『天上の道を知るものだけが/　　　　　珠玉の光を손に入れる』 "
		;---------
		;　浸水牢獄
		;---------
			;移動
			CASE 2900
				IF GETBIT(던전플래그:99:4,31)
					CALL MESSAGE_WINDOW_D, "", "＞　吹き抜け階段の上部分へ泳いで移動しますか？ "
					CALL INPUT_YN_D, "移動する", "やめておく"
					SIF !RESULT
						CALL DUNGEON_WORP,30,20,5
				ENDIF
			;装置
			CASE 2901
				IF !GETBIT(던전플래그:99:4,31)
					CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させると、周囲が水で満たされた "
						CALL MESSAGE_WINDOW_D, "", "＞　これであれば、高い場所へも自由に泳いで行けそうだ "
						SETBIT 던전플래그:99:4,31
					ENDIF
				ENDIF
		;---------
		;　吹き抜け階段
		;---------
			;哲学者の卵입수
			CASE 3000
				IF 던전플래그:99:3 < 17
					CALL MESSAGE_WINDOW_D, "", "【哲学者の卵】/＞　錬金術に사용する物質 "
					던전플래그:99:3 = 17
				ENDIF
			CASE 3001
				CALL MESSAGE_WINDOW_D, "", "＞　無事な通路へ飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,30,19,5
			CASE 3002
				CALL MESSAGE_WINDOW_D, "", "＞　無事な通路へ飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,30,18,4
			CASE 3003
				CALL MESSAGE_WINDOW_D, "", "＞　無事な通路へ飛び移れそうだ/　　飛び移りますか？ "
				CALL INPUT_YN_D, "飛び移る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,30,22,4
		;---------
		;　変成の間
		;---------
			CASE 3100
				IF 던전플래그:99:1 == 32 && 던전플래그:99:3 < 18
					CALL MESSAGE_WINDOW_D, "", "＞　変成が종료したようだ "
					CALL MESSAGE_WINDOW_D, "", "＞　変成された石から不思議な声が/　　머리の中に響いてくる "
					CALL MESSAGE_WINDOW_D, "", "『我は魔の門を開く第一の鍵なり/二つ눈の鍵は映し世の世界にある』 "
					CALL MESSAGE_WINDOW_D, "", "【霊石 エリキサ】/＞　「哲学者の卵」を変成してできた神秘の石/　　鏡の封印を解くことが出来る "
					던전플래그:99:3 = 18
				ELSEIF 던전플래그:99:1 == 31
					CALL MESSAGE_WINDOW_D, "", "＞　変成には多少時間がかかるようだ "
				ELSEIF 던전플래그:99:1 < 31
					CALL MESSAGE_WINDOW_D, "", "＞　何かが彫り込まれている "
					CALL MESSAGE_WINDOW_D, "", "『心理を求める者よ、卵を投じよ/　　ゆっくりと慎重に熱したまえ』 "
					CALL MESSAGE_WINDOW_D, "", "『其は青き霊石となり/険しき道への道しるべとなる』 "
					CALL MESSAGE_WINDOW_D, "", "＞　哲学者の卵　を사용しますか？ "
					CALL INPUT_YN_D, "사용する", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　変成には多少時間がかかるようだ "
						던전플래그:99:1 = 31
					ENDIF
				ELSE
				ENDIF
		;---------
		;　寝室～鏡の世界
		;---------
			CASE 3200
				CALL MESSAGE_WINDOW_D, "", "＞　鏡の世界から出ますか？ "
				CALL INPUT_YN_D, "出る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,32,14,2
			
			CASE 3201
				CALL MESSAGE_WINDOW_D, "", "＞　エリキサの影響をうけて/　　鏡が不気味な輝きを増している "
				CALL MESSAGE_WINDOW_D, "", "＞　鏡の中へ入りますか？ "
				CALL INPUT_YN_D, "入る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,32,10,2
			CASE 3202
				CALL MESSAGE_WINDOW_D, "리림", "「そこの鏡から鏡の世界に行けるようになったんですって」 "
				CALL MESSAGE_WINDOW_D, "리림", "「せっかく豪華なベッドで休んでたのに/　これじゃ安心して休めないじゃない！」 "
		;---------
		;　魔界門
		;---------
			CASE 3400
				IF !GETBIT(던전플래그:99:4,33)
					CALL MESSAGE_WINDOW_D, "", "＞　禍々しき闇が입を広げている/　　これが魔界への門だ "
					CALL MESSAGE_WINDOW_D, "", "＞　賢者の石　を사용しますか？ "
					CALL INPUT_YN_D, "사용する", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　門を覆っていた힘場が破れ、魔界の門が입を開いた "
						SETBIT 던전플래그:99:4,33
					ENDIF
				ENDIF
		;---------
		;　魔界　最深部
		;---------
			;仕掛け2
			CASE 3600
				IF !GETBIT(던전플래그:99:4,37)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを起動させますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させると、下から柱が伸びてきた/　　これで先へ進めそうだ "
						SETBIT 던전플래그:99:4,37
					ENDIF
				ENDIF
			;爪
			CASE 3601
				IF !GETBIT(던전플래그:99:4,35)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを起動させますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させると、何処かで何かが動く気配がした "
						SETBIT 던전플래그:99:4,35
					ENDIF
				ENDIF
			;仕掛け1
			CASE 3602
				IF !GETBIT(던전플래그:99:4,36)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを起動させますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させると、下から柱が伸びてきた/　　これで先へ進めそうだ "
						SETBIT 던전플래그:99:4,36
					ENDIF
				ENDIF
		;---------
		;　心臓の間　下段
		;---------
			CASE 3700,3701
				CALL MESSAGE_WINDOW_D, "", "＞　上へ登りますか？ "
				CALL INPUT_YN_D, "登る", "やめておく"
				SIF !RESULT
					CALL DUNGEON_WORP,36,18,8
		;---------
		;　心臓の間　上段
		;---------
			CASE 3800
				IF !GETBIT(던전플래그:99:4,38)
					CALL MESSAGE_WINDOW_D, "", "＞　仕掛けを起動させますか？ "
					CALL INPUT_YN_D, "動かす", "やめておく"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", "＞　装置を起動させると部屋中央の心臓が動き出した "
						CALL MESSAGE_WINDOW_D, "", "＞　其れに伴い、奥にある大扉の封印が해제されたようだ "
						SETBIT 던전플래그:99:4,38
					ENDIF
				ENDIF
				
				
		
		
		
		
		
		
			
		ENDSELECT
		
		RETURN 0
	
	;=======
	;플로어移動
	;=======
	CASE 6
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 300
				IF 던전플래그:99:1 < 14
					CALL MESSAGE_WINDOW_D, "", "＞　上へ登る梯子がある/　　だがふたが閉まっているので通れない "
					RETURN 0
				ELSE
					CALL STAIRS_99
					RETURN RESULT
				ENDIF
			ENDSELECT
	CASE 7
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 1200
				IF 던전플래그:99:1 < 14
					CALL MESSAGE_WINDOW_D, "", "＞　　ふたが閉まっているので通れない "
					RETURN 0
				ELSE
					CALL STAIRS_99
					RETURN RESULT
				ENDIF
			CASEELSE
				CALL STAIRS_99
				RETURN RESULT
		ENDSELECT
	
	;=======
	;出口
	;=======
	CASE 8
		CALL DUNGEON_EXIT
		RETURN 1
	;=======
	;이벤트2
	;=======
	CASE 9
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 1303
				IF 던전플래그:99:1 >= 16
					CALL MESSAGE_WINDOW_D, "", "＞　異界の綻びがある/　　ここから帰還できそうだが、どうしようか…… "
					CALL INPUT_YN_D, "帰還する", "まだ탐색を続けよう"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%達は自室へと帰還した "
						FLAG:탈출 = 1
						RETURN 1
					ENDIF
				ENDIF
		ENDSELECT
	CASEELSE
	RETURN 1
ENDSELECT
	

@高低差_99,ARG,ARG:1
SELECTCASE DA:(ARG):(ARG:1) % 10
	CASE 0,2,6,7,8,3,4,9
		;霧深き渓谷の4は高さ0
		SIF DA:(ARG):(ARG:1) == 16004
			RETURN 0
		;魔界門の4は高さ0
		SIF DA:(ARG):(ARG:1) == 34004
			RETURN 0
		;騎士像前の9は高さ0にしておく
		SIF DA:(ARG):(ARG:1) == 2179
			RETURN 0
		;성배堂の奥の扉9は高さ0
		SIF DA:(ARG):(ARG:1) == 18009
			RETURN 0
		;古城・後編　ワープマス下の9は高さ0
		SIF DA:(ARG):(ARG:1) == 26009
			RETURN 0
		;魔界　最深部　高さ2
		SIF DA:(ARG):(ARG:1) == 36009
			RETURN 2
		;魔界　最深部　高さ2
		SIF DA:(ARG):(ARG:1) == 36019
			RETURN 2
		;魔界　最深部　高さ3
		SIF DA:(ARG):(ARG:1) == 36039
			RETURN 3
		RETURN 99
	CASE 1
		;ドリーグ用
		IF DA:(ARG):(ARG:1) == 91
			RETURN 0
		;ワープ・落下処理
		ELSEIF DA:(ARG):(ARG:1) == 171
			IF FLAG:현M == 29 && ARG == 3 && ARG:1 == 17
				RETURN 3
			ELSE
				RETURN 20
			ENDIF
		ENDIF
		;時空神像
		SIF DA:(ARG):(ARG:1) == 181
			RETURN 0
		;床配置のオーブ
		SIF DA:(ARG):(ARG:1) == 191
			RETURN 0
		;進入禁止地点の隠しオーブ
		SIF DA:(ARG):(ARG:1) == 201
			RETURN 10
		;高低差
		SIF DA:(ARG):(ARG:1) == 31
			RETURN 3
		SIF DA:(ARG):(ARG:1) == 131
			RETURN 3
		SIF DA:(ARG):(ARG:1) == 21
			RETURN 2
		SIF DA:(ARG):(ARG:1) == 121
			RETURN 2
		SIF DA:(ARG):(ARG:1) == 11
			RETURN 1
		SIF DA:(ARG):(ARG:1) == 111
			RETURN 1
		RETURN 0
	CASE 5
		RETURN 0
	CASEELSE
		RETURN 99
ENDSELECT


;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_99,ARG
;ARG = 進入時の向き　0の場合ワープなど
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	CASE 1
		;ドリーグ
		IF DA:(FLAG:현X):(FLAG:현Y) == 91
			IF !GETBIT(던전플래그:99:4,27)
				CALL D_LEAGUE
			ENDIF
		;レッドオーブ취득処理
		ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 191
			CALL ENTER_DUNGEON_99_ORB,ARG
			RETURN 1
		;落下/移動処理
		ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 171
			SELECTCASE FLAG:현M
				CASE 15
					CALL DUNGEON_WORP,FLAG:현M-1,FLAG:현X+26,FLAG:현Y+24
				CASE 18
					CALL DUNGEON_WORP,FLAG:현M,FLAG:현X-11,FLAG:현Y
				CASE 20
					CALL DUNGEON_WORP,FLAG:현M,FLAG:현X,FLAG:현Y+7
				CASE 21
					CALL DUNGEON_WORP,FLAG:현M,FLAG:현X,FLAG:현Y-7
				CASE 23
					CALL DUNGEON_WORP,FLAG:현M,FLAG:현X+21,FLAG:현Y+5
				CASE 24
					CALL DUNGEON_WORP,FLAG:현M+1,FLAG:현X-5,FLAG:현Y-14
				CASE 26
					;古城→古城前
					IF FLAG:현X == 8 && FLAG:현Y == 42
						CALL DUNGEON_WORP,13,4,3
					;古城→水中回廊
					ELSEIF FLAG:현X == 30 && FLAG:현Y == 5
						CALL DUNGEON_WORP,7,1,5
					;聖堂前へジャンプ
					ELSEIF FLAG:현X == 31 && FLAG:현Y == 5
						CALL DUNGEON_WORP,26,29,5
					;古城→小部屋の絵
					ELSEIF FLAG:현X == 39 && FLAG:현Y == 3
						CALL DUNGEON_WORP,27,2,13
					;古城→寝室の絵
					ELSEIF FLAG:현X == 39 && FLAG:현Y == 7
						CALL DUNGEON_WORP,32,16,3
					ENDIF
				CASE 27
					IF FLAG:현X == 2 && FLAG:현Y == 1
						CALL DUNGEON_WORP,27,10,2
					;小部屋の絵→古城
					ELSEIF FLAG:현X == 2 && FLAG:현Y == 14
						CALL DUNGEON_WORP,26,39,4
					ELSEIF FLAG:현X == 8 && FLAG:현Y == 1
						CALL DUNGEON_WORP,27,17,2
					ELSEIF FLAG:현X == 10 && FLAG:현Y == 1
						CALL DUNGEON_WORP,27,1,1
					;小部屋の絵→浸水牢獄
					ELSEIF FLAG:현X == 15 && FLAG:현Y == 13 
						SIF GETBIT(던전플래그:99:4,29)
							CALL DUNGEON_WORP,29,19,2
					ELSEIF FLAG:현X == 17 && FLAG:현Y == 1
						CALL DUNGEON_WORP,27,8,2
					;小部屋の絵→闘技場の絵
					ELSEIF FLAG:현X == 17 && FLAG:현Y == 13
						CALL DUNGEON_WORP,28,13,27
					ENDIF
				CASE 28
					;竜の間　下段→上段へ
					IF FLAG:현X == 8 && FLAG:현Y == 10
						CALL DUNGEON_WORP,28,9,3
					;闘技場の絵→小部屋の絵
					ELSEIF FLAG:현X == 13 && FLAG:현Y == 28
						CALL DUNGEON_WORP,27,16,13
					ELSE
						CALL DUNGEON_WORP,FLAG:현M,FLAG:현X,FLAG:현Y+7
					ENDIF
				CASE 29
					;浸水牢獄→吹き抜け階段2
					IF FLAG:현X == 3 && FLAG:현Y == 17
						CALL DUNGEON_WORP,30,6,1
					;浸水牢獄→小部屋の絵
					ELSEIF FLAG:현X == 20 && FLAG:현Y == 2
						CALL DUNGEON_WORP,27,16,13
					ENDIF
				CASE 30
					;変成の間へ
					IF FLAG:현X == 1 && FLAG:현Y == 4
						CALL DUNGEON_WORP,31,8,7
					;■個別落下処理（ワープに落ちるので場所をずらす）
					ELSEIF FLAG:현X == 4 && FLAG:현Y == 1
						CALL DUNGEON_WORP,29,3,18
					ELSEIF FLAG:현X == 11 && FLAG:현Y == 1
						CALL DUNGEON_WORP,29,2,18
					ELSEIF FLAG:현X == 18 && FLAG:현Y == 5
						CALL DUNGEON_WORP,29,1,21
					ELSEIF FLAG:현X == 19 && FLAG:현Y == 1
						CALL DUNGEON_WORP,29,2,18
					ELSEIF FLAG:현X == 22 && FLAG:현Y == 5
						CALL DUNGEON_WORP,29,5,21
					;■범위落下処理1（左上が2,18へ落ちるように）
					ELSEIF (FLAG:현X >= 3 && FLAG:현X <= 5) && (FLAG:현Y >= 2 && FLAG:현Y <= 4)
						CALL DUNGEON_WORP,29,FLAG:현X-1,FLAG:현Y+16
					ELSEIF (FLAG:현X >= 11 && FLAG:현X <= 13) && (FLAG:현Y >= 2 && FLAG:현Y <= 5)
						CALL DUNGEON_WORP,29,FLAG:현X-9,FLAG:현Y+16
					ELSEIF (FLAG:현X >= 19 && FLAG:현X <= 21) && (FLAG:현Y >= 2 && FLAG:현Y <= 4)
						CALL DUNGEON_WORP,29,FLAG:현X-17,FLAG:현Y+16
					ENDIF
				CASE 31
					IF FLAG:현X == 9 && FLAG:현Y == 7
						CALL DUNGEON_WORP,30,2,4
					ELSEIF (FLAG:현X >= 2 && FLAG:현X <= 8) && (FLAG:현Y >= 3 && FLAG:현Y <= 11)
						CALL DUNGEON_WORP,FLAG:현M,FLAG:현X,FLAG:현Y+12
					ENDIF
				CASE 32
					;ジャンプ
					IF FLAG:현X == 1 && FLAG:현Y == 8
						CALL DUNGEON_WORP,32,1,11
					;ジャンプ
					ELSEIF FLAG:현X == 1 && FLAG:현Y == 10
						CALL DUNGEON_WORP,32,1,7
					;屋上へ
					ELSEIF FLAG:현X == 2 && FLAG:현Y == 6
						CALL DUNGEON_WORP,33,6,2
					;ジャンプ
					ELSEIF FLAG:현X == 8 && FLAG:현Y == 9
						CALL DUNGEON_WORP,32,8,11
					;ジャンプ
					ELSEIF FLAG:현X == 9 && FLAG:현Y == 11
						CALL DUNGEON_WORP,32,9,9
					;古城へ
					ELSEIF FLAG:현X == 17 && FLAG:현Y == 3
						CALL DUNGEON_WORP,26,39,6
					ENDIF
				CASE 33
					;落下
					IF FLAG:현X == 6 && FLAG:현Y == 3
						CALL DUNGEON_WORP,32,1,6
					;落下
					ELSEIF FLAG:현X == 10 && FLAG:현Y == 3
						CALL DUNGEON_WORP,32,6,6
					ENDIF
				CASE 34
					;聖堂へ
					IF FLAG:현X == 1 && FLAG:현Y == 4
						CALL DUNGEON_WORP,26,20,5
					;魔界へ
					ELSE
						CALL DUNGEON_WORP,35,11,18
					ENDIF
				CASE 35
					;魔界　最深部へ
					IF FLAG:현X == 7 && FLAG:현Y == 1
						CALL DUNGEON_WORP,36,18,18
					;魔界門へ
					ELSEIF FLAG:현X == 12 && FLAG:현Y == 18
						CALL DUNGEON_WORP,34,3,4
					ENDIF
				CASE 36
					;通路
					IF FLAG:현X == 8 && FLAG:현Y == 14
						CALL DUNGEON_WORP,36,9,9
					;通路
					ELSEIF FLAG:현X == 9 && FLAG:현Y == 10
						CALL DUNGEON_WORP,36,7,14
					;心臓の間　上段へ
					ELSEIF FLAG:현X == 12 && FLAG:현Y == 7
						CALL DUNGEON_WORP,38,2,7
					;謁見の間へ
					ELSEIF FLAG:현X == 18 && FLAG:현Y == 1
						CALL DUNGEON_WORP,39,3,8
					;落下処理
					ELSEIF (FLAG:현X >= 14 && FLAG:현X <= 22) && (FLAG:현Y >= 2 && FLAG:현Y <= 8)
						CALL DUNGEON_WORP,FLAG:현M+1,FLAG:현X-13,FLAG:현Y
					;魔界へ
					ELSEIF FLAG:현X == 18 && FLAG:현Y == 19
						CALL DUNGEON_WORP,35,7,2
					ENDIF
				CASE 38
					;魔界　最深部へ
					IF FLAG:현X == 1 && FLAG:현Y == 7
						CALL DUNGEON_WORP,36,12,6
					;落下処理
					ELSEIF (FLAG:현X >= 2 && FLAG:현X <= 10) && (FLAG:현Y >= 1 && FLAG:현Y <= 8)
						CALL DUNGEON_WORP,FLAG:현M-2,FLAG:현X+12,FLAG:현Y
					ENDIF
				CASE 39
					;魔界　最深部へ
					IF FLAG:현X == 3 && FLAG:현Y == 9
						CALL DUNGEON_WORP,36,18,2
					ENDIF
			
			ENDSELECT
		ELSEIF DA:(FLAG:현X):(FLAG:현Y) == 11
			SIF FLAG:현M == 18 && (FLAG:현Y > 19 && FLAG:현Y < 25)
				CALL DUNGEON_WORP,FLAG:현M,FLAG:현X+11,FLAG:현Y
		ELSE
			CALL ENTER_DUNGEON_99_ORB,ARG
			RETURN 1
		ENDIF
	;==========
	;扉の処理
	;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
	;========
	;宝の処理
	;========
	CASE 3
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			;高低差レクチャー이벤트用に메시지フラグ
			CASE 100
				SIF 던전플래그:99:5 == 0
					던전플래그:99:5 = 1
				CALL TREASURE_99
				RETURN 1
			;後半に設置
			CASE 202,204,205
				SIF 던전플래그:99:1 <= 20
						RETURN 0
			CASEELSE
				CALL TREASURE_99
				RETURN 1
		ENDSELECT
		
		
	;========================
	;이벤트
	;========================
	CASE 4
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
		;---------
		;　吹き抜け階段 - 寝室
		;---------
			;■寝室　太陽の紋章先へ
			CASE 800
				IF GETBIT(던전플래그:99:4,9)
					CALL DUNGEON_WORP,11,11,1
				ENDIF
			;■闘技場　グリフォン(3)戦
			CASE 1403
				IF 던전플래그:99:1 == 25
					CALL MESSAGE_WINDOW_D, "", "＞　머리の中に誰かが囁きかけてくる "
					CALL MESSAGE_WINDOW_D, "", "『コロシアムに生贄を捧げよ/贄の儀は운命の輪へと道を繋ぐ』 "
					CALL MESSAGE_WINDOW_D, "", "＞　上空に稲아내が走り、再びグリフォンが마이(동방)い降りてきた "
					CALL MESSAGE_WINDOW_D, "", "＞　グリフォンが襲いかかってきた！ "
					
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL GIRFFON_3
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　片翼をもがれたグリフォンは中央の마법진の上へ倒れ伏す "
					CALL MESSAGE_WINDOW_D, "", "＞　すると마법진が輝き、鷲獅子の거체が宙に浮き/　　――空から振ってきた大柱が地面に縫い止めた "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「まさに魔검사スパーダ……いや、それ이상か」 "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「だが私もムンドゥス様に仕える身/　　　　　これでは終わらん」 "
					CALL MESSAGE_WINDOW_D, "", @"＞　もう勝負はついた。そう%CALLNAME:MASTER%は制止するが/　　グリフォンは止まる様子はない "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「偉大なる我らが主よ」 "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「我に힘を与え給え/　この者を倒す힘を！」 "
					CALL MESSAGE_WINDOW_D, "", "＞　血を吐きながら主へ呼びかける姿に呼応し、空へ三つの赤い光と뇌광が現れた "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「おお　ムンドゥス様」 "
					CALL MESSAGE_WINDOW_D, "ムンドゥス", "「グリフォン　失望したぞ/生かす値打ちもない」 "
					CALL MESSAGE_WINDOW_D, "", "＞　ムンドゥスの힘がグリフォンを襲い/グリフォンは断末魔の叫びとともに苦しみながら消滅してしまった…… "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					던전플래그:99:1 = 26
				ENDIF
		;---------
		;　古城・後編
		;---------
			CASE 2600
				IF 던전플래그:99:3 >= 18 && 던전플래그:99:5 < 8
					CALL MESSAGE_WINDOW_D, "", "＞　エリキサの影響を受けて/　　魔の波動が活性化している "
					CALL DUNGEON_WORP,34,2,4
				ELSEIF 던전플래그:99:3 >= 18 && 던전플래그:99:5 == 8
					CALL DUNGEON_WORP,34,2,4
				ELSE
				ENDIF
		ENDSELECT
	;=======
	;罠処理
	;=======
	CASE 5
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			;10％の데미지床(２階)
			CASE 2200,2201,2202,2203,2204,2206,2207,2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,2221,2222,2223,2224,2225,2226,2227,2228,2229,2230
				SIF 던전플래그:99:1 >= 25
					CALL DUNGEON_TRAP_HP,10
			CASE 2205,2208
				CALL DUNGEON_TRAP_HP,10
			CASE 2400,2401,2402,2403,2404,2405
				CALL DUNGEON_TRAP_HP,10
			CASE 2500,2501,2502,2503
				CALL DUNGEON_TRAP_HP,10
				;25％の毒床(３階)
;				CALL DUNGEON_TRAP_POISON,25
		ENDSELECT
		SELECTCASE FLAG:현M
			CASE 36
				CALL DUNGEON_TRAP_HP,10
		ENDSELECT
		RETURN 1

	;=======
	;플로어移動
	;=======
	CASE 6
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 300
				IF 던전플래그:99:1 >= 15
					RETURN 0
				ENDIF
			CASE 1300
				RETURN 0
			CASEELSE
				CALL STAIRS_99
				RETURN RESULT
		ENDSELECT
	CASE 7
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 1200
				IF 던전플래그:99:1 < 14
					RETURN 0
				ELSE
					CALL STAIRS_99
					RETURN RESULT
				ENDIF
			CASEELSE
			CALL STAIRS_99
			RETURN RESULT
		ENDSELECT
	;=======
	;出口
	;=======
	CASE 8
		CALL DUNGEON_EXIT
		RETURN 1
		
	;=======
	;이벤트2
	;=======
	CASE 9
		CALL ENTER_DUNGEON_99_ORB,ARG
		
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			;■開始地点　단테からの어드바이스
			CASE 0
				IF 던전플래그:99:5 == 0
					CALL MESSAGE_WINDOW_D, "단테", "「この島について教えておくことが一つあった」 "
					CALL MESSAGE_WINDOW_D, "단테", "「ここは老朽化が激しくてな、악마は補修作業なんざしちゃくれない」 "
					CALL MESSAGE_WINDOW_D, "단테", "「逆にそれを逆손に取って、至るところに악마が物を隠していることがあってな」 "
					CALL MESSAGE_WINDOW_D, "단테", "「へそくりならまだ可愛いんだが、鍵なんかの無視するわけにはいかないものもある」 "
					CALL MESSAGE_WINDOW_D, "단테", @"「さて%CALLNAME:MASTER%、クライミングは好きか？/손始めにこの先を登ってみな」 "
				ENDIF
			;■開始地点から1F玄関ホールへ移動
			CASE 1
				CALL DUNGEON_WORP,2,4,15
				;古城に初進入時に이벤트。フラグ99を1でなければ2にして登攀어드바이스を消す
				IF 던전플래그:99:5 == 0 || 던전플래그:99:5 == 2
					CALL MESSAGE_WINDOW_D, "", @"＞　古城へ侵入した/＞　崩れた箇所もあるものの、악마の気配はしない "
					CALL MESSAGE_WINDOW_D, "", @"＞　普通の異界とは勝손が違うのかもしれない/＞　%CALLNAME:MASTER%は気を引き締めて先へ進んだ…… "
					던전플래그:99:5 = 3
				ENDIF
			;■開始地点：上段　宝箱を取った後の단테の해설
			CASE 100
				IF 던전플래그:99:5 == 1
					CALL MESSAGE_WINDOW_D, "단테", "「とまあ、こういう塩梅だ」 "
					CALL MESSAGE_WINDOW_D, "단테", "「せっかくの프레젠트だ　有効活用してやれよ/なに、代金を請求されたら鉛玉で礼をしてやりゃ아이い」 "
					CALL MESSAGE_WINDOW_D, "단테", "「ただ、あまりがっつくと痛い눈見るのは女と同じだ/気をつけな」 "
					던전플래그:99:5 = 2
				ENDIF
			;■聖堂先の橋から海中通路へ強制移動
			CASE 203
				CALL DUNGEON_WORP,7,1,5
			;■海中通路帰還後、聖堂へ돌아간다
			CASE 204
				CALL DUNGEON_WORP,2,28,5
			;■아라스톨입수이벤트
			CASE 208
				IF 던전플래그:99:1 < 2
					CALL MESSAGE_WINDOW_D, "", "＞　고통に悶た女性のレリーフに/　　大검が突き立てられている "
					CALL MESSAGE_WINDOW_D, "", "＞　머리の中に誰かが囁きかけてくる "
					CALL MESSAGE_WINDOW_D, "", "『我が名は아라스톨』 "
					CALL MESSAGE_WINDOW_D, "", "『힘無き者はその心臓を贄とし/　　　　　我に永遠の복종を誓え』 "
					CALL MESSAGE_WINDOW_D, "", @"＞　声が聞こえるなり女性のレリーフが消え、大검が浮かび上がり/　　%CALLNAME:MASTER%へ突き立たんと迫ってきた！ "
					CALL MESSAGE_WINDOW_D, "단테", "「おっと、そいつはNGだ」/＞　コレも記憶通りなのだろう/　　단테は横から손を伸ばし、余裕を持って검を止める "
					CALL MESSAGE_WINDOW_D, "", "＞　意思ある魔검は不옷を訴えるようにその身に雷を纏い단테を焼くが/　　当の本人は物ともしていない様子だ "
					CALL MESSAGE_WINDOW_D, "", "＞　そのまま단테が검を振ってみせると/　　검は納得したかのように鎮まった "
					CALL MESSAGE_WINDOW_D, "단테", @"「オーケー、いい子だ。　%CALLNAME:MASTER%、こいつを使いな」 "
					CALL MESSAGE_WINDOW_D, "", "＞　손軽に渡される魔검　本人(？)も驚いたのか/しばらく後にピリピリと不옷を表明しだし」 "
					CALL MESSAGE_WINDOW_D, "단테", "「俺には馴染んだ獲物があるからな/そいつのオリジナルはこの島での戦いで使ってた。んだが」 "
					CALL MESSAGE_WINDOW_D, "단테", "「あ～……質に入れた後、元気に戦いを求めて旅立ったらしい、安心しろ」 "
					CALL MESSAGE_WINDOW_D, "", @"＞　つまり、質に入れられるよりマシだろう？　そういうことだ/　　검も不承不承感はあるが、ようやく%CALLNAME:MASTER%の손に馴染んだ/　　……仲良くなれそうだと、そう思う "
					CALL MESSAGE_WINDOW_D, "", "　　『我が名は아라스톨　今後とも　よろしく……』 "
					CALL GET_ITEMS,"아라스톨",1
					던전플래그:99:1 = 2
				ENDIF
			;■裁きの宝杖　입수後、扉の前で死神登場描写
			CASE 209
				;以降、적の레벨上昇
				IF 던전플래그:99:1 == 2 && 던전플래그:99:3 == 3
					CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%は扉の노부に손をかけたところで違和感を깨달음えた "
					CALL MESSAGE_WINDOW_D, "", @"＞　その違和感の元――上段にあった死神の絵をみやると/なんと絵の中から鎌を持った死神が出てきた！ "
					CALL MESSAGE_WINDOW_D, "", @"＞　浮遊し、壁をすり抜ける적の登場がより一層の困難を予感させる…… "
					던전플래그:99:1 = 3
					던전플래그:99:11 = 2
				ENDIF
			;■아라스톨이벤트後、단테と회화
			CASE 210
				IF 던전플래그:99:1 == 2 && 던전플래그:99:5 < 4
					CALL MESSAGE_WINDOW_D, "단테", "「魔具ってのは、元は巨大な악마が姿を変えたものだ」 "
					CALL MESSAGE_WINDOW_D, "단테", "「そいつはもちろんオリジナルじゃない/この異界が再現した存在なのは間違いがない。だが」 "
					CALL MESSAGE_WINDOW_D, "단테", "「贋作が真作に劣るなんて決まっちゃいないようだ/なかなかのガッツだぜ、そいつ」 "
					CALL MESSAGE_WINDOW_D, "", "＞　どうやら、自分が손にする魔검はレプ리카ということにはなるだろうが/　　遜色ない巨大な힘を秘めているようだ "
					CALL MESSAGE_WINDOW_D, "단테", "「ま、お前ならいつもと一緒さ/よく言われるんだろう？/お休みの際は악마に体を乗っ取られないようお気をつけて。ってな」 "
					CALL MESSAGE_WINDOW_D, "", "＞　단테はそう言いながらヒラヒラと손を振りながら歩みを進める/　　この魔具に相応しい主になる。どうやら楽しみが増えたらしい」 "
					던전플래그:99:5 = 4
				ENDIF
			;■古城入り口
			CASE 212
				;侵入地点　開始地点へ戻れるように설정
				CALL DUNGEON_WORP,0,2,11
			;■古城前　跳ね橋へ
			CASE 221
				CALL DUNGEON_WORP,13,4,3
	;=======
	;2F吹き抜け
	;=======
			;■2F吹き抜け　左上通路　行き　306へ
			CASE 305
				CALL DUNGEON_WORP,3,5,6
			;■2F吹き抜け　左上通路　戻り　305へ
			CASE 306
				CALL DUNGEON_WORP,3,1,5
	;=======
	;3F吹き抜け
	;=======
			;■吹き抜け　3F　
			CASE 407
				CALL DUNGEON_WORP,4,6,18
			;■吹き抜け　3F　
			CASE 408
				CALL DUNGEON_WORP,4,2,18
			;■吹き抜け　3F　
			CASE 409
				CALL DUNGEON_WORP,4,14,18
			;■吹き抜け　3F　
			CASE 410
				CALL DUNGEON_WORP,4,10,18
			;■複葉機の部屋　地下　전투이벤트
	;=======
	;複葉機の部屋地下
	;=======
			CASE 500
				IF 던전플래그:99:1 == 0
					CALL MESSAGE_WINDOW_D, "", "＞　待ち構えていたかのように、空間を割いて악마が襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL SET_ENEMY,7,[[キャラ:마카브르]],33,0,1
					NAME:(CHARANUM-1) = ブラッディーマリー
					CALLNAME:(CHARANUM-1) = ブラッディーマリー
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,8,[[キャラ:목없는라이더]],33,0,1
					NAME:(CHARANUM-1) = マリオネット
					CALLNAME:(CHARANUM-1) = マリオネット
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,9,[[キャラ:마카브르]],33,0,1
					NAME:(CHARANUM-1) = ブラッディーマリー
					CALLNAME:(CHARANUM-1) = ブラッディーマリー
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,10,[[キャラ:목없는라이더]],33,0,1
					NAME:(CHARANUM-1) = マリオネット
					CALLNAME:(CHARANUM-1) = マリオネット
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,11,[[キャラ:마카브르]],33,0,1
					NAME:(CHARANUM-1) = ブラッディーマリー
					CALLNAME:(CHARANUM-1) = ブラッディーマリー
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL BATTLE_START
					
					FLAG:선제공격플래그 = 0
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:인카운트율 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
					MONEY:99 += 100
					
					CALL MESSAGE_WINDOW_D, "", "＞　どこかを封じていた힘が消え去った気配がする…… "
					던전플래그:99:1 = 1
				ENDIF
			;■獅子の間2F　吹き抜け階段へ
			CASE 600
				CALL DUNGEON_WORP,8,13,3
	;=======
	;吹き抜け階段 - 寝室
	;=======
			;■獅子の間2Fへ
			CASE 807
				CALL DUNGEON_WORP,6,14,9
			;■吹き抜け階段　地下水路へ
			CASE 808
				CALL DUNGEON_WORP,10,1,11
			;■吹き抜け階段　脚を踏み外せば最下層へ
			CASE 800,801,813
				CALL DUNGEON_WORP,8,4,2
			CASE 802,806,811,815,818,821
				CALL DUNGEON_WORP,8,6,3
			CASE 809,810,816,819,820
				CALL DUNGEON_WORP,8,4,4
			;■寝室　太陽の紋章の扉先へ
			CASE 822
				CALL DUNGEON_WORP,11,12,1
			;■崩れた발場　跳躍
			CASE 824
				CALL DUNGEON_WORP,8,12,22
			;■ネロ・アンジェロ戦
			CASE 825
				IF 던전플래그:99:1 == 9
					CALL MESSAGE_WINDOW_D, "", @"＞　黒騎士と%CALLNAME:MASTER%達を模した악마達は/　　堂々と%CALLNAME:MASTER%達が降りてくるのを待っていた "
					CALL MESSAGE_WINDOW_D, "단테", "「再現体だろうが本人だろうが負けるのは主義じゃない/さあて、派손にいこうか！」　 "
					CALL MESSAGE_WINDOW_D, "", "＞　黒騎士達が襲いかかってきた！ "
					
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL NERO_1
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%達の投影体は힘尽き/　　この場には黒騎士が一人残された "
					CALL MESSAGE_WINDOW_D, "", "＞　黒騎士は膝を付いているが、いまだ闘志は失われていない "
					CALL MESSAGE_WINDOW_D, "", "＞　とはいえ劣勢は認めざるを得ないと判断したのだろう/　　こちらを強い眼差しで見つめたあと、退却していった "
					CALL MESSAGE_WINDOW_D, "단테", "「人数が増えても追い込みきれないか/……まあ、それでこそか」 "
					CALL MESSAGE_WINDOW_D, "", @"＞　何故か嬉しそうな단테を急かし/　　%CALLNAME:MASTER%は先へ進むことにした "
					CALL MESSAGE_WINDOW_D, "", "＞　ふと気配を感じ寝室を見やると、影の門番がいる/　　別個体なのだろうが、更に油断はできなくなったようだ "
					
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +200 "
					MONEY:99 += 200
					
					던전플래그:99:1 = 10
					던전플래그:99:11 = 3
				ENDIF
			CASE 826
				CALL DUNGEON_WORP,8,12,18
			;■吹き抜け階段　脚を踏み外せば最下層へ
			CASE 900,901
				CALL DUNGEON_WORP,8,4,2
			CASE 902,904,907
				CALL DUNGEON_WORP,8,6,3
			CASE 906
				CALL DUNGEON_WORP,8,4,4
	;=======
	;地下水道
	;=======
			;■シン・サイズ戦
			CASE 1000
				IF 던전플래그:99:1 < 12
					CALL MESSAGE_WINDOW_D, "", "＞　その場に발を踏み入れると、周囲を마력が囲み閉じ込められた "
					CALL MESSAGE_WINDOW_D, "", "＞　気配を感じ、水路の壁面を見ると/なぜか壁にかかっている骸뼈から滲み出るように死神が出現し、こちらへ迫ってくる "
					CALL MESSAGE_WINDOW_D, "", "＞　 シン・サイズ　が襲いかかってきた！ "
					
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL SET_ENEMY,9,[[キャラ:카마조츠]],50,0,1
					NAME:(CHARANUM-1) = シン サイズ
					CALLNAME:(CHARANUM-1) = シン サイズ
					CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CFLAG:(CHARANUM-1):ＭＰ보정 += 5000
					ABL:(CHARANUM-1):스킬1 = 2 ;히트フェイブ
					ABL:(CHARANUM-1):스킬2 =304 ;메가클로
					ABL:(CHARANUM-1):스킬3 =508 ;스쿤・다
					ABL:(CHARANUM-1):스킬4 =2013 ;흡혈
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
					MONEY:99 += 100
					
					던전플래그:99:1 = 12
				ENDIF
			;■吹き抜け階段 - 寝室へ돌아간다
			CASE 1002
				CALL DUNGEON_WORP,8,3,4
	;=======
	;太陽の紋章先
	;=======
			CASE 1100
				CALL DUNGEON_WORP,11,3,7
			CASE 1101
				CALL DUNGEON_WORP,11,10,1
			CASE 1102
				CALL DUNGEON_WORP,11,4,1
			CASE 1103
				CALL DUNGEON_WORP,8,3,15
			CASE 1104
				IF 던전플래그:99:1 < 13
					CALL MESSAGE_WINDOW_D, "", @"＞　先へ進もうとする%CALLNAME:MASTER%達の前に、再び溶岩蜘蛛が立ちはだかった "
					CALL MESSAGE_WINDOW_D, "팬텀", "「休み時間は終わったぜ　坊や！」 "
					CALL MESSAGE_WINDOW_D, "팬텀", "「아귀の遊びはもうやめだ」/「やりたい放題やってやる！」 "
					CALL MESSAGE_WINDOW_D, "", "＞　꼬리を眼前の床に叩きつけ、気迫は十分な様子だが/단테はなおも余裕を崩さない "
					CALL MESSAGE_WINDOW_D, "단테", "「やれよ/マジな遊びをしようぜ！」 "
					CALL MESSAGE_WINDOW_D, "", "＞　팬텀　が襲いかかってきた！ "
					
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL PHANTOM_2
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					
					CALL MESSAGE_WINDOW_D, "", "＞　최후의일격が決まり、大蜘蛛は断末魔を上げ吹き飛ぶ/　　着地点にあったステンドグラスがその荷重に耐えられず、割れて大蜘蛛と共に階下へ降り注ぎ/　　――大蜘蛛は直下にある騎馬兵の像、その掲げた창に貫かれた "
					CALL MESSAGE_WINDOW_D, "", @"＞　大蜘蛛はもがき苦しみながらも、見下ろしている%CALLNAME:MASTER%達/　　――特に단테を睨み続けている "
					CALL MESSAGE_WINDOW_D, "팬텀", "「お前達　ただの인간ではないな？」/「特にそこの男、キサマ何者だ」 "
					CALL MESSAGE_WINDOW_D, "팬텀", "「まさか　伝説の魔검사スパーダ？」/「そんなバカな」 "
					CALL MESSAGE_WINDOW_D, "", "＞　단테の姿が、彼の父に重なったのだろう/　　악마は驚愕の言葉を残し、消滅した "
					CALL MESSAGE_WINDOW_D, "단테", "「歳をくって、よりダンディになっちまったか？　その息子단테だ」/「もうリベンジはなしだ　そのままネンネしてな」 "
					CALL MESSAGE_WINDOW_D, "", "＞　言葉を贈り、一行は先へ進んでゆく/　　その姿を、階下から見ている影が居ることには気が付かずにいた…… "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					던전플래그:99:1 = 13
				ENDIF
			CASE 1105
				CALL DUNGEON_WORP,11,3,1
			CASE 1108
				SIF 던전플래그:99:3 == 9
					CALL DUNGEON_WORP,12,3,1
	;=======
	;古城前　跳ね橋
	;=======
			;■古城へ돌아간다
			CASE 1300
				IF !GETBIT(던전플래그:99:4,23)
					CALL DUNGEON_WORP,2,8,41
				ELSE
					CALL DUNGEON_WORP,26,8,41
				ENDIF
			CASE 1302
				IF 던전플래그:99:1 < 16
					CALL MESSAGE_WINDOW_D, "", "＞　跳ね橋を渡り終えたところで、跳ね橋が再度上がってしまう/　　古城に돌아간다には、何らかの方法を探すしかないようだ "
					던전플래그:99:1 = 16
				ELSEIF !GETBIT(던전플래그:99:4,23)
					CALL MESSAGE_WINDOW_D, "", "＞　跳ね橋は上がってしまい、渡ることができない "
				ELSE
				ENDIF
			CASE 1303
				IF 던전플래그:99:1 >= 16
					CALL MESSAGE_WINDOW_D, "", "＞　異界の綻びがある/　　ここから帰還できそうだが、どうしようか…… "
					CALL INPUT_YN_D, "帰還する", "まだ탐색を続けよう"
					IF !RESULT
						CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%達は自室へと帰還した "
						FLAG:탈출 = 1
						RETURN 1
					ENDIF
				ENDIF
	;=======
	;闘技場
	;=======
			;ブレイド出現
			CASE 1400
				IF 던전플래그:99:11 < 5
					CALL MESSAGE_WINDOW_D, "", "＞　広場へ발を踏み入れると、地面からリザードマンのような/　　ナリの악마が飛び出してきた "
					CALL MESSAGE_WINDOW_D, "", "＞　更に탐색の困難が増したようだ…… "
					던전플래그:99:11 = 5
				ENDIF
			;グリフォン戦
			CASE 1401
				IF 던전플래그:99:1 == 18
					CALL MESSAGE_WINDOW_D, "", "＞　急に風が強くなり、空に雷鳴が響き始める/　　雷が集まり光を放つと、そこには巨大な鷲獅子が出現していた "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「貴様か」 "
					CALL MESSAGE_WINDOW_D, "グリフォン", "「ムンドゥス様に楯突く/スパーダの息子というのは」 "
					CALL MESSAGE_WINDOW_D, "단테", "「消えなトリ머리/　それとも　痛い눈みるか？」 "
					CALL MESSAGE_WINDOW_D, "", "＞　グリフォンが襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL GIRFFON_1
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　不利を悟ったか、大鷲獅子は飛び去っていった…… "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					던전플래그:99:1 = 19
				ENDIF
			;山岳地へ移動
			CASE 1402
				CALL DUNGEON_WORP,23,3,20
			;フェティッシュ出現
			CASE 1403
				IF 던전플래그:99:11 < 6
					CALL MESSAGE_WINDOW_D, "", "＞　その場に脚を踏み入れると、炎を纏った무기を持った人形が現れた "
					CALL MESSAGE_WINDOW_D, "", "＞　更に탐색の困難が増したようだ…… "
					던전플래그:99:11 = 6
				ENDIF
			;霧深き渓谷へ移動
			CASE 1404
				CALL DUNGEON_WORP,16,4,26
	;=======
	;闘技場
	;=======
			CASE 1500
				SIF 던전플래그:99:1 < 17
					CALL DUNGEON_WORP,14,32,27
			CASE 1502
				IF 던전플래그:99:1 < 18
					CALL MESSAGE_WINDOW_D, "", "＞　一対の토시が保管されている "
					CALL MESSAGE_WINDOW_D, "", "＞　台座に碑文が刻まれている "
					CALL MESSAGE_WINDOW_D, "", "『我が名は이프리트』 "
					CALL MESSAGE_WINDOW_D, "", "『我を눈깨달음めさせる愚かなる者よ/지옥의업화をその身をもって知れ』 "
					CALL MESSAGE_WINDOW_D, "", @"＞　声が響くとともに、保管されていた토시が宙を마이(동방)い/――そのまま、%CALLNAME:MASTER%の팔へ装着されてしまう "
					CALL MESSAGE_WINDOW_D, "", "＞　すると토시から마력と共に炎が溢れ出し/　　あっというまにその身を包み込もうと燃え広がった！ "
					CALL MESSAGE_WINDOW_D, "단테", @"「%CALLNAME:MASTER%っ、根比べだ/　お前さんのガッツをそいつに見せてやれ！」 "
					CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%は己の保有するマグネタイトを이용し、이프리트に抗い/　　見事、抑え込むことに성공する "
					CALL MESSAGE_WINDOW_D, "단테", "「ナイスガッツだ/　見てみろよ、そいつも満更でもなさそうだ」 "
					CALL MESSAGE_WINDOW_D, "", @"＞　言われてみれば、이프리트は마력の炎で己を示しながらも/　　%CALLNAME:MASTER%によく馴染んでいる "
					CALL MESSAGE_WINDOW_D, "", @"＞　寡黙な印象を受ける頼もしい토시を新しい供に/　　%CALLNAME:MASTER%は先を急いだ "
					CALL GET_ITEMS,"이프리트",1
					던전플래그:99:1 = 18
				ENDIF
	;=======
	;霧深き渓谷
	;=======
			CASE 1600
				IF 던전플래그:99:9 == 2
					CALL DUNGEON_WORP,17,9,9
				ELSE
					던전플래그:99:9 = 0
					CALL DUNGEON_WORP,16,4,26
				ENDIF
			CASE 1601
				IF 던전플래그:99:9 == 1
					CALL DUNGEON_WORP,17,9,9
				ELSE
					던전플래그:99:9 = 0
					CALL DUNGEON_WORP,16,4,26
				ENDIF
			CASE 1602
				CALL DUNGEON_WORP,14,2,30
	;=======
	;성배堂前
	;=======
			CASE 1700
				CALL DUNGEON_WORP,18,5,23
			CASE 1701
				IF 던전플래그:99:1 < 20
					CALL MESSAGE_WINDOW_D, "", @"＞　聖堂へ進もうとする%CALLNAME:MASTER%の前に、大蜘蛛が2体立ちはだかる "
					CALL MESSAGE_WINDOW_D, "", "＞　あの팬텀程ではないが、こちらも無視するには難しい相手のようだ…… "
					CALL MESSAGE_WINDOW_D, "", "＞　사이클롭스が2体、襲いかかってきた！ "
					
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL SET_ENEMY,8,[[キャラ:츠치구모]],55,0,1
					NAME:(CHARANUM-1) = 사이클롭스
					CALLNAME:(CHARANUM-1) = 사이클롭스
					;CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,10,[[キャラ:츠치구모]],55,0,1
					NAME:(CHARANUM-1) = 사이클롭스
					CALLNAME:(CHARANUM-1) = 사이클롭스
					;CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
					MONEY:99 += 100
					던전플래그:99:1 = 20
				ENDIF
			CASE 1702
				던전플래그:99:9 = 0
				CALL DUNGEON_WORP,16,4,26
	;=======
	;성배堂
	;=======
			CASE 1800
				CALL DUNGEON_WORP,19,2,11
			CASE 1801
				CALL DUNGEON_WORP,18,9,17
			CASE 1802
				CALL DUNGEON_WORP,18,5,23
			CASE 1803
				CALL DUNGEON_WORP,18,17,3
			CASE 1804
				CALL DUNGEON_WORP,18,14,11
			CASE 1805
				CALL DUNGEON_WORP,17,9,5
	;=======
	;海賊船へ
	;=======
			CASE 1900,1901
				CALL DUNGEON_WORP,20,16,23
			CASE 1902
				CALL DUNGEON_WORP,18,5,4
	;=======
	;海賊船　船底
	;=======
			CASE 2000
				CALL DUNGEON_WORP,20,19,8
			CASE 2001
				CALL DUNGEON_WORP,20,8,17
			;船長室へ
			CASE 2002
				SIF 던전플래그:99:1 >= 24
					CALL DUNGEON_WORP,21,3,4
			CASE 2003
				CALL DUNGEON_WORP,20,17,1
			CASE 2004
				CALL DUNGEON_WORP,20,10,3
			CASE 2005
				CALL DUNGEON_WORP,20,19,10
			CASE 2006
				IF 던전플래그:99:1 >=24
					CALL DUNGEON_WORP,22,3,3
				ELSE
					CALL DUNGEON_WORP,19,4,2
				ENDIF
	;=======
	;海賊船　船上
	;=======
			CASE 2100
				IF 던전플래그:99:1 == 22
					CALL MESSAGE_WINDOW_D, "", "＞　順調に船が進んでいるところに、再びグリフォンが再び現れる "
					CALL MESSAGE_WINDOW_D, "", "＞　鷲獅子が날개ばたくと灯火がかき消され、船が止まってしまった "
					CALL MESSAGE_WINDOW_D, "", "＞　どうやら、グリフォンをなんとかしないとこれ이상は進めないようだ "
					CALL MESSAGE_WINDOW_D, "", "＞　グリフォンが襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL GIRFFON_2
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　不利を悟ったか、大鷲獅子は飛び去っていった…… "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					던전플래그:99:1 = 23
					CALL MESSAGE_WINDOW_D, "", "＞　グリフォンを撃退することに성공した "
					CALL MESSAGE_WINDOW_D, "", "＞　鷲獅子が飛び去ると再び火が灯り、船が進み始める "
					CALL MESSAGE_WINDOW_D, "", "＞　また、船長室の方から何かが動く音が聞こえた…… "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					SETBIT 던전플래그:99:4,14
				ENDIF
			CASE 2101
				CALL DUNGEON_WORP,20,6,4
	;=======
	;漂着地
	;=======
			CASE 2200,2201
				CALL DUNGEON_WORP,20,16,23
	;=======
	;山岳地
	;=======
			CASE 2300
				CALL DUNGEON_WORP,23,30,4
			CASE 2301
				CALL DUNGEON_WORP,23,23,17
			CASE 2302
				CALL DUNGEON_WORP,23,9,6
			CASE 2303
				CALL DUNGEON_WORP,23,26,14
			CASE 2304
				CALL DUNGEON_WORP,23,21,25
			CASE 2305
				CALL DUNGEON_WORP,14,40,20
			CASE 2306
				CALL DUNGEON_WORP,23,17,16
	;=======
	;古城・後編
	;=======
		;霊石・エリキサ입수した帰還時　寝室の絵出現
			CASE 2600
				IF 던전플래그:99:3 == 18 && !GETBIT(던전플래그:99:4,32)
					CALL MESSAGE_WINDOW_D, "", "＞　エリキサがもう一方の絵に強く反応を示している "
					SETBIT 던전플래그:99:4,32
				ENDIF
		;트리슈合流・리퍼헬멧입수
			CASE 2601
				IF 던전플래그:99:5 < 6
					CALL MESSAGE_WINDOW_D, "", @"＞　再び古城へ戻ってきた%CALLNAME:MASTER%達を、一人の女性が「おかえりなさい」と出迎えた "
					CALL MESSAGE_WINDOW_D, "트리슈", @"「貴方が%CALLNAME:MASTER%ね？/　단테から聞いてるわ、彼に勝った遊び友達」"
					CALL MESSAGE_WINDOW_D, "", "＞　트리슈は손に持つ白いテンガロンハットを弄りつつ/　「彼、嬉しそうに喋ってたわよ」と告げる "
					CALL MESSAGE_WINDOW_D, "단테", "「Hey,間違えるなよ。負けちゃいない、よくて引き分けだ」/　そうだろう？　と負けず嫌いが主張するが、彼女は慣れた様子であしらっている"
					CALL MESSAGE_WINDOW_D, "트리슈", "「その辺りはあとで仲良く相談してちょうだい/　私もこことは縁が深くてね。遅れちゃったけど、同行させてもらうわね」"
					SIF FINDCHARA_B([[キャラ:버질]]) == 2
						CALL MESSAGE_WINDOW_D, "", "「お互い獲物を譲る気は無いでしょうし、仲良くやりましょ？」/＞　彼女は何故か눈立たぬように黙り込んでいる버질にもにこやかに声をかけている/　　再現はされていないようだが、彼女もまた말렛섬（島）の関係者ということなのだろう "
					CALL MESSAGE_WINDOW_D, "", @"＞　そして단테の忘れ物だから有効活用するといい、と%CALLNAME:MASTER%に告げて모자を손渡した "
					CALL MESSAGE_WINDOW_D, "트리슈", "「デビルハンター　트리슈よ　今後ともヨロシク？」"
					CALL MESSAGE_WINDOW_D, "", "＞　트리슈이(가) 동료가 되었다/　　리퍼헬멧　を입수した "
					SIF FINDCHARA_B([[キャラ:트리쉬(DMC)]]) == -1
						CALL ADD_NEW_COMPANION,3505,500
					CALL GET_ITEMS,"리퍼헬멧",1
					던전플래그:99:5 = 6
				ENDIF
	;=======
	;闘技場の絵
	;=======
		;ネロ・アンジェロ(3)戦종료後、浸水牢獄の絵出現
			CASE 2700
				IF 던전플래그:99:1 == 30 && !GETBIT(던전플래그:99:4,29)
					CALL MESSAGE_WINDOW_D, "", "＞　闘技場の部屋とは反対側に、牢獄の絵が出現した "
					SETBIT 던전플래그:99:4,29
				ENDIF
	;=======
	;闘技場の絵
	;=======
		;ドリーグ설명
			CASE 2802
				IF 던전플래그:99:5 < 7
					CALL MESSAGE_WINDOW_D, "", "＞　部屋へ발を踏み入れると、奥の広間に飾られている竜の뼈の標本が動き出した！ "
					CALL MESSAGE_WINDOW_D, "", "＞　どうやら악마が憑依しているらしく　こちらへ적意を向けてきている/　　何かしら対処をしなくてはいけないだろう‥‥‥ "
					던전플래그:99:5 = 7
				ENDIF
		;転移（小部屋の絵へ）
			CASE 2805
				SIF 던전플래그:99:1 >= 30
					CALL DUNGEON_WORP,27,16,13
		;フロスト出現
			CASE 2806
				IF 던전플래그:99:11 < 8
					CALL MESSAGE_WINDOW_D, "", @"＞　扉へ손をかけようとしたところ　%CALLNAME:MASTER%は背後に気配を感じ振り返った "
					CALL MESSAGE_WINDOW_D, "", @"＞　其れは闘技場の壁の上で%CALLNAME:MASTER%達を観察しており/　　눈が合うと周囲に冷気を漂わせ　身軽に飛び降りこちらへ向かってくる "
					CALL MESSAGE_WINDOW_D, "", "＞　どうやら侮れない적のようだ　탐색は一層困難を増してゆく‥‥‥ "
					던전플래그:99:11 = 8
				ENDIF
		;ネロ・アンジェロ(3)
			CASE 2807
				IF 던전플래그:99:1 < 30
					CALL MESSAGE_WINDOW_D, "", @"＞　視線の先に、何度も見た背中が%CALLNAME:MASTER%達を待っていた "
					CALL MESSAGE_WINDOW_D, "", "＞　ネロ・アンジェロは망토を翻し、こちらを向き直って검を抜く "
					;PTに鬼ぃちゃんIN
					IF FINDCHARA_B([[キャラ:버질]]) == 2
						CALL MESSAGE_WINDOW_D, "단테", "「相変わらずいいガッツだ/　あんたもそう思うだろ？」 "
						CALL MESSAGE_WINDOW_D, "버질", "「‥‥皮肉のつもりか？」/＞　버질は苦虫を噛み潰したかのような表情だ "
						CALL MESSAGE_WINDOW_D, "단테", "「まさか！/あの状況でも曲がってないってのを純粋に称賛してるのさ」 "
						CALL MESSAGE_WINDOW_D, "", "＞　兄弟の掛け合いを他所に、ネロ・アンジェロは地面へ검を突き刺し/　　両손を交差させて힘を개방してゆく "
						CALL MESSAGE_WINDOW_D, "", "＞　――そこには、버질の顔をした魔검사本当の姿があった/　　魔검사は再び검を取り、こちらへ검気を向けてくる "
						CALL MESSAGE_WINDOW_D, "버질", "「ぬかせ。/ならば本物との差を見せてやる」 "
					;PTにいないけど鬼ぃちゃん加入済み
					ELSEIF FINDCHARA_B([[キャラ:버질]]) == 1 || FINDCHARA_B([[キャラ:버질]]) == 12
						CALL MESSAGE_WINDOW_D, "단테", "「相変わらずいいガッツだ/　あんたもそう思うだろ？」 "
						CALL MESSAGE_WINDOW_D, "", @"＞　確かにこの魔검사からは、他の악마にはない힘への執念を%CALLNAME:MASTER%も感じていた "
						CALL MESSAGE_WINDOW_D, "단테", "「だが、ラストステージだ。/　見てりゃわかるが、今までと同じと思ってたら――」 "
						CALL MESSAGE_WINDOW_D, "", "＞　そう告げる단테の視線の先では、ネロ・アンジェロが両손を交差させて힘を개방している "
						CALL MESSAGE_WINDOW_D, "", "＞　暴風を伴い、本来の힘を개방させた魔검사/　　その顔は、今はいない隣の男の兄のものであった "
						CALL MESSAGE_WINDOW_D, "단테", "「あっという間に首と몸통がさよなら、だ。/　さあて、ラストダンスも派손にいこうか！」 "
					ELSE
						CALL MESSAGE_WINDOW_D, "단테", "「相変わらずいいガッツだ/　あんたもそう思うだろ？」 "
						CALL MESSAGE_WINDOW_D, "", @"＞　確かにこの魔검사からは、他の악마にはない힘への執念を%CALLNAME:MASTER%も感じていた "
						CALL MESSAGE_WINDOW_D, "단테", "「だが、ラストステージだ。/　感じてるだろうが、今までと同じと思ってたら――」 "
						CALL MESSAGE_WINDOW_D, "", "＞　そう告げる단테の視線の先では、ネロ・アンジェロが両손を交差させて힘を개방している "
						CALL MESSAGE_WINDOW_D, "", "＞　暴風を伴い、本来の힘を개방させた魔검사/　　その顔は、どこか隣の男を思わせるものだ "
						CALL MESSAGE_WINDOW_D, "단테", "「あっという間に首と몸통がさよなら、だ。/　さあて、ラストダンスも派손にいこうか！」 "
					ENDIF
					CALL MESSAGE_WINDOW_D, "", "＞　ネロ・アンジェロが襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL NERO_3
					
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　全힘を振り絞りなお敗れた魔검사は/　　声もなく膝から崩れ落ち、幻のごとく消えていった‥‥‥ "
					IF FINDCHARA_B([[キャラ:버질]]) == 2
						CALL MESSAGE_WINDOW_D, "", "＞　おそらく過去の己だったのだろう魔검사へ、自ら止めを刺した버질/　　その技の冴えに、단테が横で입笛を鳴らしている "
						CALL MESSAGE_WINDOW_D, "버질", "「フン‥‥‥認めよう。/　　確かに俺は一度ムンドゥスに敗れ、傀儡と化した」 "
						IF GETCHARA([[キャラ:버질]]) > -1 &&(IS_LOVER(GETCHARA([[キャラ:버질]])) || TALENT:(GETCHARA([[キャラ:버질]])):신뢰 || TALENT:(GETCHARA([[キャラ:버질]])):동료 || TALENT:(GETCHARA([[キャラ:버질]])):맹우)
							CALL MESSAGE_WINDOW_D, "버질", @"「――いい機会だ。/　　%CALLNAME:MASTER%、側で観ているがいい」 "
							CALL MESSAGE_WINDOW_D, "버질", "「今の俺は、もはやヤツなぞ眼中にない。その証明を見せてやる」 "
						ELSE
							CALL MESSAGE_WINDOW_D, "버질", "「――残してやるつもりはない。/　　俺がヤツを狩る様を、성인しく観ているがいい」 "
						ENDIF
					ELSEIF FINDCHARA_B([[キャラ:버질]]) == 1
						CALL MESSAGE_WINDOW_D, "단테", "「お疲れさん。本人相手よりは流石に譲るが、최고のダンスを楽しめたろ？ "
						CALL MESSAGE_WINDOW_D, "", "＞　確かに、闘技場で검を交えたあのときよりはマシではあるが/　　楽しめたかどうかはコメントを控えさせていただこう "
						CALL MESSAGE_WINDOW_D, "단테", "「そうか？　まあ、ここまでくればもう一息だ/　　アトラクションは最後まで楽しまにゃ損だぜ」 "
						CALL MESSAGE_WINDOW_D, "", @"＞　楽しむかは別として、ここまで来たらやりきるしか無いだろう/　　%CALLNAME:MASTER%達は先へ進むことにした "
					ELSE
						CALL MESSAGE_WINDOW_D, "단테", "「お疲れさん。本人相手と比べると流石に譲るんだが/　こっちも최고のダンスを楽しめたろ？」 "
						CALL MESSAGE_WINDOW_D, "", "＞　その입ぶりから　恐らく該当の人物はまだ存命で/　あれ이상の技の冴えであることは間違いないようだ‥‥‥ "
						CALL MESSAGE_WINDOW_D, "단테", "「もしかしたら、いつかお前さんとこにも遊びに来るかもしれないしな、깨달음えといて損はないぜ/　おいおい、なに渋い顔してるんだ？」 "
						CALL MESSAGE_WINDOW_D, "", "＞　これもこの악마狩人と縁ができた결과として受け入れるしか無いようだ‥‥‥/　　ひとまず先のことは置いておき、今は先に進むこととした "
					ENDIF
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +1500 "
						MONEY:99 += 1500
					던전플래그:99:1 = 30
				ENDIF
	;=======
	;浸水牢獄
	;=======
		;전투
			CASE 2900
				IF !GETBIT(던전플래그:99:4,30)
					CALL MESSAGE_WINDOW_D, "", @"＞　中央まで泳いで進んだ%CALLNAME:MASTER%達を、壁をすり抜け死神が囲む/　　やり過ごすのは불可能のようだ "
					CALL MESSAGE_WINDOW_D, "", "＞　シン シザーズが襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL SET_ENEMY,8,[[キャラ:그르르]],80,0,1
					NAME:(CHARANUM-1) = シン シザーズ
					CALLNAME:(CHARANUM-1) = シン シザーズ
					;CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,9,[[キャラ:그르르]],80,0,1
					NAME:(CHARANUM-1) = シン シザーズ
					CALLNAME:(CHARANUM-1) = シン シザーズ
					;CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,10,[[キャラ:그르르]],80,0,1
					NAME:(CHARANUM-1) = シン シザーズ
					CALLNAME:(CHARANUM-1) = シン シザーズ
					;CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　死神を退けると、壁が一部消え通路が現れた "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +100 "
					MONEY:99 += 100
					SETBIT 던전플래그:99:4,30
				ENDIF
	;=======
	;吹き抜け階段
	;=======
			CASE 3000
				CALL DUNGEON_WORP,30,13,1
			CASE 3001
				CALL DUNGEON_WORP,29,2,17
			CASE 3002
				CALL DUNGEON_WORP,30,21,1
			CASE 3003
				CALL DUNGEON_WORP,30,2,1
			CASE 3004
				CALL DUNGEON_WORP,30,10,2
			CASE 3005
				CALL DUNGEON_WORP,30,14,5
	;=======
	;変成の間
	;=======
			CASE 3100
				CALL DUNGEON_WORP,31,8,3
			CASE 3101
				;나이트메어(2)戦
				IF 던전플래그:99:1 == 31
					CALL MESSAGE_WINDOW_D, "", "＞　哲学者の卵を変成させているのを嗅ぎつけたのか、またも地面から나이트메어が湧き出した "
					CALL MESSAGE_WINDOW_D, "", "＞　まだ変成は終わりそうにない/　　ここで邪魔をされるわけにはいかないようだ "
					CALL MESSAGE_WINDOW_D, "", "＞　나이트메어が襲いかかってきた！ "
					SETBIT 던전플래그:99:8,4
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CALL NIGTHMARE
					
					CALL GIRFFON_3
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　나이트메어は叫びとともに蒸発するように消えていった‥‥‥ "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +500 "
					MONEY:99 += 500
					CLEARBIT 던전플래그:99:8,4
					던전플래그:99:1 = 32
				;霊石 エリキサー입수
				ELSEIF 던전플래그:99:3 >= 18
					CALL DUNGEON_WORP,27,16,13
				ENDIF
			CASE 3102
				CALL DUNGEON_WORP,31,8,8
			CASE 3103
				CALL DUNGEON_WORP,31,8,11
	;=======
	;寝室～鏡の世界
	;=======
		;賢者の石
			CASE 3200
				IF 던전플래그:99:3 < 19
					CALL MESSAGE_WINDOW_D, "", "【賢者の石】/＞　魔界への門を開く鍵の役割を果たす "
					CALL MESSAGE_WINDOW_D, "", @"＞　賢者の石を입수すると、3体の이형が%CALLNAME:MASTER%達を取り囲んだ "
					CALL MESSAGE_WINDOW_D, "", "＞　歪な人の머리部、발の代わりに人の손がある四발の짐승が不気味な笑い声を上げる "
					CALL MESSAGE_WINDOW_D, "", "＞　ノーバディが襲いかかってきた！ "
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL SET_ENEMY,8,[[キャラ:키메라]],80,0,1
					NAME:(CHARANUM-1) = ノーバディ
					CALLNAME:(CHARANUM-1) = ノーバディ
					ABL:(CHARANUM-1):스킬1 = 305 ;아이언클로
					ABL:(CHARANUM-1):스킬2 = 2034 ;만마의난무
					ABL:(CHARANUM-1):스킬3 = 2005 ;자폭
					ABL:(CHARANUM-1):스킬4 = 2406 ;이악물기
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,9,[[キャラ:키메라]],80,0,1
					NAME:(CHARANUM-1) = ノーバディ
					CALLNAME:(CHARANUM-1) = ノーバディ
					ABL:(CHARANUM-1):스킬1 = 305 ;아이언클로
					ABL:(CHARANUM-1):스킬2 = 2034 ;만마의난무
					ABL:(CHARANUM-1):스킬3 = 2005 ;자폭
					ABL:(CHARANUM-1):스킬4 = 2406 ;이악물기
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL SET_ENEMY,10,[[キャラ:키메라]],80,0,1
					NAME:(CHARANUM-1) = ノーバディ
					CALLNAME:(CHARANUM-1) = ノーバディ
					ABL:(CHARANUM-1):스킬1 = 305 ;아이언클로
					ABL:(CHARANUM-1):스킬2 = 2034 ;만마의난무
					ABL:(CHARANUM-1):스킬3 = 2005 ;자폭
					ABL:(CHARANUM-1):스킬4 = 2406 ;이악물기
					CALL SYNC_STATUS, (CHARANUM-1)
					CALL HEALTH_CHARA, (CHARANUM-1)
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +300 "
					MONEY:99 += 300
					던전플래그:99:3 = 19
					던전플래그:99:11 = 9
				ENDIF
	;=======
	;魔界　生贄の間
	;=======
		;나이트메어(3)戦
			CASE 3500
				IF !GETBIT(던전플래그:99:4,34)
					CALL MESSAGE_WINDOW_D, "", "＞　広間の中央へ발を踏み入れると　周囲を마력の壁が取り囲み/　　再び나이트메어が湧き出てきた "
					CALL MESSAGE_WINDOW_D, "", "＞　再現しきれなかったのか、ぼんやりとした/　　おそらくは女性型だろう幻影体を連れている "
					CALL MESSAGE_WINDOW_D, "", "＞　敗北が重なり、軟体の動きも鈍いようだ/　　もう一息といったところだろうか "
					CALL MESSAGE_WINDOW_D, "", "＞　나이트메어が襲いかかってきた！ "
					SETBIT 던전플래그:99:8,4
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL NIGTHMARE
					
					CALL TORISH_ILLUSION
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
					
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　나이트메어はついにコアを砕かれ、断末魔と共に溶けていった‥‥‥ "
					CALL MESSAGE_WINDOW_D, "", "＞　レッドオーブ +1000 "
					MONEY:99 += 1000
					CLEARBIT 던전플래그:99:8,4
					던전플래그:99:1 = 33
					SETBIT 던전플래그:99:4,34
				ENDIF
	;=======
	;魔界　最深部
	;=======
		;仕掛け2起動後　移動処理
			CASE 3600
				SIF GETBIT(던전플래그:99:4,37)
					CALL DUNGEON_WORP,36,9,1
			CASE 3601
				SIF GETBIT(던전플래그:99:4,37)
					CALL DUNGEON_WORP,36,12,3
		;仕掛け1起動後　移動処理
			CASE 3603
				SIF GETBIT(던전플래그:99:4,36)
					CALL DUNGEON_WORP,36,4,2
		;心臓稼働
			CASE 3607
				SIF GETBIT(던전플래그:99:4,38)
					CALL DUNGEON_WORP,36,18,3
		;移動処理のみ
			CASE 3602
				CALL DUNGEON_WORP,36,20,2
			CASE 3604
				CALL DUNGEON_WORP,36,6,6
			CASE 3605
				CALL DUNGEON_WORP,36,16,2
			CASE 3606
				CALL DUNGEON_WORP,36,8,4
			CASE 3608
				CALL DUNGEON_WORP,36,21,4
			CASE 3609
				CALL DUNGEON_WORP,36,15,5
			CASE 3610
				CALL DUNGEON_WORP,36,16,7
			CASE 3611
				CALL DUNGEON_WORP,36,20,6
	;=======
	;心臓の間　上段
	;=======
			CASE 3800
				CALL DUNGEON_WORP,38,4,6
			CASE 3801
				CALL DUNGEON_WORP,38,7,4
	;=======
	;謁見の間
	;=======
			CASE 3900
				IF 던전플래그:99:1 < 34
					CALL MESSAGE_WINDOW_D, "", @"＞　神殿――神の謁見の間を思わせる場所/　　その最奥の玉座に座して魔帝ムンドゥスは%CALLNAME:MASTER%達を待ち受けていた "
					CALL MESSAGE_WINDOW_D, "ムンドゥス", "「よくぞ来た。スパーダの血、そして―― "
					IF FINDCHARA_B([[キャラ:버질]]) == 2
						CALL MESSAGE_WINDOW_D, "ムンドゥス", "久しいな、我が配下よ/　　また私へ仕えに来たか」 "
						CALL MESSAGE_WINDOW_D, "버질", "「つまらん도발をする。そのナリでよくもほざけたものだ」 "
						CALL MESSAGE_WINDOW_D, "", "＞　かつて敗れ、傀儡の辱めを受けた相手とはいえ/今の검鬼は雑事と魔帝の言葉を鼻で笑って聞き流す "
						CALL MESSAGE_WINDOW_D, "", "＞　彼や단테からすれば、かの魔帝は見た눈こそ繕っているものの/　　この異界と同じく、どうやら自身も十全とはいい難い상태らしい "
						CALL MESSAGE_WINDOW_D, "", "＞　その態度が気に入らなかったか、魔帝ムンドゥスは불쾌そうに鼻を鳴らした "
						IF FINDCHARA_B([[キャラ:트리쉬(DMC)]]) == 2
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "「フン、そして‥‥役割すら十全にこなせぬ役立たずか/　裏切り者めが恥ずかしげもなく、よくも再び顔を出せたものだ」 "
							CALL MESSAGE_WINDOW_D, "트리슈", "「あらお言葉だこと/　でも自分が立てた策で敗北したのを、部下のせいにされても困るわね」 "
							CALL MESSAGE_WINDOW_D, "트리슈", "「偉大なる魔帝ともあろうお方がそのようなザマでは/　産み出された者としても恥ずかしくて表を歩けませんわ？」 "
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "「貴様――っ」 "
						ENDIF
						CALL MESSAGE_WINDOW_D, "단테", "「悪いが感動の再会はここまでだ/　どうやら他とは違って、あんたには記憶があるらしい」 "
						CALL MESSAGE_WINDOW_D, "단테", "「いや、むしろ記憶を保つために、他が再現しきれなかったか？/　まあなんにせよ、だ」 "
					ELSE
						IF CFLAG:MASTER:당신의전공분야 == 7
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "악마の血を引く、矮小なる者よ/　ここまでこれた褒美に、我へ傅くことを許そう」 "
							CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%は魔帝から、己が上位者であると疑わぬ言動に恥じぬ마력を感じた "
							CALL MESSAGE_WINDOW_D, "", "＞　だが、ただそれだけで膝を折るようならデビルハンターはやっていないのだ "
							CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%は魔帝の威圧を受け流し、どう打倒すべきか観察を始める "
							CALL MESSAGE_WINDOW_D, "", "＞　その態度が気に入らなかったか、魔帝ムンドゥスは불쾌そうに鼻を鳴らして視線を切った "
						ELSE
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "くだらぬもの、인간よ/　スパーダの血へ張り付きここまで来るとは‥‥‥分際を知るがいい」 "
							CALL MESSAGE_WINDOW_D, "", @"＞　魔帝ムンドゥスは人を、%CALLNAME:MASTER%を侮っている "
							CALL MESSAGE_WINDOW_D, "", "＞　それが誤りであることは今までの己が証明してきたもので、それをここでも証明してみせよう "
							CALL MESSAGE_WINDOW_D, "", "＞　その態度が気に入らなかったか、魔帝ムンドゥスは불쾌そうに鼻を鳴らして視線を切った "
						ENDIF
						IF FINDCHARA_B([[キャラ:트리쉬(DMC)]]) == 2
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "「フン、そして‥‥役割すら十全にこなせぬ役立たずか/　裏切り者めが恥ずかしげもなく、よくも再び顔を出せたものだ」 "
							CALL MESSAGE_WINDOW_D, "트리슈", "「あらお言葉だこと/　でも自分が立てた策で敗北したのを、部下のせいにされても困るわね」 "
							CALL MESSAGE_WINDOW_D, "트리슈", "「偉大なる魔帝ともあろうお方がそのようなザマでは/　産み出された者としても恥ずかしくて表を歩けませんわ？」 "
							CALL MESSAGE_WINDOW_D, "ムンドゥス", "「貴様――っ」 "
							CALL MESSAGE_WINDOW_D, "단테", "「悪いが感動の再会はここまでだ/　どうやら他とは違って、あんたには記憶があるらしい」 "
							CALL MESSAGE_WINDOW_D, "단테", "「いや、むしろ記憶を保つために、他が再現しきれなかったか？/　まあなんにせよ、だ」 "
						ENDIF
						IF CFLAG:MASTER:당신의전공분야 == 7
							CALL MESSAGE_WINDOW_D, "단테", "「残念だが、こいつを使うにゃあんたじゃ荷が重い/　自分の創造した악마すら使いこなせないのに、あんまり見栄を張ると恥をかくぜ？"
						ELSE
							CALL MESSAGE_WINDOW_D, "단테", "「俺のおまけ？　こいつが？/　ハッ、継ぎ接ぎだらけで危機感すらなくなったのか？」 "
							CALL MESSAGE_WINDOW_D, "단테", "「いや、あんたのそれは元々か。전회は俺を父の代わりと侮り――/　今度は、こいつを侮って恥をかく」 "
						ENDIF
						CALL MESSAGE_WINDOW_D, "ムンドゥス", "「貴様――っ」 "
						CALL MESSAGE_WINDOW_D, "단테", "「悪いが感動の再会はここまでだ/　どうやら他とは違って、あんたには記憶があるらしい」 "
						CALL MESSAGE_WINDOW_D, "단테", "「いや、むしろ記憶を保つために、他が再現しきれなかったか？/　まあなんにせよ、だ」 "
					ENDIF
					CALL MESSAGE_WINDOW_D, "단테", @"「Hey,%CALLNAME:MASTER%」/＞　威圧が増す魔帝を他所に、단테は%CALLNAME:MASTER%へ振り返り/　　楽しそうに――영맹に笑った "
					CALL MESSAGE_WINDOW_D, "단테", "「ラストステージは、敗北が忘れられない魔界の帝王様がお相手だ」 "
					CALL MESSAGE_WINDOW_D, "단테", "「どうやって復活したかは知らないが/　怖くて二度と인간界に顔が出せなくなるくらい、盛大に歓迎してやるか！」 "
					CALL MESSAGE_WINDOW_D, "ムンドゥス", "「よくもほざいたっ」/＞　魔帝ムンドゥスの怒りの咆哮と共に神殿が붕괴し/　　辺りにマグマが吹き出しまさしく地獄の様相を見せる "
					CALL MESSAGE_WINDOW_D, "ムンドゥス", "「使えぬ配下など、もとより使い捨てるつもりよ/　我こそが唯一絶対の힘。我が힘の真の偉大さ、今度こそ貴様らへ刻みつけてやろうぞ！」 "
					CALL MESSAGE_WINDOW_D, "", "＞　魔帝　ムンドゥスが襲いかかってきた！ "
					던전플래그:99:1 = 34
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					
					CALL MUNDUS
					
					CALL BATTLE_START
					
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					FLAG:미조우걸음수 = 0
				
					FORCEWAIT
					CALL MESSAGE_WINDOW_D, "", "＞　体を維持できず、魔帝ムンドゥスは末端から崩れてゆく "
					CALL MESSAGE_WINDOW_D, "", "＞　それでもなお、怨嗟と共に손を伸ばす正面に단테は堂々と姿を晒し―― "
					CALL MESSAGE_WINDOW_D, "단테", @"「Hey,%CALLNAME:MASTER%、フィナーレだ」/　이번회の동료を側へ呼んだ "
					IF FINDCHARA_B([[キャラ:버질]]) == 2
						CALL MESSAGE_WINDOW_D, "버질", "「あれは言うなよ」 "
						CALL MESSAGE_WINDOW_D, "", "＞　眉間にシワを寄せた兄の言葉も受け流し/　二人は互いの총を一丁ずつ、交差させて힘を注ぐ "
					ELSEIF FINDCHARA_B([[キャラ:트리쉬(DMC)]]) == 2
						CALL MESSAGE_WINDOW_D, "트리슈", "「決め言葉は？」 "
					ELSE
						CALL MESSAGE_WINDOW_D, "", "＞　互いに視線を合わせ、にやりと笑い/　　締めはこれしかあるまいと声を上げ、同時に引き金を引いた―― "
					ENDIF
					CALL MESSAGE_WINDOW_D, @"%CALLNAME:MASTER%＆단테", "「Jack Pot!」 "
					CALL MESSAGE_WINDOW_D, "", " "
					CALL MESSAGE_WINDOW, "", "………/……/…"
					CALL MESSAGE_WINDOW, "", "＞　魔帝ムンドゥスが再び滅び、支えがなくなった異界が消滅してゆく"
					CALL MESSAGE_WINDOW, "", "＞　あわや巻き込まれるかと思いきや/　　二度눈になる단테を先머리に無事、탈출を果たした一行は말렛섬（島）の終わりを見届けた "
					CALL MESSAGE_WINDOW, "", "………/……/…"
					CALL MESSAGE_WINDOW, "", @"――某所　%CALLNAME:MASTER%事務所"
					CALL MESSAGE_WINDOW, "", "＞　말렛섬（島）異界を攻略して間もない事務所/　　そこにはストロベリーサンデーを味わう단테がいた "
					CALL MESSAGE_WINDOW, "", "なぜここにいる、と問えば硬いことを言うなと図太く笑う。そこへ――"
					CALL MESSAGE_WINDOW, "트리슈", @"「ハァイ%CALLNAME:MASTER%、ただいま」/＞　すっかり居付き、気ままに泊まってゆくようになった트리슈が/　　大きめの箱を손に帰ってきた"
					CALL MESSAGE_WINDOW, "", "＞　そして頼まれごとだったのだろう、その箱を단테へ渡したあと/　　ひょいとオリーブ抜きピザを1ピース取り上げぱくつきだす"
					CALL MESSAGE_WINDOW, "단테", "「そう渋い表情するなよ。/　전회は助かったからな、ほら프레젠트だ」"
					CALL MESSAGE_WINDOW, "", "＞　もしかしなくても、이번회はコレを渡すために待っていたようだ"
					CALL MESSAGE_WINDOW, "", "＞　その割に自分で持ってこない辺り、ぶれない男だと感じつつも箱を開けると――/　　そこには『Devil May Cry』のロゴがデザインされた看板があった "
					CALL MESSAGE_WINDOW, "단테", "「팬텀だったかに所属はしてるんだろうが/　デビルハンターとしての看板も필요だろう？」 "
					CALL MESSAGE_WINDOW, "", "＞　なるほど、と相槌を打ちつつ看板を事務所の玄関へ掲げてみる "
					IF ABL:MASTER:요리기능 >= 9
						CALL MESSAGE_WINDOW, "", "＞　――いつだったか손요리をご馳走した時に見せた/　　마요네の表情が思い浮かんだが、意識して脇へ置いておくことにする "
					ELSE
						CALL MESSAGE_WINDOW, "", "＞　――所属したばかりの時に、ピザを食べる己を見つめる/　　마요네のなんともいえない表情が思い浮かんだが、意識して脇へ置いておくことにする "
					ENDIF
					CALL MESSAGE_WINDOW, "", "＞　そして今日も、事務所の뼈董電話が鳴り響き/　　合言葉の의뢰と供に、夜空に악마の啼き声が響き渡る―――― "
					CALL MESSAGE_WINDOW, "", "―― Ending No.099 (Devil May Cray　魔帝狩り)" , , , , , , , , , "CENTER"
					던전플래그:99:1 = 37
					MONEY += 500000
					MONEY:99 += 5000
					FLAG:명성 += 300
					FLAG:5 = 9
					
					SETBIT FLAG:취소된ED2,35
					SETBIT FLAG:발견ED2,35
					FLAG:탈출 = 1
					PRINTFORML [0]끝낸다 [1]계속한다 [2]일부 데이터를 인계해 새로 시작한다
					CALL INPUTINT,0, 1, 2
					IF RESULT == 0
						QUIT
					ELSEIF RESULT == 1
						CALL REQUEST_50_DAY_END
					ELSEIF RESULT == 2
						CALL START_NEWGAME
						RETURN 1
					ENDIF
				ENDIF
		
		ENDSELECT
ENDSELECT



@GET_ORB_99,ARG


;===============================
;ドリーグ
;===============================
@D_LEAGUE
#DIM 答え
#DIMS 答え文字列 = "左", "右", "上", "下"

;答えを出しておく
答え = RAND:4

CALL MESSAGE_WINDOW_D, "", "＞　目の前の骨竜の口が輝き出し、収束された火焔球がこちらに向かって吐き出された "
SETCOLOR COLOR("PASTEL-YELLOW")
CALL MESSAGE_WINDOW_D, "", @"%答え文字列:答え%を選べ！"
RESETCOLOR
FOR LOCAL, 0, VARSIZE("答え文字列")
	PRINTFORML [{LOCAL}] %答え文字列:LOCAL%
NEXT
TINPUT 2000, -1, 1
;실패した패턴
IF RESULT != 答え
	CALL DUNGEON_TRAP_HP,10
;성공時フラグ+1　합계3で撃破
ELSE
	IF 던전플래그:99:10 == 2
		CALL MESSAGE_WINDOW_D, "", "＞　打ち返した火球が直撃すると、ついに뼈竜は叫び声を上げながら爆散した/　　どうやら封印も해제されたようだ "
		CALL MESSAGE_WINDOW_D, "", "＞　ドリーグ制覇――脳裏に、そんな言葉が過ぎった "
		던전플래그:99:10 = 3
		SETBIT 던전플래그:99:4,27
	ELSEIF 던전플래그:99:10 == 1
		CALL MESSAGE_WINDOW_D, "", "＞　再び火球を骨竜へ打ち返すと　明らかに疲弊してきている/　　あと一息といったところだろう "
		던전플래그:99:10 = 2
	ELSE
		CALL MESSAGE_WINDOW_D, "", @"＞　%CALLNAME:MASTER%が打ち返した球は　見事に骨竜へ直撃した/　　どうやら自らの攻撃でのみ傷つくようだ "
		던전플래그:99:10 = 1
	ENDIF
ENDIF



;===============================
;宝箱の中身
;===============================
@TREASURE_99
#LOCALSIZE 3
;던전플래그の80~99は宝箱用
;１階ごとに10個まで
;宝箱のフラグ管理用変数の番号
LOCAL = FLAG:현M / 5 + 80
;そのマップの何番눈の宝箱か
LOCAL:1 = (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
LOCAL:1 += FLAG:현M % 5 * 10
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	;■반혼향
	CASE 0,1401,1500,2001
		CALL GET_TREASURE, [[아이템:반혼향]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
	;■마석
	CASE 1402,1403,1404,1406,1408,1409,1701,1702,2300,2301
		CALL GET_TREASURE, [[아이템:마석]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
	;■파마화살
	CASE 1700,2201,2302,2304
		CALL GET_TREASURE, [[아이템:파마화살]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
	;■블루오브의조각
	CASE 100,200,201,202,203,204,205,207,208,300,301,700,900,1000,1001,1100,1300,1400,1405,1800,1801,2200,2303,2305,2400,2402,2600,2601,2800,2900,3000,3100,3200,3201,3300
		CALL GET_TREASURE, [[아이템:블루오브의조각]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
	;■마석　高低差有
	CASE 1802
		CALL GET_TREASURE, [[아이템:마석]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
		SIF RESULT
			DA:(FLAG:현X):(FLAG:현Y) = 21
	;■블루오브의조각　高低差有
	CASE 206,2100
		CALL GET_TREASURE, [[아이템:블루오브의조각]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
		SIF RESULT
			DA:(FLAG:현X):(FLAG:현Y) = 21
	;■데빌스타
	CASE 1407,1501,2000,2306,2401
		CALL GET_TREASURE, [[아이템:데빌스타]] , 1 , FLAG:현던전, LOCAL , LOCAL:1
ENDSELECT


;=======================================================================
;階段置き場
;=======================================================================
;6だと上の階層の7、7だと下の階層の6へ移動する処理
;特に変わった処理を入れない限り何も触らない方がいい
@STAIRS_99
LOCAL = DA:(FLAG:현X):(FLAG:현Y)
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	;=======================================================================
	;昇り階段(一つ上の플로어へ)
	;=======================================================================
	CASE 6
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 200,201,202
				CALL DUNGEON_UPSTAIRS_ID, 3, 3017
			CASE 203
				CALL DUNGEON_UPSTAIRS_ID, 3, 3037
			CASE 300
				CALL DUNGEON_UPSTAIRS_ID, 12, 12007
			CASE 500
				CALL DUNGEON_UPSTAIRS_ID, 2, 2007
			CASE 800
				CALL DUNGEON_UPSTAIRS_ID, 8, 8007
			CASE 801
				CALL DUNGEON_UPSTAIRS_ID, 8, 8017
			CASE 802
				CALL DUNGEON_UPSTAIRS_ID, 9, 9007
			CASE 1400
				CALL DUNGEON_UPSTAIRS_ID,13, 13007
			CASE 1401
				CALL DUNGEON_UPSTAIRS_ID,15, 15007
			CASE 1402
				CALL DUNGEON_UPSTAIRS_ID,15, 15017
			CASE 2000
				CALL DUNGEON_UPSTAIRS_ID,21, 21007
			CASE 2400
				CALL DUNGEON_DOWNSTAIRS_ID,14, 14007
			CASE 2401
				CALL DUNGEON_DOWNSTAIRS_ID,14, 14017
			CASE 2600,2601,2602
				CALL DUNGEON_UPSTAIRS_ID, 3, 3017
			CASEELSE
				;汎用処理
				IF LOCAL % 1000 < 500
					CALL DUNGEON_UPSTAIRS_ID, FLAG:현M + 1, LOCAL + 1001
				ELSE
					CALL DUNGEON_WORP_ID, FLAG:현M+1, LOCAL+1001, 1
				ENDIF
		ENDSELECT
	;=======================================================================
	;下り階段(一つ下の플로어へ)
	;=======================================================================
	CASE 7
		SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			CASE 200
				CALL DUNGEON_DOWNSTAIRS_ID, 5, 5006
			CASE 300,301,302
				IF 던전플래그:99:1 < 27
					CALL DUNGEON_DOWNSTAIRS_ID, 2, 2016
				ELSE
					CALL DUNGEON_DOWNSTAIRS_ID,26, 26016
				ENDIF
			CASE 303
				CALL DUNGEON_DOWNSTAIRS_ID, 2, 2036
			CASE 800
				CALL DUNGEON_DOWNSTAIRS_ID, 8, 8006
			CASE 801
				CALL DUNGEON_DOWNSTAIRS_ID, 8, 8016
			CASE 900
				CALL DUNGEON_DOWNSTAIRS_ID, 8, 8026
			CASE 1200
				CALL DUNGEON_DOWNSTAIRS_ID, 3, 3006
			CASE 1300
				CALL DUNGEON_DOWNSTAIRS_ID,14, 14006
			CASE 1400
				CALL DUNGEON_DOWNSTAIRS_ID,24, 24006
			CASE 1401
				CALL DUNGEON_DOWNSTAIRS_ID,24, 24016
			CASE 1500
				CALL DUNGEON_DOWNSTAIRS_ID,14, 14016
			CASE 1501
				CALL DUNGEON_DOWNSTAIRS_ID,14, 14026
			CASE 2100
				CALL DUNGEON_DOWNSTAIRS_ID,20, 20006
			CASEELSE
				;汎用処理
				IF LOCAL % 1000 < 500
					CALL DUNGEON_DOWNSTAIRS_ID, FLAG:현M - 1, LOCAL - 1001
				ELSE
					CALL DUNGEON_WORP_ID, FLAG:현M-1, LOCAL-1001, 1
				ENDIF
		ENDSELECT
ENDSELECT
;端にいると中に移動（エ라避け）
IF FLAG:현X == 0
	FLAG:현X += 1
	SIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
		FLAG:현X += 1
ELSEIF FLAG:현Y == 0
	FLAG:현Y += 1
	SIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
		FLAG:현Y += 1
ELSEIF FLAG:현X == FLAG:최대X - 1
	FLAG:현X -= 1
	SIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
		FLAG:현X -= 1
ELSEIF FLAG:현Y == FLAG:최대Y - 1
	FLAG:현Y -= 1
	SIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
		FLAG:현Y -= 1
ENDIF


;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚최고LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_99
IF 던전플래그:99:11 <= 1
	RETURN 30, 28, 33, 40
ELSEIF 던전플래그:99:11 == 2
	RETURN 33, 33, 35, 40
ELSEIF 던전플래그:99:11 == 3
	RETURN 38, 35, 40, 50
ELSEIF 던전플래그:99:11 == 4
	RETURN 42, 40, 45, 55
ELSEIF 던전플래그:99:11 == 5
	RETURN 45, 43, 47, 57
ELSEIF 던전플래그:99:11 == 6 && 던전플래그:99:1 < 21
	RETURN 62, 60, 65, 65
ELSEIF 던전플래그:99:11 == 6 && 던전플래그:99:1 < 23
	RETURN 62, 60, 65, 70
ELSEIF 던전플래그:99:11 == 6 && 던전플래그:99:1 < 26
	RETURN 62, 60, 65, 73
ELSEIF 던전플래그:99:11 == 7
	RETURN 65, 63, 70, 75
ELSEIF 던전플래그:99:11 == 8
	RETURN 65, 63, 70, 80
ELSEIF 던전플래그:99:11 == 9 && 던전플래그:99:1 < 33
	RETURN 68, 66, 75, 83
ELSEIF 던전플래그:99:11 == 9 && 던전플래그:99:1 < 34
	RETURN 80, 72, 80, 90
ENDIF

@TRAIN_DUNGEON_99


;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_99
SELECTCASE FLAG:현M
	CASE 34,39
		FLAG:인카운트율 = 0
	CASE IS <= 25
		IF 던전플래그:99:11 == 0
			FLAG:인카운트율 = 0
		ELSE
			FLAG:인카운트율 = FLAG:미조우걸음수 * 5
		ENDIF
	CASEELSE
;			FLAG:인카운트율 = 0
			FLAG:인카운트율 = FLAG:미조우걸음수 * 5
ENDSELECT


;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_99
IF RAND:80 < FLAG:인카운트율
	CALL ENEMY_TABLE
	IF RAND:3 == 0
		ABL:(CHARANUM-1):아이템2 = [[아이템:데빌스타]]
		ABL:(CHARANUM-1):입수확률2 = 10
	ENDIF
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;敵の種族の種類数
;RETURN X でXが種類の数になります
;あまりいろんなのが混ざっているとCOOPがとりにくくなったり
;敵の攻撃属性が多くなる傾向にあるので、
;種類の数は1・2種類を主体に時々3種類くらいを基本にするのが望ましいと思われます
;=======================================================================
@CLASS_NUM_99
SELECTCASE FLAG:현M
	CASE 0
		RETURN 0
	CASE 7,17,20
		RETURN 1
	CASE 16
		RETURN 2
	CASEELSE
		SELECTCASE RAND:100
			CASE IS < 35
				RETURN 1
			CASE IS < 65
				RETURN 2
			CASEELSE
				RETURN 3
		ENDSELECT
ENDSELECT

;SELECTCASE FLAG:현M
;	CASE IS < 14
;		RETURN CLASS_NUM_COMMON("中級")
;	CASE IS >= 14
;		RETURN CLASS_NUM_COMMON("上級")
;ENDSELECT
;RETURN CLASS_NUM_COMMON("中級")
;RETURN CLASS_NUM_COMMON("上級")
;RETURN CLASS_NUM_COMMON("最上級")

;=======================================================================
;적の総数
;ARGは出現する적の종류です
;RAND(X, Y)はX～Y-1のうち중 하나になるRANDです
;なお、ここで帰った数字は下限を종족数、上限を10として自動的に調整されます
;
;에코빌딩は최초の던전ということで少なめで、최대でも6体ということに
;=======================================================================
@ENEMY_NUM_99, ARG
IF RAND:3 == 0
	RETURN RAND(ARG, ARG*2+2)
ELSE
	RETURN RAND(ARG, ARG*2+4)
ENDIF

;RETURN ENEMY_NUM_COMMON("中級")
;RETURN ENEMY_NUM_COMMON("上級")
;RETURN ENEMY_NUM_COMMON("最上級")


;=======================================================================
;적の종류
;=======================================================================
;エンカウントで던전に出てくる적を설정
;RETURN (적の종류),(레벨)
;LOCAL = 5とSIF !RAND:(LOCAL --)　はいちいち出現확률をやるのがめんどくさい人用
@ENEMY_99, ARG
#LOCALSIZE 1

SELECTCASE FLAG:현M
	CASE 7
		IF 던전플래그:99:11 >= 5
			RETURN [[キャラ:로어]], 70+RAND:2*3
		ELSEIF 던전플래그:99:11 >= 3
			RETURN [[キャラ:로어]], 45+RAND:2*3
		ELSEIF 던전플래그:99:11 == 2
			RETURN [[キャラ:로어]], 40+RAND:2*3
		ELSE
			RETURN [[キャラ:로어]], 35+RAND:2*3
		ENDIF
	CASE 10
		SELECTCASE RAND:100
			CASE IS <25
				RETURN [[キャラ:목없는라이더]], 40+RAND:2*3
			CASE IS <50
				RETURN [[キャラ:그르르]], 43+RAND:2*3
			CASE IS <= 100
				RETURN [[キャラ:혼돈]], 45+RAND:2*3
		ENDSELECT
	CASE 1,2,3,4,5,6,8,9,11,12
		IF 던전플래그:99:11 == 1
			SELECTCASE RAND:100
					CASE IS < 50
						RETURN [[キャラ:목없는라이더]], 28+RAND:2*3
					CASE IS < 80
						RETURN [[キャラ:마카브르]], 30+RAND:2*3
					CASE IS <= 100
						RETURN [[キャラ:바포멧트]], 33+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 2
			SELECTCASE RAND:100
				CASE IS < 50
					RETURN [[キャラ:목없는라이더]], 30+RAND:2*3
				CASE IS < 80
					RETURN [[キャラ:마카브르]], 33+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:그르르]], 35+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 3
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:목없는라이더]], 30+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:마카브르]], 33+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:그르르]], 35+RAND:2*3
			ENDSELECT
		ELSE
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:목없는라이더]], 40+RAND:2*3
				CASE IS < 45
					RETURN [[キャラ:마카브르]], 42+RAND:2*3
				CASE IS < 60
					RETURN [[キャラ:그르르]], 43+RAND:2*3
				CASE IS < 100
					RETURN [[キャラ:데스그리폰]], 43+RAND:2*3
			ENDSELECT
		ENDIF
	CASE 13,14,15,19,22,23,24,25
		IF 던전플래그:99:11 <= 4
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:목없는라이더]], 42+RAND:2*3
				CASE IS < 50
					RETURN [[キャラ:마카브르]], 42+RAND:2*3
				CASE IS < 80
					RETURN [[キャラ:그르르]], 43+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:카마조츠]], 43+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 5
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:목없는라이더]], 43+RAND:2*3
				CASE IS < 50
					RETURN [[キャラ:마카브르]], 43+RAND:2*3
				CASE IS < 80
					RETURN [[キャラ:베르세르크]], 44+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:카마조츠]], 47+RAND:2*3
			ENDSELECT
		ELSE
			SELECTCASE RAND:100
				CASE IS < 20
					RETURN [[キャラ:목없는라이더]], 50+RAND:2*3
				CASE IS < 40
					RETURN [[キャラ:마카브르]], 50+RAND:2*3
				CASE IS < 60
					RETURN [[キャラ:오시치]], 53+RAND:2*3
				CASE IS < 80
					RETURN [[キャラ:베르세르크]], 55+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:카마조츠]], 55+RAND:2*3
			ENDSELECT
		ENDIF
	CASE 16
		SELECTCASE RAND:100
			CASE IS < 25
				RETURN [[キャラ:마카브르]], 50+RAND:2*3
			CASE IS < 70
				RETURN [[キャラ:오시치]], 53+RAND:2*3
			CASE IS <= 100
				RETURN [[キャラ:카마조츠]], 55+RAND:2*3
		ENDSELECT
	CASE 17
		RETURN [[キャラ:츠치구모]], 55+RAND:2*3
	CASE 18,21
		SELECTCASE RAND:100
			CASE IS < 25
				RETURN [[キャラ:목없는라이더]], 50+RAND:2*3
			CASE IS <50
				RETURN [[キャラ:베르세르크]], 55+RAND:2*3
			CASE IS <= 100
				RETURN [[キャラ:타나토스]], 57+RAND:2*3
		ENDSELECT
	CASE 20
		RETURN [[キャラ:베르세르크]], 60+RAND:2*3
	CASE 26,27,28,29,30,31,32,33,34,35,36,37,38
		IF 던전플래그:99:11 == 9 && 던전플래그:99:1 >= 33
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:오시치]], 72+RAND:2*3
				CASE IS < 50
					RETURN [[キャラ:페리]], 75+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:하누만]], 77+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:키메라]], 80+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 9 && 던전플래그:99:1 < 33
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:오시치]], 66+RAND:2*3
				CASE IS < 50
					RETURN [[キャラ:페리]], 68+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:하누만]], 72+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:키메라]], 75+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 8
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:오시치]], 63+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:페리]], 65+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:하누만]], 70+RAND:2*3
			ENDSELECT
		ELSEIF 던전플래그:99:11 == 7
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:마카브르]], 63+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:오시치]], 65+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:페리]], 70+RAND:2*3
			ENDSELECT
		ELSE
			SELECTCASE RAND:100
				CASE IS < 25
					RETURN [[キャラ:마카브르]], 60+RAND:2*3
				CASE IS < 70
					RETURN [[キャラ:오시치]], 63+RAND:2*3
				CASE IS <= 100
					RETURN [[キャラ:카마조츠]], 65+RAND:2*3
			ENDSELECT
		ENDIF
	CASEELSE
ENDSELECT
		;LOCALに종류数を入れる
;		LOCAL = 5
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:목없는라이더]], 28
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:마카브르]], 30
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:シン シザーズ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:シン サイズ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:デス サイズ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:サルガッソー]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:ベルゼバブ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:ブレイド]], 1
;	요귀,656,베르세르크
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:フェティッシュ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:사이클롭스]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:プラズマ]], 1
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:フロスト]], 1
;	요마,456,하누만
;		SIF !RAND:(LOCAL --)
;			RETURN [[キャラ:ノーバディ]], 1
;ENDSELECT

;=======================================================================
;적스테이터스설정
;=======================================================================
;↑のザコ적の스테이터스を変える処理
;내성とか스킬とかを変えれる
@SET_ENEMY_STATUS_99,ARG

ABL:(CHARANUM-1):회화타입 = 331

SELECTCASE NO:ARG
	CASE [[キャラ:목없는라이더]]
		NAME:(CHARANUM-1) = マリオネット
		CALLNAME:(CHARANUM-1) = マリオネット
	
	CASE [[キャラ:마카브르]]
		NAME:(CHARANUM-1) = ブラッディーマリー
		CALLNAME:(CHARANUM-1) = ブラッディーマリー
	
	CASE [[キャラ:그르르]]
		NAME:(CHARANUM-1) = シン シザーズ
		CALLNAME:(CHARANUM-1) = シン シザーズ
	
	;요조,959,카마조츠
	CASE [[キャラ:카마조츠]]
		NAME:(CHARANUM-1) = シン サイズ
		CALLNAME:(CHARANUM-1) = シン サイズ
		MAXBASE:(CHARANUM-1):비구 = 120
		BASE:(CHARANUM-1):비구 = 120
		ABL:(CHARANUM-1):스킬1 = 2 ;히트フェイブ
		ABL:(CHARANUM-1):스킬2 =304 ;메가클로
		ABL:(CHARANUM-1):스킬3 =508 ;스쿤・다
		ABL:(CHARANUM-1):스킬4 =2013 ;흡혈
	
	CASE [[キャラ:타나토스]]
		NAME:(CHARANUM-1) = デス シザーズ
		CALLNAME:(CHARANUM-1) = デス シザーズ
	
	;사신,1627,체르노보그
	CASE [[キャラ:체르노보그]]
		NAME:(CHARANUM-1) = デス サイズ
		CALLNAME:(CHARANUM-1) = デス サイズ
	
	CASE [[キャラ:로어]]
		NAME:(CHARANUM-1) = サルガッソー
		CALLNAME:(CHARANUM-1) = サルガッソー
	
	CASE [[キャラ:데스그리폰]]
		NAME:(CHARANUM-1) = 섀도우
		CALLNAME:(CHARANUM-1) = 섀도우
		ABL:(CHARANUM-1):스킬1 = 326 ;베어먹기
		ABL:(CHARANUM-1):스킬2 = 48 ;자벨린레인
		ABL:(CHARANUM-1):스킬3 = 328 ;어설트다이브
		ABL:(CHARANUM-1):스킬4 = 2005 ;자폭
	
	CASE [[キャラ:혼돈]]
		NAME:(CHARANUM-1) = ベルゼバブ
		CALLNAME:(CHARANUM-1) = ベルゼバブ
	
	CASE [[キャラ:오시치]]
		NAME:(CHARANUM-1) = フェティッシュ
		CALLNAME:(CHARANUM-1) = フェティッシュ
	
	CASE [[キャラ:츠치구모]]
		NAME:(CHARANUM-1) = 사이클롭스
		CALLNAME:(CHARANUM-1) = 사이클롭스
	
	;요귀,656,베르세르크
	CASE [[キャラ:베르세르크]]
		NAME:(CHARANUM-1) = ブレイド
		CALLNAME:(CHARANUM-1) = ブレイド
		MAXBASE:(CHARANUM-1):검격 = 80
		BASE:(CHARANUM-1):검격 = 80
		MAXBASE:(CHARANUM-1):빙결 = 100
		BASE:(CHARANUM-1):빙결 = 100
	
	CASE [[キャラ:페리]]
		NAME:(CHARANUM-1) = プラズマ
		CALLNAME:(CHARANUM-1) = プラズマ
	
	;요마,456,하누만
	CASE [[キャラ:하누만]]
		NAME:(CHARANUM-1) = フロスト
		CALLNAME:(CHARANUM-1) = フロスト
		ABL:(CHARANUM-1):스킬1 = 345 ;앵화섬란
		ABL:(CHARANUM-1):스킬2 = 805 ;마하・부흐라
		ABL:(CHARANUM-1):스킬3 = 803 ;부흐다인
		ABL:(CHARANUM-1):스킬4 = 504;ラクカジャ
		ABL:(CHARANUM-1):스킬5 = 1708;선풍진
		ABL:(CHARANUM-1):스킬6 = 0
		ABL:(CHARANUM-1):스킬7 = 0
	
	CASE [[キャラ:키메라]]
		NAME:(CHARANUM-1) = ノーバディ
		CALLNAME:(CHARANUM-1) = ノーバディ
		ABL:(CHARANUM-1):스킬1 = 304 ;메가클로
		ABL:(CHARANUM-1):스킬2 = 2005 ;자폭
		ABL:(CHARANUM-1):스킬3 = 2406 ;이악물기
		ABL:(CHARANUM-1):스킬4 = 0
	
ENDSELECT
		
		
;=======================================================================
;ボス설정
;=======================================================================
@PHANTOM_1

CALL SET_ENEMY,9,[[キャラ:츠치구모]],40,0,1
NAME:(CHARANUM-1) = 팬텀
CALLNAME:(CHARANUM-1) = 팬텀
CFLAG:(CHARANUM-1):ＨＰ보정 = 1000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999

;내성
BASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):빙결 = 200
BASE:(CHARANUM-1):파마 = 0
BASE:(CHARANUM-1):수격 = 150
BASE:(CHARANUM-1):핵열 = -200

;스킬構成
ABL:(CHARANUM-1):스킬1 = 203 ;마구날뛰기
ABL:(CHARANUM-1):스킬2 = 309 ;데스클로
ABL:(CHARANUM-1):스킬3 = 725 ;파이어볼
ABL:(CHARANUM-1):스킬4 = 1902 ;프레이라

CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)


@PHANTOM_2
IF GETBIT(던전플래그:99:8,4)
	CALL SET_ENEMY,9,[[キャラ:츠치구모]],55,1,1
	NAME:(CHARANUM-1) = 팬텀(幻影体)
	CALLNAME:(CHARANUM-1) = 팬텀(幻影体)
ELSE
	CALL SET_ENEMY,9,[[キャラ:츠치구모]],55,0,1
	NAME:(CHARANUM-1) = 팬텀
	CALLNAME:(CHARANUM-1) = 팬텀
ENDIF
IF !GETBIT(던전플래그:99:8,4)
	CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
	CFLAG:(CHARANUM-1):ＭＰ보정 = 9999
ENDIF

;내성
BASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):빙결 = 150
BASE:(CHARANUM-1):파마 = 0
BASE:(CHARANUM-1):수격 = 150
BASE:(CHARANUM-1):핵열 = -200

;스킬構成
ABL:(CHARANUM-1):스킬1 = 205 ;메가톤프레스
ABL:(CHARANUM-1):스킬2 = 310 ;허공조격
ABL:(CHARANUM-1):스킬3 = 725 ;파이어볼
ABL:(CHARANUM-1):스킬4 = 1903 ;프레이다인

CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)


@GIRFFON_1
CALL SET_ENEMY,9,[[キャラ:헬그리폰]],57,0,1
NAME:(CHARANUM-1) = グリフォン
CALLNAME:(CHARANUM-1) = グリフォン
CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999

ABL:(CHARANUM-1):스킬1 = 328;어설트다이브
ABL:(CHARANUM-1):스킬2 = 906 ;마하・지오다인
ABL:(CHARANUM-1):스킬3 = 1038;소닉붐
ABL:(CHARANUM-1):스킬4 = 1007;림도라
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0

@GIRFFON_2
CALL SET_ENEMY,9,[[キャラ:헬그리폰]],70,0,1
NAME:(CHARANUM-1) = グリフォン
CALLNAME:(CHARANUM-1) = グリフォン
CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999

ABL:(CHARANUM-1):스킬1 = 328;어설트다이브
ABL:(CHARANUM-1):스킬2 = 906 ;마하・지오다인
ABL:(CHARANUM-1):스킬3 = 1038;소닉붐
ABL:(CHARANUM-1):스킬4 = 1007;림도라
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0

@GIRFFON_3
IF GETBIT(던전플래그:99:8,4)
	CALL SET_ENEMY,9,[[キャラ:헬그리폰]],73,1,1
	NAME:(CHARANUM-1) = グリフォン(幻影体)
	CALLNAME:(CHARANUM-1) = グリフォン(幻影体)
ELSE
	CALL SET_ENEMY,9,[[キャラ:헬그리폰]],73,0,1
	NAME:(CHARANUM-1) = グリフォン
	CALLNAME:(CHARANUM-1) = グリフォン
ENDIF
IF !GETBIT(던전플래그:99:8,4)
	CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
	CFLAG:(CHARANUM-1):ＭＰ보정 = 9999
ENDIF

ABL:(CHARANUM-1):스킬1 = 328;어설트다이브
ABL:(CHARANUM-1):스킬2 = 906 ;마하・지오다인
ABL:(CHARANUM-1):스킬3 = 1038;소닉붐
ABL:(CHARANUM-1):스킬4 = 1007;림도라
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0

@NERO_1
CALL SET_ENEMY,9,[[キャラ:버질]],47,0,1
NAME:(CHARANUM-1) = ネロ・アンジェロ
CALLNAME:(CHARANUM-1) = ネロ・アンジェロ
CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999
BASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):비구 = 100
BASE:(CHARANUM-1):타격 = 100
BASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):화염 = 100
BASE:(CHARANUM-1):빙결 = 100
BASE:(CHARANUM-1):전격 = 100
;스킬構成
ABL:(CHARANUM-1):스킬1 = 5 ;대나무베기
ABL:(CHARANUM-1):스킬2 = 3 ;회전베기
ABL:(CHARANUM-1):스킬3 = 2955 ; 스팅거
ABL:(CHARANUM-1):스킬4 = 3607 ; 조금만더힘을
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0
ABL:(CHARANUM-1):스킬7 = 0
ABL:(CHARANUM-1):스킬8 = 0
CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)


@NERO_2
CALL SET_ENEMY,9,[[キャラ:버질]],65,0,1
NAME:(CHARANUM-1) = ネロ・アンジェロ
CALLNAME:(CHARANUM-1) = ネロ・アンジェロ
CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999
BASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):비구 = 100
BASE:(CHARANUM-1):타격 = 100
BASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):화염 = 100
BASE:(CHARANUM-1):빙결 = 100
BASE:(CHARANUM-1):전격 = 100
;스킬構成
ABL:(CHARANUM-1):스킬1 = 5 ;대나무베기
ABL:(CHARANUM-1):스킬2 = 3 ;회전베기
ABL:(CHARANUM-1):스킬3 = 2955 ; 스팅거
ABL:(CHARANUM-1):스킬4 = 3610 ; 메테오
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0
ABL:(CHARANUM-1):스킬7 = 0
ABL:(CHARANUM-1):스킬8 = 0
CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)


@NERO_3
CALL SET_ENEMY,9,[[キャラ:버질]],80,0,1
NAME:(CHARANUM-1) = ネロ・アンジェロ
CALLNAME:(CHARANUM-1) = ネロ・アンジェロ
CFLAG:(CHARANUM-1):ＨＰ보정 += 2000
CFLAG:(CHARANUM-1):ＭＰ보정 = 9999
BASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):비구 = 100
BASE:(CHARANUM-1):타격 = 100
BASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):화염 = 100
BASE:(CHARANUM-1):빙결 = 100
BASE:(CHARANUM-1):전격 = 100
EQUIP:(CHARANUM-1):검 = [[아이템:염마도]]
EQUIP:(CHARANUM-1):총 = 0
EQUIP:(CHARANUM-1):머리 = [[아이템:야크트헬름]]
EQUIP:(CHARANUM-1):몸통 = [[아이템:야크트아머]]
EQUIP:(CHARANUM-1):팔 = [[아이템:야크트글러브]]
EQUIP:(CHARANUM-1):발 = [[아이템:야크트레그]]
CSTR:(CHARANUM-1):사고패턴 = ネロ・アンジェロ
CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)

@NIGTHMARE
IF 던전플래그:99:1 < 28
	CALL SET_ENEMY,8,[[キャラ:에레보스]],75,0,1
ELSEIF 던전플래그:99:1 < 32
	CALL SET_ENEMY,8,[[キャラ:에레보스]],80,0,1
ELSE
	CALL SET_ENEMY,8,[[キャラ:에레보스]],83,0,1
ENDIF

NAME:(CHARANUM-1) = 나이트메어
CALLNAME:(CHARANUM-1) = 나이트메어
MAXBASE:(CHARANUM-1):ＨＰ = 15000
BASE:(CHARANUM-1):ＨＰ = 15000
MAXBASE:(CHARANUM-1):ＭＰ = 9999

MAXBASE:(CHARANUM-1):검격 = 0
BASE:(CHARANUM-1):검격 = 0
MAXBASE:(CHARANUM-1):비구 = 0
BASE:(CHARANUM-1):비구 = 0
MAXBASE:(CHARANUM-1):타격 = 0
BASE:(CHARANUM-1):타격 = 0
MAXBASE:(CHARANUM-1):전술 = 0
BASE:(CHARANUM-1):전술 = 0
MAXBASE:(CHARANUM-1):화염 = 0
BASE:(CHARANUM-1):화염 = 0
MAXBASE:(CHARANUM-1):빙결 = 0
BASE:(CHARANUM-1):빙결 = 0
MAXBASE:(CHARANUM-1):전격 = 0
BASE:(CHARANUM-1):전격 = 0
MAXBASE:(CHARANUM-1):충격 = 0
BASE:(CHARANUM-1):충격 = 0
MAXBASE:(CHARANUM-1):신경 = 0
BASE:(CHARANUM-1):신경 = 0
MAXBASE:(CHARANUM-1):정신 = 0
BASE:(CHARANUM-1):정신 = 0
MAXBASE:(CHARANUM-1):주살 = 0
BASE:(CHARANUM-1):주살 = 0
MAXBASE:(CHARANUM-1):파마 = 0
BASE:(CHARANUM-1):파마 = 0
MAXBASE:(CHARANUM-1):지변 = 0
BASE:(CHARANUM-1):지변 = 0
MAXBASE:(CHARANUM-1):수격 = 0
BASE:(CHARANUM-1):수격 = 0
MAXBASE:(CHARANUM-1):질풍 = 0
BASE:(CHARANUM-1):질풍 = 0
MAXBASE:(CHARANUM-1):중력 = 0
BASE:(CHARANUM-1):중력 = 0
MAXBASE:(CHARANUM-1):핵열 = 0
BASE:(CHARANUM-1):핵열 = 0
MAXBASE:(CHARANUM-1):만능 = 100
BASE:(CHARANUM-1):만능 = 100

ABL:(CHARANUM-1):스킬1 = 107 ;고천열풍탄
ABL:(CHARANUM-1):스킬2 = 326 ;베어먹기
ABL:(CHARANUM-1):스킬3 = 2034 ;만마의난무
ABL:(CHARANUM-1):스킬4 = 0

CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)

@TORISH_ILLUSION
CALL SET_ENEMY,9,[[キャラ:트리쉬(DMC)]],75,1,1
NAME:(CHARANUM-1) = 女性の幻影体
CALLNAME:(CHARANUM-1) = 女性の幻影体
ABL:(CHARANUM-1):스킬1 = 0 ;
ABL:(CHARANUM-1):스킬7 = 0 ;

CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)

@MUNDUS
CALL SET_ENEMY,9,3301,90,1,1
NAME:(CHARANUM-1) = ムンドゥス
CALLNAME:(CHARANUM-1) = ムンドゥス
CFLAG:(CHARANUM-1):행동횟수 = 2

MAXBASE:(CHARANUM-1):ＨＰ = 15000
CFLAG:(CHARANUM-1):ＨＰ보정 += 15000
BASE:(CHARANUM-1):ＨＰ = 9999
MAXBASE:(CHARANUM-1):ＭＰ = 9999

BASE:(CHARANUM-1):힘 = 35
BASE:(CHARANUM-1):지혜 = 24
BASE:(CHARANUM-1):마력 = 36
BASE:(CHARANUM-1):인내력 = 22
BASE:(CHARANUM-1):속도 = 21
BASE:(CHARANUM-1):운 = 15

MAXBASE:(CHARANUM-1):검격 = 100
BASE:(CHARANUM-1):검격 = 100
MAXBASE:(CHARANUM-1):비구 = 125
BASE:(CHARANUM-1):비구 = 125
MAXBASE:(CHARANUM-1):타격 = 100
BASE:(CHARANUM-1):타격 = 100
MAXBASE:(CHARANUM-1):전술 = 100
BASE:(CHARANUM-1):전술 = 100
MAXBASE:(CHARANUM-1):화염 = 80
BASE:(CHARANUM-1):화염 = 80
MAXBASE:(CHARANUM-1):빙결 = 150
BASE:(CHARANUM-1):빙결 = 150
MAXBASE:(CHARANUM-1):전격 = 80
BASE:(CHARANUM-1):전격 = 80
MAXBASE:(CHARANUM-1):충격 = 100
BASE:(CHARANUM-1):충격 = 100
MAXBASE:(CHARANUM-1):신경 = 0
BASE:(CHARANUM-1):신경 = 0
MAXBASE:(CHARANUM-1):정신 = 0
BASE:(CHARANUM-1):정신 = 0
MAXBASE:(CHARANUM-1):주살 = 999
BASE:(CHARANUM-1):주살 = 999
MAXBASE:(CHARANUM-1):파마 = 999
BASE:(CHARANUM-1):파마 = 999
MAXBASE:(CHARANUM-1):지변 = 100
BASE:(CHARANUM-1):지변 = 100
MAXBASE:(CHARANUM-1):수격 = 100
BASE:(CHARANUM-1):수격 = 100
MAXBASE:(CHARANUM-1):질풍 = 100
BASE:(CHARANUM-1):질풍 = 100
MAXBASE:(CHARANUM-1):중력 = 100
BASE:(CHARANUM-1):중력 = 100
MAXBASE:(CHARANUM-1):핵열 = 50
BASE:(CHARANUM-1):핵열 = 50
MAXBASE:(CHARANUM-1):만능 = 100
BASE:(CHARANUM-1):만능 = 100

ABL:(CHARANUM-1):스킬1 = 718 ;트리스아기온
ABL:(CHARANUM-1):스킬2 = 912 ;우뢰의세례
ABL:(CHARANUM-1):스킬3 = 2034 ;만마의난무
ABL:(CHARANUM-1):스킬4 = 211 ;기간피스트
ABL:(CHARANUM-1):스킬5 = 108 ;찰나장대비쏘기
ABL:(CHARANUM-1):스킬6 = 151 ;지고의마탄

;全BS무효
FOR LOCAL,GETNUM(BASE,"HAPPY"),GETNUM(BASE,"DYING")+1
	BASE:(CHARANUM-1):LOCAL = 0
	MAXBASE:(CHARANUM-1):LOCAL = 0
NEXT

CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)

;=======================================================================
;ネロ・アンジェロ(3)の사고패턴
;=======================================================================
@SET_ACTION_ネロ・アンジェロ,ARG
#DIM LCOUNT
IF CFLAG:ARG:１more플래그 == 0 && CFLAG:ARG:행동한횟수 == 0
	LOCAL:1 = 0
	FOR LOCAL,0,6
		SIF CFLAG:ARG:(GET_BATTLESTATUS(LOCAL) + "강화") < 0
			LOCAL:1 -= CFLAG:ARG:(GET_BATTLESTATUS(LOCAL) + "강화")
	NEXT
	IF RAND:100 < LOCAL:1
			CFLAG:ARG:입력행동 = 2952
			CALL RANDOM_TARGET,ARG,2952
			RETURN 1
	ENDIF
	IF !CFLAG:ARG:기합플래그 && CFLAG:ARG:800 && RAND:(CFLAG:800+1)
				CFLAG:ARG:입력행동 = 511
				CALL RANDOM_TARGET,ARG,511
				RETURN 1
	ENDIF
ELSEIF CFLAG:ARG:１more플래그 > 0
	IF !CFLAG:ARG:기합플래그 && !RAND:5
				CFLAG:ARG:입력행동 = 511
				CALL RANDOM_TARGET,ARG,511
				RETURN 1
	ENDIF
ENDIF

	FOR LOCAL, 1, 7
		SIF POS(LOCAL) < 0
			CONTINUE
		SIF CFLAG:POS(LOCAL):상태이상 == GET_STATE_NUM("DYING")
			CONTINUE
		
			
		FOR LCOUNT,0,6
			SIF CFLAG:POS(LOCAL):(GET_BATTLESTATUS(LCOUNT) + "강화") > 0
				LOCAL:1 += CFLAG:POS(LOCAL):(GET_BATTLESTATUS(LCOUNT) + "강화")
			SIF CFLAG:POS(LOCAL):(GET_BATTLESTATUS(LCOUNT) + "강화") == 32
				LOCAL:2 = 1
			SIF CFLAG:POS(LOCAL):(GET_BATTLESTATUS(LCOUNT) + "강화") > LOCAL:17
				LOCAL:17 = CFLAG:POS(LOCAL):(GET_BATTLESTATUS(LCOUNT) + "강화")
		NEXT
		SIF LOCAL:3 < LOCAL:1
			LOCAL:3 = LOCAL:1
	NEXT
	
	
	
	
	
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
	LOCAL = RAND:RESULT
	;스킬番号결정
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬番号を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1


;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_99
;랜덤にどの악마が出るか결정
;RETURN CSV番号 , 人数 , 레벨
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:카부소]] , 3 + RAND:10 , CSVBASE([[キャラ:카부소]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:코다마]] , 3 + RAND:10 , CSVBASE([[キャラ:코다마]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:커시]] , 3 + RAND:10 , CSVBASE([[キャラ:커시]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT


;---------------------------------------------------------------
;ターン開始時이벤트呼び出し関数
;---------------------------------------------------------------
;적を倒したらレッドオーブを落とすように설정
;ターン 시작시 적が何人いるか확인
@EVENT_BATTLE_TURNTOP_DUNGEON99
;PRINTFORMW  現在の적の数を数える
IF FINDCHARA_ENEMY(3298)
	CALL NIGHTMARE_GIMMICK,1
ELSEIF FINDCHARA_ENEMY(3301)
	CALL MUNDUS_GIMMICK,1
ELSE
	CALL GET_ORB_BATTLE,1
ENDIF


;---------------------------------------------------------------
;行動종료시이벤트呼び出し関数
;---------------------------------------------------------------
@EVENT_BATTLE_ACTEND_DUNGEON99

IF FINDCHARA_ENEMY(3298)
	CALL NIGHTMARE_GIMMICK,2
ELSEIF FINDCHARA_ENEMY(3301)
	CALL MUNDUS_GIMMICK,2
ELSE
	CALL GET_ORB_BATTLE,2
ENDIF

;---------------------------------------------------------------
;ターン종료시이벤트呼び出し関数
;---------------------------------------------------------------
@EVENT_BATTLE_TURNEND_DUNGEON99
IF 현HP비율(CHARANUM-1) < 85 && 던전플래그:99:1 == 34
	PRINTFORML 
	PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃数ばかり多い塵共めっ。尽く焼き尽くしてくれよう！　　　　　┃
	PRINTFORML ┃＞　ムンドゥスの言葉に呼応し、溶岩でできた龍が2体現れた!　┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
	FORCEWAIT
	;マグマ龍召還X2
	CALL SET_ENEMY,8,757,80,1,0
	NAME:(CHARANUM-1) = 溶岩龍
	CALLNAME:(CHARANUM-1) = 溶岩龍
	
	MAXBASE:(CHARANUM-1):화염 = 0
	BASE:(CHARANUM-1):화염 = 0
	MAXBASE:(CHARANUM-1):빙결 = 200
	BASE:(CHARANUM-1):빙결 = 200
	MAXBASE:(CHARANUM-1):전격 = 100
	BASE:(CHARANUM-1):전격 = 100
	
	ABL:(CHARANUM-1):스킬1 = 321;물어뜯기
	ABL:(CHARANUM-1):스킬2 = 725 ;파이어볼
	ABL:(CHARANUM-1):스킬3 = 710 ;파이어스톰
	ABL:(CHARANUM-1):스킬4 = 0
	ABL:(CHARANUM-1):스킬5 = 0
	ABL:(CHARANUM-1):스킬6 = 0
	CALL SYNC_STATUS, (CHARANUM-1)
	CALL HEALTH_CHARA, (CHARANUM-1)
	
	CALL SET_ENEMY,10,757,80,1,0
	NAME:(CHARANUM-1) = 溶岩龍
	CALLNAME:(CHARANUM-1) = 溶岩龍
	
	MAXBASE:(CHARANUM-1):화염 = 0
	BASE:(CHARANUM-1):화염 = 0
	MAXBASE:(CHARANUM-1):빙결 = 200
	BASE:(CHARANUM-1):빙결 = 200
	MAXBASE:(CHARANUM-1):전격 = 100
	BASE:(CHARANUM-1):전격 = 100
	
	ABL:(CHARANUM-1):스킬1 = 321;물어뜯기
	ABL:(CHARANUM-1):스킬2 = 725 ;파이어볼
	ABL:(CHARANUM-1):스킬3 = 710 ;파이어스톰
	ABL:(CHARANUM-1):스킬4 = 0
	ABL:(CHARANUM-1):스킬5 = 0
	ABL:(CHARANUM-1):스킬6 = 0
	CALL SYNC_STATUS, (CHARANUM-1)
	CALL HEALTH_CHARA, (CHARANUM-1)
	
	던전플래그:99:1 = 35
	
ELSEIF 현HP비율(CHARANUM-3) < 30 && 던전플래그:99:1 == 35
	PRINTFORML 
	PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃おのれ、またしてもここまで‥‥‥っ　　　　　　　　　　　　　　┃
	PRINTFORML ┃＞　追い詰められ、怨嗟を漏らすムンドゥス　　　　　　　　　　　┃
	PRINTFORML ┃　　取り繕っていた姿にも亀裂が走り――　　　　　　　　　　　　┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
	FORCEWAIT
	PRINTFORML 
	PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃おぉ‥‥‥我が崩れる。維持が出来ぬ‥‥‥　　　　　　　　　　　┃
	PRINTFORML ┃おのれ、オノレェっ。スパーダ‥‥‥スパーダァ！　　　　　　　　┃
	PRINTFORML ┃＞　外皮が崩れ落ち、そこからマグマにも似た魔力が覗き　　　　　┃
	PRINTFORML ┃　　呪わしく、絡め取らんかのようにダンテへと腕を伸ばしている　┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
	FORCEWAIT
	PRINTFORML 
	PRINTFORML ┏> 단테━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
	PRINTFORML ┃悪いが、むさ苦しいお誘いは間に合ってる。　　　　　　　　　　　┃
	PRINTFORML ┃お前にはママのハグよりいいものをやるよ、好物だったろ？　　　　┃
	PRINTFORML ┃＞　ダンテは二丁拳銃を交差させ、ﾊﾞﾝと言いつつニヤリと笑った　 ┃
	PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
	FORCEWAIT
	던전플래그:99:1 = 36
ENDIF


;---------------------------------------------------------------
;ムンドゥス戦：HPが一定量減ると増援
;増援死亡後2ターンで増援復活
;ARG　1:ターン開始時、コア処理・幻影復活処理 2:数を카운트
;---------------------------------------------------------------
@MUNDUS_GIMMICK,ARG
;LOCAL:1 ターン종료시の적総数
;LOCAL:2 溶岩龍8　生存확인
;LOCAL:3 溶岩龍10　生存확인
;LOCAL:4 溶岩龍　全滅
;LOCAL:5 溶岩龍　復活카운트

;溶岩龍9と10が死亡していないか체크
IF ARG == 2
	LOCAL:1 = 0
	LOCAL:2 = 0
	LOCAL:3 = 0
	
	SIF 현HP비율(CHARANUM-1) <= 0
		LOCAL:2 = 1
	SIF 현HP비율(CHARANUM-2) <= 0
		LOCAL:3 = 1
	
	IF LOCAL:2 + LOCAL:3 == 2
		LOCAL:1 = 1
	ENDIF
	
;	PRINTFORMW  溶岩龍全滅フラグ【{LOCAL:1 }】
	
ELSEIF ARG == 1
	;ムンドゥス生存時　溶岩龍全滅で復活카운트
	IF LOCAL:1 == 1 && 현HP비율(CHARANUM-3) >= 0
		LOCAL:5 ++
		
		IF LOCAL:5 == 2
			PRINTFORML 
			PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
			PRINTFORML ┃＞　ムンドゥスが手を頭上へかざす　　　　　　　　　　　　　　　┃
			PRINTFORML ┃すると溶岩の龍が再び二体現れた！　　　　　　　　　　　　　　　┃
			PRINTFORML ┃　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　┃
			PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
			FORCEWAIT
			CFLAG:(CHARANUM-1):상태이상 = 0
			CFLAG:(CHARANUM-1):상태이상경과턴수 = 0
			CALL VAR_HP,(CHARANUM-1),MAXBASE:(CHARANUM-1):ＨＰ
			
			CFLAG:(CHARANUM-2):상태이상 = 0
			CFLAG:(CHARANUM-2):상태이상경과턴수 = 0
			CALL VAR_HP,(CHARANUM-2),MAXBASE:(CHARANUM-2):ＨＰ
			LOCAL:2 = 0
			LOCAL:3 = 0
			LOCAL:4 = 0
			LOCAL:5 = 0
		ENDIF
	ENDIF
ENDIF

;---------------------------------------------------------------
;나이트메어戦：幻影が倒れると、翌ターンまでコアが노출し全속성약점化
;翌々ターンにコア収納
;ARG　1:ターン開始時、コア処理・幻影復活処理 2:数を카운트
;---------------------------------------------------------------
@NIGHTMARE_GIMMICK,ARG
#DIM 残存数

;LOCAL:4 ターン종료시の적総数
;LOCAL:5 幻影の종류　1:팬텀 2:グリフォン 3:트리슈
;LOCAL:6 幻影復活카운트　2で復活

IF 던전플래그:99:1 < 28
	LOCAL:5 = 1
ELSEIF 던전플래그:99:1 < 32
	LOCAL:5 = 2
ELSE
	LOCAL:5 = 3
ENDIF


;적の数を확인し、LOCAL:4へ収める
IF ARG == 2
	LOCAL:4 = 0
;	FOR LOCAL,7,17
;		LOCALS = 포지션{LOCAL}
;		;存在していない포지션は飛ばす
;		SIF FLAG:LOCALS < 0
;			CONTINUE
;		;死亡はとばす
;		SIF GET_STATE(CFLAG:LOCAL:상태이상) == "DYING"
;			CONTINUE
;		LOCAL:4 += 1
;	NEXT
;	
	
	IF LOCAL:5 == 1
		SIF FINDCHARA_ENEMY(658) == 3
			LOCAL:4 = 1
	ELSEIF LOCAL:5 == 2
		SIF FINDCHARA_ENEMY(877) == 3
			LOCAL:4 = 1
	ELSE
		SIF FINDCHARA_ENEMY(3505) == 3
			LOCAL:4 = 1
	ENDIF

;PRINTFORMW  적の数は【{LOCAL:4 }】

;1体のみ、かつ나이트메어健在時はコア노출し、幻影復活카운트+1
ELSEIF ARG == 1
	IF LOCAL:4 == 1 && FINDCHARA_ENEMY(3298) != 3
		SIF !GETBIT(던전플래그:99:8,5)
			SETBIT 던전플래그:99:8,5
		LOCAL:6 ++
		IF LOCAL:6 == 1
			SETCOLOR 0xff0032
			PRINTL 
			PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━┓
			PRINTFORML ┃＞　ナイトメアが動きを止め震えだす　　　　　┃
			PRINTFORML ┃液状の体が固まり、コアが露出した！　　　　　┃
			PRINTFORML ┃　　　　　　　　　　　　　　　　　　　　　　┃
			PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━┛
			PRINTL 
			RESETCOLOR
			
			MAXBASE:(CHARANUM-2):검격 = 150
			BASE:(CHARANUM-2):검격 = 150
			MAXBASE:(CHARANUM-2):비구 = 150
			BASE:(CHARANUM-2):비구 = 150
			MAXBASE:(CHARANUM-2):타격 = 150
			BASE:(CHARANUM-2):타격 = 150
			MAXBASE:(CHARANUM-2):전술 = 150
			BASE:(CHARANUM-2):전술 = 150
			MAXBASE:(CHARANUM-2):화염 = 150
			BASE:(CHARANUM-2):화염 = 150
			MAXBASE:(CHARANUM-2):빙결 = 150
			BASE:(CHARANUM-2):빙결 = 150
			MAXBASE:(CHARANUM-2):전격 = 150
			BASE:(CHARANUM-2):전격 = 150
			MAXBASE:(CHARANUM-2):충격 = 150
			BASE:(CHARANUM-2):충격 = 150
			MAXBASE:(CHARANUM-2):신경 = 0
			BASE:(CHARANUM-2):신경 = 0
			MAXBASE:(CHARANUM-2):정신 = 0
			BASE:(CHARANUM-2):정신 = 0
			MAXBASE:(CHARANUM-2):주살 = 0
			BASE:(CHARANUM-2):주살 = 0
			MAXBASE:(CHARANUM-2):파마 = 0
			BASE:(CHARANUM-2):파마 = 0
			MAXBASE:(CHARANUM-2):지변 = 150
			BASE:(CHARANUM-2):지변 = 150
			MAXBASE:(CHARANUM-2):수격 = 150
			BASE:(CHARANUM-2):수격 = 150
			MAXBASE:(CHARANUM-2):질풍 = 150
			BASE:(CHARANUM-2):질풍 = 150
			MAXBASE:(CHARANUM-2):중력 = 150
			BASE:(CHARANUM-2):중력 = 150
			MAXBASE:(CHARANUM-2):핵열 = 150
			BASE:(CHARANUM-2):핵열 = 150
			MAXBASE:(CHARANUM-2):만능 = 150
			BASE:(CHARANUM-2):만능 = 150
			
			ABL:(CHARANUM-2):스킬1 = 2003 ;메기도라온
			ABL:(CHARANUM-2):스킬2 = 0
			ABL:(CHARANUM-2):스킬3 = 0
			ABL:(CHARANUM-2):스킬4 = 0
			
		;翌々ターンで幻影復活、コア収納　フラグ리셋
		ELSEIF LOCAL:6 == 2
		
			SETCOLOR 0xff0032
			PRINTL 
			PRINTFORML ┏>MESSAGE━━━━━━━━━━━━━━━━━━┓
			PRINTFORML ┃＞　ナイトメアが再び液状に変化してゆく　　　┃
			PRINTFORML ┃コアが収納され、幻影が再び現れた‥‥‥　　　┃
			PRINTFORML ┃　　　　　　　　　　　　　　　　　　　　　　┃
			PRINTFORMW ┗━━━━━━━━━━━━━━━━━━━━━━┛
			PRINTL 
			RESETCOLOR
			
			MAXBASE:(CHARANUM-2):검격 = 0
			BASE:(CHARANUM-2):검격 = 0
			MAXBASE:(CHARANUM-2):비구 = 0
			BASE:(CHARANUM-2):비구 = 0
			MAXBASE:(CHARANUM-2):타격 = 0
			BASE:(CHARANUM-2):타격 = 0
			MAXBASE:(CHARANUM-2):전술 = 0
			BASE:(CHARANUM-2):전술 = 0
			MAXBASE:(CHARANUM-2):화염 = 0
			BASE:(CHARANUM-2):화염 = 0
			MAXBASE:(CHARANUM-2):빙결 = 0
			BASE:(CHARANUM-2):빙결 = 0
			MAXBASE:(CHARANUM-2):전격 = 0
			BASE:(CHARANUM-2):전격 = 0
			MAXBASE:(CHARANUM-2):충격 = 0
			BASE:(CHARANUM-2):충격 = 0
			MAXBASE:(CHARANUM-2):신경 = 0
			BASE:(CHARANUM-2):신경 = 0
			MAXBASE:(CHARANUM-2):정신 = 0
			BASE:(CHARANUM-2):정신 = 0
			MAXBASE:(CHARANUM-2):주살 = 0
			BASE:(CHARANUM-2):주살 = 0
			MAXBASE:(CHARANUM-2):파마 = 0
			BASE:(CHARANUM-2):파마 = 0
			MAXBASE:(CHARANUM-2):지변 = 0
			BASE:(CHARANUM-2):지변 = 0
			MAXBASE:(CHARANUM-2):수격 = 0
			BASE:(CHARANUM-2):수격 = 0
			MAXBASE:(CHARANUM-2):질풍 = 0
			BASE:(CHARANUM-2):질풍 = 0
			MAXBASE:(CHARANUM-2):중력 = 0
			BASE:(CHARANUM-2):중력 = 0
			MAXBASE:(CHARANUM-2):핵열 = 0
			BASE:(CHARANUM-2):핵열 = 0
			MAXBASE:(CHARANUM-2):만능 = 100
			BASE:(CHARANUM-2):만능 = 100
			
			ABL:(CHARANUM-2):스킬1 = 107 ;고천열풍탄
			ABL:(CHARANUM-2):스킬2 = 326 ;베어먹기
			ABL:(CHARANUM-2):스킬3 = 2034 ;만마의난무
			ABL:(CHARANUM-2):스킬4 = 0
			
			CLEARBIT 던전플래그:99:8,5
			LOCAL:6 = 0
			
			CFLAG:(CHARANUM-1):상태이상 = 0
			CFLAG:(CHARANUM-1):상태이상경과턴수 = 0
			CALL VAR_HP,(CHARANUM-1),MAXBASE:(CHARANUM-1):ＨＰ
		ENDIF
	ENDIF
ENDIF


;---------------------------------------------------------------
;전투時のレッドオーブ취득処理
;ARG　1:전투開始時の카운트　2:ターン종료시のオーブ부여処理　3:전투종료시のオーブ부여処理
;---------------------------------------------------------------
@GET_ORB_BATTLE,ARG
#DIM 초기数
#DIM 残存数

;LOCAL:1 ターン開始時の적総数
;LOCAL:2 ターン종료시の적総数
;LOCAL:3 ターン開始時と종료시の差分

;ARGが1の時は전투開始時。적の数を数える
IF ARG == 1
	LOCAL:1 = 0
	FOR LOCAL,7,17
		LOCALS = 포지션{LOCAL}
		SIF FLAG:LOCALS < 0
			CONTINUE
		LOCAL:1 += 1
	NEXT
;	PRINTFORMW  적の초기数は【{LOCAL:1 }】
;ARGが2の時はターン종료시。残적数を数え、開始時との差が出ていればレッドオーブ취득
ELSEIF ARG == 2
	;적の現在の数をLOCAL:2に収める
	LOCAL:2 = 0
	FOR LOCAL,7,17
		LOCALS = 포지션{LOCAL}
		SIF FLAG:LOCALS < 0
			CONTINUE
		LOCAL:2 += 1
	NEXT
	
;	PRINTFORMW  적の残存数は【{LOCAL:2 }】
	
	;초기数と残存数で差を산출
	LOCAL:3 = LOCAL:1 - LOCAL:2
	
	;差が生じていればレッドオーブを취득
	IF LOCAL:3 > 0
		;進行具合により倍率UP
		IF 던전플래그:99:11 >= 4
			PRINTFORML レッドオーブ +{10 * LOCAL:3}
			MONEY:99 += 10 * LOCAL:3
		ELSE
			PRINTFORML レッドオーブ +{5 * LOCAL:3}
			MONEY:99 += 5 * LOCAL:3
		ENDIF
	LOCAL:1 = LOCAL:2
	ENDIF
ELSEIF ARG == 3
	;最後のターン時に収められていたLOCAL:1が1이상であればオーブの부여処理
	IF LOCAL:1 > 0
		;進行具合により倍率UP
		IF 던전플래그:99:1 >= 27
			PRINTFORML レッドオーブ +{10 * LOCAL:1}
			MONEY:99 += 30 * LOCAL:1
		ELSEIF 던전플래그:99:1 >= 11
			PRINTFORML レッドオーブ +{10 * LOCAL:1}
			MONEY:99 += 10 * LOCAL:1
		ELSE
			PRINTFORML レッドオーブ +{5 * LOCAL:1}
			MONEY:99 += 5 * LOCAL:1
		ENDIF
	ENDIF
ENDIF

RETURN

