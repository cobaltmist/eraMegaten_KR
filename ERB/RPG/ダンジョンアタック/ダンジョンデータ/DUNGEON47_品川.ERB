
;=======================================================================
;시나가와
;0,던전攻略조건フラグ,数値によって出現する적の強さに보정が与えられる
;
;1,하니엘이벤트플래그	 -1,하니엘撃破, 1,에키드나의뢰保留		2,에키드나의뢰受諾		3,카테드랄保留		4,카테드랄受諾
;2,하니엘友好
;
;10, 初回
;11, 説教
;던전플래그:47:1 = 1.에키드나討伐を断った
;던전플래그:47:2 = 1.에키드나討伐承諾
;던전플래그:47:10-19 = 1.메시아교도
;던전플래그:47:20 = 1.로우히어로　2.에키드나討伐進行中
;던전플래그:47:21 = 1.守護者알마티
;
;던전플래그:20:0 = 1.ギンザの鍵

;던전ナンバー47
;=======================================================================

;	Edit	Date			Author					Reason
;	001		20XX/XX/XX								新規作成
;	002		2019/04/22								メシアン系エネミー추가
;	003		2020/08/20								아이템関連と카테드랄関連を변경


;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_47
SIF 던전플래그:[[던전:시나가와]]:0
	RETURN 1
RETURN 0




;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_47
RESULTS = 시나가와


;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_47
PRINT 시나가와
SELECTCASE FLAG:현M
	CASE 0
		PRINTL   １Ｆ
	CASE 1
		PRINTL   ２Ｆ
	CASE 2
		PRINTL   ３Ｆ
	CASE 3
		PRINTL   ４Ｆ
	CASEELSE
		PRINTL
ENDSELECT

;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_47,ARG
FLAG:현M = 0
FLAG:현X = 20
FLAG:현Y = 17
;CALL AUTOMAP

;=======================================================================
;スタート時이벤트
;=======================================================================
@EVENT_DUNGEON_START_47
IF 던전플래그:47:10++ == 0
	CALL MESSAGE_WINDOW_D, "", @"＞시나가와를 방문한 %CALLNAME:MASTER%의 앞을 거대한 교회가 막아선다/＞이 대교회야말로 시나가와를/＞메시아교도의 성지로 자리매김하게 하고 있는 것이다/＞그리고 이 대교회에는 메시아교의 간부 중 하나 대천사 하니엘이 있다고 한다"
ENDIF


;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_47
SELECTCASE FLAG:현M
	CASE 0
		FLAG:최대X = 39
		FLAG:최대Y = 19 
								;0000000000111111111122222222223333333333
;								;0123456789012345678901234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                                       "
		CALL MAKE_FLOOR_LINE, 1," 111 111111111 1211 111 11111 111 1111 "
		CALL MAKE_FLOOR_LINE, 2," 1   1     H 1 6  1 1     2 111 1 1  1 "
		CALL MAKE_FLOOR_LINE, 3," 121 H 3 1 1 1    2 111H111     111  H "
		CALL MAKE_FLOOR_LINE, 4,"   1 1 2 2 1 11111111       121   1  1 "
		CALL MAKE_FLOOR_LINE, 5," 121 1111111        1 11211 1   121  1 "
		CALL MAKE_FLOOR_LINE, 6," 1 H1         11111 2 11  1181H11 1  H "
		CALL MAKE_FLOOR_LINE, 7," 1  11 11111  1   1 1                1 "
		CALL MAKE_FLOOR_LINE, 8," 1   1 1   1  2   1    1   8   1     1 "
		CALL MAKE_FLOOR_LINE, 9," 111 111 4 1  1 821   111 111 111 1  H "
		CALL MAKE_FLOOR_LINE,10,"   1   1 2 1  1        2   2   2  2  1 "
		CALL MAKE_FLOOR_LINE,11," 321 8 1111111111111111111111111111111 "
		CALL MAKE_FLOOR_LINE,12,"     2   2                             "
		CALL MAKE_FLOOR_LINE,13," 11111H1111111111111111111111181111111 "
		CALL MAKE_FLOOR_LINE,14," 1   1   1       1  1   2   2   2 1  1 "
		CALL MAKE_FLOOR_LINE,15," 1 8 1 3 1 1 1 1 1  1 8 1 8 1 1 1 1  1 "
		CALL MAKE_FLOOR_LINE,16," 1 2 1 2 1 2 1 2 1  1 2   2   2   1  1 "
		CALL MAKE_FLOOR_LINE,17," 11111111111181111  111111111111111  8 "
		CALL MAKE_FLOOR_LINE,18,"                    4                  "



	CASE 1
		FLAG:최대X = 37
		FLAG:최대Y = 17 
								;0000000000111111111122222222223333333
;								;0123456789012345678901234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                                     "
		CALL MAKE_FLOOR_LINE, 1," B21121121 7211211 1121126   112112C "
		CALL MAKE_FLOOR_LINE, 2,"         1       2 2         2       "
		CALL MAKE_FLOOR_LINE, 3," 11111111111111111111111111111111111 "
		CALL MAKE_FLOOR_LINE, 4," 1   1   1   1   1 1   1   1   1   1 "
		CALL MAKE_FLOOR_LINE, 5," 1 3 1 b 1 P 1 P 1 1 c 1 P 1 3 1 b 1 "
		CALL MAKE_FLOOR_LINE, 6," 1 2 1 2 1 2 1 2 1 1 2 1 2 1 2 1 2 1 "
		CALL MAKE_FLOOR_LINE, 7," 11111111111111111111111111111111111 "
		CALL MAKE_FLOOR_LINE, 8," 1   1   1   1   1 1   1   1   1   1 "
		CALL MAKE_FLOOR_LINE, 9," 1 3 1 P 1 a 1 3 1 1 3 1 3 1 c 1 3 1 "
		CALL MAKE_FLOOR_LINE,10," 1 2 1 2 1 2 1 2 1 1 2 1 2 1 2 1 2 1 "
		CALL MAKE_FLOOR_LINE,11," 111111111111b2A2c111111111111111111 "
		CALL MAKE_FLOOR_LINE,12," 1   1   1   1 2 1 1   1   1   1   1 "
		CALL MAKE_FLOOR_LINE,13," 1 b 1 b 1 3 1 3 1 1 b 1 c 1 P 1 c 1 "
		CALL MAKE_FLOOR_LINE,14," 1 2 1 2 1 2 1   1 1 2 1 2 1 2 1 2 1 "
		CALL MAKE_FLOOR_LINE,15," 11111111111111111111111111111111111 "
		CALL MAKE_FLOOR_LINE,16,"                                     "
		
	CASE 2
	;시나가와3階
		FLAG:최대X = 20 
		FLAG:최대Y = 19 

;								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 1 6211111111127 1  "
		CALL MAKE_FLOOR_LINE, 2," 1       2       1  "
		CALL MAKE_FLOOR_LINE, 3," 11111111111111111  "
		CALL MAKE_FLOOR_LINE, 4," 1          2 2  1  "
		CALL MAKE_FLOOR_LINE, 5," 121G11     1 1  1  "
		CALL MAKE_FLOOR_LINE, 6," 1          1 G  1  "
		CALL MAKE_FLOOR_LINE, 7," 121111  1  1 1  1  "
		CALL MAKE_FLOOR_LINE, 8," 1      141 1 1  1  "
		CALL MAKE_FLOOR_LINE, 9," 1       1       1  "
		CALL MAKE_FLOOR_LINE,10," 1       G       1  "
		CALL MAKE_FLOOR_LINE,11," 1     TG111111121  "
		CALL MAKE_FLOOR_LINE,12," 1 1 1           1  "
		CALL MAKE_FLOOR_LINE,13," 1 1 1      111121  "
		CALL MAKE_FLOOR_LINE,14," 1 G 1           1  "
		CALL MAKE_FLOOR_LINE,15," 1 1 1      11G121  "
		CALL MAKE_FLOOR_LINE,16," 1 2 2           1  "
		CALL MAKE_FLOOR_LINE,17," 11111111111111111  "
		CALL MAKE_FLOOR_LINE,18,"                    "


	CASE 3
	;시나가와4
		FLAG:최대X = 15 
		FLAG:최대Y = 17 

;								;012345678901234
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1," 127 1 1 1 a21 "
		CALL MAKE_FLOOR_LINE, 2," 1   1 2 1   1 "
		CALL MAKE_FLOOR_LINE, 3," 1111111111111 "
		CALL MAKE_FLOOR_LINE, 4,"     1 2 1     "
		CALL MAKE_FLOOR_LINE, 5," M1B 1 c 1 C1M "
		CALL MAKE_FLOOR_LINE, 6," 2   1   1   2 "
		CALL MAKE_FLOOR_LINE, 7," 11111 3 11111 "
		CALL MAKE_FLOOR_LINE, 8," 1     2     1 "
		CALL MAKE_FLOOR_LINE, 9," 12b21111A d21 "
		CALL MAKE_FLOOR_LINE,10," 1     2     1 "
		CALL MAKE_FLOOR_LINE,11," 11111 3 11111 "
		CALL MAKE_FLOOR_LINE,12," 2   1   1   2 "
		CALL MAKE_FLOOR_LINE,13," M1E 1 e 1 D1M "
		CALL MAKE_FLOOR_LINE,14,"     1 2 1     "
		CALL MAKE_FLOOR_LINE,15," 1111111111111 "
		CALL MAKE_FLOOR_LINE,16,"               "
	CASEELSE

ENDSELECT
;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_47, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 던전플래그:75~99
;LOCAL:4 이벤트
;LOCAL:8 メッセンジャー
;(0/0)でLOCALを소거
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
IF ARG == 3
	IF GETBIT(던전플래그:47:(FLAG:현M+75), LOCAL:3)
		DA:(ARG:1):(ARG:2) = 1
	ELSE
		DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:3 * 10 + 3
	ENDIF
	LOCAL:3++
ENDIF
;이벤트扉
IF ARG == 12
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:2 * 10 + 2
	LOCAL:2++
ENDIF
IF ARG == 4
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:4 * 10 + 4
	LOCAL:4++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
		;하니엘
		CASE 200
			SIF 던전플래그:(FLAG:현던전):1 == -1
				DA:(ARG:1):(ARG:2) = 1
	ENDSELECT
ENDIF
IF ARG == 6
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:6 * 100 + 6
	LOCAL:6++
ENDIF
IF ARG == 7
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:7 * 100 + 7
	LOCAL:7++
ENDIF
IF ARG == 8
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:8 * 10 + 8
	LOCAL:8++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
	ENDSELECT
ENDIF
IF ARG == 9
	DA:(ARG:1):(ARG:2) = FLAG:현M *1000 + LOCAL:9 * 10 + 9
	LOCAL:9++
	SELECTCASE DA:(ARG:1):(ARG:2) / 10
	ENDSELECT
ENDIF

;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_47,ARG,ARG:1
IF DA:ARG:(ARG:1) % 10 == 2 && DA:ARG:(ARG:1) != 2
	CALL DOOR_47, ARG, ARG:1
	RETURN RESULT
ELSE
	CALL CAN_ENTER,ARG,ARG:1
	RETURN RESULT
ENDIF

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_47, ARGS, ARG, ARG:1
SELECTCASE ARGS
	;이벤트扉
	CASE "G"
		RETURN 12
	;落とし穴
	CASE "P"
		RETURN 15
	;데미지罠はMASTERがLAWの時は設置されない
	;HP罠
	CASE "H"
		IF ABL:MASTER:속성LC == 1
			RETURN 1
		ELSE
			RETURN 25
		ENDIF
	;MP罠
	CASE "M"
		IF ABL:MASTER:속성LC == 1
			RETURN 1
		ELSE
			RETURN 35
		ENDIF
	CASE "a"
		RETURN 16
	CASE "A"
		RETURN 17
	CASE "b"
		RETURN 26
	CASE "B"
		RETURN 27
	CASE "c"
		RETURN 36
	CASE "C"
		RETURN 37
	CASE "d"
		RETURN 46
	CASE "D"
		RETURN 47
	CASE "e"
		RETURN 56
	CASE "E"
		RETURN 57
ENDSELECT

;=======================================================================
;[5]調べる　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_47
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	;========
	;宝の処理
	;========
	CASE 3
		CALL TREASURE_47
		RETURN 1
	;==========
	;이벤트の処理
	;==========
	CASE 4
		CALL EVENT_47
		RETURN 1
	;=======
	;階段
	;=======
	CASE 6, 7
		CALL WORP_47
		RETURN 1
	;=======
	;メッセンジャー
	;=======
	CASE 8
		CALL MESSENGER_47
		RETURN 1
	CASEELSE
		CALL MESSAGE_WINDOW_D, "", "아무것도 없는 것 같다"
		RETURN 1
ENDSELECT
RETURN 1

;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_47,ARG
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 10
	;==========
	;扉の処理
	;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN RESULT
	;========
	;宝の処理
	;========
	CASE 3
		CALL TREASURE_47
		RETURN 1
	;==========
	;이벤트の処理
	;==========
	CASE 4
		CALL EVENT_47, ARG
		RETURN 1
	;==========
	;トラップの処理
	;==========
	CASE 5
		CALL TRAP_47
		RETURN RESULT
	;=======
	;階段
	;=======
	CASE 6, 7
		CALL WORP_47
		RETURN 1
	;=======
	;メッセンジャー
	;=======
	CASE 8
		CALL MESSENGER_47, ARG
		RETURN 1
	CASEELSE
		RETURN 0
ENDSELECT
RETURN 1

;=======================================================================
;扉이벤트
;=======================================================================
@DOOR_47, ARG, ARG:1
SELECTCASE DA:ARG:(ARG:1) / 10
	;原作でジーザスシリーズがあった扉
	CASE 200, 201, 204, 205
		CALL MESSAGE_WINDOW_D, "", "＞문은 봉인되어 있다"
		RETURN 0
	;로우히로の部屋
	CASE 202
		SIF FLAG:현Y == 9
			RETURN 1
		CALL MESSAGE_WINDOW_D, "", "커다란 문 주위에는/천사가 성자의 탄생을 축복하고 있는 의장(意匠)이 모여있다/문을 열까？"
		CALL INPUT_YN_D
		SIF RESULT
			RETURN 0
	CASE 203
		;하니엘が生存していて友好的でない場合は扉が開かない(=ターミナルが使えない)
		IF 던전플래그:(FLAG:현던전):1 >= 0 && !던전플래그:(FLAG:현던전):2
			CALL MESSAGE_WINDOW_D, "", "＞문은 닫혀있다"
			RETURN 0
		ENDIF
ENDSELECT
RETURN 1
;=======================================================================
;罠
;=======================================================================
@TILE_MARK_COMMON_47_5, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	;落とし穴(P)
	CASE 1
		RESULTS = \@GET_FLOOR_ANALYZE_T(ARG:1, ARG:2) == 2 ?　#□\@
	CASEELSE
		RESULTS = \@GET_FLOOR_ANALYZE_T(ARG:1, ARG:2) == 2 ?덫#□\@
ENDSELECT
@TRAP_47
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	;落とし穴
	CASE 1
		CALL MESSAGE_WINDOW_D, "", "＞함정이다！"
		TWAIT 1000, 1
		CALL DUNGEON_WORP, FLAG:현M-1, FLAG:현X,  FLAG:현Y
	;HP데미지(H)
	CASE 2
		CALL DUNGEON_TRAP_HP, 10 + RAND:11
	;MP데미지(M)
	CASE 3
		CALL DUNGEON_TRAP_MP, 10 + RAND:11
ENDSELECT
RETURN 1


;=======================================================================
;ワープゾーン
;=======================================================================
@TILE_MARK_COMMON_47_6, ARG, ARG:1, ARG:2
SELECTCASE ARG % 100
	CASE 6
		RESULTS = 승
	CASEELSE
		RESULTS = □
ENDSELECT
@TILE_MARK_COMMON_47_7, ARG, ARG:1, ARG:2
SELECTCASE ARG % 100
	CASE 7
		RESULTS = 강
	CASEELSE
		RESULTS = □
ENDSELECT
@WORP_47
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) % 100
	CASE 6
		CALL DUNGEON_UPSTAIRS_ID, FLAG:현M+1, DA:(FLAG:현X):(FLAG:현Y)+1001
	CASE 7
		CALL DUNGEON_DOWNSTAIRS_ID, FLAG:현M-1, DA:(FLAG:현X):(FLAG:현Y)-1001
	CASEELSE
		IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
			CALL MESSAGE_WINDOW_D, "", "＞워프존이다！"
			CALL SHOW_PICTURE, "EMPTY"
			CALL DUNGEON_WORP_ID, FLAG:현M, DA:(FLAG:현X):(FLAG:현Y)+1, 1
		ENDIF
ENDSELECT

;=======================================================================
;이벤트まとめ
;=======================================================================
@TILE_MARK_COMMON_47_4, ARG, ARG:1, ARG:2
SELECTCASE ARG / 10
	CASE 1
		RESULTS = 출
	CASEELSE
		RESULTS = ！
ENDSELECT
@EVENT_47, ARG
LOCAL = 0
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		CALL MESSAGE_WINDOW_D, "", "＞늠름한 청년의 상이 있다/＞상에는 구세주의 상이라고 제목이 새겨져있다"
	CASE 1
		CALL DUNGEON_EXIT
	CASE 200
		LOCAL = 0
		SELECTCASE 던전플래그:(FLAG:현던전):1
			;初회화
			CASE 0
				던전플래그:(FLAG:현던전):1 = 1
				CALL MESSAGE_WINDOW_D, "", "＞방 안에는 법의를 걸친 청년이 있었다"
				CALL MESSAGE_WINDOW_D, "청년", "안녕하세요/당신은……메시아교도가 아닌 것 같다/게다가、아마도 악마술사인 것 같군요？"
				CALL MESSAGE_WINDOW_D, "청년", "앗차、그렇게 경계하지 말아주세요/저도 옛날에는 메시아교를 믿지 않았고/악마술사로서 이 도쿄에서 싸우다/악마의 손에 걸려 목숨을 잃었습니다"
				CALL MESSAGE_WINDOW_D, "청년", "하지만、신께서는 저의 힘을 눈여겨 보시고/저를 부활시키셨습니다/즉 악마술사의 힘도 신을 위해 바쳐지는 것입니다"
				IF SAVESTR:로우히어로NAME == ""
					CALL MESSAGE_WINDOW_D, "청년", "……미안합니다/자기소개도 아직이었네요/저는……"
					$YOSIO_LOOP
					CALL MESSAGE_WINDOW_D, "", "＞메시아교의 구세주 로우히로의 이름을 입력해 주십시오"
					INPUTS
					SIF RESULTS == ""
						RESULTS = 요시오
					SAVESTR:로우히어로NAME = %RESULTS%
					CALL MESSAGE_WINDOW_D, "", @"「%RESULTS%」로 좋습니까？"
					CALL INPUT_YN_D
					SIF RESULT
						GOTO YOSIO_LOOP
					$YOSIO_LOOP1
					CALL MESSAGE_WINDOW_D, "", "＞메시아교의 구세주 로우히로의 애칭을 입력해 주십시오"
					INPUTS
					SIF RESULTS == ""
						RESULTS = 요시오
					SAVESTR:로우히어로CALLNAME = %RESULTS%
					CALL MESSAGE_WINDOW_D, "", @"「%RESULTS%」로 좋습니까？"
					CALL INPUT_YN_D
					SIF RESULT
						GOTO YOSIO_LOOP1
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, @"%SAVESTR:로우히어로CALLNAME%입니다/잘 부탁드립니다"
				ENDIF
				;하니엘討伐의뢰を受けてるか極端なカオス
				IF 던전플래그:[[던전:T.D.L.]]:1 == 2 || CFLAG:MASTER:질혼치 < 44
					CALL MESSAGE_WINDOW_D, "목소리", @"%SAVESTR:로우히어로CALLNAME%여……기다리거라……"
					CALL MESSAGE_WINDOW_D, "", "＞하늘에서 목소리가 울리며、천사가 훨훨 내려왔다…"
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "하니엘님！"
					CALL MESSAGE_WINDOW_D, "하니엘", "보고 있자니 알겠노라/이 자의 영혼은 이미/뿌리까지 카오스에 물들어있다/설득은 소용없을 것 같다…"
					CALL MESSAGE_WINDOW_D, "하니엘", "사악한 악마술사여/이 천사 하니엘 몸소/지옥으로 보내주마！"
					LOCAL = 1
				ELSE
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "부활한 저는/천년왕국에 대해/들었습니다/지상에 평화를 가져다 줄 천년왕국……"
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "저는 결심했습니다/천년왕국 실현을 위해/구세주로서 싸울 것을"
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "하지만、악마의 수가/너무 많아서/저 한 사람의 힘으로는/감당할 수 없습니다"
					;すでに에키드나を倒している場合
					IF 던전플래그:[[던전:T.D.L.]]:1 == -1
						CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "당신이 에키드나를/쓰러뜨려 주셨다는 것은 이미 들었습니다/하니엘님！/에키드나를 퇴치해주신 분이 오셨습니다！"
						CALL MESSAGE_WINDOW_D, "", @"＞%SAVESTR:로우히어로CALLNAME%가 외치자/천사가 훨훨 내려왔다…"
						CALL MESSAGE_WINDOW_D, "하니엘", "잘했다/인간의 아이여/일단 이것을 받거라"
						CALL MESSAGE_WINDOW_D, "", "＞￥300000을 손에 넣었다"
						MONEY:0 += 300000
						CALL MESSAGE_WINDOW_D, "하니엘", "앞으로도/신을 위해、천년왕국을 위해/힘을 다해주게/좋은가？"
						CALL INPUT_SELECT_D, @"[0] 힘을 빌려준다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%"
						IF RESULT == 0
							LOCAL = 20
						ELSEIF RESULT == 1
							LOCAL = 21
						ELSE
							CALL MESSAGE_WINDOW_D, "하니엘", "어찌 신께 거스르겠다고 말하는가！/그렇다면 이 천사 하니엘 몸소/지옥으로 보내주마！"
							LOCAL = 1
						ENDIF
					ELSE
						CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "아무래도 당신에게도 역시 큰 힘이 있는 듯/그런 당신에게 부탁이 있습니다"
						CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "도쿄 데스티니 랜드에 자리잡은 사신 에키드나가/카테드랄의 건설을 방해하고/파괴하려고 하고 있습니다/사신 에키드나를 쓰러뜨리고 와주시지 않겠습니까"
						CALL INPUT_SELECT_D, @"[0] 맡는다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%%\@(던전플래그:20:6 && !던전플래그:20:0) ?/[3] 긴자대지하도의 문을 열어달라고 한다#\@%"
						IF RESULT == 0
							LOCAL = 10
						ELSEIF RESULT == 1
							LOCAL = 11
						ELSEIF RESULT == 2
							CALL MESSAGE_WINDOW_D, "목소리", @"%SAVESTR:로우히어로CALLNAME%여……/설득은 소용없을 것 같구나……"
							CALL MESSAGE_WINDOW_D, "", "＞하늘에서 목소리가 울리며、천사가 훨훨 내려왔다…"
							CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "하니엘님！"
							CALL MESSAGE_WINDOW_D, "하니엘", "사악한 악마술사여/이 천사 하니엘 몸소/지옥으로 보내주마！"
							LOCAL = 1
						ELSE
							LOCAL = 9
						ENDIF
					ENDIF
				ENDIF
			;에키드나保留中
			CASE 1
				;すでに에키드나を倒している場合
				IF 던전플래그:[[던전:T.D.L.]]:1 == -1
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "에키드나를 쓰러뜨리셨군요/하니엘님！/역시、해주셨습니다！"
					CALL MESSAGE_WINDOW_D, "", @"＞%SAVESTR:로우히어로CALLNAME%가 외치자/천사가 훨훨 내려왔다…"
					CALL MESSAGE_WINDOW_D, "하니엘", "잘했다/인간의 아이여/일단 이것을 받거라"
					CALL MESSAGE_WINDOW_D, "", "＞￥300000을 손에 넣었다"
					MONEY:0 += 300000
					CALL MESSAGE_WINDOW_D, "하니엘", "앞으로도/신을 위해、천년왕국을 위해/힘을 다해주게/좋은가？"
					CALL INPUT_SELECT_D, @"[0] 힘을 빌려준다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%"
					IF RESULT == 0
						LOCAL = 20
					ELSEIF RESULT == 1
						LOCAL = 21
					ELSE
						CALL MESSAGE_WINDOW_D, "하니엘", "어찌 신께 거스르겠다고 말하는가！/그렇다면 이 천사 하니엘 몸소/지옥으로 보내주마！"
						LOCAL = 1
					ENDIF
				ELSE
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "와주셨습니까/그렇다는 건 사신 에키드나와 싸울 결심을 하신 거군요？"
					CALL INPUT_SELECT_D, @"[0] 맡는다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%%\@(던전플래그:20:6 && !던전플래그:20:0) ?/[3] 긴자대지하도의 문을 열어달라고 한다#\@%"
					IF RESULT == 0
						LOCAL = 10
					ELSEIF RESULT == 1
						LOCAL = 11
					ELSEIF RESULT == 2
						CALL MESSAGE_WINDOW_D, "목소리", @"%SAVESTR:로우히어로CALLNAME%여……/설득은 소용없을 것 같구나……"
						CALL MESSAGE_WINDOW_D, "", "＞하늘에서 목소리가 울리며、천사가 훨훨 내려왔다…"
						CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "하니엘님！"
						CALL MESSAGE_WINDOW_D, "하니엘", "사악한 악마술사여/이 천사 하니엘몸소/지옥으로 보내주마！"
						LOCAL = 1
					ELSE
						LOCAL = 9
					ENDIF
				ENDIF
			;에키드나承諾
			CASE 2
				;すでに에키드나を倒している場合
				IF 던전플래그:[[던전:T.D.L.]]:1 == -1
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "에키드나를 쓰러뜨리셨군요/하니엘님！/그때의 악마술사분이 해주셨습니다！"
					CALL MESSAGE_WINDOW_D, "", @"＞%SAVESTR:로우히어로CALLNAME%가 외치자/천사가 훨훨 내려왔다…"
					CALL MESSAGE_WINDOW_D, "하니엘", "잘했다/인간의 아이여/일단 이것을 받거라"
					CALL MESSAGE_WINDOW_D, "", "＞￥300000을 손에 넣었다"
					MONEY:0 += 300000
					CALL MESSAGE_WINDOW_D, "하니엘", "앞으로도/신을 위해、천년왕국을 위해/힘을 다해주게/좋은가？"
					CALL INPUT_SELECT_D, @"[0] 힘을 빌려준다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%"
					IF RESULT == 0
						LOCAL = 20
					ELSEIF RESULT == 1
						LOCAL = 21
					ELSE
						CALL MESSAGE_WINDOW_D, "하니엘", "어찌 신께 거스르겠다고 말하는가！/그렇다면 이 천사 하니엘 몸소/지옥으로 보내주마！"
						LOCAL = 1
					ENDIF
				ELSE
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "빨리 에키드나를 쓰러뜨려주세요/카테드랄이 파괴되면/돌이킬 수 없는 일이 됩니다"
				ENDIF
			;카테드랄防衛保留
			CASE 3
				CALL MESSAGE_WINDOW_D, "하니엘", "인간의 아이여/신을 위해、천년왕국을 위해/힘을 다할지어다/좋은가？"
				CALL INPUT_SELECT_D, @"[0] 힘을 빌려준다/[1] 거절한다%\@CFLAG:MASTER:질혼치 < 170?/[2] 싸움을 건다#\@%"
				IF RESULT == 0
					LOCAL = 20
				ELSEIF RESULT == 1
					LOCAL = 21
				ELSE
					CALL MESSAGE_WINDOW_D, "하니엘", "어찌 신께 거스르겠다고 말하는가！/그렇다면 이 천사 하니엘 몸소/지옥으로 보내주마！"
					LOCAL = 1
				ENDIF
			;카테드랄侵攻受諾
			CASE 4
				CALL MESSAGE_WINDOW_D, "하니엘", "서둘러 카테드랄로 향할지어다/가이아교도의 마음대로 하게 해서는 안될 것이다"
		ENDSELECT
		;前ブロックでのLOCALの内容で分岐する
		SELECTCASE LOCAL
			;전투이벤트
			CASE 1
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CALL SET_HANIEL
				CALL MESSAGE_WINDOW_D, "", "＞천사 하니엘이 1명 나왔다！"
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				CALL MESSAGE_WINDOW_D, "", "＞천사 하니엘은 힘이 다했다"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "무슨 짓을……/하니엘님을 쓰러뜨려버리다니/당신은 힘을/잘못 사용하고 있습니다"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "이대로는/언젠가 파멸한다고요"
				CALL MESSAGE_WINDOW_D, , @"%SAVESTR:로우히어로CALLNAME%는 떠났다"
				;시나가와友好フラグ
				던전플래그:(FLAG:현던전):2 = 0
				;시나가와進行フラグ
				던전플래그:(FLAG:현던전):1 = -1
			CASE 9
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "카테드랄에 가고 싶으십니까？/그렇다면 일단은 사신 에키드나를 쓰러뜨려주세요/그렇게 하시면 하니엘님께서/분명히 소원을 들어주실거예요"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "사신 에키드나를 쓰러뜨릴 역할/맡아주실거죠？"
				CALL INPUT_YN_D
				IF RESULT == 0
					GOTO YES
				ELSE
					GOTO NO
				ENDIF
			CASE 10
				$YES
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "그렇습니까/맡아주시는 겁니까/감사합니다"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "당신은 아직/악마에게 혼을/팔아 넘기지 않으셨군요"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "그렇다면 이것을 가지고 가주세요/きっとお役に立つでしょう"
				;----- 003 ADD  ------- ロウじゃなくても承諾すればもらえるように
				;CALL MESSAGE_WINDOW_D, "", @"＞￥100000을 손에 넣었다%\@ABL:MASTER:속성LC == 1 ? /＞소닉블레이드을 손에 넣었다/＞법의옷을 손에 넣었다 #\@%"
				CALL MESSAGE_WINDOW_D, "", "＞￥100000을 손에 넣었다/＞소닉블레이드을 손에 넣었다/＞법의를 손에 넣었다%"
				MONEY += 100000
				;ロウのときは소닉블레이드と법의옷もついてくる
				;IF ABL:MASTER:속성LC == 1
					CALL GET_ITEMS, "소닉블레이드", 1
					CALL GET_ITEMS, "법의옷", 1
				;ENDIF
				던전플래그:(FLAG:현던전):1 = 2
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "그럼 부탁했다구요"
			;에키드나拒否
			CASE 11
				$NO
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "그렇습니까……/마음이 바뀌시면/다시 여기로 와주세요"
				던전플래그:(FLAG:현던전):1 = 1
			;카테드랄防衛受諾
			CASE 20
				;----- 003 ADD  ------- ギンザを通らなくても카테드랄に行けるように
				;CALL MESSAGE_WINDOW_D, "하니엘", "では카테드랄へ行くが良い/ギンザの地下に行くがよい"
				CALL MESSAGE_WINDOW_D, "하니엘", "그럼 카테드랄로 가도록 하거라/우리에게 협력한다면 긴자의 지하를 통할 필요가 없겠지"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "잘됐네요/하니엘님도 기뻐하십니다"
				;ロウの場合はここで지저스헬름をもらえる
				IF ABL:MASTER:속성LC == 1
					CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "지금의 당신이라면 이것을 사용할 수 있겠지요/가지고 가주세요"
					CALL MESSAGE_WINDOW_D, "", "＞지저스헬름을 손에 넣었다"
					CALL GET_ITEMS, "지저스헬름", 1
				ENDIF
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "그럼 또 만나요"
				;시나가와友好フラグ
				던전플래그:(FLAG:현던전):2 = 1
				;시나가와進行フラグ
				던전플래그:(FLAG:현던전):1 = 4
				던전플래그:20:0 |= 1
			;카테드랄防衛拒否
			CASE 21
				CALL MESSAGE_WINDOW_D, "하니엘", "신을 위해 싸우는 것을 거부하는 것인가？/그러한 일이 용서될거라 생각하는가！"
				CALL MESSAGE_WINDOW_D, SAVESTR:로우히어로CALLNAME, "하니엘님、기다려주세요/이 사람은 아직 자신의 운명을 깨닫지 못했을 뿐일 겁니다/곧 신을 위해 싸우지 않으면 안된다는 것을 깨달을 겁니다"
				CALL MESSAGE_WINDOW_D, "하니엘", "………/괜찮겠지/조금 생각할 시간을 주겠다/자신의 의무를 깨닫는다면 다시 오도록 하거라"
				던전플래그:(FLAG:현던전):1 = 3
		ENDSELECT
ENDSELECT
;이벤트後はMAP生成を行い、タイルを更新しておく
CALL MAKE_FLOOR, FLAG:현던전
@TILE_MARK_COMMON_47_8, ARG, ARG:1, ARG:2
SETCOLOR 0x00ff00
RESULTS = ｍ
@MESSENGER_47, ARG
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "메시아교도", "우리들의 손으로 악마를 멸해/이 나라를 구원하지 않으면 안돼/그걸 위해서는 어떤 희생도 마다하지 않으면 안되는 거야"
	CASE 1
		CALL MESSAGE_WINDOW_D, "템플나이트", "신입인가？/못보던 얼굴이군/조만간 방위거점을 카테드랄로 옮길 것 같다/그곳이 최후의 결전의 땅이 되겠지"
	CASE 2
		CALL MESSAGE_WINDOW_D, "메시아교도", "마침내 신께서 메시아를 보내주셨습니다/고통스러워하는 저희들을 보시고/구원의 손길을 내미신 겁니다"
	CASE 3
		IF 던전플래그:(FLAG:현던전):1 == -1
			CALL MESSAGE_WINDOW_D, "메시아교도", "슬픈 소식이예요/대천사 하니엘님께서 쓰러져 버리셨습니다/하니엘님을 건드린 것은 사악한 악마술사라던가"
			CALL MESSAGE_WINDOW_D, "메시아교도", "이 무슨 끔찍한 짓을 저지른 걸까요/악마술사에게 천벌이 있기를"
		;에키드나撃破済み
		ELSEIF 던전플래그:[[던전:T.D.L.]]:1 == -1
			CALL MESSAGE_WINDOW_D, "메시아교도", "도쿄의 동쪽에 자리잡고 있던/사신 에키드나가 퇴치되었습니다/成し遂げたのは구세주だとか/신께서도 기뻐하시겠지요"
		ELSE
			CALL MESSAGE_WINDOW_D, "메시아교도", "도쿄의 동쪽에 에키드나라는 이름의 사신이/자리잡고 있어서 곤란합니다"
		ENDIF
	CASE 4
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "메시아교도", "카테드랄만 완성되면/악마들도 가이아교도들도/무서워 할거야"
	CASE 5
		CALL MESSAGE_WINDOW_D, "메시아교도", "여기 시나가와에는 구세주님을 본뜬 상이 있습니다/구세주님은 자신의 목숨을 돌보지 않고 사람들을 구해/한 번 신의 곁으로 불러들여졌습니다"
		CALL MESSAGE_WINDOW_D, "메시아교도", "그리고 구세주로서 되살아나/이 땅으로 다시 보내지신 겁니다"		
	CASE 6
		;説法　主人だけでなく동료마의ALIも変動する
		CALL MESSAGE_WINDOW_D, "메시아교 신부", "몸도 마음도 신께 바치는 것입니다/신께서는 지금 믿는 자들의 힘을 바라고 계십니다"
		IF 던전플래그:(FLAG:현던전):11++ == 0
			CALL MESSAGE_WINDOW_D, "", "＞계속 설교를 듣습니까？"
			CALL INPUT_YN_D
			SIF RESULT
				RETURN 0
			CALL INCREASE_LC, 1
			FOR LOCAL, 1, 7
				;主人はとばす
				SIF POS(LOCAL) == MASTER
					CONTINUE
				;存在しない場所はとばす
				SIF POS(LOCAL) < 0
					CONTINUE
				;行動不能なキャラは除外
				SIF !INPUTABLEF_CHARA(POS(LOCAL))
					CONTINUE
				CALL CHANGE_CHARA_LC, POS(LOCAL), 255, 4
			NEXT
			CALL MESSAGE_WINDOW_D, "메시아교 신부", "카테드랄을 완성시키기 위해/모두의 힘을 신께 드리는 것입니다/신을 위해 움직일 때는 지금입니다"
			CALL MESSAGE_WINDOW_D, "", "＞계속 설교를 듣습니까？"
			CALL INPUT_YN_D
			SIF RESULT
				RETURN 0
			;説教は主人が1、仲魔が4だけLAWに寄る
			CALL INCREASE_LC, 1
			FOR LOCAL, 1, 7
				;主人はとばす
				SIF POS(LOCAL) == MASTER
					CONTINUE
				;存在しない場所はとばす
				SIF POS(LOCAL) < 0
					CONTINUE
				;行動不能なキャラは除外
				SIF !INPUTABLEF_CHARA(POS(LOCAL))
					CONTINUE
				CALL CHANGE_CHARA_LC, POS(LOCAL), 255, 4
			NEXT
			CALL MESSAGE_WINDOW_D, "메시아교 신부", "카테드랄이 완성되면/신께서 그곳에 임하셔서/천년왕국이 시작의 때를 맞이하지요"
			CALL MESSAGE_WINDOW_D, "메시아교 신부", "그리고 신께 힘을 바친 자는/반드시 신께 보답받을 것입니다"
			CALL MESSAGE_WINDOW_D, "", "＞계속 설교를 듣습니까？"
			CALL INPUT_YN_D
			SIF RESULT
				RETURN 0
			CALL INCREASE_LC, 1
			FOR LOCAL, 1, 7
				;主人はとばす
				SIF POS(LOCAL) == MASTER
					CONTINUE
				;存在しない場所はとばす
				SIF POS(LOCAL) < 0
					CONTINUE
				;行動不能なキャラは除外
				SIF !INPUTABLEF_CHARA(POS(LOCAL))
					CONTINUE
				CALL CHANGE_CHARA_LC, POS(LOCAL), 255, 4
			NEXT
			CALL MESSAGE_WINDOW_D, "메시아교 신부", "자아、카테드랄을 향하여/함께 땀을 흘립시다！"
		ENDIF
	CASE 7
		CALL MESSAGE_WINDOW_D, "여자", "제 남편이 카테드랄에 가서/돌아오지 않아요/남편의 안부가 걱정이어서/"
	CASE 8
		SIF ARG
			RETURN 0
		CALL MESSAGE_WINDOW_D, "템플나이트", "이케부쿠로의 만트라군이 드디어 움직인다는 소문이 돌고 있다/가이아교도에게 협력해 신께 원수진 일당이다/이 거리는 안전하지만 도시 밖으로 나가지 말도록"
	CASE 9
		CALL MESSAGE_WINDOW_D, "노인", "현재의 도쿄는 제대로 다닐 수가 없어/그 때문에 터미널을 쓰는 거지만…/여러 무리가 자기를 위해 독차지하고 있는 탓에/이동조차 마음대로 못하다니 딱하구나…"
	CASEELSE
ENDSELECT
RETURN 1
;=======================================================================
;宝箱まとめ
;=======================================================================
@TREASURE_47
#LOCALSIZE 1
#LOCALSSIZE 3
;個数,-1のとき、마카・0の時、\となる
LOCAL = 1
;IDは현M*100＋X個눈の宝箱の法則でふられている
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 0
		LOCALS = 디스포이즌
		LOCAL = 2
	CASE 1
		LOCALS = 마석
		LOCAL = 2
	CASE 2
		LOCALS = 보옥
		LOCAL = 1
	CASE 100
		LOCALS = MAG
		LOCAL = 30000
	CASE 101
		LOCALS = ＨＰ
		LOCAL = 25
	CASE 102
		LOCALS = 은의마니샤
		LOCAL = 1
	CASE 103
		LOCALS = 반혼향
		LOCAL = 1
	CASE 104
		LOCALS = 마카
		LOCAL = 200
	CASE 105
		LOCALS = ＨＰ
		LOCAL = 25
	CASE 106
		LOCALS = ＨＰ
		LOCAL = 25
	CASE 107
		LOCALS = 시아귀미
		LOCAL = 1
	CASE 108
		LOCALS = 네이팜탄
		LOCAL = 2
	CASE 300
		LOCALS = 시아귀미
		LOCAL = 1
	CASE 301
		LOCALS = 지혜의향
		LOCAL = 1
	CASE 302
		LOCALS = 마력의향
		LOCAL = 1
ENDSELECT
IF LOCALS == "￥"
	CALL GET_TREASURE_MONEY, 0, LOCAL, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "마카"
	CALL GET_TREASURE_MONEY, 1, LOCAL, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "MAG" || LOCALS == "ＭＡＧ"
	CALL GET_TREASURE_MAG, 0, LOCAL, FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSEIF LOCALS == "ＨＰ" || LOCALS == "ＭＰ" || LOCALS == "POISON" || LOCALS == "PALYZE"
	;LOCALS:1 종류 LOCAL 데미지量or확률 LOCALS:2 相性
	CALL GET_TREASURE_TRAP, LOCALS, LOCAL, GET_TYPE_NUM(LOCALS:1), FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
ELSE
	IF GETNUM(ITEM, LOCALS) == -1
		PRINTL ＞아이템 이름의 지정이 잘못되었습니다
		PRINTW ＞아이템의 취득처리를 중단합니다
	ELSE
		CALL GET_TREASURE, GETNUM(ITEM, LOCALS), LOCAL , FLAG:현던전, FLAG:현M + 75, (DA:(FLAG:현X):(FLAG:현Y) / 10) % 100
	ENDIF
ENDIF

;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_47
FLAG:인카운트율 = 던전플래그:(FLAG:현던전):2 ? 0 # MAX((FLAG:미조우걸음수 - 5) * 5, 0)
;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_47
RETURN 46, 43, 49, 56
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_47
;友好フラグが立っているときは인카운트하지않는다
SIF 던전플래그:(FLAG:현던전):2
	RETURN 0
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_47
SELECTCASE 던전플래그:(FLAG:현던전):0
	CASE 1
		RETURN CLASS_NUM_COMMON("中級")
	CASE 2
		RETURN CLASS_NUM_COMMON("上級")
	CASE 3,4
		RETURN CLASS_NUM_COMMON("最上級")
ENDSELECT
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_47, ARG
SELECTCASE 던전플래그:(FLAG:현던전):0
	CASE 1
		RETURN CLASS_NUM_COMMON("中級")
	CASE 2
		RETURN CLASS_NUM_COMMON("上級")
	CASE 3,4
		RETURN CLASS_NUM_COMMON("最上級")
ENDSELECT
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_47, ARG
SELECTCASE RAND:100
	CASE IS < 10
		RETURN [[キャラ:라비]], 25 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASE IS < 20
;메이거스
		RETURN 3123, 30 + RAND:2 * 3		
	CASE IS < 30
;템플나이트♀
		RETURN 3128, 29 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASE IS < 40
		RETURN [[キャラ:템플나이트]], 29 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	;광신자は2枠で出やすい
	CASE IS < 55
		RETURN [[キャラ:광신자]], 25 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASE IS < 70
		RETURN [[キャラ:광신자]], 25 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASEELSE
		SELECTCASE 던전플래그:(FLAG:현던전):0
			CASE 1
				IF !RAND:3
					RETURN [[キャラ:하우르바타트]], 30 + RAND:2 * 3
				ELSEIF RAND:2
					RETURN [[キャラ:아무르타트]], 34 + RAND:2 * 3
				ELSE
					RETURN [[キャラ:프린시펄리티]], 31 + RAND:2 * 3
				ENDIF
			CASE 2
				IF !RAND:3
					RETURN [[キャラ:하우르바타트]], 37 + RAND:2 * 3
				ELSEIF RAND:2
					RETURN [[キャラ:아무르타트]], 41 + RAND:2 * 3
				ELSE
					RETURN [[キャラ:파워]], 40 + RAND:2 * 3
				ENDIF
			CASE 3
				IF !RAND:3
					RETURN [[キャラ:아무르타트]], 44 + RAND:2 * 3
				ELSEIF RAND:2
					RETURN [[キャラ:알마티]], 48 + RAND:2 * 3
				ELSE
					RETURN [[キャラ:파워]], 45 + RAND:2 * 3
				ENDIF
			CASE 4
				IF !RAND:3
					RETURN [[キャラ:알마티]], 53 + RAND:2 * 3
				ELSEIF RAND:2
					RETURN [[キャラ:버쳐]], 54 + RAND:2 * 3
				ELSE
					RETURN [[キャラ:도미니온]], 53 + RAND:2 * 3
				ENDIF
		ENDSELECT
ENDSELECT
@SET_ENEMY_STATUS_47, ARG
SELECTCASE NO:ARG
	CASE [[キャラ:템플나이트]]
		;デフォは잔마・마카쟈마・연속사격・돌려차기
		SELECTCASE 던전플래그:(FLAG:현던전):0
			CASE 2
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬4 = [[스킬:강절단]]
			CASE 3
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬4 = [[스킬:트윈슬래시]]
			CASE 4
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬4 = [[스킬:데스바운드]]
		ENDSELECT
	CASE [[キャラ:광신자]]
		;デフォは메디아・숏잽
		SELECTCASE 던전플래그:(FLAG:현던전):0
			CASE 2
				ABL:ARG:스킬1 = [[스킬:메・디아라마]]
				ABL:ARG:스킬3 = [[스킬:마구날뛰기]]
			CASE 3
				ABL:ARG:스킬1 = [[스킬:메・디아라마]]
				ABL:ARG:스킬3 = [[스킬:자폭]]
			CASE 4
				ABL:ARG:스킬1 = [[스킬:메・디아라마]]
				ABL:ARG:스킬3 = [[스킬:옥쇄파]]
		ENDSELECT
	CASE [[キャラ:라비]]
		;デフォは지온가・한마・연속사격・마린카린・텐타라후
		SELECTCASE 던전플래그:(FLAG:현던전):0
			CASE 3
				ABL:ARG:스킬1 = [[스킬:지오다인]]
				ABL:ARG:스킬2 = [[스킬:하마온]]
			CASE 4
				ABL:ARG:스킬1 = [[스킬:파계의번개]]
				ABL:ARG:스킬2 = [[스킬:하마온]]
		ENDSELECT
	CASE 3128
		;テンプル♀　デフォは잔마・시바브・연속사격・돌려차기
		SELECTCASE 던전플래그:(FLAG:현던전):0
			CASE 2
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬2 = [[스킬:디아라마]]
			CASE 3
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬2 = [[스킬:마카라칸]]
			CASE 4
				ABL:ARG:스킬1 = [[스킬:잔다인]]
				ABL:ARG:스킬2 = [[스킬:테트라칸]]
		ENDSELECT
ENDSELECT
;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_47
;랜덤にどの악마が出るか決定
;RETURN CSV番号 , 人数 , 레벨
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:광신자]] , 3 + RAND:10 , 25 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASE 1
		RETURN [[キャラ:템플나이트]] , 3 + RAND:10 , 29 + RAND:2 * 3 + 던전플래그:(FLAG:현던전):0 * 7
	CASE 2
		SELECTCASE  던전플래그:(FLAG:현던전):0
			CASE 1
				RETURN [[キャラ:프린시펄리티]] , 3 + RAND:10 , 31 + 던전플래그:(FLAG:현던전):0 * 7
			CASE 2,3
				RETURN [[キャラ:파워]] , 3 + RAND:10 , 31 + 던전플래그:(FLAG:현던전):0 * 7
			CASE 4
				RETURN [[キャラ:도미니온]] , 3 + RAND:10 , 31 + 던전플래그:(FLAG:현던전):0 * 7
		ENDSELECT
ENDSELECT

@SET_HANIEL
CALL SET_ENEMY,9,309,56,0,1
ABL:(CHARANUM-1):스킬1 = 2002
ABL:(CHARANUM-1):스킬4 = 402
CFLAG:(CHARANUM-1):행동횟수 = 2
CFLAG:(CHARANUM-1):ＨＰ보정 += 2000
CFLAG:(CHARANUM-1):ＭＰ보정 += 9000

;=======================================================================
;スタート時이벤트
;=======================================================================
;@EVENT_DUNGEON_START_47
;IF 던전플래그:47:10 == 0
;	IF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애)
;		PRINTFORMW 「여기 시나가와는 메시아교의 본거지야」
;		PRINTFORMW 「이 땅을 통솔하는 건 대천사 하니엘 같아요」
;		PRINTFORMW 「매우 강하게 신의 위광을 체현하는 천사님이라도 나는 들었어요」
;	ENDIF
;	PRINTFORML 
;	IF 던전플래그:46:2 == 1
;		PRINTFORM 신주쿠 파즈스의 말에 따르는
;	ELSEIF 던전플래그:46:90 == 1
;		PRINTFORM 신주쿠 히로코의 말에 따르는
;	ENDIF
;	PRINTFORMW 당신은 메시아교의 본거지 시나가와를 방문했다
;	IF 던전플래그:20:6 == 1
;		PRINTFORMW 그리고 긴자 대지하도에서 얻은 카테드랄의 열쇠를 쥐고 있는 악마의 정보
;		PRINTFORMW 여기 시나가와 대성당의 열쇠 중 하나는 하니엘에게 있다
;	ENDIF
;	PRINTFORMW 해야 할 건 많은데、메시아교는 팬텀 소라이어티에 대해 호의적이지 않다
;	PRINTFORMW 조심성 없이 메시아교를 자극하는 일은 조직에게도 불이익이 따른다
;	PRINTFORMW 만반의 준비가 되었는가？
;	PRINTFORMW 신중을 기한다고 손해볼 것 없으니까…
;	던전플래그:47:10 = 1
;
;에키드나討伐を受けている
;ELSEIF 던전플래그:47:20 == 1
;	던전플래그:47:20 = 2
;ENDIF
;;=======================================================================
;;이벤트まとめ
;;=======================================================================
;@EVENTING_CALLING_47
;SELECTCASE FLAG:현M
;	CASE 0
;		IF FLAG:현X == 7 && FLAG:현Y == 15 && 던전플래그:47:10 == 0
;			PRINTFORML ＞메시아교도가 있다
;			IF RAND:2 == 0
;				PRINTFORML 「우리의 손으로 악마를 멸해 이 나라를 구하지 않으면 안 된다」
;				PRINTFORMW 「그것을 위해 어떤 희생이라도 아껴서는 안 되는 것이다」
;			ELSE
;				PRINTFORML 「이윽고 신께서 불로 세계를 불태울 것이다」
;				PRINTFORMW 「선택받은 메시아 교도만이 살아 남을 수 있다」
;			ENDIF
;			;던전플래그:47:10 = 1
;
;		ELSEIF FLAG:현X == 9 && FLAG:현Y == 9 && 던전플래그:47:11 == 0
;			PRINTFORML ＞늠름한 청년의 상이 있다
;		IF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애) && 던전플래그:47:11 == 0
;				PRINTFORMW 「이것은 구세주의 상이야」
;				IF TALENT:MASTER:140 == 1 && TALENT:MASTER:147 == 0
;					PRINTFORMW 「당신을 닮지 않았어？」
;				ELSE
;					PRINTFORMW 「당신을 닮진 않았지만、당신이 진짜 구세주야」
;				ENDIF
;				;던전플래그:47:11 = 1
;			ELSE
;				PRINTFORMW 구세주 상과 제목이 새겨져있다
;			ENDIF
;			;던전플래그:47:11 = 1
;
;		ELSEIF FLAG:현X == 13 && FLAG:현Y == 17 && 던전플래그:47:12 == 0
;			PRINTFORML ＞템플나이트가 있다
;			IF FINDCHARA_B(4501,0) == 2 || FINDCHARA_B(4501,1) == 2 && 던전플래그:47:12 == 0
;				PRINTFORML 「신입인가？ 못 보던 얼굴이구나な」
;				PRINTFORMW 「조만간 방위 거점을 대성당으로 옮길 것 같다」
;				PRINTFORMW 「거기가 마지막 결전의 땅이 될 것이다」
;				;던전플래그:47:12 = 1
;			ELSE
;				PRINTFORML 「이케부쿠로의 만트라군이 드디어 움직였다는 소문이 떠돌고 있다」
;				PRINTFORMW 「이 도시는 안전하지만 도시 밖으로 나가지 않도록 해」
;			ENDIF
;			;던전플래그:47:12 = 1
;
;		ELSEIF FLAG:현X == 16 && FLAG:현Y == 9 && 던전플래그:47:13 == 0
;			PRINTFORML ＞メシア教のシスターがいる
;			IF FINDCHARA_B(4501,0) == 2 || FINDCHARA_B(4501,1) == 2 && 던전플래그:47:13 == 0
;				PRINTFORML 「신에게 선택받은 자는 센터에 갈 수 있는 권리를 얻습니다」
;				PRINTFORMW 「곧 다가올 심판의 날에 살아남은 자들은 센터시민들이 되겠지요」
;				;던전플래그:47:13 = 1
;			ELSE
;				PRINTFORML 「신께선 우리들을 굽어보십니다」
;				PRINTFORMW 「일상 행동의 시행착오가 당신의 미래를 결정할 것입니다」
;			ENDIF
;			;던전플래그:47:13 = 1
;		ENDIF
;
;	CASE 1
;		IF FLAG:현X == 8 && FLAG:현Y == 8 && 던전플래그:47:14 == 0
;			PRINTFORML ＞メシア教の司祭がいる
;			IF RAND:2 == 0
;				PRINTFORML 「괜찮습니까」
;				PRINTFORMW 「때려도 좋은 것은 가이아 교도와 악마 뿐입니다」
;				PRINTFORMW 「숨통이 끊어질 때까지 그들을 용서해서는 안 됩니다」
;			ELSE
;				PRINTFORML 「일찌기… 마왕을 쓰러뜨려 구세주가 된 남자가 있었습니다」
;				PRINTFORMW 「그렇습니다만、교만해진 그는 신도 두려워하지 않고 주인이신 신에게 칼을 겨누었습니다」
;				PRINTFORMW 「이윽고 천명을 거역할 수 없었던 그의 영혼은 전생이 허락되지 않고 영원히 방황하는 영혼이 되었다고 합니다」
;				PRINTFORMW 「신에게 거역하는 일은 영원의 죄를 짊어지겠다고 하는 것. 당신도 신을 따르세요」
;			ENDIF
;			CALL INCREASE_LC,1
;			;던전플래그:47:14 = 1
;
;		ELSEIF FLAG:현X == 11 && FLAG:현Y == 13 && 던전플래그:47:15 == 0
;			PRINTFORML ＞若者がいる
;			IF RAND:2 == 0
;				PRINTFORML 「투기장에서 챔피언이 되면 센터에 가능 자격을 받을 수 있다고 하니」
;				PRINTFORMW 「당신도 팔이 쓸만해 보이는데 도전해 보는게 어때？」
;			ELSE
;				PRINTFORML 「ＴＤＬ은 알고 있는 거야？」
;				PRINTFORMW 「매력적인 어뮤즈먼트 파크였지만」
;				PRINTFORMW 「최근에는 악마가 정착해 버려 접근하기 어렵게 되었어」
;			ENDIF
;			;던전플래그:47:15 = 1
;
;		ELSEIF FLAG:현X == 7 && FLAG:현Y == 15 && 던전플래그:47:16 == 0
;			PRINTFORML ＞老人がいる
;			IF RAND:2 == 0
;				PRINTFORMW 「대전 전에는 도쿄에 지어진 지하도는 다양한 장소에 연결되어 있다 」
;			ELSE
;				PRINTFORML 「어떤 길을 걷든 싸움이 낳는 결과는 싸움에 뿐이야」
;				PRINTFORMW 「복수가 복수를 낳는、그 연쇄에 몸을 두면 사람은 이윽고 수라가 되버리지」
;			ENDIF
;			;던전플래그:47:16 = 1
;
;		ELSEIF FLAG:현X == 3 && FLAG:현Y == 15 && 던전플래그:47:17 == 0
;			PRINTFORML ＞메시아교회
;			PRINTFORMW 「헤매는 어린 양이여、무슨 일이신가요か？」
;			PRINTL
;			IF MONEY:1 >= 500
;				PRINTL [0] 기부한다（一입500마카）
;				;PRINTL [1] 寄付する（一입1000마카）
;			ENDIF
;			PRINTL [100] 교회를 나간다
;			$INPUT_LOOP1
;			INPUT
;			IF RESULT == 0
;				PRINTFORML 「감사합니다」
;				PRINTFORMW 「당신에게도 신의 거호가 있기를」
;				MONEY:1 -= 500
;				FOR LOCAL, 0, CHARANUM
;					CALL HEALTH_CHARA, LOCAL
;				NEXT
;			;ELSEIF RESULT == 1
;			;	PRINTFORMW 당신은 특별한 서비스를 받았다
;			ELSEIF RESULT == 100
;				RETURN -1
;			ELSE
;				GOTO INPUT_LOOP1
;			ENDIF
;			;던전플래그:47:17 = 1
;
;		ELSEIF FLAG:현X == 18 && FLAG:현Y == 17 && 던전플래그:47:18 == 0
;			PRINTFORML ＞소녀がいる
;			PRINTFORMW 「ねぇねぇ知ってる？」
;			IF FINDCHARA_B(4531,0) == 2 || FINDCHARA_B(4531,1) == 2 && 던전플래그:47:18 == 0
;				PRINTFORML 「아이돌 리세짱이 갑자기 은퇴한 것 같아」
;				PRINTFORMW 「하지만 은퇴 후 본인을 아무도 본 적이 없다는 것 같아요」
;				PRINTFORML 「사건에 휘말린게 아닌가하는 소문이 있어요」
;				PRINTFORMW 「어라…언니、어디선가 본 것 같은…」
;				;던전플래그:47:18 = 1
;			ELSE
;				IF RAND:2 == 0
;					PRINTFORML 「아이돌 리세짱이 갑자기 은퇴한 것 같아」
;					PRINTFORMW 「하지만 은퇴 후 본인을 아무도 본 적이 없다는 것 같아요」
;					PRINTFORMW 「사건에 휘말린게 아닌가하는 소문이 있어요」
;					;던전플래그:47:18 = 1
;				ELSE
;					PRINTFORML 「이 근처에 말이에요」
;					PRINTFORMW 「사천왕의 사당이 있다고요」
;					PRINTFORMW 「사천왕이라면 강할까？」
;				ENDIF
;			ENDIF
;			;던전플래그:47:18 = 1
;
;		ELSEIF FLAG:현X == 9 && FLAG:현Y == 6 && 던전플래그:47:19 == 0
;			PRINTFORML ＞템플나이트がいる
;			IF RAND:2 == 0
;				PRINTFORML 「드디어 가이아 교와의 결전이 가까워졌다」
;				PRINTFORMW 「여기 시나가와에도 메시아 교의 총전력이 집결하고 있어」
;			ELSE
;				PRINTFORML 「악마가 이쪽 세계에 오는 것처럼」
;				PRINTFORMW 「인간이 마계에 가는 방법이 있는 것 같다」
;			ENDIF
;			;던전플래그:47:19 = 1
;
;		ENDIF
;	CASE 2
;		IF FLAG:현X == 11 && FLAG:현Y == 9 && 던전플래그:47:21 == 0
;			PRINTFORML ＞방에 있는 천사가 말을 걸어왔다
;			IF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애)
;				PRINTFORMW 「인간의 아이여、무슨 일로 이 땅을 찾아왔습니까？」
;				PRINTFORML 
;				PRINTFORMW 베스가 사정을 설명했다
;				PRINTFORMW 「과연… 그러면」
;				PRINTFORMW 「내가 당신을 방해할 이유는 없습니다」
;				CALL DUNGEON_WORP,2,15,11
;			ELSEIF FINDCHARA_B(4541,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애)
;				PRINTFORMW 「인간의 아이여、무슨 일로 이 땅을 찾아왔습니까？」
;				PRINTFORML 
;				PRINTFORMW 당신을 대신해 나오토가 사정을 설명했다
;				PRINTFORMW 「과연… 그분의 뜻을 받아 행동하고 계시는군요」
;				PRINTFORMW 「가브리엘님께 잘 알려주시기 바랍니다」
;				CALL DUNGEON_WORP,2,15,11
;			ELSE
;				PRINTFORMW 「여기는 신성한 땅」
;				PRINTFORMW 「어서 물러나거라」
;				PRINTL
;				PRINTL [0] 네
;				PRINTL [1] 아니오
;				$INPUT_LOOP3
;				INPUT
;				IF RESULT == 0
;					PRINTFORML 
;					PRINTFORML 「알면 됐습니다」
;					PRINTFORMW ＞당신은 방을 나왔다
;					FLAG:현Y = 11
;				ELSEIF RESULT == 1
;					PRINTL 
;					PRINTW 「따르지 못하겠다면 분수를 가르쳐 드리지요」
;					PRINTL 
;					PRINTL 천사 알마티가 １체 나타났다！
;					PRINTW 
;					CUSTOMDRAWLINE =
;					WAIT
;					FLAG:도주불가플래그 = 1
;					FLAG:회화불능플래그 = 1
;					FLAG:선제기습취소 = 1
;					CALL SET_ENEMY,9,306,57,0,0
;					CFLAG:(CHARANUM-1):ＨＰ보정 += 500
;					ABL:(CHARANUM-1):스킬1 = 2002
;					ABL:(CHARANUM-1):스킬5 = 10
;					CALL SYNC_STATUS,(CHARANUM-1)
;					CALL HEALTH_CHARA,(CHARANUM-1)
;					CALL BATTLE_START
;					FLAG:도주불가플래그 = 0
;					FLAG:회화불능플래그 = 0
;					FLAG:선제기습취소 = 0
;					CUSTOMDRAWLINE =
;					CALL DUNGEON_WORP,2,15,11
;				ELSE
;					GOTO INPUT_LOOP3
;				ENDIF
;			ENDIF
;			던전플래그:47:21 = 1
;		ENDIF
;	CASE 4
;		IF FLAG:현X == 9 && FLAG:현Y == 8 && 던전플래그:47:20 == 0 && (던전플래그:45:10 == 7 || 던전플래그:45:41 == 2)
;			CUSTOMDRAWLINE =
;			PRINTW 방 안에는 법의를 입은 대주교가 기다리고 있었다
;			PRINTW 「구세주여、보잘 것 없는 소녀의 영혼을 구하기 위해 악마와 손을 잡다니、어리석은…」
;			PRINTW 「구해야 할 것을 선택한다는 것이 비정하게 보일지도 모르겠습니다만」
;			PRINTW 「악마와 손을 잡은 당신은 구세주로서 문제가 있군요」
;			PRINTW 「신의 심판을 받으라」
;			GOTO HANIERU_01
;
;		ELSEIF FLAG:현X == 9 && FLAG:현Y == 8 && 던전플래그:47:20 == 0
;			CUSTOMDRAWLINE =
;			PRINTW 방 안에는 법의를 입은 청년이 기다리고 있었다
;			PRINTW 「당신이 구세주로군요」
;			PRINTW 「내 이름은 로우 히어로、신의 힘에 의해 목숨을 구원 받았습니다」
;			PRINTW 「당신에게 하나 부탁할게 있습니다……」
;			PRINTW 「여기 시나가와에 근처의 ＴＤＬ에 사룡 에키드나가 정착했습니다」
;			PRINTW 「토벌하여 주시겠습니까？」
;			IF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애) && 던전플래그:46:2 == 0
;				;베스、아이つは人の話を聞かない奴だったのでＤ/Ｌに발を踏み入れる
;				PRINTFORML 『로우 히어로 님… 토벌은 받아들입니다』
;				PRINTFORML 『다만、그전에 제 이야기를 들어주세요』
;				PRINTFORMW ＞베스는 신주쿠 대성당의 전말을 말했다
;				;茶番劇　善処するとは言ったがその期日までは指定していない
;				;メシア教がその気になればICBMが落ちたあと、30年後でも가능だという事！！
;				PRINTFORML 
;				PRINTFORML 「과연… 그런 일이」
;				PRINTFORML 「알겠습니다、빨리 조사하고 중지하도록 선처하겠습니다」
;				PRINTFORMW 로우 히어로는 베스의 말에 강하게 수긍했다
;				PRINTFORML 『감사합니다』
;				PRINTFORMW 『구세주님… 파즈스는 잘못했지만、나는 메시아교 모두가 잘못된 길을 걷고 있다고는 생각하지 않습니다』
;				PRINTFORMW 『여하튼 힘을 빌려주시겠습니까？』
;			ENDIF
;			PRINTL
;			PRINTL [0] 네
;			PRINTL [1] 아니요
;			$INPUT_LOOP2
;			INPUT
;			IF RESULT == 0
;				PRINTFORML 「역시 당신은 구세주답다」
;				SIF FINDCHARA_B(4501,1) == 2 && (TALENT:(RESULT:1):연모 || TALENT:(RESULT:1):친애)
;					PRINTFORMW 『감사합니다、구세주님』
;				PRINTFORML 「사룡 에키드나는 강력한 악마입니다」
;				PRINTFORMW 「대천사 하니엘은 당신의 힘이 되겠습니다」
;				PRINTFORMW 「그에 적합한 수단으로 불러주세요」
;				FLAG:10309 = 1
;				던전플래그:47:2 = 1
;				;銀座フラグ
;				던전플래그:20:0 = 1
;				;他ルートが決まるまでは무효処理の方が良いような…
;				;아이つは人の話を聞かない奴だったのでＤ/Ｌ決定
;				;신주쿠二箇所でこの세계のLAW勢힘が머리おかしいのは見せているつもり…描写が발りないか？
;				FLAG:속성고정LD = 3
;				FLAG:속성고정LC = 1
;				FOR LOCAL, 0, CHARANUM
;					CALL HEALTH_CHARA, LOCAL
;				NEXT
;			ELSEIF RESULT == 1
;				PRINTL 「그렇습니까、유감입니다」
;				PRINTW 「역시… 당신은 진정한 구세주가 아닌 것 같다」
;				PRINTL 
;				PRINTL 『거짓된 구세주는 심판하지 않으면 안 됩니다』
;				PRINTW 하늘에서 목소리가 울리자 많은 날개를 가진 천사가 춤추듯 내려왔다
;				PRINTL 
;				PRINTL 「뒤는 맡기겠어요… 나는 카테드랄로 향합니다」
;				PRINTW ＞로우 히어로는 천사에게 이야기 하고 방을 나가려고 했다
;				PRINTL 
;				PRINTL 뒤쫓으려고 하자 당신의 앞을 천사가 가로막는다
;				PRINTW 『신의 심판을 받으라』
;				
;				$HANIERU_01
;				PRINTL 
;				PRINTL 대천사 하니엘이 １체 나타났다！
;				PRINTW 
;				CUSTOMDRAWLINE =
;				WAIT
;				FLAG:도주불가플래그 = 1
;				FLAG:회화불능플래그 = 1
;				FLAG:선제기습취소 = 1
;				CALL SET_ENEMY,9,309,56,0,1
;				ABL:(CHARANUM-1):스킬1 = 2002
;				ABL:(CHARANUM-1):스킬4 = 402
;				CFLAG:(CHARANUM-1):행동횟수 = 2
;				CFLAG:(CHARANUM-1):ＨＰ보정 += 2000
;				CFLAG:(CHARANUM-1):ＭＰ보정 += 9000
;				CALL SYNC_STATUS,(CHARANUM-1)
;				CALL HEALTH_CHARA,(CHARANUM-1)
;				CALL BATTLE_START
;				FLAG:도주불가플래그 = 0
;				FLAG:회화불능플래그 = 0
;				FLAG:선제기습취소 = 0
;				PRINTL 『저주받아라、수라의 길을 걷는 인간의 아이여…』 
;				PRINTW 대천사 하니엘이 쓰러졌다…
;				CUSTOMDRAWLINE =
;				;D/Cに大きく傾く、에키드나の의뢰を受けたらD/C決定にするか？
;				;ただし、現状だとL/N아마테라스、D/L하니엘、D/C인수라君に俺はなる에키드나ルート以外選べない悲劇が生まれるので他のルートも用意したい
;				CALL INCREASE_LD, -50
;				CALL INCREASE_LC, -50
;				던전플래그:47:0 = 1
;				던전플래그:47:1 = 1
;			ELSE
;				GOTO INPUT_LOOP2
;			ENDIF
;			IF 던전플래그:47:2 == 1
;				PRINTFORML 
;				PRINTFORM 메시아 교단으로부터 에키드나 토벌의 보수 선불로서
;				;신주쿠で파즈스を仲魔にした　신주쿠の報酬未払い分も含めて高めにする
;				IF 던전플래그:46:2 == 1
;					PRINTFORMW  \150000이 들어왔습니다
;					MONEY += 150000
;				ELSE
;					PRINTFORMW  \25000이 들어왔습니다
;					MONEY += 25000
;				ENDIF
;			ELSEIF 던전플래그:47:1 == 1
;				PRINTFORMW 대천사 하니엘을 쓰러뜨린 일로 메시아교로부터 지명 수배를 받았다
;				PRINTFORMW 이것으로 시나가와에 접근할 수 없게 되었다
;				PRINTFORML 
;				PRINTFORMW ＞하니엘을 쓰러뜨린 일로 가이아교로부터 상금 \100000이 들어왔다
;				MONEY += 100000
;				FLAG:탈출 = 1
;			ENDIF
;			던전플래그:47:20 = 1
;		
;		ELSEIF FLAG:현X == 9 && FLAG:현Y == 8 && 던전플래그:47:20 == 2
;			PRINTFORML ＞메시아교의 대주교가 있다
;			PRINTFORMW 「에드키나를 토벌하고 오셨군요、구세주시여」
;			;던전플래그:47:20 = 3
;		ENDIF
;
;	CASEELSE
;	ENDSELECT
;	RETURN 1
;RETURN 0