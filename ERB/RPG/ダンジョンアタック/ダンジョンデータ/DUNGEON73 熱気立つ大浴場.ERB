
;=======================================================================
;열기나는사우나
;ボス・칸지影
;던전ナンバー73　ＭＡＰ0~6
;フラグ
;던전플래그:73:0から6　 宝箱
;던전플래그:73:7　　　　中ボス攻略
;던전플래그:73:8　　　　ボス攻略
;던전플래그:73:9　　　　スタート時の이벤트
;=======================================================================




;=======================================================================
;攻略조건
;=======================================================================
@PREREQUISITE_DUNGEON_73
;スタ지오でまた의뢰を受ける事
IF 이벤트플래그:12:0 > 1
	RETURN 1
ENDIF

;=======================================================================
;던전名
;=======================================================================
@GET_DUNGEON_NAME_73
RESULTS = 열기나는사우나


;=======================================================================
;플로어名표시
;=======================================================================
@FLOORNAME_73
PRINT 열기나는사우나
SELECTCASE FLAG:현M
	CASE 0
		PRINTL   １の湯
	CASE 1
		PRINTL   ２の湯
	CASE 2
		PRINTL   ３の湯
	CASE 3
		PRINTL   ４の湯
	CASE 4
		PRINTL   ５の湯
	CASE 5
		PRINTL   ６の湯
	CASE 6
		PRINTL   ７の湯
	CASEELSE
		PRINTL 
ENDSELECT


;=======================================================================
;特殊タイル표시
;=======================================================================

;=======================================================================
;スタート地点입력
;=======================================================================
@START_DUNGEON_73,ARG
FLAG:현M = 0
FLAG:현X = 18
FLAG:현Y = 10
;CALL AUTOMAP

;=======================================================================
;スタート時이벤트
;=======================================================================
@EVENT_DUNGEON_START_73

;=======================================================================
;指定したマスに進入가능か
;=======================================================================
@CAN_ENTER_73,ARG,ARG:1
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT
;=======================================================================
;플로어데이터
;=======================================================================
@MAKE_FLOOR_73
SELECTCASE FLAG:현M
	CASE 0
	;一階
		FLAG:최대X = 20
		FLAG:최대Y = 14
;								 01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 1111               "
		CALL MAKE_FLOOR_LINE, 2," 1  11111111111     "
		CALL MAKE_FLOOR_LINE, 3,"       2      11211 "
		CALL MAKE_FLOOR_LINE, 4,"      11         11 "
		CALL MAKE_FLOOR_LINE, 5,"    1216          2 "
		CALL MAKE_FLOOR_LINE, 6,"    1             1 "
		CALL MAKE_FLOOR_LINE, 7," 111111111     1121 "
		CALL MAKE_FLOOR_LINE, 8,"         2        1 "
		CALL MAKE_FLOOR_LINE, 9,"         11   1   1 "
		CALL MAKE_FLOOR_LINE,10,"         112121   1 "
		CALL MAKE_FLOOR_LINE,11,"              1   8 "
		CALL MAKE_FLOOR_LINE,12,"              1     "
		CALL MAKE_FLOOR_LINE,13,"                    "
		
		CALL SET_TILE,14, 12, 던전플래그:73:0,0,13
		
		DA:7:5 += 10
		
	CASE 1
	;２階
		FLAG:최대X = 15
		FLAG:최대Y = 20
;								 012345678901234
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1," 11 11         "
		CALL MAKE_FLOOR_LINE, 2," 1   1         "
		CALL MAKE_FLOOR_LINE, 3," 1   1211111   "
		CALL MAKE_FLOOR_LINE, 4," 11111     1   "
		CALL MAKE_FLOOR_LINE, 5,"           121 "
		CALL MAKE_FLOOR_LINE, 6," 11111111111 1 "
		CALL MAKE_FLOOR_LINE, 7,"     2       1 "
		CALL MAKE_FLOOR_LINE, 8,"    11  1    1 "
		CALL MAKE_FLOOR_LINE, 9,"    1   1    2 "
		CALL MAKE_FLOOR_LINE,10,"    1   1   61 "
		CALL MAKE_FLOOR_LINE,11,"    1211111211 "
		CALL MAKE_FLOOR_LINE,12,"    1   1      "
		CALL MAKE_FLOOR_LINE,13,"    1          "
		CALL MAKE_FLOOR_LINE,14,"    1  11 1    "
		CALL MAKE_FLOOR_LINE,15,"    1111121    "
		CALL MAKE_FLOOR_LINE,16,"       11 1 7  "
		CALL MAKE_FLOOR_LINE,17,"          1 1  "
		CALL MAKE_FLOOR_LINE,18,"          111  "
		CALL MAKE_FLOOR_LINE,19,"               "
		
		CALL SET_TILE,2, 1, 던전플래그:73:1,0, 23

		DA:12:16 += 10
		DA:12:10 += 20

	CASE 2
	;３階
		FLAG:최대X = 13
		FLAG:최대Y = 20
;								 0123456789012
		CALL MAKE_FLOOR_LINE, 0,"             "
		CALL MAKE_FLOOR_LINE, 1,"        1211 "
		CALL MAKE_FLOOR_LINE, 2,"      1   11 "
		CALL MAKE_FLOOR_LINE, 3,"      1    2 "
		CALL MAKE_FLOOR_LINE, 4,"      1211 1 "
		CALL MAKE_FLOOR_LINE, 5,"      2    1 "
		CALL MAKE_FLOOR_LINE, 6,"      16   1 "
		CALL MAKE_FLOOR_LINE, 7,"      112121 "
		CALL MAKE_FLOOR_LINE, 8,"           1 "
		CALL MAKE_FLOOR_LINE, 9,"           1 "
		CALL MAKE_FLOOR_LINE,10,"           1 "
		CALL MAKE_FLOOR_LINE,11,"           2 "
		CALL MAKE_FLOOR_LINE,12,"          11 "
		CALL MAKE_FLOOR_LINE,13,"        1211 "
		CALL MAKE_FLOOR_LINE,14,"        2    "
		CALL MAKE_FLOOR_LINE,15," 112111111   "
		CALL MAKE_FLOOR_LINE,16," 11          "
		CALL MAKE_FLOOR_LINE,17," 2           "
		CALL MAKE_FLOOR_LINE,18," 1           "
		CALL MAKE_FLOOR_LINE,19," 7           "
		
		CALL SET_TILE,6,2,던전플래그:73:2,0,33

		DA:1:19 += 20
		DA:7:6 += 30

	CASE 3
	;４階
		FLAG:최대X = 13
		FLAG:최대Y = 20
;								 0123456789012
		CALL MAKE_FLOOR_LINE, 0,"             "
		CALL MAKE_FLOOR_LINE, 1,"  111111111  "
		CALL MAKE_FLOOR_LINE, 2,"  1   1   1  "
		CALL MAKE_FLOOR_LINE, 3,"  1   7   1  "
		CALL MAKE_FLOOR_LINE, 4,"  1   T   1  "
		CALL MAKE_FLOOR_LINE, 5,"  1       1  "
		CALL MAKE_FLOOR_LINE, 6,"  111111111  "
		CALL MAKE_FLOOR_LINE, 7,"      2      "
		CALL MAKE_FLOOR_LINE, 8,"     111     "
		CALL MAKE_FLOOR_LINE, 9,"     111     "
		CALL MAKE_FLOOR_LINE,10,"      1      "
		CALL MAKE_FLOOR_LINE,11,"      2      "
		CALL MAKE_FLOOR_LINE,12," 11111111111 "
		CALL MAKE_FLOOR_LINE,13," 1           "
		CALL MAKE_FLOOR_LINE,14," 1    1   11 "
		CALL MAKE_FLOOR_LINE,15," 1211111   1 "
		CALL MAKE_FLOOR_LINE,16," 1    1    2 "
		CALL MAKE_FLOOR_LINE,17," 1        61 "
		CALL MAKE_FLOOR_LINE,18," 11111111211 "
		CALL MAKE_FLOOR_LINE,19,"             "
		
		CALL SET_TILE,6,8,던전플래그:73:7,0,14
		CALL SET_TILE,7,15,던전플래그:73:3,0,43
		
		DA:6:3 += 30
		DA:10:17 += 40

	CASE 4
	;5階
		FLAG:최대X = 15
		FLAG:최대Y = 15
;								 012345678901234
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1," 112111        "
		CALL MAKE_FLOOR_LINE, 2," 11   111216 1 "
		CALL MAKE_FLOOR_LINE, 3," 2        11 1 "
		CALL MAKE_FLOOR_LINE, 4," 1         2 1 "
		CALL MAKE_FLOOR_LINE, 5," 1         121 "
		CALL MAKE_FLOOR_LINE, 6," 1           1 "
		CALL MAKE_FLOOR_LINE, 7," 1           1 "
		CALL MAKE_FLOOR_LINE, 8," 1           1 "
		CALL MAKE_FLOOR_LINE, 9," 1211        1 "
		CALL MAKE_FLOOR_LINE,10," 1  111      1 "
		CALL MAKE_FLOOR_LINE,11," 2    1      2 "
		CALL MAKE_FLOOR_LINE,12," 11         11 "
		CALL MAKE_FLOOR_LINE,13," 11217   11211 "
		CALL MAKE_FLOOR_LINE,14,"               "
		
		CALL SET_TILE,13,2,던전플래그:73:4,0,53
		
		DA:5:13 += 40
		DA:11:2 += 50

	CASE 5
	;６階
		FLAG:최대X = 15
		FLAG:최대Y = 15
;								 012345678901234
		CALL MAKE_FLOOR_LINE, 0,"               "
		CALL MAKE_FLOOR_LINE, 1,"   11 1        "
		CALL MAKE_FLOOR_LINE, 2,"   1  11       "
		CALL MAKE_FLOOR_LINE, 3,"   1   11      "
		CALL MAKE_FLOOR_LINE, 4,"   1    111216 "
		CALL MAKE_FLOOR_LINE, 5,"   121      11 "
		CALL MAKE_FLOOR_LINE, 6,"   1 2       2 "
		CALL MAKE_FLOOR_LINE, 7,"   1 11      1 "
		CALL MAKE_FLOOR_LINE, 8,"   1 112111  1 "
		CALL MAKE_FLOOR_LINE, 9," 111      1121 "
		CALL MAKE_FLOOR_LINE,10," 1           1 "
		CALL MAKE_FLOOR_LINE,11," 2           1 "
		CALL MAKE_FLOOR_LINE,12," 11   7      1 "
		CALL MAKE_FLOOR_LINE,13," 112111      1 "
		CALL MAKE_FLOOR_LINE,14,"               "
		
		CALL SET_TILE,13,13,던전플래그:73:5,0,63

		DA:6:12 += 50
		DA:13:4 += 60

	CASE 6
	;7階
		FLAG:최대X = 10
		FLAG:최대Y = 10
;								 0123456789
		CALL MAKE_FLOOR_LINE, 0,"          "
		CALL MAKE_FLOOR_LINE, 1,"   111    "
		CALL MAKE_FLOOR_LINE, 2,"   111    "
		CALL MAKE_FLOOR_LINE, 3,"   111    "
		CALL MAKE_FLOOR_LINE, 4,"    2     "
		CALL MAKE_FLOOR_LINE, 5,"    1     "
		CALL MAKE_FLOOR_LINE, 6,"    1T    "
		CALL MAKE_FLOOR_LINE, 7,"    1     "
		CALL MAKE_FLOOR_LINE, 8,"    7     "
		CALL MAKE_FLOOR_LINE, 9,"          "
		
		CALL SET_TILE,4,2,던전플래그:73:8,0,24
		CALL SET_TILE,4,2,던전플래그:73:8,1,34
		
		DA:4:8 += 60
		

	CASEELSE
ENDSELECT
;=======================================================================
;[5]조사　実行時の이벤트
;=======================================================================
@EVENT_CHECK_DUNGEON_73

;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
;% 10は10で割ったあまり、つまり下一桁がでてきます
;그리고、下一桁はタイルの종류を表す
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_73
	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
	CALL UPSTAIRS_73
	RETURN RESULT

ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL DOWNSTAIRS_73
	RETURN RESULT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) %10 == 9
	SELECTCASE DA:(FLAG:현X):(FLAG:현Y) /10
	CASE 0
		CALL DUNGEON_TERMINAL
		RETURN 1
	ENDSELECT
ELSE
	PRINTW 아무것도 없는 것 같다
	RETURN 0
ENDIF






;=======================================================================
;タイル進入時の이벤트
;=======================================================================
@EVENT_ENTER_DUNGEON_73,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:현X):(FLAG:현Y) % 10 == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 3
	CALL TREASURE_73
	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 6
	CALL UPSTAIRS_73
	RETURN RESULT

ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 7
	CALL DOWNSTAIRS_73
	RETURN RESULT

;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
;========================
;이벤트
;========================
ELSEIF DA:(FLAG:현X):(FLAG:현Y) % 10 == 4
	SELECTCASE DA:(FLAG:현X):(FLAG:현Y) /10
		CASE 1
			CUSTOMDRAWLINE =
			PRINTL 두 가랑이 사이에 훈도시를 걸친 남자가 눈에 핏발을 세우면서 서 있다.
			PRINTW 
			PRINTW 『잘 와줬다、남자의 세계에！』
			IF TALENT:MASTER:140 == 0 || TALENT:MASTER:157 == 1
				PRINTL 『갑작스런 배드 걸의 참가로 회장은 큰 야유하는 소리！』
				PRINTW 『때 아닌 여자를 쫒아내기 위해、오늘 밤은 특별한 무대를 준비했습니다！』
			ELSE
				PRINTL 『갑작스런 나이스 보이의 참가로 회장도 히트 업 ！』
				PRINTW 『나이스 커밍 보이와의 만남을 축하하며、오늘 밤은 특별한 무대를 준비했습니다！』
			ENDIF
			PRINTW
			PRINTL 　　　　　　　　　　　　　　　　　　 ﾀ
			PRINTL 『시간무제한 한 판 승부！과연 마지막까지 서 있는 쪽은？』
			PRINTW 『자아、뜨거운 피를 쏟아내라！』
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CUSTOMDRAWLINE =
				WAIT
				CALL SET_ENEMY,9,3269,30,0,1
				CFLAG:(CHARANUM-1):행동횟수 = 2
				CFLAG:(CHARANUM-1):ＨＰ보정 = 500
				MAXBASE:(CHARANUM-1):파마 = 0
				MAXBASE:(CHARANUM-1):주살 = 0
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				WAIT
			PRINTL
			PRINTL ＞섬뜩한 섀도우를 쓰러뜨렸다
			PRINTW 
			던전플래그:73:7 = 1
			DA:(FLAG:현X):(FLAG:현Y) = 1
			RETURN 1
		CASE 2
			CUSTOMDRAWLINE =
			PRINTW 방의 중앙에 같은 얼굴을 한 두 명의 남자가 서 있다。
			PRINTL 『여자는 싫다！』
			PRINTL 『잘난 척하고、제멋대로에、화를 내거나 울거나、음흉한 입으로는、고자질하고、시험하고、변신도 해…』
			PRINTL 『기분 나쁘다는 것처럼 나를 보고는、괴짜、괴짜라니 말이야…』
			PRINTL 『라고、웃으며 이렇게 말하는거야。』
			PRINTW 
			PRINTL 『바느질은 좋아하면서、기분 나쁘게、그림을 그리는 것은 어울리지、않는다』
			PRINTW 『남자인 주제에…남자인 주제에…남자인 주제에…！』
			PRINTL 『여자는 무섭구나…』
			PRINTW 
			PRINTL 「달라…달라、다르다고！」
			PRINTW 「테이프처럼 보이는 것이…나 같은 것인가！！」
			PRINTL 
			PRINTW  ＞눈을 이상하게 번뜩거릴 수 있고 있는 남자의 모습이 이상하다。
			PRINTW 이대로 그를 죽게 내버려 둬서 그림자 쪽을 잡는 것도 재미있을지 모르겠다…
			CALL INPUT_YN
			IF RESULT == 0
				PRINTL 곰에게는 미안하지만 그림자를 돕기로 하자
				IF TALENT:MASTER:140 == 0 || TALENT:MASTER:157 == 1
					PRINTL 『뭐냐 배드 걸、너는 부르지 않았단 말이야』
					PRINTW 『아니면 너는 이른바 부녀자인가？ 그렇다면 이제부터 쇼를 보여주지！』
				ELSE
					PRINTL 『어쩐지 나이스 보이、앞으로 즐거울 것이야』
					PRINTW 『너도 어울려 줄게！ 잊지 못할 추억을 새겨드리지！』
				ENDIF
					FLAG:도주불가플래그 = 1
					FLAG:회화불능플래그 = 1
					FLAG:선제기습취소 = 1
					CUSTOMDRAWLINE =
					WAIT
					CALL SET_ENEMY,9,4565,35,0,1
					CFLAG:(CHARANUM-1):행동횟수 = 2
					CFLAG:(CHARANUM-1):ＨＰ보정 = 1000
					MAXBASE:(CHARANUM-1):파마 = 0
					MAXBASE:(CHARANUM-1):주살 = 0
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL BATTLE_START
					FLAG:도주불가플래그 = 0
					FLAG:회화불능플래그 = 0
					FLAG:선제기습취소 = 0
					WAIT
				PRINTW ＜칸지를 쓰러뜨렸다
				PRINTL 
				PRINTL 「빌어먹을…」
				PRINTL
 				IF TALENT:MASTER:140 == 0 || TALENT:MASTER:157 == 1
					PRINTL 『배드걸、아직 있었나？』
					PRINTW 『뭐라고！？ 좋은 남자가 넘쳐나는 위치를 알고 있다고！？』
					PRINTW 『그것을 빨리 말해라、 이 놈！ 냉큼 거기로 데려가 줘！』
					PRINTW 『자아！아찔한 남자의 파라다이스로！』
				ELSE
					PRINTL 『나이스 보이、너도 꽤 좋은 테크닉이잖아』
					PRINTW 『너와 더욱 사랑을 돈독히 하고 싶다、함께 해도…좋은가？』
					PRINTW 『괜찮아！ 아픈 것은 처음 뿐이야！』
					PRINTW 바이브 달린 의자를 한쪽 손에 들고 있다
				ENDIF
				PRINTW 칸지의그림자는 멋대로 ＣＯＭＰ의 안으로 들러갔다。
				CALL ADD_NEW_COMPANION,3266,200
			ELSEIF RESULT == 1
				PRINTW …곰의 요청대로 그를 도왔다
				PRINTW 『후후…후후후후후…나는 신、신이다아아아！！』
				PRINTW 
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CUSTOMDRAWLINE =
				WAIT
				CALL SET_ENEMY,9,[[キャラ:칸지의그림자]],35,0,1
				CFLAG:(CHARANUM-1):행동횟수 = 2
				CFLAG:(CHARANUM-1):ＨＰ보정 = 1000
				MAXBASE:(CHARANUM-1):파마 = 0
				MAXBASE:(CHARANUM-1):주살 = 0
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,8,[[キャラ:나이스가이]],35,0,1
				MAXBASE:(CHARANUM-1):파마 = 0
				MAXBASE:(CHARANUM-1):주살 = 0
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				
				CALL SET_ENEMY,10,[[キャラ:터프가이]],35,0,1
				MAXBASE:(CHARANUM-1):파마 = 0
				MAXBASE:(CHARANUM-1):주살 = 0
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				WAIT
				PRINTL 『가버려어어어어어～…』
				PRINTL 
				PRINTW ＜칸지의그림자를 쓰러뜨렸다。
				PRINTL 괴물이 있던 장소에 남학생이 쓰러져 있다。
				PRINTW 데리고 돌아갑니까？
				CALL INPUT_YN
				IF RESULT == 1
				;NO
					PRINTL 남학생을 방치하기로 했다。
				ELSE
					PRINTL 남학생을 데리고 돌아가기로 했다。
					PRINTW 타츠미 칸지를 노예로 했다
					CALL ADD_NEW_COMPANION,4565,200
				ENDIF
			ENDIF
			던전플래그:73:8 = 1
			FLAG:탈출 = 1
			RETURN 1
		CASE 3
			PRINTW ＞이상한 의식이 거행되고 있다……
			PRINTL 
			PRINTL 「젠장젠장젠장젠장젠장！」
			PRINTL 「모두 우리가 처녀가 아니기 때문에는 바보 취급해！」
			PRINTL 「이렇게 되면 「 훌륭한 악마」를 소환해서, 처녀막을 모조리 뚫어버리는거야!」」
			PRINTW 
			PRINTL 「……그렇다, 그러면 된다！」
			PRINTL 「토트와 그 「 훌륭한 악마」를 소환해 주세요!」
			PRINTL 「훌륭한 마라님을 소환해 주세요! ……감사합니다―。」
			PRINTW 
			PRINTL ＞섀도우들은 수습을 할 수없는 것 같다。
			PRINTL 　아무래도 자신들이 마음에 들지 않는 것은 처녀막이 없는 탓이라고 생각하고 있는 것 같다。
			PRINTL 　그런 가운데, 중앙에 있던 바포메트가 입을 열었다.。
			PRINTW 
			PRINTL 「……훗훗훗, 방금 전부터 말씀드리고 있는 대로, 아직 소환할 때가 아니다라는 것입니다。」
			PRINTL 「『마라님』은 훌륭한 악마…」
			PRINTL 「만전을 기해 소환에 임하지 않으면, 무서운 사태를 불러 일으킬 수 있습니다。」
			PRINTW 
			PRINTL 「무슨 말하고 있어, 빨리 해라!」
			PRINTL 「처녀막이 있는 놈들은, 1초라도 살려 둘 수 없어!」
			PRINTW 
			PRINTL 제멋대로인 말을 해대던 새도우들은 당신의 존재를 알아차린 것 같다。
				IF TALENT:MASTER:140 == 0 || TALENT:MASTER:157 == 1
					PRINTL 「와아아아아아！처、처、처、처녀다아아아아아！！」
					PRINTW 「빨리『마라님』을 소환해서 너덜너덜하게에에에에에에！」
				ELSE
					PRINTL 「거기의 서머너 오빠, 당신부터도 말해봐요。」
					PRINTW 「빨리『마라님』을 소환해서, 우리들을 편하게 해달라고！」
				ENDIF
			PRINTW 
			PRINTL 「어떻게 되어도, 모릅니~다？」
			PRINTL 그렇게 말하고 바포메트는 수상한 주문을 주창하기 시작했다
			PRINTW 
			PRINTL 「……당황한 나머지, 슬라임에 가까운 불완전한 상태의 마라님을 소환해 버렸-다。」
			PRINTL 「히에에에에에에！시、시、시、실패다아아아아！！」
			PRINTL 
			PRINTL …그그…기……………네에…놈들……
			PRINTL …그……기그………가…아암…히……
			PRINTW 
				FLAG:도주불가플래그 = 1
				FLAG:회화불능플래그 = 1
				FLAG:선제기습취소 = 1
				CALL SET_ENEMY,9,259,50,0,1
				CFLAG:(CHARANUM-1):ＨＰ보정 = 2000
				CFLAG:(CHARANUM-1):행동횟수 = 2
				MAXBASE:(CHARANUM-1):파마 = 0
				MAXBASE:(CHARANUM-1):주살 = 0
				CALL SYNC_STATUS,(CHARANUM-1)
				CALL HEALTH_CHARA,(CHARANUM-1)
				CALL BATTLE_START
				FLAG:도주불가플래그 = 0
				FLAG:회화불능플래그 = 0
				FLAG:선제기습취소 = 0
				WAIT
			PRINTW ＞불완전한 마라님을 쓰러뜨렸다。
			PRINTL 　섀도우들은 이제 더 이상 없다…
			PRINTW 　혼란한 틈을 타서 도망친 것 같다。 
			던전플래그:73:8 = 2
			DA:(FLAG:현X):(FLAG:현Y) = 1
			FLAG:탈출 = 1
			RETURN 1
	ENDSELECT
ELSEIF DA:(FLAG:현X):(FLAG:현Y) %10 == 9
	SELECTCASE DA:(FLAG:현X):(FLAG:현Y) /10
		CASE 0
			CALL DUNGEON_TERMINAL
			RETURN 1
	ENDSELECT
ENDIF
RETURN 0


;=======================================================================
;인카운트율
;=======================================================================
@ENCOUNT_RATE_73
SELECTCASE FLAG:현M
	CASE 0
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 1
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 2
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 3
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 4
		FLAG:인카운트율 = FLAG:미조우걸음수*5
	CASE 5
		FLAG:인카운트율 = 10 + FLAG:미조우걸음수*5
	CASE 6
		FLAG:인카운트율 = 10 + FLAG:미조우걸음수*5
	CASEELSE
		FLAG:인카운트율 = FLAG:미조우걸음수*5
ENDSELECT

;=======================================================================
;필요레벨눈安
;권장LV 雑魚최저LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_73
RETURN 25, 24, 29, 35
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_73
IF RAND:100 < FLAG:인카운트율
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:미조우걸음수 += 1
	RETURN 0
ENDIF
;=======================================================================
;적の종족の종류数
;=======================================================================
@CLASS_NUM_73
RETURN CLASS_NUM_COMMON("中級")
;=======================================================================
;적の総数
;ARGは出現する적の종류です
;=======================================================================
@ENEMY_NUM_73, ARG
RETURN ENEMY_NUM_COMMON("中級", ARG)
;=======================================================================
;적の종류
;=======================================================================
@ENEMY_73, ARG
SELECTCASE RAND:100
	CASE IS < 10
	RETURN [[キャラ:세에레]],25
	CASE IS < 20
	RETURN [[キャラ:목없는라이더]],24
	CASE IS < 30
	RETURN [[キャラ:미샤구지님]],26
	CASE IS < 40
	RETURN [[キャラ:프라이데이]],24
	CASE IS < 50
	RETURN [[キャラ:나가]],28
	CASE IS < 60
	RETURN [[キャラ:강철의기가스]],25
	CASE IS < 75
	RETURN [[キャラ:인큐버스]],29
	CASE IS < 85
	RETURN [[キャラ:좀비군]],25
	CASE IS < 100
	RETURN [[キャラ:오니]],26
ENDSELECT
;=======================================================================
;特殊調整
;=======================================================================
@SET_ENEMY_STATUS_73, ARG
IF ABL:(ARG):종족 == 32
	SELECTCASE RAND:100
		CASE IS < 60
			ABL:ARG:아이템3 = GETNUM(ITEM, "납메달")
		CASE IS < 80
			ABL:ARG:아이템3 = GETNUM(ITEM, "강철메달")
		CASE IS < 95
			ABL:ARG:아이템3 = GETNUM(ITEM, "은메달")
		CASEELSE
			ABL:ARG:아이템3 = GETNUM(ITEM, "금메달")
	ENDSELECT
	ABL:(ARG):입수확률3 = ITEM:(ABL:ARG:아이템3) >= 10 ? 0 # 10
ENDIF

;=======================================================================
;宝箱の中身
;=======================================================================
@TREASURE_73
;/10はIDを10で割る。つまり、下一桁をなくして、二桁눈と三桁눈を二桁の数字として取り出している
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
			;IDを示しています。つまり、これはIDが1のとき、2の時で分岐
			CASE 1
				;GET_TREASURE,아이템번호、입수個数、던전ナンバー、あけたときONにするフラグの번호
				;1001は외상약で、それを1個、던전ナンバーは宝箱あけるときはよその던전をあけることがないだろうのでFLAG:현던전が無難です
				;그리고、フラグは던전플래그:1(에코빌딩):0を1にするということです
				;MAPをつくるときにこの宝箱は던전플래그:1(에코빌딩):0が0のときしか置かないことになってるのでこれで消えます
				CALL GET_TREASURE,[[아이템:반혼향]],1,FLAG:현던전,0
			CASE 2
				CALL GET_TREASURE,[[아이템:금속배트]],1,FLAG:현던전,1
			CASE 3
				CALL GET_TREASURE,[[아이템:우황단]],2,FLAG:현던전,2
			CASE 4
				CALL GET_TREASURE,[[아이템:야마타노드링크]],2,FLAG:현던전,3
			CASE 5
				CALL GET_TREASURE,[[아이템:스킬카드【이단찌르기】]],1,FLAG:현던전,4
			CASE 6
				CALL GET_TREASURE,[[아이템:디스챰]],3,FLAG:현던전,5
ENDSELECT
RETURN 1

;=======================================================================
;階段置き場
;=======================================================================
@UPSTAIRS_73
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) /10
	;IDを示す
	CASE 1
			;階層1で、17が入ってるタイル…つまり、IDが1の7（下り階段）に飛ぶ
			CALL DUNGEON_UPSTAIRS_ID,1,17
	CASE 2
			CALL DUNGEON_UPSTAIRS_ID,2,27
	CASE 3
			CALL DUNGEON_UPSTAIRS_ID,3,37
	CASE 4
			CALL DUNGEON_UPSTAIRS_ID,4,47
	CASE 5
			CALL DUNGEON_UPSTAIRS_ID,5,57
	CASE 6
			CALL DUNGEON_UPSTAIRS_ID,6,67
	CASEELSE
ENDSELECT
RETURN 1

@DOWNSTAIRS_73
SELECTCASE DA:(FLAG:현X):(FLAG:현Y) / 10
	CASE 1
			;階層0で、16が入ってるタイル、つまり、IDが1の6（昇り階段）に飛ぶ
			CALL DUNGEON_DOWNSTAIRS_ID,0,16
	CASE 2
			CALL DUNGEON_DOWNSTAIRS_ID,1,26
	CASE 3
			CALL DUNGEON_DOWNSTAIRS_ID,2,36
	CASE 4
			CALL DUNGEON_DOWNSTAIRS_ID,3,46
	CASE 5
			CALL DUNGEON_DOWNSTAIRS_ID,4,56
	CASE 6
			CALL DUNGEON_DOWNSTAIRS_ID,5,66
	CASEELSE
ENDSELECT
RETURN 1

;=======================================================================
;윤간참가악마
;=======================================================================
@DUNGEON_RAPE_DEVIL_73
;랜덤にどの악마が出るか決定
;RETURN CSV번호 , 人数 , 레벨
SELECTCASE RAND:5
	CASE 0
		RETURN [[キャラ:인큐버스]] , 3 + RAND:10 , CSVBASE([[キャラ:인큐버스]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:강철의기가스]] , 3 + RAND:10 , CSVBASE([[キャラ:강철의기가스]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:오니]] , 3 + RAND:10 , CSVBASE([[キャラ:오니]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:나가]] , 3 + RAND:10 , CSVBASE([[キャラ:나가]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 4
		RETURN [[キャラ:좀비군]] , 3 + RAND:10 , CSVBASE([[キャラ:좀비군]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
