;====================
;선택된 자의 전쟁. 본편 스토리
;====================
@PLAYABLE_REQUEST_62
#LOCALSIZE 2
#LOCALSSIZE 2
;시설 파괴 작전 진행. XCOM2 WOTC 스토리.
IF 의뢰플래그:62:0 == 1
	RESULTS = XCOM2 WOTC - 연구 시설 타격작전 1
	RETURN 1

;선택된 자 워록 등장!
ELSEIF 의뢰플래그:62:0 == 4
	RESULTS = XCOM2 WOTC - 어드밴트 보복 저지
	RETURN 1

;XCOM WOTC 시나리오:잃고 버려짐.
ELSEIF 의뢰플래그:62:0 == 8
	RESULTS = XCOM2 WAR OF THE CHOSEN 시나리오 - 잃고 버려짐
	RETURN 1

;시설 파괴 작전 다시 진행. XCOM2 WOTC 스토리.
ELSEIF 의뢰플래그:62:0 == 15
	RESULTS = XCOM2 WOTC - 연구 시설 타격작전 2
	RETURN 1

;저항군 요원 구출작전.
ELSEIF 의뢰플래그:62:0 == 18
	RESULTS = XCOM2 WOTC - 저항군 요원 구출작전
	RETURN 1

;셴의 마지막 선물 작전!
ELSEIF 의뢰플래그:62:0 == 21
	RESULTS = XCOM2 DLC - 셴의 마지막 선물 작전
	RETURN 1

;외계인 사냥꾼 1
ELSEIF 의뢰플래그:62:0 == 23
	RESULTS = XCOM2 DLC - 외계인 사냥꾼(레갈 비스트 작전)
	RETURN 1

;외계인 사냥꾼 2
ELSEIF 의뢰플래그:62:0 == 25
	RESULTS = XCOM2 WOTC - 사이오닉 전송기 파괴 작전
	RETURN 1

;외계인 사냥꾼 3
ELSEIF 의뢰플래그:62:0 == 27
	RESULTS = XCOM2 WOTC - 어드벤트 2차 보복 저지
	RETURN 1

;어드벤트 블랙사이트
ELSEIF 의뢰플래그:62:0 == 29 && BASE:MASTER:LV > 34
	RESULTS = XCOM2 WOTC - 어드벤트 블랙사이트
	RETURN 1

;시설 재타격작전
ELSEIF 의뢰플래그:62:0 == 33
	RESULTS = XCOM2 WOTC - 시설 재타격작전
	RETURN 1

;어드벤트 3차 보복 저지 (어쌔신)
ELSEIF 의뢰플래그:62:0 == 36
	RESULTS = XCOM2 WOTC - 어드벤트 보복 저지
	RETURN 1

;리바이어던.
ELSEIF 의뢰플래그:62:0 == 38 && BASE:MASTER:LV > 44
	RESULTS = XCOM2 WOTC - 리바이어던
	RETURN 1

ENDIF
RETURN 0
;====================
;설명
;====================
@EXPLAIN_REQUEST_62
#LOCALSIZE 2
#LOCALSSIZE 2
;시설 파괴 작전 진행. XCOM2 WOTC 스토리.
IF 의뢰플래그:62:0 == 1
	CALL EXPLAIN_REQUEST_62_1

;선택된 자 워록 등장!
ELSEIF 의뢰플래그:62:0 == 4
	CALL EXPLAIN_REQUEST_62_2

;XCOM WOTC 시나리오:잃고 버려짐.
ELSEIF 의뢰플래그:62:0 == 8
	CALL EXPLAIN_REQUEST_62_3

;시설 파괴 작전 진행. XCOM2 WOTC 스토리.
ELSEIF 의뢰플래그:62:0 == 15
	CALL EXPLAIN_REQUEST_62_4

;저항군 요원 구출작전.
ELSEIF 의뢰플래그:62:0 == 18
	CALL EXPLAIN_REQUEST_62_5

;셴의 마지막 선물 작전!
ELSEIF 의뢰플래그:62:0 == 21
	CALL EXPLAIN_REQUEST_62_6

;외계인 사냥꾼 1(레갈 비스트 작전)
ELSEIF 의뢰플래그:62:0 == 23
	CALL EXPLAIN_REQUEST_62_7

;외계인 사냥꾼 2(사이오닉 전송기 파괴 작전)
ELSEIF 의뢰플래그:62:0 == 25
	CALL EXPLAIN_REQUEST_62_8

;외계인 사냥꾼 3(어드벤트 2차 보복 저지)
ELSEIF 의뢰플래그:62:0 == 27
	CALL EXPLAIN_REQUEST_62_9

;어드벤트 블랙사이트
ELSEIF 의뢰플래그:62:0 == 29 && BASE:MASTER:LV > 34
	CALL EXPLAIN_REQUEST_62_10

;시설 재타격작전
ELSEIF 의뢰플래그:62:0 == 33
	CALL EXPLAIN_REQUEST_62_11

;어드벤트 3차 보복 저지 (어쌔신)
ELSEIF 의뢰플래그:62:0 == 36
	CALL EXPLAIN_REQUEST_62_12

;작전명 리바이어던.
ELSEIF 의뢰플래그:62:0 == 38 && BASE:MASTER:LV > 44
	CALL EXPLAIN_REQUEST_62_13

ENDIF

;====================
;내용
;====================
@REQUEST_62
#LOCALSIZE 2
#LOCALSSIZE 2
;아바타 연구시설 타격작전.
IF 의뢰플래그:62:0 == 1
	CALL REQUEST_62_1

;선택된 자 워록 등장!
ELSEIF 의뢰플래그:62:0 == 4
	CALL REQUEST_62_2

;XCOM WOTC 시나리오:잃고 버려짐.
ELSEIF 의뢰플래그:62:0 == 8
	CALL REQUEST_62_3

;아바타 연구시설 타격작전.
ELSEIF 의뢰플래그:62:0 == 15
	CALL REQUEST_62_4

;저항군 요원 구출작전.
ELSEIF 의뢰플래그:62:0 == 18
	CALL REQUEST_62_5

;셴의 마지막 선물 작전!
ELSEIF 의뢰플래그:62:0 == 21
	CALL REQUEST_62_6

;외계인 사냥꾼 1(레갈 비스트 작전)
ELSEIF 의뢰플래그:62:0 == 23
	CALL REQUEST_62_7

;외계인 사냥꾼 2(사이오닉 전송기 파괴 작전)
ELSEIF 의뢰플래그:62:0 == 25
	CALL REQUEST_62_8

;외계인 사냥꾼 3(어드벤트 2차 보복 저지)
ELSEIF 의뢰플래그:62:0 == 27
	CALL REQUEST_62_9

;어드벤트 블랙사이트
ELSEIF 의뢰플래그:62:0 == 29 && BASE:MASTER:LV > 34
	CALL REQUEST_62_10

;시설 재타격작전
ELSEIF 의뢰플래그:62:0 == 33
	CALL REQUEST_62_11

;어드벤트 3차 보복 저지 (어쌔신)
ELSEIF 의뢰플래그:62:0 == 36
	CALL REQUEST_62_12

;작전명 리바이어던.
ELSEIF 의뢰플래그:62:0 == 38 && BASE:MASTER:LV > 44
	CALL REQUEST_62_13

ENDIF

;/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_

@EVENT_BATTLE_START_REQUEST62
#LOCALSIZE 2
#LOCALSSIZE 2
;이벤트전. 어쌔신과의 조우.
IF 의뢰플래그:62:0 == 2
	CALL EVENT_BATTLE_START_REQUEST62_1

;1차 보복 저지에서 전투 시작과 동시에 워록 등장(좀비들도 나타남)
ELSEIF 의뢰플래그:62:0 == 4
	CALL EVENT_BATTLE_START_REQUEST62_31

;이벤트전. 로스트 마주할시 아웃라이더의 대사.
ELSEIF 의뢰플래그:62:0 == 8
	CALL EVENT_BATTLE_START_REQUEST62_2

;이벤트전. 정화자 둘과 마주할 때의 센트럴 대사.
ELSEIF 의뢰플래그:62:0 == 10
	CALL EVENT_BATTLE_START_REQUEST62_3

;이벤트전. 대체 경로 확보1
ELSEIF 의뢰플래그:62:0 == 11
	CALL EVENT_BATTLE_START_REQUEST62_4

;이벤트전. 대체 경로 확보2
ELSEIF 의뢰플래그:62:0 == 12
	CALL EVENT_BATTLE_START_REQUEST62_5

;이벤트전. 로스트 대피
ELSEIF 의뢰플래그:62:0 == 14
	CALL EVENT_BATTLE_START_REQUEST62_6

;헌터와의 전투
ELSEIF 의뢰플래그:62:0 == 17
	CALL EVENT_BATTLE_START_REQUEST62_7

;어쌔신과의 전투
ELSEIF 의뢰플래그:62:0 == 20
	CALL EVENT_BATTLE_START_REQUEST62_8

;셴의 마지막 선물 작전 전투 시작시
ELSEIF 의뢰플래그:62:1 == 21
	CALL EVENT_BATTLE_START_REQUEST62_9

;셴의 마지막 선물 작전 앨리베이터 대피전
ELSEIF 의뢰플래그:62:1 == 23
	CALL EVENT_BATTLE_START_REQUEST62_10

;앨리베이터 대피전2 (기쁜 소식 ~ 지난 17~~)
ELSEIF 의뢰플래그:62:1 == 24
	CALL EVENT_BATTLE_START_REQUEST62_11

;앨리베이터 대피전3 (하지만 모든 유기체가 그렇듯이)
ELSEIF 의뢰플래그:62:1 == 25
	CALL EVENT_BATTLE_START_REQUEST62_12

;앨리베이터 대피전4 (하지만 내 생각이 짧았어)
ELSEIF 의뢰플래그:62:1 == 26
	CALL EVENT_BATTLE_START_REQUEST62_13

;앨리베이터 대피전5 (평화적으로 해결할 수도 있었다)
ELSEIF 의뢰플래그:62:1 == 27
	CALL EVENT_BATTLE_START_REQUEST62_14

;2층 내부 시설전 1(셴! 외부 체임버)
ELSEIF 의뢰플래그:62:1 == 28
	CALL EVENT_BATTLE_START_REQUEST62_15

;2층 내부 시설전 2(가스 배출후)
ELSEIF 의뢰플래그:62:1 == 29
	CALL EVENT_BATTLE_START_REQUEST62_16

;2층 SPARK 유닛 공기 제어기 도착
ELSEIF 의뢰플래그:62:1 == 30
	CALL EVENT_BATTLE_START_REQUEST62_17

;2층 무균실 밖 전진전투
ELSEIF 의뢰플래그:62:1 == 31
	CALL EVENT_BATTLE_START_REQUEST62_18

;2층 무균실 밖 전진전투 2
ELSEIF 의뢰플래그:62:1 == 32
	CALL EVENT_BATTLE_START_REQUEST62_19

;2층 무균실 밖 전진전투 3
ELSEIF 의뢰플래그:62:1 == 33
	CALL EVENT_BATTLE_START_REQUEST62_20

;2층 무균실 밖 전진전투 4
ELSEIF 의뢰플래그:62:1 == 34
	CALL EVENT_BATTLE_START_REQUEST62_21

;2층 무균실 밖 앨리베이터 퇴각전 1
ELSEIF 의뢰플래그:62:1 == 35
	CALL EVENT_BATTLE_START_REQUEST62_22

;2층 무균실 밖 앨리베이터 퇴각전 2
ELSEIF 의뢰플래그:62:1 == 36
	CALL EVENT_BATTLE_START_REQUEST62_23

;옥상. 줄리안 출동!
ELSEIF 의뢰플래그:62:1 == 37
	CALL EVENT_BATTLE_START_REQUEST62_24

;이벤트 전투. 어쌔신 두번째 등장(어드벤트 부대와의 전투후)
ELSEIF 의뢰플래그:62:0 == 31
	CALL EVENT_BATTLE_START_REQUEST62_25

;이벤트 전투. 헌터 등장(어드벤트 부대와의 전투후)
ELSEIF 의뢰플래그:62:0 == 35
	CALL EVENT_BATTLE_START_REQUEST62_26

;3차 보복 저지에서 첫 전투 시작과 동시에 어쌔신 등장.
ELSEIF 의뢰플래그:62:0 == 36
	CALL EVENT_BATTLE_START_REQUEST62_27

;3차 보복 저지에서 어쌔신 등장 및 전투 개시시
ELSEIF 의뢰플래그:62:0 == 37
	CALL EVENT_BATTLE_START_REQUEST62_28

;리바이어던에서 어쌔신 등장 + 병력 소환시 대사
ELSEIF 의뢰플래그:62:0 == 39
	CALL EVENT_BATTLE_START_REQUEST62_29

;리바이어던에서 헌터 등장 즉시 대사
ELSEIF 의뢰플래그:62:0 == 41
	CALL EVENT_BATTLE_START_REQUEST62_30

ENDIF
RETURN

@EVENT_BATTLE_TURNTOP62
#LOCALSIZE 2
#LOCALSSIZE 2
RETURN

@EVENT_BATTLE_TURNEND_REQUEST62
#LOCALSIZE 2
#LOCALSSIZE 2
;이벤트전. 어쌔신과의 조우전. 턴 엔드
IF 의뢰플래그:62:0 == 2
	CALL EVENT_BATTLE_TURNEND_REQUEST62_1

;선택된자 워록과의 첫 조우전. 1턴만. 삭제.
;ELSEIF 의뢰플래그:62:0 == 4
;	CALL EVENT_BATTLE_TURNEND_REQUEST62_2
	
;선택된자 워록과의 첫 조우전. 2턴 이후부터
ELSEIF 의뢰플래그:62:0 == 5
	CALL EVENT_BATTLE_TURNEND_REQUEST62_3

;선택된자 워록의 군단
ELSEIF 의뢰플래그:62:0 == 6
	CALL EVENT_BATTLE_TURNEND_REQUEST62_4

;선택된자 워록과의 진짜 전투
ELSEIF 의뢰플래그:62:0 == 7
	CALL EVENT_BATTLE_TURNEND_REQUEST62_5

;잃고 버려짐 전용 어쌔신 턴엔드 대사
ELSEIF 의뢰플래그:62:1 == 1
	CALL EVENT_BATTLE_TURNEND_REQUEST62_6

;정찰대와의 전투후 1턴시
ELSEIF 의뢰플래그:62:0 == 15
	CALL EVENT_BATTLE_TURNEND_REQUEST62_7

;정찰대와 전투후 본대와 전투시 헌터의 말말말(구경중)
ELSEIF 의뢰플래그:62:0 == 16
	CALL EVENT_BATTLE_TURNEND_REQUEST62_8

;헌터 본인과의 전투.
ELSEIF 의뢰플래그:62:0 == 17
	CALL EVENT_BATTLE_TURNEND_REQUEST62_9

;어쌔신 등장.
ELSEIF 의뢰플래그:62:0 == 18
	CALL EVENT_BATTLE_TURNEND_REQUEST62_10

;어쌔신 등장후 대사들(병사관련)
ELSEIF 의뢰플래그:62:0 == 19
	CALL EVENT_BATTLE_TURNEND_REQUEST62_11

;어쌔신 등장후 전투!
ELSEIF 의뢰플래그:62:0 == 20
	CALL EVENT_BATTLE_TURNEND_REQUEST62_12

;옥상. 줄리안 출동! 1턴 경과
ELSEIF 의뢰플래그:62:1 == 37
	CALL EVENT_BATTLE_TURNEND_REQUEST62_13

;바이퍼킹 전투.
ELSEIF 의뢰플래그:62:0 == 24
	CALL EVENT_BATTLE_TURNEND_REQUEST62_14

;버서커 퀸 전투
ELSEIF 의뢰플래그:62:0 == 26
	CALL EVENT_BATTLE_TURNEND_REQUEST62_15

;아르콘킹 전투
ELSEIF 의뢰플래그:62:0 == 28
	CALL EVENT_BATTLE_TURNEND_REQUEST62_16

;블랙사이트에서 어드벤트 정찰대와의 전투중 어쌔신 등장
ELSEIF 의뢰플래그:62:0 == 29
	CALL EVENT_BATTLE_TURNEND_REQUEST62_17

;어드벤트 본대 전투중 어쌔신의 말 말 말.
ELSEIF 의뢰플래그:62:0 == 30
	CALL EVENT_BATTLE_TURNEND_REQUEST62_18

;어쌔신 턴 엔드 대사(어쌔신과의 전투)
ELSEIF 의뢰플래그:62:0 == 31
	CALL EVENT_BATTLE_TURNEND_REQUEST62_19

;시설 재타격작전 헌터 턴 엔드 대사(등장)
ELSEIF 의뢰플래그:62:0 == 33
	CALL EVENT_BATTLE_TURNEND_REQUEST62_20

;선발대 전투 이후 사망시 헌터의 말말말 + 어드벤트 턴마다 헌터의 대사
ELSEIF 의뢰플래그:62:0 == 34
	CALL EVENT_BATTLE_TURNEND_REQUEST62_21

;선발대 전투 이후 사망시 헌터의 턴엔드 대사(헌터와의 싸움)
ELSEIF 의뢰플래그:62:0 == 35
	CALL EVENT_BATTLE_TURNEND_REQUEST62_22

;3차 보복 작전에서 어쌔신 등장후 대사(어쌔신의 구경 대사로 바뀜)
ELSEIF 의뢰플래그:62:0 == 36
	CALL EVENT_BATTLE_TURNEND_REQUEST62_23

;3차 보복 작전에서 어쌔신 등장후 전투 대사
ELSEIF 의뢰플래그:62:0 == 37
	CALL EVENT_BATTLE_TURNEND_REQUEST62_24

;리바이어던에서 어쌔신 턴엔드 대사 (팬텀과 사령관 연합의 전투중 어쌔신 말)
ELSEIF 의뢰플래그:62:0 == 39
	CALL EVENT_BATTLE_TURNEND_REQUEST62_25

;리바이어던에서 헌터 턴엔드 대사 (팬텀과 사령관 연합의 전투중 헌터의 말. 헌터는 전투 시작 전에 등장함)
ELSEIF 의뢰플래그:62:0 == 41
	CALL EVENT_BATTLE_TURNEND_REQUEST62_26

;리바이어던에서 첫번째 아바타 조우후 바로 지원군 등장
ELSEIF 의뢰플래그:62:0 == 43
	CALL EVENT_BATTLE_TURNEND_REQUEST62_27

;리바이어던에서 첫번째 아바타 사망후 워록 등장 및 군대 소환후의 워록의 턴엔드 대사
ELSEIF 의뢰플래그:62:0 == 44
	CALL EVENT_BATTLE_TURNEND_REQUEST62_28

;리바이어던에서 워록의 군대 전멸후 워록 전투 참여. + 아바타 외에 외계인 종합 선물세트
ELSEIF 의뢰플래그:62:0 == 45
	CALL EVENT_BATTLE_TURNEND_REQUEST62_29

ENDIF
RETURN

@EVENT_BATTLE_ACTEND_REQUEST62
#LOCALSIZE 2
#LOCALSSIZE 2
IF 의뢰플래그:62:0 == 5
		CALL EVENT_BATTLE_ACTEND_REQUEST62_1

ELSEIF 의뢰플래그:62:0 == 6
		CALL EVENT_BATTLE_ACTEND_REQUEST62_2

ELSEIF 의뢰플래그:62:0 == 16
		CALL EVENT_BATTLE_ACTEND_REQUEST62_3

ELSEIF 의뢰플래그:62:0 == 19
		CALL EVENT_BATTLE_ACTEND_REQUEST62_4

;인터컴 줄리안의 사과
ELSEIF 의뢰플래그:62:1 == 22
		CALL EVENT_BATTLE_ACTEND_REQUEST62_5

;줄리안 사망 즉시 전투 중단 및 엔딩.
ELSEIF 의뢰플래그:62:1 == 37
		CALL EVENT_BATTLE_ACTEND_REQUEST62_6

;바이퍼킹 사망 즉시 전투 중단 및 엔딩.
ELSEIF 의뢰플래그:62:0 == 24
		CALL EVENT_BATTLE_ACTEND_REQUEST62_7

;선발대 전투 이후 사망시 어쌔신의 말말말
ELSEIF 의뢰플래그:62:0 == 30
		CALL EVENT_BATTLE_ACTEND_REQUEST62_8

;선발대 전투 이후 사망시 헌터의 말말말 + 어드벤트 턴마다 헌터의 대사
ELSEIF 의뢰플래그:62:0 == 34
		CALL EVENT_BATTLE_ACTEND_REQUEST62_9

;3차 보복 저지에서 첫 전투시 어쌔신의 말말말.
ELSEIF 의뢰플래그:62:0 == 36
		CALL EVENT_BATTLE_ACTEND_REQUEST62_10

;리바이어던에서 어쌔신의 말 (적 사망)
ELSEIF 의뢰플래그:62:0 == 39
		CALL EVENT_BATTLE_ACTEND_REQUEST62_11

;리바이어던에서 헌터의 말 (적 사망)
ELSEIF 의뢰플래그:62:0 == 41
		CALL EVENT_BATTLE_ACTEND_REQUEST62_12

;리바이어던에서 워록의 말 (군대로 소환한 병력 사망)
ELSEIF 의뢰플래그:62:0 == 44
		CALL EVENT_BATTLE_ACTEND_REQUEST62_13

;리바이어던에서 워록의 말 (아바타 포함한 워록 본인도 넣음.)
ELSEIF 의뢰플래그:62:0 == 45
		CALL EVENT_BATTLE_ACTEND_REQUEST62_14

;리바이어던에서 아바타 사망 즉시 엔딩으로 가는 이벤트.
ELSEIF 의뢰플래그:62:0 == 47
		CALL EVENT_BATTLE_ACTEND_REQUEST62_15

	ENDIF
RETURN

@DISABLE_MY_COMP
#LOCALSIZE 2
#LOCALSSIZE 2
;COMP의 내장 악마들 전부 강제서버전송
FOR LOCAL,0,CHARANUM
	SIF LOCAL == MASTER
		CONTINUE
	SIF (ABL:LOCAL:종족 == 0 || ABL:LOCAL:종족 > 45) && ABL:LOCAL:종족 != 73
		CONTINUE
	IF TALENT:LOCAL:인수라
		CFLAG:LOCAL:所属ＣＯＭＰ = -1
		CONTINUE
	ENDIF
	SIF CFLAG:LOCAL:この場に居ないフラグ == 1
		CONTINUE
	CFLAG:LOCAL:所属ＣＯＭＰ = -1 ;자택서버전송
NEXT

;ARG＝번호、ARG:1＝0：던젼、1：투기장、2：이벤트、3：의뢰
CALL FLAG_RESET,62,3