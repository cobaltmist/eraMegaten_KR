;====================
;関連フラグリスト
;====================
;====================
;조건
;====================
;====================
;설명
;====================
@EXPLAIN_REQUEST_4_P8
PRINTL 
PRINTFORML 스닉이라고 자칭하는 남자로부터 조직에 의뢰가 들어왔다。
PRINTFORML 신세숙의 정보를 전달하겠으니、그것을 이용해 신세숙의 존재를 세상에 공표하고、
PRINTFORML 양지로 끌어내 달라는 것이다。
PRINTFORML 정보는 아오바 공원 야외음악당에서 직접 전네 받기로 했다。
PRINTL 
;====================
;内容
;====================
@REQUEST_4_P8
#LOCALSIZE 2
FLAG:도주불가플래그 = 1
FLAG:회화불능플래그 = 1
FLAG:선제기습취소 = 1
CALL SHOW_PICTURE, "NONFLOORD", "야외音楽堂"
CALL MESSAGE_WINDOW, "", @"＞지정된 시간에 %CALLNAME:MASTER%이 야외음악당에 도착하자/＞거기에 두 사람이 싸우고 있었다。/하나는 칠자매학원의 의뢰로 행동을 함께 했던 스오우 카츠야다……", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "말은 좋아요。/그러나、아무리 신세숙이 비합법에 강대한 조직이라도/경찰이 다른 비합법적 조직의 손을 빌리는 것은…", , , , , 4
CALL MESSAGE_WINDOW, "다른 한 명의 사람", "스오우 경사…말하고 심은 것은 알겠다。/하지만、신세숙은 경찰 내부에 마저 침투해 힜다。/표면적으로만 아니라……/아、팬텀・소사이어티의 사자가 왔다。", , , , , 4
CALL MESSAGE_WINDOW, "", @"＞남자는 %CALLNAME:MASTER%에게 주의를 주고 이야기를 그만뒀다。", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "다、당신은 확실히……/설마 다크서머너 였다니……", , , , , 4
CALL MESSAGE_WINDOW, "남자", "스오우 경사가 아는 사람이었는가……/뭐 좋아。/어쨌든 이것이 신세숙의 정보다。", , , , , 4
CALL MESSAGE_WINDOW, "", @"＞%CALLNAME:MASTER%는 남자로부터 디스크를 받았다。", , , , , 4
CALL MESSAGE_WINDOW, "남자", @"부탁한다。/놈들의 정체를 밝히면/멋대로 할 수 없을 거야。", , , , , 4
CALL MESSAGE_WINDOW, "목소리", @"배신은 곤란하네、토가시 서장。", , , , , 4
CALL MESSAGE_WINDOW, "", "＞야외음악당 무대에 마른 남자가 모습을 드러냈다。", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "시마즈 관리관…！/역시 당신도…！", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "스오우 경사인가。/설마 여기까지 다다를 줄이야。", , , , , 4
CALL MESSAGE_WINDOW, "토가시", "이제 익살은 끝이다。/정보를 흘린 것은 이번 만이 아니야。/즉시 신세숙의 존재는 공표되어、세상에 공개될 것이다！", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "핫핫하！/역시나 생각했던 대로다……그것이야말로 우리가 노리던 것이야", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "언령의 현실화에는 신중을 요합니다。/너무 엉뚱한 이야기는 소문조차 되지 않는다니까요？/우리는 진실성과 대중의 관심이 필요했습니다。", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "그러기 위해서는 우리의 존재와 목적을、그리고 힘을 사회에 인지 시키는 것이 제일이다…/너희는 이런 우리의 모습을 잘 홍보해 준 셈이지。", , , , , 4
CALL MESSAGE_WINDOW, "", "＞한 발의 총소리가 울리고、토가시의 가슴을 총탄이 관통한다……", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "서장！", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "아직 홍보를 계속해 주는 것도 좋지만/팬텀・소사이어티에 그것을 가지고 가게 한다면/매우 곤란해져서 말이야/어쨌든 느긋하게 쉬어", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "큭、네 녀석！", , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "자기 힘으로 여기까지 온 우수한 형사를 죽이는 것은 참으로 아깝지만…/무원죄의 세계를 만들기 위해서는 안 되겠구나。/어쩔 수 없다……거기 서머너와 같이 죽여주지。", , , , , 4
CALL MESSAGE_WINDOW, "", "＞야외음악당에 무장한 습격자들이 들어왔다…" , , , , , 4
CALL MESSAGE_WINDOW, "시마즈", "쳐라！", , , , , 4
CALL MESSAGE_WINDOW, "", "＞시마즈 관리관이 1명 나왔다！/＞ＳＡＴ가 9체 나왔다！", , , , , 4
LOCAL:1 = FLAG:전투난이도 - 3 > 0 ? 120 + (FLAG:전투난이도 - 3) * 20 # 100
FOR LOCAL, 7, 17
	IF LOCAL == 14
		CALL SET_ENEMY, LOCAL, [[キャラ:시마즈관리관]], 36, 0 , 1
		CALL SET_BATTLE_STATUS(CHARANUM - 1, 24 * LOCAL:1, "ＨＰ")
		CALL SET_BATTLE_STATUS(CHARANUM - 1, 20 * LOCAL:1, "ＭＰ")
	ELSE
		CALL SET_ENEMY, LOCAL, [[キャラ:SAT]], 32, 0 , 1
		CALL SET_BATTLE_STATUS(CHARANUM - 1, 12 * LOCAL:1, "ＨＰ")
		CALL SET_BATTLE_STATUS(CHARANUM - 1, 20 * LOCAL:1, "ＭＰ")
	ENDIF
	CSTR:(CHARANUM - 1):사고패턴 = %CALLNAME:(CHARANUM - 1)%
	CALL SYNC_STATUS, CHARANUM - 1
	CALL HEALTH_CHARA, CHARANUM - 1
NEXT
LOCAL = CHARANUM - 1
CALL BATTLE_START
CALL SHOW_PICTURE, "NONFLOORD", "야외음악당"
CALL MESSAGE_WINDOW, "시마즈", "무원죄의…세계를 만들기 위해서다…/나는…/틀리지 않았다…", , , , , 4
CALL MESSAGE_WINDOW, "", "＞시마즈는 숨이 끊어졌다…/＞카츠야는 시마즈의 마지막을 지켜보다/＞죽어가는 토가시에게로 달려갔다。", , , , , 4
CALL MESSAGE_WINDOW, "토가시", "카츠야군……미안했다……/내가 어리석었다……/놈들을 멈춰주게……", , , , , 4
CALL MESSAGE_WINDOW, "", "＞그렇게 말하며 토가시도 숨이 끊어졌다…/＞숨진 토가시에게 카츠야는 경관으로서 경례를 했다…", , , , , 4
CALL MESSAGE_WINDOW, "카츠야", "본대로다…/시미의 평화를 지켜야 할 경찰관이 신세숙에 손을 빌려주고 있다…/나는 한 명의 형사로서 그것을 저지해야 한다。", , , , , 4
CALL INPUT_YN_M , "………" , "협력을 제공하겠다" , , , , 4
IF RESULT == 0
	CALL MESSAGE_WINDOW, "카츠야", "네가 다크서머너라는 것을 들었다…/본래라면 이곳에서 널 체포해야겠지만…/아마 무리일 것이고、그럴 필요도 없다고 생각한다。", , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "무엇보다도 토가시 서장의 원수를 처치해 준 것은 너다。/감사한다。", , , , , 4
	CALL MESSAGE_WINDOW, "", "＞카츠야는 그렇게 말하며 머리를 숙였다。", , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "그리고、너는 너대로 신세숙과 싸웠으니까…/여하튼 자신의 몸을 조심하는게 좋아/서장처럼 죽을 인간이 나오는 것은 이제 질색이라고……", , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "그럼…또、뭔가 있으면/서로 돕기로 하지"
	CALL MESSAGE_WINDOW, "", @"＞카츠야는%CALLNAME:MASTER%에게 등을 돌리고、 떠나 가려고 하고 있다。/＞그는 %CALLNAME:MASTER%가 팬텀・소사이어티의 일원이라는 것을 알아버렸으니……" , , , , , 4
	CALL INPUT_YN_M, "방치한다", "노예로 한다。" , , , , 4
	
	
	IF RESULT == 0
		CALL MESSAGE_WINDOW, "", "＞카츠야는 떠나갔다。" , , , , , 4
	ELSE
		CALL MESSAGE_WINDOW, "", "＞카츠야를 뒤에서 내리쳤다。/＞카츠야는 기절해、그대로 쓰러졌다。/＞스오우 카츠야를 손에 넣었다…" , , , , , 4
		CALL ADD_NEW_COMPANION, [[キャラ:카츠야]],  200, 1
	ENDIF
ELSE
	CALL MESSAGE_WINDOW, "카츠야", "뭐라고？/하지만、너는 비합법 조직의 일원이잖아？/그런 도움을 빌리는……" , , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "아니、너는 토가시 서장의 원수를 해치워줬다。/그러니 신뢰할 수도 있다고…생각한다。" , , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "나 혼자의 힘으로는 막을 수 없는 비극도 너와 함께라면/처리 할 수 있을지도 모른다……" , , , , , 4
	CALL MESSAGE_WINDOW, "카츠야", "오히려、 내가 먼저 너에게 협력을 부탁하고 싶군。/나에게 힘을 빌려 줘。" , , , , , 4
	CALL MESSAGE_WINDOW, "", "＞카츠야는 그렇게 말하며 머리를 숙였다。/＞스오우 카츠야가 중마가 되었다。" , , , , , 4
	CALL ADD_NEW_COMPANION, [[キャラ:카츠야]],  500
	SIF RESULT
		CFLAG:(RESULT:1):전투참가불가능 = -1 
ENDIF
CALL MESSAGE_WINDOW, "", @"＞%CALLNAME:MASTER%는 야외음악당을 뒤로 했다。" , , , , , 4
CALL SHOW_PICTURE, "NONFLOORD", "事務所"
CALL MESSAGE_WINDOW, "", @"＞………………/＞…………/＞……" , , , , , 4
CALL MESSAGE_WINDOW, "", @"＞%CALLNAME:MASTER%가 가져온 정보는/＞신세숙의 숨통이 걸린 조직의 세부 사항 및/＞지금가지의 활동기록 등으로 밝혀졌다……" , , , , , 4
CALL MESSAGE_WINDOW, "", "＞이 활동이 인정되어、/＞계좌에 ￥ 50000이 입금되었다。/＞명성 25를 손에 넣었다。" , , , , , 4
MONEY += 50000
FLAG:명성 += 25

;-------------------------------
;시마즈관리관
;-------------------------------
@SET_ACTION_시마즈관리관, ARG
#LOCALSIZE 1
LOCAL = 0
FOR LOCAL, 1, 7
	SIF POS(LOCAL) <= 0
		CONTINUE
	SIF !CFLAG:POS(LOCAL):BS부착률강화
		SETBIT LOCAL, 0
	SIF !CFLAG:POS(LOCAL):비구가드킬
		SETBIT LOCAL, 1
NEXT
CFLAG:ARG:입력행동 = -1
SELECTCASE RAND:100
	CASE IS < 30
		CFLAG:ARG:입력행동 = [[스킬:미들샷]]
	CASE IS < 65
		CFLAG:ARG:입력행동 = GETBIT(LOCAL, 0) ? [[스킬:무거운공기]] # [[스킬:플레어샷]]
	CASEELSE
		CFLAG:ARG:입력행동 = GETBIT(LOCAL, 1) ? [[스킬:비구가드브레이크]] # [[스킬:플레어샷]]
ENDSELECT
;アクション実行不能なら自動的に방어にする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
IF RESULT == 0
	CFLAG:ARG:입력행동 = -1
	CFLAG:ARG:방어플래그 = 1
ENDIF
;랜덤타겟をよんで決定
SIF CFLAG:ARG:입력행동 >= 0
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1

;-------------------------------
;SAT
;-------------------------------
@SET_ACTION_SAT, ARG
#LOCALSIZE 1
LOCAL = 0
CFLAG:ARG:입력행동 = -1
SELECTCASE RAND:100
	CASE IS < 20
		CFLAG:ARG:입력행동 = [[스킬:저격]]
	CASE IS < 40
		CFLAG:ARG:입력행동 = [[스킬:연속사격]]
	CASE IS < 50
		CFLAG:ARG:입력행동 = [[스킬:스파이럴밤]]
	CASEELSE
		CFLAG:ARG:입력행동 = [[스킬:싱글샷]]
ENDSELECT
;アクション実行不能なら自動的に방어にする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:입력행동
IF RESULT == 0
	CFLAG:ARG:입력행동 = -1
	CFLAG:ARG:방어플래그 = 1
ENDIF
;랜덤타겟をよんで決定
SIF CFLAG:ARG:입력행동 >= 0
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:입력행동
RETURN 1
