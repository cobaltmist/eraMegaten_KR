

;====================
;조건
;====================
@PLAYABLE_COLOSSEUM_0
IF FLAG:DEBUG
	RESULTS = 전투 테스트
	RETURN 1
ENDIF
RETURN 0


;====================
;内容
;====================
@COLOSSEUM_0

DRAWLINE
PRINTW 전투 테스트를 합니다
CALL BATTLETEST




@BATTLETEST
CALL SHOW_NOW_FORMATION_E,0,2
DRAWLINE
CALL SHOW_NOW_FORMATION_P,0,2
PRINTL 변경할 캐릭터의 포지션을 선택해주세요.
PRINTLC [99] 전투 개시
PRINTLC [100] 돌아온다
PRINTLC [101] 고정 배치
PRINTL 
$INPUT_LOOP
INPUT
IF RESULT <= 16 && RESULT > 0
	LOCAL = FLAG:(70 + RESULT)
	IF LOCAL >= 0
		CALL CHANGE_TESTCHARA_STATUS(LOCAL,RESULT)
		RESTART
	ELSE
		PRINTL 이 포지션은 비어있습니다. 배치할 캐릭터를 선택해주세요.
		CALL CHOICE_TESTCHARA(RESULT)
		RESTART
	ENDIF
ELSEIF RESULT == 99
	FLAG:디버그전투플래그 = 1
	CALL BATTLE_START
	FLAG:디버그전투플래그 = 0
	FOR LOCAL,0,CHARANUM
		CALL HEALTH_CHARA,LOCAL
	NEXT
	RESTART
ELSEIF RESULT == 100
	RETURN -1
ELSEIF RESULT == 101
	CALL SET_POS_TEST
	RESTART
ELSE
	GOTO INPUT_LOOP
ENDIF
@CHANGE_TESTCHARA_STATUS(ARG,ARG:1)
#DIM LCOUNT
BASE:ARG:ＭＡＧ = 9999999
CFLAG:ARG:1 = 1
LOCAL:10 = 0
LOCAL:11 = 0
$START
U = ARG
PRINTFORML %NAME:U%　　%GET_ALI1(ABL:U:속성LD),7,LEFT%/%GET_ALI2(ABL:U:속성LC),7,LEFT%　　충성도:{BASE:U:충성도,6}　　ＭＡＧ:{BASE:U:ＭＡＧ,6}　　ＥＸＰ：{BASE:U:ＥＸＰ,8}/{MAXBASE:U:ＥＸＰ,8}
;1行目に레벨・속성を표시
PRINTFORM LV{MAXBASE:U:LV,3}({BASE:U:LV,3})　　　 
PRINTBUTTON "[↑]",30
PRINTBUTTON "[↓]",40
PRINTBUTTON "[↑↑]",50
PRINTBUTTON "[↓↓]",60
PRINTFORM 　　　
SIF ABL:U:종족 > 0 && ABL:U:종족 < 14
	PRINTFORM 　　ANALYZE: \@FLAG:(20000+NO:U) >= 1000 ? COMPLETE! # {FLAG:(20000+NO:U)/10}％ \@
PRINTL
;2行目にHP・충성도を표시
PRINTFORM ＨＰ[{BASE:U:ＨＰ,4}/{MAXBASE:U:ＨＰ,4}]　
PRINTBUTTON "[↑]",88
PRINTBUTTON "[↓]",89
PRINTBUTTON "[↑↑]",90
PRINTBUTTON "[↓↓]",91
PRINTBUTTON "[↑↑↑]",92
PRINTBUTTON "[↓↓↓]",93
PRINTL 
;3行目にＭＰ・ＥＸＰを표시
PRINTFORM ＭＰ[{BASE:U:ＭＰ,4}/
PRINTFORM {MAXBASE:U:ＭＰ,4}]　
PRINTBUTTON "[↑]",94
PRINTBUTTON "[↓]",95
PRINTBUTTON "[↑↑]",96
PRINTBUTTON "[↓↓]",97
PRINTBUTTON "[↑↑↑]",98
PRINTBUTTON "[↓↓↓]",110
PRINTL
;4行目に通常공격の性能を표시
PRINTBUTTON "통상 공격",82
PRINTFORM ：%GET_TYPE(ABL:U:공격상성),6,LEFT%　
PRINTFORM {ABL:U:최저공격횟수,2}-

PRINTFORM {ABL:U:최대공격횟수,2}
PRINT 회
PRINTBUTTON "[+]",83
PRINTBUTTON "[-]",84
PRINTBUTTON "[+]",85
PRINTBUTTON "[-]",86
PRINTBUTTON "[사거리]",87
PRINTFORM 　{ABL:U:사거리} 
PRINTBUTTON GET_SPHERE(ABL:U:공격범위),500
IF ABL:U:추가효과 > 0
	PRINTFORML 　　　　추가효과：%GET_STATE(ABL:U:추가효과),6,LEFT%　추가효과상성：%GET_TYPE(ABL:U:추가효과상성)%
ENDIF

;인간ならばここに총공격の性能と총공격력・총명중を2行つかって표시
IF EQUIP:U:총 > 0
	DRAWLINE
	PRINTFORML 총：공격력 {MAXBASE:U:총공격,4} 명중 {MAXBASE:U:총명중}
	CALLFORM 최저공격횟수_{EQUIP:U:총}
	PRINTFORM 공격횟수 {RESULT,2}-
	CALLFORM 최대공격횟수_{EQUIP:U:총}
	PRINTFORM {RESULT,2}
	CALLFORM 사거리_{EQUIP:U:총}
	PRINTFORM 　　사거리：{RESULT,2}
	CALLFORM 공격범위_{EQUIP:U:총}
	PRINTFORM 　　%GET_SPHERE(RESULT),4,LEFT%
	PRINTL
ENDIF
IF ARG:1 > 6
	DRAWLINE
	PRINTFORM 강화랭크　　{CFLAG:ARG:강화랭크,4}　
	PRINTBUTTON "[↑]",70
	PRINTBUTTON "[↓]",71
	PRINTBUTTON "[↑↑]",72
	PRINTBUTTON "[↓↓]",73
	PRINTL
	PRINTFORM 속도보정　　　{CFLAG:ARG:속도보정,4}　
	PRINTBUTTON "[↑]",74
	PRINTBUTTON "[↓]",75
	PRINTBUTTON "[↑↑]",76
	PRINTBUTTON "[↓↓]",77
	PRINTL
	PRINTFORM 행동횟수　　　{CFLAG:ARG:행동횟수,4}　
	PRINTBUTTON "[↑]",80
	PRINTBUTTON "[↓]",81
	PRINTL
	PRINTFORM 사고패턴　%CSTR:ARG:사고패턴,4%　
	IF CSTR:ARG:사고패턴 != ""
		PRINTBUTTON "[OFF]",78
	ELSE
		PRINTBUTTON "[ON ]",78
	ENDIF
	PRINT 　
	PRINTBUTTON "[지정]",79
ENDIF
DRAWLINE
;5～10行目に기본能力値と전투能力値を표시
FOR LCOUNT, 0, 6
	PRINTFORM %GET_BASESTATUS(LCOUNT+1),4%{MAXBASE:U:(GET_BASESTATUS(LCOUNT+1)),4}({BASE:U:(GET_BASESTATUS(LCOUNT+1)),4})　
	PRINTBUTTON "[↑]",LCOUNT+31
	PRINTBUTTON "[↓]",LCOUNT+41
	PRINTBUTTON "[↑↑]",LCOUNT+51
	PRINTBUTTON "[↓↓]",LCOUNT+61
	PRINT 　
	PRINTFORM %GET_BATTLESTATUS(LCOUNT),8,LEFT% 
	PRINTFORM {MAXBASE:U:(GET_BATTLESTATUS(LCOUNT)),5}
	PRINTBUTTON "[↑]",250 + LCOUNT * 4
	PRINTBUTTON "[↓]",251 + LCOUNT * 4
	PRINTBUTTON "[↑↑]",252 + LCOUNT * 4
	PRINTBUTTON "[↓↓]",253 + LCOUNT * 4
	PRINTL 
NEXT
LOCAL = 0
FOR LCOUNT,31,37
	LOCAL += BASE:U:LCOUNT
NEXT
LOCAL:1 = 0
FOR LCOUNT,31,37
	LOCAL:1 += MAXBASE:U:LCOUNT
NEXT
PRINTFORML 기본능력합계치　{LOCAL,3}　　　기본능력합계기준치　{(BASE:U:30)/2+(BASE:U:30) + 18,3}±5　　　능력치합계　{LOCAL:1}
PRINTFORML ＬＶＵＰ횟수　　{LOCAL:10,3}　　　능력ＵＰ횟수　　　　{LOCAL:11,3}
DRAWLINE
;11、12行目に被공격상성と継承가능표시
FOR LOCAL,0,FLAG:상성수
		PRINTBUTTON BASENAME:(LOCAL+40),LOCAL + 200
		PRINTFORM  \@(MAXBASE:U:(GET_TYPE(LOCAL)) < 0) ? 흡 # 　　\@
		PRINTFORM \@ ((MAXBASE:U:(GET_TYPE(LOCAL)) != 999)) ? {ABS(MAXBASE:U:(GET_TYPE(LOCAL))),4}％ # %" " *2%반사 \@　
		;PRINTFORM {ABS(MAXBASE:U:(GET_TYPE(LOCAL)),4}％
	SIF LOCAL % 6 == 5
		PRINTL
NEXT
PRINTBUTTON "[ALL-COOPMOOD]",219
PRINTBUTTON "[상성리셋]",220
PRINTL 
DRAWLINE
IF TALENT:U:서머너 == 0
	FOR LOCAL,0,FLAG:스킬수
		LOCALS = 스킬{LOCAL+1}
		IF ABL:U:LOCALS
			CALLFORM SKILL_NAME_{ABL:U:LOCALS},U
		ELSE
			RESULTS = EMPTY	
		ENDIF
		PRINTFORM 　[{LOCAL+1}]%RESULTS,20,LEFT%
		SIF LOCAL % 4 == 3
			PRINTL
	NEXT
DRAWLINE
ENDIF
IF ABL:U:종족 == 0 || ABL:U:종족 > 45
	FOR LOCAL,0,7
		PRINTFORM %"[" + GET_EQUIP(LOCAL) + "]",14,LEFT%
		IF (EQUIP:U:(GET_EQUIP(LOCAL))) == 0
			SETCOLOR 0x404040
			PRINTFORML [{LOCAL+10}]ＥＭＰＴＹ
			RESETCOLOR
		ELSE
			IF 마정장비(EQUIP:U:(GET_EQUIP(LOCAL)))
				PRINTFORML [{LOCAL+10}]%STR:(DC:(EQUIP:U:(GET_EQUIP(LOCAL)) - 2450 - LOCAL*450):49+100)%
			ELSE
				PRINTFORML [{LOCAL+10}]%ITEMNAME:(EQUIP:U:(GET_EQUIP(LOCAL)))%
			ENDIF
		ENDIF
	NEXT
	DRAWLINE
ENDIF
IF ARG:1 < 7
	PRINTFORM 순종 Lv{ABL:ARG:순종,2}　
	PRINTBUTTON "[↑]",21
	PRINT 　
	PRINTBUTTON "[↓]",22
	PRINTFORM 　기교 Lv{ABL:ARG:기교,2}　
	PRINTBUTTON "[↑]",23
	PRINT 　
	PRINTBUTTON "[↓]",24
	PRINTFORM 　욕망 Lv{ABL:ARG:욕망,2}　
	PRINTBUTTON "[↑]",25
	PRINT 　
	PRINTBUTTON "[↓]",26
	PRINTL 
	LOCAL:12 = 0
	FOR LCOUNT,3,8
		SIF TALENT:U:LCOUNT
			LOCAL:12 += 1
	NEXT
	IF LOCAL:12
		PRINT 함락　○　 
	ELSE 
		PRINT 함락　×　 
	ENDIF
	IF LOCAL:12
		PRINTBUTTON  "[ON ]",27
	ELSE
		PRINTBUTTON  "[OFF]",27
	ENDIF
	PRINT 　　　 
	IF TALENT:U:임신
		PRINT 임신　○　 
	ELSE 
		PRINT 임신　×　 
	ENDIF
	IF TALENT:U:임신
		PRINTBUTTON "[ ON]",28
	ELSE 
		PRINTBUTTON "[OFF]",28
	ENDIF
	
	PRINTL 
DRAWLINE
ENDIF
PRINTL [99] 포지션을 준다　　　　[100] 돌아간다
INPUT
IF RESULT >= 1 && RESULT <= 8
	IF TALENT:ARG:페르소나구사자 && RESULT == 1
		CALL CHANGE_PERSONA,ARG
	ELSE
		CALL CHOICE_TESTCHARA_SKILL,U,RESULT+59
	ENDIF
ELSEIF RESULT >= 10 && RESULT <= 16
	CALL CHOICE_TESTCHARA_EQUIP,ARG,RESULT
ELSEIF RESULT == 21
	ABL:ARG:순종 += 1
ELSEIF RESULT == 22
	ABL:ARG:순종 -= 1
ELSEIF RESULT == 23
	ABL:ARG:기교 += 1
ELSEIF RESULT == 24
	ABL:ARG:기교 -= 1
ELSEIF RESULT == 25
	ABL:ARG:욕망 += 1
ELSEIF RESULT == 26
	ABL:ARG:욕망 -= 1
ELSEIF RESULT == 27
	IF LOCAL:12
		FOR LCOUNT,3,8
			TALENT:U:LCOUNT = 0
		NEXT
	ELSE
		FOR LCOUNT,3,8
			TALENT:U:LCOUNT = 1
		NEXT
	ENDIF
ELSEIF RESULT == 28
	IF TALENT:U:임신
		TALENT:U:임신 = 0
	ELSE
		TALENT:U:임신 = 1
	ENDIF
ELSEIF RESULT >= 30 && RESULT <= 36
	BASE:U:(RESULT) += 1
	IF RESULT == 30
		LOCAL:10 += 1
	ELSE
		LOCAL:11 += 1
	ENDIF
ELSEIF RESULT >= 40 && RESULT <= 46
	BASE:U:(RESULT - 10)  -= 1
	IF RESULT == 40
		LOCAL:10 -= 1
	ELSE
		LOCAL:11 -= 1
	ENDIF
ELSEIF RESULT >= 50 && RESULT <= 56
	BASE:U:(RESULT - 20) += 10
	IF RESULT == 50
		LOCAL:10 += 10
	ELSE
		LOCAL:11 += 10
	ENDIF
ELSEIF RESULT >= 60 && RESULT <= 66
	BASE:U:(RESULT - 30)  -= 10
	IF RESULT == 60
		LOCAL:10 -= 10
	ELSE
		LOCAL:11 -= 10
	ENDIF
ELSEIF RESULT >= 70 && RESULT <= 73
	LOCAL = CFLAG:ARG:강화랭크
	IF RESULT == 70
		CFLAG:ARG:강화랭크 += 1
	ELSEIF RESULT == 71
		CFLAG:ARG:강화랭크 -= 1
	ELSEIF RESULT == 72
		CFLAG:ARG:강화랭크 += 10
	ELSEIF RESULT == 73
		CFLAG:ARG:강화랭크 -= 10
	ENDIF
	SIF CFLAG:ARG:강화랭크 > 200
		CFLAG:ARG:강화랭크 = 200
	SIF (LOCAL < 100 && CFLAG:ARG:강화랭크 >= 100)
		CFLAG:ARG:강화랭크 = 99
	SIF (LOCAL >= 100 && CFLAG:ARG:보스플래그 == 0)
		CFLAG:ARG:강화랭크 = 100
	SIF CFLAG:ARG:강화랭크 < 0
		CFLAG:ARG:강화랭크 = 0
	;스테이터스강화、강화랭크フラグセット、ボスなら행동횟수
	IF LOCAL < 100
		BASE:ARG:(GET_BASESTATUS(0)) -= LOCAL*3
		FOR LOCAL:1, 0, 6
					BASE:ARG:(GET_BASESTATUS(1+LOCAL:1)) -= LOCAL * 1
		NEXT
	ELSE
		BASE:ARG:GET_BASESTATUS(0) -= (LOCAL-100)*3
		FOR LOCAL:1, 0, 6
			BASE:ARG:(GET_BASESTATUS(1+LOCAL:1)) -= (LOCAL-100) *2
		NEXT
	ENDIF
	BASE:ARG:LV += CFLAG:ARG:강화랭크 * 3
	CALL SYNC_STATUS,ARG
	;CALL ENHANCE_ENEMY,ARG,CFLAG:ARG:강화랭크
ELSEIF RESULT >= 74 && RESULT <= 77
	IF RESULT == 74
		CFLAG:U:속도보정 += 1
	ELSEIF RESULT == 75
		CFLAG:U:속도보정 -= 1
	ELSEIF RESULT == 76
		CFLAG:U:속도보정 += 10
	ELSE
		CFLAG:U:속도보정 -= 10
	ENDIF
ELSEIF RESULT == 78
	IF CSTR:ARG:사고패턴 != ""
		CSTR:ARG:사고패턴 = 
	ELSE
		CSTR:ARG:사고패턴 = %CALLNAME:ARG%
	ENDIF
ELSEIF RESULT == 79
	PRINTL 사고 패턴의 문자열을 입력해주세요
	INPUTS
	CSTR:ARG:사고패턴 = %RESULTS%
ELSEIF RESULT >= 80 && RESULT <= 81
	IF RESULT == 80
		CFLAG:U:행동횟수 += 1
	ELSEIF RESULT == 81
		CFLAG:U:행동횟수 -= 1
	ENDIF
	SIF CFLAG:U:행동횟수 == 0
		CFLAG:U:행동횟수 = 1
ELSEIF RESULT == 82
	ABL:U:공격상성 += 1
	SIF ABL:U:공격상성 == 18
		ABL:U:공격상성 = 0
ELSEIF RESULT == 83
	ABL:U:최저공격횟수 += 1
ELSEIF RESULT == 84
	ABL:U:최저공격횟수 -= 1
	SIF ABL:U:최저공격횟수 == 0
		ABL:U:최저공격횟수 = 1
ELSEIF RESULT == 85
	ABL:U:최대공격횟수 += 1
ELSEIF RESULT == 86
	ABL:U:최대공격횟수 -= 1
	SIF ABL:U:최대공격횟수 == 0
		ABL:U:최대공격횟수 = 1
ELSEIF RESULT == 87
	ABL:U:사거리 += 1
	SIF ABL:U:사거리 == 6
		ABL:U:사거리 = 1
ELSEIF RESULT >= 88 && RESULT <= 93
	 IF RESULT == 88
	 	CFLAG:U:ＨＰ보정 += 1
	 ELSEIF RESULT == 89
	 	CFLAG:U:ＨＰ보정 -= 1
	 ELSEIF RESULT == 90
	 	CFLAG:U:ＨＰ보정 += 10
	 ELSEIF RESULT == 91
	 	CFLAG:U:ＨＰ보정 -= 10
	 ELSEIF RESULT == 92
	 	CFLAG:U:ＨＰ보정 += 100
	 ELSEIF RESULT == 93
	 	CFLAG:U:ＨＰ보정 -= 100
	 ENDIF
ELSEIF (RESULT >= 94 && RESULT <= 98 ) || RESULT == 110
	 IF RESULT == 94
	 	CFLAG:U:ＭＰ보정 += 1
	 ELSEIF RESULT == 95
	 	CFLAG:U:ＭＰ보정 -= 1
	 ELSEIF RESULT == 96
	 	CFLAG:U:ＭＰ보정 += 10
	 ELSEIF RESULT == 97
	 	CFLAG:U:ＭＰ보정 -= 10
	 ELSEIF RESULT == 98
	 	CFLAG:U:ＭＰ보정 += 100
	 ELSE
	 	CFLAG:U:ＭＰ보정 -= 100
	 ENDIF
ELSEIF RESULT == 99
	CALL REMOVE_POSITION,ARG:1
	RETURN
ELSEIF RESULT == 100
	RETURN
ELSEIF RESULT >= 200 && RESULT <= 218
	LOCAL = RESULT - 200
	LOCAL:1 = RESULT - 160
	$AISYOU
	PRINTFORM %CALLNAME:ARG%의 방어상성은 
	PRINTFORM \@(MAXBASE:U:(GET_TYPE(LOCAL)) < 0) ? 흡 # 　　\@
	PRINTFORML \@ ((MAXBASE:U:(GET_TYPE(LOCAL)) != 999)) ? {ABS(MAXBASE:U:(GET_TYPE(LOCAL))),4}％ # %" " *2%반사 \@입니다
	PRINTL 직접 입력 혹은 아래의 버튼을 클릭해주세요
	PRINTL 덧붙여 장비에 의해 수정이 추가되는 경우, 여기서 변경한 것보다 기본적으로 우선시됩니다
	PRINTBUTTON "[무효]",0
	PRINTBUTTON "[반사]",999
	PRINTBUTTON "[흡수]",-100
	PRINTL
	PRINTBUTTON "[ +5]",2001
	PRINTBUTTON "[+10]",2002
	PRINTBUTTON "[100]",2003
	PRINTBUTTON "[ -5]",2004
	PRINTBUTTON "[-10]",2005
	PRINTL 
	PRINTBUTTON "[결정]",2000
	INPUT
	IF RESULT == 2000
		RETURN
	ELSEIF RESULT >= 2001 && RESULT <= 2005
		IF RESULT == 2001
			BASE:ARG:(LOCAL:1) += 5
			MAXBASE:ARG:(LOCAL:1) += 5
		ELSEIF RESULT == 2002
			BASE:ARG:(LOCAL:1) += 10
			MAXBASE:ARG:(LOCAL:1) += 10
		ELSEIF RESULT == 2003
			BASE:ARG:(LOCAL:1) = 100
			MAXBASE:ARG:(LOCAL:1) = 100
		ELSEIF RESULT == 2004
			BASE:ARG:(LOCAL:1) -= 5
			MAXBASE:ARG:(LOCAL:1) -= 5
		ELSE
			BASE:ARG:(LOCAL:1) -= 5
			MAXBASE:ARG:(LOCAL:1) -= 10
		ENDIF
		CALL SYNC_STATUS,U
		GOTO AISYOU
	ELSE
		BASE:ARG:(LOCAL:1) = RESULT
		MAXBASE:ARG:(LOCAL:1) = RESULT
	ENDIF
ELSEIF RESULT == 219
	FOR LCOUNT, 0, FLAG:상성수
		BASE:ARG:(LCOUNT+40) = 101
		MAXBASE:ARG:(LCOUNT+40) = 101
	NEXT
ELSEIF RESULT == 220
	FOR LCOUNT, 0, FLAG:상성수
		BASE:ARG:(LCOUNT+40) = CSVBASE(NO:ARG,LCOUNT+40,0)
		MAXBASE:ARG:(LCOUNT+40) = BASE:ARG:(LCOUNT+40)
	NEXT
ELSEIF RESULT >= 250 && RESULT <= 273
	RESULT -= 250
	LOCALS = %GET_BATTLESTATUS(RESULT/4)%보정
	SELECTCASE RESULT % 4
		CASE 0
			CFLAG:ARG:LOCALS += 1
		CASE 1
			CFLAG:ARG:LOCALS -= 1
		CASE 2
			CFLAG:ARG:LOCALS += 10
		CASE 3
			CFLAG:ARG:LOCALS -= 10
	ENDSELECT
ELSEIF RESULT == 500
	ABL:U:공격범위 += 1
	SIF ABL:U:공격범위 == 3 
		ABL:U:공격범위 = 1
ENDIF
	CALL SYNC_STATUS,U
	CALL HEALTH_CHARA,U
	GOTO START
@CHOICE_TESTCHARA_SKILL(ARG,ARG:1)
#DIM LCOUNT
PRINTL [ 0]검격　　[ 1]비구　　[ 2]타격　　[ 3]전술　　[ 4]회복　　
PRINTL [ 5]지원　　[ 6]방어　　[ 7]화염　　[ 8]빙결　　[ 9]전격　　
PRINTL [10]충격　　[11]신경　　[12]정신　　[13]파마　　[14]주살　　
PRINTL [15]지변　　[16]수격　　[17]질풍　　[18]중력　　[19]핵열　　
PRINTL [20]만능　　[24]자동효과[97]습득　　[98]EMPTY　 [99]돌아간다
PRINTL 소지시킬 스킬 계통을 선택해주세요
$INPUT_LOOP1
INPUT
IF RESULT == 97
	FOR LCOUNT,1,20
		SIF ABL:ARG:(LCOUNT+100) == 0
			BREAK
		CALLFORM SKILL_NAME_{ABL:ARG:(LCOUNT+100)}
		PRINTFORMLC [{LCOUNT}] %RESULTS%(Lv{ABL:ARG:(LCOUNT+120)})
		SIF LCOUNT % 4 == 0
			PRINTL 
	NEXT
	PRINTL [99] 돌아간다
	PRINTL 소지시킬 스킬을 선택해주세요
	INPUT
	IF RESULT > 0 && RESULT < LCOUNT
		ABL:ARG:(ARG:1) = ABL:ARG:(RESULT+100)
	ELSEIF RESULT == 99
	ELSE
		$INPUT_LOOP2
	ENDIF
	RETURN 0
ELSEIF RESULT == 98
	ABL:ARG:(ARG:1) = 0
	RETURN 0
ENDIF
SIF RESULT == 99
	RETURN 0
SIF (RESULT < 0 || RESULT > 24 || RESULT ==21 || RESULT == 22 || RESULT == 23)
	GOTO INPUT_LOOP1

LOCAL = RESULT
LOCAL:1 = 0
LOCAL:2 = 0
FOR LCOUNT,RESULT*100+1,RESULT*100+100
	LOCAL:1 += 1
	TRYCCALLFORM SKILL_NAME_{LCOUNT}
		PRINTFORMLC [{LOCAL:1}] %RESULTS%
		SIF LOCAL:2 % 4 == 3
			PRINTL 
		LOCAL:2 += 1
	CATCH
	ENDCATCH
NEXT
$INPUT_LOOP3
PRINTL [99] 돌아간다
PRINTL 소지시킬 스킬을 선택해주세요
INPUT
LOCAL = LOCAL*100 + RESULT
SIF RESULT == 99
	RETURN 0
TRYCCALLFORM SKILL_NAME_{LOCAL}
	ABL:ARG:(ARG:1) = LOCAL
CATCH
	GOTO INPUT_LOOP3
ENDCATCH
@CHOICE_TESTCHARA(ARG)
#DIM LCOUNT
PRINTL [ 0]지모신　[ 1]여신　　[ 2]마왕　　[ 3]천사　　[ 4]요마　　
PRINTL [ 5]요정　　[ 6]요귀　　[ 7]용왕　　[ 8]마수　　[ 9]요조　　
PRINTL [10]외도　　[11]머신　　[12]정령　　[14]귀신　　[30]폭군　　
PRINTL [31]광인　　[32]괴이　　[36]천마　　[37]초수　　[38]전사　　
PRINTL [41]마인　　[42]초인　　[44]조마　　[45]인간　　[98]캐릭터로드
PRINTL [99]돌아간다
PRINTL 종족을 선택해주세요
$INPUT_LOOP1
INPUT
SIF RESULT == 99
	RETURN 0
IF RESULT == 98
	CALL INPUT_CHARA_LIST("配置する캐릭터를 선택하세요")
	IF RESULT == 1000
		RETURN 0
	ENDIF
	SIF ARG > 6
		CFLAG:RESULT:PT플래그 = 0
	CALL INSERT_POSITION,ARG,RESULT
	RETURN 0
ENDIF
SIF RESULT < 0 || RESULT > 100 || !EXISTCSV(RESULT*100+1, 0)
	GOTO INPUT_LOOP1

LOCAL = RESULT
LOCAL:1 = 0
LOCAL:2 = 0
FOR LCOUNT,RESULT*100+1,RESULT*100+101,1
	SIF LCOUNT == RESULT*100+100
		PRINTL [99]돌아간다
		LOCAL:1 += 1
	IF EXISTCSV(LCOUNT,0)
		PRINTFORMLC [{LOCAL:1}]%CSVCALLNAME(LCOUNT,0)%
		SIF LOCAL:2 % 3 == 2
			PRINTL 
		LOCAL:2 += 1
	ENDIF
NEXT
PRINTL 캐릭터를 선택해주세요
INPUT
$INPUT_LOOP2
SIF RESULT == 99
	RETURN 0
SIF !EXISTCSV(LOCAL*100+RESULT,0)
	GOTO INPUT_LOOP2
LOCAL = LOCAL*100+RESULT
CALL INCREASE_ANALYZE,LOCAL,1000
IF ARG > 6
	PRINTL 강화 랭크를 선택해주세요
	PRINTL [  0] [  1] [  2] [  3] [  4] [  5]
	PRINTL [100] [101] [102] [103] [104] [105]
	$INPUT_LOOP3
	INPUT
	SIF RESULT < 0 || RESULT > 200
		GOTO INPUT_LOOP3
	LOCAL:2 = RESULT
	CALL SET_ENEMY,ARG,LOCAL,LOCAL:2,1
ELSE
	CALL ADD_NEW_COMPANION,LOCAL,500
	CALL INSERT_POSITION,ARG,CHARANUM-1
ENDIF
CALL SYNC_STATUS,CHARANUM-1
@CHOICE_TESTCHARA_EQUIP(ARG,ARG:1)
#DIM LCOUNT
IF ARG:1 == 10
	LOCAL = 2000
ELSEIF ARG:1 == 11
	LOCAL = 2500
ELSEIF ARG:1 == 12
	LOCAL = 3000
ELSEIF ARG:1 == 13
	LOCAL = 3500
ELSEIF ARG:1 == 14
	LOCAL = 4000
ELSEIF ARG:1 == 15
	LOCAL = 4500
ELSEIF ARG:1 == 16
	LOCAL = 5000
ENDIF
LOCAL:1 = 0
LOCAL:2 = 0
CALLFORM 기본능력수정_2500
FOR LCOUNT,LOCAL,LOCAL+501
	IF LCOUNT == LOCAL+500
		PRINTL [999] 돌아간다
		CONTINUE
	ENDIF
	TRYCCALLFORM 기본능력수정_{LCOUNT}
		PRINTFORMLC [{LOCAL:1}] %ITEMNAME:LCOUNT%
		SIF LOCAL:2 % 3 == 2
			PRINTL 
		LOCAL:2 += 1
	CATCH
	ENDCATCH
	LOCAL:1 += 1
NEXT
PRINTL 장비를 선택해주세요
$INPUT_LOOP
INPUT
SIF RESULT == 999
	RETURN
LOCAL = LOCAL+RESULT
TRYCCALLFORM 장비부위_{LOCAL}
CATCH
	GOTO INPUT_LOOP
ENDCATCH
EQUIP:ARG:(ARG:1) = LOCAL

@SET_POS_TEST
;ここは適当に書き換えてというか、貼りつけて使うといいと思います
;あとまぁ、시체잔존フラグをたしたほうがよさげ
;例としてというか、実際にやった例として이슈킥と愉쾌な仲間たち
;
					CALL SET_ENEMY,9,4205,100,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 850
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,7,3108,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 400
					CSTR:(CHARANUM-1):사고패턴 = 3108
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,8,3108,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 400
					CSTR:(CHARANUM-1):사고패턴 = 3108
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,10,3109,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 350
					CSTR:(CHARANUM-1):사고패턴 = 3109
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,11,3109,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 350
					CSTR:(CHARANUM-1):사고패턴 = 3109
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,12,3110,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 250
					CSTR:(CHARANUM-1):사고패턴 = 3110
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,13,3110,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 250
					CSTR:(CHARANUM-1):사고패턴 = 3110
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,15,3111,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 250
					CSTR:(CHARANUM-1):사고패턴 = 3111
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
					CALL SET_ENEMY,16,3111,1 + 던전플래그:13:4,1
					CFLAG:(CHARANUM-1):ＨＰ보정 = 250
					CSTR:(CHARANUM-1):사고패턴 = 3111
					MAXBASE:(CHARANUM-1):파마 = 20
					MAXBASE:(CHARANUM-1):주살 = 20
					MAXBASE:(CHARANUM-1):정신 = 150
					MAXBASE:(CHARANUM-1):신경 = 150
					CALL SYNC_STATUS,(CHARANUM-1)
					CALL HEALTH_CHARA,(CHARANUM-1)
