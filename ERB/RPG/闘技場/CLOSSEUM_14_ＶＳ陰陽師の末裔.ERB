

;====================
;조건
;====================
@PLAYABLE_COLOSSEUM_14
;IF FLAG:DEBUG || (투기장フラグ:14:0 == 0 && 투기장フラグ:6:0 == 1)
IF FLAG:투기장랭크 >= 4 && FLAG:투기장명성 >= 1200 && 투기장フラグ:14:0 == 0
	RESULTS = 시합 랭크 Ａ　ＶＳ 음양사의 후예
	RETURN 1
ENDIF
RETURN 0


;====================
;内容
;====================
@COLOSSEUM_14
FLAG:도주불가플래그 = 1
FLAG:회화불능플래그 = 1
FLAG:선제기습취소 = 1
CUSTOMDRAWLINE =
PRINTL 
PRINTW ＞예스러운 외투를 두른,
PRINTW ＞안경을 쓴 선이 가는 청년이 투기장에 서 있었다.
PRINTW 「네가 소문 자자한 팬텀 소사이어티의 데빌 서머너로군」
PRINTW 「나도 너랑 마찬가지지. 어떤 조직의 말단이야」
PRINTW 「이해하겠지? 우리들 같은 말단은 지면 다음 기회라곤 없어!」
PRINTW 「난 절대로 질 수 없다고!!」
PRINTW ＞청년은 비장한 표정으로 약을 먹었다.
PRINTL
PRINTL 용신 청룡이 1명 나타났다!
PRINTL 성수 백호가 1명 나타났다!
PRINTL 영조 주작이 1명 나타났다!
PRINTL 신수 현무가 1명 나타났다!
PRINTL 악마소환사 아베 세이메이가 1명 나타났다!
CUSTOMDRAWLINE =
WAIT

;성수백호
CALL SET_ENEMY,8,873,45,1,1
CFLAG:(CHARANUM-1):ＭＰ보정 += 1000
CFLAG:(CHARANUM-1):속도보정 += 10
ABL:(CHARANUM-1):스킬3 = 1703
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):입수확률1 = 100
CALL SYNC_STATUS,(CHARANUM-1)
CALL HEALTH_CHARA,(CHARANUM-1)

;신수　현무
CALL SET_ENEMY,9,872,46,1,1
CFLAG:(CHARANUM-1):ＨＰ보정 += 500
CFLAG:(CHARANUM-1):ＭＰ보정 += 1000
ABL:(CHARANUM-1):스킬3 = 1503
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):입수확률1 = 100
CALL SYNC_STATUS,(CHARANUM-1)
CALL HEALTH_CHARA,(CHARANUM-1)

;용신　청룡
CALL SET_ENEMY,10,757,45,1,1
CFLAG:(CHARANUM-1):ＭＰ보정 += 1000
CFLAG:(CHARANUM-1):행동횟수 = 2
ABL:(CHARANUM-1):스킬5 = 0
ABL:(CHARANUM-1):스킬6 = 0
ABL:(CHARANUM-1):입수확률1 = 100
CALL SYNC_STATUS,(CHARANUM-1)
CALL HEALTH_CHARA,(CHARANUM-1)


;영조　주작
CALL SET_ENEMY,13,957,47,1,1
CFLAG:(CHARANUM-1):ＭＰ보정 += 9000
ABL:(CHARANUM-1):스킬6 = 403
ABL:(CHARANUM-1):입수확률1 = 100
CALL SYNC_STATUS,(CHARANUM-1)
CALL HEALTH_CHARA,(CHARANUM-1)

;정키　아베 세이메이
CALL SET_ENEMY,14,4543,47,1,1
CFLAG:(CHARANUM-1):ＨＰ보정 += 1000
CFLAG:(CHARANUM-1):ＭＰ보정 += 9000
CFLAG:(CHARANUM-1):속도보정 += 10
EQUIP:(CHARANUM-1):머리 = [[아이템:주작의투구]]
EQUIP:(CHARANUM-1):몸통 = [[아이템:현무의갑옷]]
EQUIP:(CHARANUM-1):팔 = [[아이템:청룡의토시]]
EQUIP:(CHARANUM-1):발 = [[아이템:백호의구족]]
ABL:(CHARANUM-1):스킬1 = 716
ABL:(CHARANUM-1):스킬2 = 916
ABL:(CHARANUM-1):스킬3 = 1711
ABL:(CHARANUM-1):스킬4 = 1513
ABL:(CHARANUM-1):스킬5 = 608
ABL:(CHARANUM-1):스킬6 = 609
ABL:(CHARANUM-1):스킬7 = 415
ABL:(CHARANUM-1):스킬8 = 2406
CALL SYNC_STATUS, (CHARANUM-1)
CALL HEALTH_CHARA, (CHARANUM-1)

CALL BATTLE_START
CUSTOMDRAWLINE =
PRINTW 「우와아아악」
PRINTW 「이걸로… 난 끝장이다……」
PRINTW ＞청년은 무릎부터 허물어졌다
PRINTL 
PRINTW 상품으로 기절한 청년을 받았다
PRINTW 아베 세이메이가 노예가 되었다.
CALL ADD_NEW_COMPANION,4543,500

CALL LIFTING_A_BAN([[キャラ:청룡]])
CALL LIFTING_A_BAN([[キャラ:현무]])
CALL LIFTING_A_BAN([[キャラ:백호]])
CALL LIFTING_A_BAN([[キャラ:주작]])
;FLAG:10757 = 1
;FLAG:10872 = 1
;FLAG:10873 = 1
;FLAG:10957 = 1

CUSTOMDRAWLINE =
WAIT
FLAG:도주불가플래그 = 0
FLAG:회화불능플래그 = 0
FLAG:선제기습취소 = 0
PRINTW ￥10000을 상금으로 받았다
MONEY += 10000
투기장フラグ:14:0 = 1
IF FLAG:투기장랭크 < 5
	FLAG:투기장랭크 = 5
ENDIF

FOR LOCAL,0,CHARANUM
	CALL HEALTH_CHARA,LOCAL
NEXT


@SET_ACTION_757,ARG
;後衛に居るなら前衛に出る
IF CPOS(ARG) > 11
	CFLAG:ARG:입력행동 = 2301
	CFLAG:ARG:입력행동 = CPOS(ARG)-5
ENDIF

@SET_ACTION_872,ARG
;後衛に居るなら前衛に出る
IF CPOS(ARG) > 11
	CFLAG:ARG:입력행동 = 2301
	CFLAG:ARG:입력행동 = CPOS(ARG)-5
ENDIF

@SET_ACTION_873,ARG
;後衛に居るなら前衛に出る
IF CPOS(ARG) > 11
	CFLAG:ARG:입력행동 = 2301
	CFLAG:ARG:입력행동 = CPOS(ARG)-5
ENDIF


@SET_ACTION_4543,ARG
;前衛に居るならスウェイバック
IF CPOS(ARG) == 9 && CFLAG:POS(14):ステート < GET_STATE_NUM("DYING") 
	CFLAG:ARG:입력행동 = 2301
	CFLAG:ARG:타겟 = 14
	RETURN 1
ENDIF


;주작の사고패턴
@SET_ACTION_957,ARG
;포지션8.9.10.が死んでたら리캄
;それ以外に死んでるキャラが居たら리캄
IF CFLAG:POS(8):ステート == GET_STATE_NUM("DYING")
	CALL CHECK_ACTIONABLE,ARG,418
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = 418
	CFLAG:ARG:타겟 = POS(8)
	RETURN 1
ELSEIF CFLAG:POS(9):ステート == GET_STATE_NUM("DYING")
	CALL CHECK_ACTIONABLE,ARG,418
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = 418
	CFLAG:ARG:타겟 = POS(9)
	RETURN 1
ELSEIF CFLAG:POS(10):ステート == GET_STATE_NUM("DYING")
	CALL CHECK_ACTIONABLE,ARG,418
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = 418
	CFLAG:ARG:타겟 = POS(10)
	RETURN 1
;前衛に居るならスウェイバック
ELSEIF CPOS(ARG) == 8
	CFLAG:ARG:입력행동 = 2301
	CFLAG:ARG:타겟 = 14
	RETURN 1
ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
	PRINTFORML [{CFLAG:ARG:5}]의 스킬수 {RESULT}
	LOCAL = RAND:RESULT
	;스킬번호決定
	LOCAL:1 = S:(10+LOCAL)
	PRINTFORML [{CFLAG:ARG:5}]의 스킬 {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬번호を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1
ENDIF


