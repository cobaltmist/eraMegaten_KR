;====================
;조건
;====================
@PLAYABLE_COLOSSEUM_54
FOR LOCAL,0,10
	IF 점포("종류",LOCAL) == 11 && 투기장플래그:54:0 == 0
		RESULTS = 시합 랭크 Ｘ　ＶＳ 극장주인
		RETURN 1
	ENDIF
NEXT
RETURN 0


;====================
;内容
;====================
@COLOSSEUM_54
FLAG:도주불가플래그 = 1
FLAG:회화불능플래그 = 1
FLAG:선제기습취소 = 1
CUSTOMDRAWLINE =
PRINTL 
PRINTFORMW %조사처리(CALLNAME:MASTER,"가")% 영업 시간이 아닐 때 극장에 얼굴을 내밀자, 손님이 있었다
PRINTW 손님은 마치 관처럼 생긴 존재였다
PRINTL 악마：
PRINTW 「네 이놈, 이런 곳을 극장이라고 하는 것이냐!」
PRINTW 「극장이란, 이와 같은 것을 말하는 것이다!」
PRINTL
PRINTL 사신 모트가 １체 나타났다!
CUSTOMDRAWLINE =
WAIT




CALL SET_ENEMY,9,1608,83,1,1
	CFLAG:(CHARANUM-1):ＨＰ보정 += 3000
	CFLAG:(CHARANUM-1):ＭＰ보정 += 9000
	BASE:(CHARANUM-1):검격 = 10
	BASE:(CHARANUM-1):비구 = 10
	BASE:(CHARANUM-1):타격 = 10
	BASE:(CHARANUM-1):전술 = 10
	BASE:(CHARANUM-1):화염 = 0
	BASE:(CHARANUM-1):빙결 = 0
	BASE:(CHARANUM-1):전격 = 200
	BASE:(CHARANUM-1):충격 = -100
	BASE:(CHARANUM-1):신경 = 0
	BASE:(CHARANUM-1):파마 = 0
	BASE:(CHARANUM-1):주살 = 0
	BASE:(CHARANUM-1):지변 = 0
	BASE:(CHARANUM-1):수격 = 0
	BASE:(CHARANUM-1):질풍 = -100
	CFLAG:(CHARANUM-1):행동횟수 = 3
	CSTR:(CHARANUM-1):사고패턴 = 240
	ABL:(CHARANUM-1):스킬1 = 1006
	ABL:(CHARANUM-1):스킬2 = 2003
	ABL:(CHARANUM-1):스킬3 = 503
	ABL:(CHARANUM-1):스킬4 = 505
	ABL:(CHARANUM-1):스킬5 = 402
	ABL:(CHARANUM-1):스킬6 = 523
	ABL:(CHARANUM-1):스킬7 = 546
	CALL SYNC_STATUS,(CHARANUM-1)
	CALL HEALTH_CHARA,(CHARANUM-1)
CALL BATTLE_START


CUSTOMDRAWLINE =

PRINTL 모트：
PRINTW 「후, 훌륭하다…」
PRINTW 모트를 쓰러뜨렸다.



CUSTOMDRAWLINE =
WAIT
FLAG:도주불가플래그 = 0
FLAG:회화불능플래그 = 0
FLAG:선제기습취소 = 0
PRINTW ￥10000을 상금으로 받았다
CALL LIFTING_A_BAN([[キャラ:모트]])
;FLAG:11608 = 1
MONEY += 10000
투기장플래그:54:0 = 1

FOR LOCAL,0,CHARANUM
	CALL HEALTH_CHARA,LOCAL
NEXT



;モトの사고패턴
@SET_ACTION_240,ARG


;ＨＰ５％以下
IF 현HP비율(ARG) < 5
	IF CFLAG:ARG:행동한횟수 == 0
		IF CFLAG:ARG:마법위력강화 < 32
			CFLAG:(CHARANUM-1):속도보정 = 24
			CALL CHECK_ACTIONABLE,ARG,503
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 503
			CALL RANDOM_TARGET,ARG,503
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,2003
			SIF RESULT == 0
			GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 2003
			CALL RANDOM_TARGET,ARG,2003
			RETURN 1
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 1
		IF CFLAG:ARG:마법위력강화 < 32
			CFLAG:(CHARANUM-1):속도보정 = 24
			CALL CHECK_ACTIONABLE,ARG,503
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 503
			CALL RANDOM_TARGET,ARG,503
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,1006
			SIF RESULT == 0
			GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 1006
			CALL RANDOM_TARGET,ARG,1006
			RETURN 1
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 2
		CALL CHECK_ACTIONABLE,ARG,546
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:입력행동 = 546
		RETURN 1
	ENDIF
	
;ＨＰ5％以上50％以下
ELSEIF 현HP비율(ARG) >= 5 && 현HP비율(ARG) < 50
	IF CFLAG:ARG:행동한횟수 == 0
		IF 현HP비율(ARG) < 25
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 1
		IF 현HP비율(ARG) < 20
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 2
		IF 현HP비율(ARG) < 15
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ENDIF

ELSEIF 현HP비율(ARG) >= 50
	IF CFLAG:ARG:행동한횟수 == 0
		IF 현HP비율(ARG) < 65
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		
		ELSE
			SELECTCASE RAND:100
				CASE IS < 5
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 40
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 1
		IF 현HP비율(ARG) < 60
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 3
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 10
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:행동한횟수 == 2
		IF 현HP비율(ARG) < 55
			CFLAG:(CHARANUM-1):속도보정 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:방어강화 > -7 || CFLAG:MASTER:명중강화 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:공격강화 < -11 || CFLAG:ARG:방어강화 < -11 || CFLAG:ARG:명중강화 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:입력행동 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 1
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 8
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:입력행동 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ENDIF

ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:입력행동 = -1
		CFLAG:ARG:방어플래그 = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]の스킬数 {RESULT}
	LOCAL = RAND:RESULT
	;스킬番号決定
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]の스킬 {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここで스킬番号を行動内容に代入
	SIF CFLAG:ARG:타겟 == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:입력행동 = LOCAL:1
ENDIF


