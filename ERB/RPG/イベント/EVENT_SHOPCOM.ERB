;コロシアム
;とりあえず今の所전투のテスト用
;クリアフラグに던전플래그:100:Xを사용


@SHOPCOMABLE_103
#DIM LCOUNT
;パーティに一人이상いるなら
LOCAL = 0
FOR LCOUNT, 0, CHARANUM
	SIF CFLAG:LCOUNT:PT플래그 == 2
		LOCAL:1 += 1
NEXT

FOR LOCAL, 0, 999
	TRYCCALLFORM PLAYABLE_EVENT_{LOCAL}
		IF RESULT
			LOCAL:2 += 1
		ENDIF
	CATCH
	ENDCATCH
NEXT

RESULT:1 = 2
RESULTS = 이벤트
IF LOCAL:1 > 0 && LOCAL:2 > 0
	RETURN 1
ELSE
	RETURN 0
ENDIF


@SHOW_EVENT
CUSTOMDRAWLINE =

FOR LOCAL, 0, 999
	TFLAG:LOCAL = 0
	RESULTS = 
	TRYCCALLFORM PLAYABLE_EVENT_{LOCAL}
		IF RESULT
			TFLAG:LOCAL = 1
			IF RESULTS != ""
				PRINTFORML [{LOCAL}] - %RESULTS%
			ENDIF
		ENDIF
	CATCH
		
	ENDCATCH
NEXT

@SHOP_COM_103
CALL SHOW_EVENT
PRINTL [1000] 돌아간다

DRAWLINE
PRINTL 어느 이벤트를 실행합니까？

$INPUT_LOOP
INPUT
IF RESULT == 1000
	FLAG:SHOP커맨드 = 0
	RETURN 0
ELSEIF RESULT < 0 || RESULT >= VARSIZE("TFLAG")
	GOTO INPUT_LOOP
ELSEIF TFLAG:RESULT || FLAG:DEBUG
	FLAG:진행중이벤트 = RESULT
	TRYCALLFORM SHOPCOM_EVENT_{RESULT}
	FOR LOCAL,0,CHARANUM
		SIF CFLAG:LOCAL:악마변신 == 1
			CALL ACTION_2310 , LOCAL , 0
	NEXT
	FLAG:진행중이벤트 = 0
	FLAG:SHOP커맨드 = 0
	IF RESULT == 1
		VARSET TFLAG,-1
		BEGIN TURNEND
	ENDIF
ELSE
	GOTO INPUT_LOOP
ENDIF

VARSET TFLAG,-1
RETURN 0


