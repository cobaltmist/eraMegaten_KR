

;================================================================================================================
;이벤트플래그:41:0 이벤트進行
;0_開始前

;●나기を仲魔にした場合（나기ルート）
;1_다크서머너退治
;2_闘技場で쇼우命を倒していない場合、供倶璃家への襲撃に介入、
;3_야타가라스との一時共闘
;4_刑務所襲撃
;5_串뱀がコドクノマレビトに攫われる
;6_倉橋商事ビルで八神将と倉橋黄幡を撃破、쇼우命が라이도우に切られるも、クラリオン각성
;	文메、마요네がそれぞれ供倶璃家の媛を保護
;7_クラリオンとの決戦
;8_エピローグ

;●나기を拒否した場合（コドクノマレビト참가ルート）
;1_다크서머너護衛_（나기の凌辱포인트１）
;2_闘技場で쇼우命を倒していない場合、供倶璃家への襲撃に介入(나기の凌辱포인트２)、
;3_コドクノマレビトに참가
;4_刑務所襲撃(나기の凌辱포인트３)
;6_倉橋商事ビルで八神将と倉橋黄幡を撃破、コドクノマレビトを乗っ取る（나기の凌辱포인트４）
;8_エピローグ

;●악마인間殺すべし（忍殺ストーリー시리즈）
;20～

;================================================================================================================
;이벤트플래그:41:1 나기を仲魔にしたかどうか
;0:開始前、1:仲魔に、2:拒否、3:노예に、4:악마인間コロスベシ

;이벤트플래그:41:2 供倶璃家攻略
;0:開始前 1:開始、2:串뱀媛を確保、3:供倶璃家종료、4:コドクノマレビト側で襲撃に참가、5コドクノマレビト側で襲撃종료

;이벤트플래그:41:3 供倶璃家で大月を助ける
;1:助けた、2:置き去りにした

;이벤트플래그:41:4 供倶璃家で串뱀媛を야타가라스に
;0:솔직함に渡した、1:対価と引き換えに渡した、２：引渡しを拒んだ

;이벤트플래그:41:5 刑務所攻略
;0:攻略中、1:常世を回収

;이벤트플래그:41:6:
;0、攻略中、1:裂夜を助けた

;이벤트플래그:41:7 
;0、攻略中、1:断華を助けた

;이벤트플래그:41:8
;나기を辱めた횟수







;=======================================================================================================================================================
;조건
;===========================================================================================================================================================================
@PLAYABLE_EVENT_41

CALLF FINDCHARA_B([[キャラ:나기]])
LOCAL = RESULT:1

;名声1000이상、Lv35이상で開始
IF 이벤트플래그:41:0 == 0 && (FLAG:명성 >= 1000 && BASE:MASTER:LV >= 35)
	RESULTS = 셀프 수행의 프로세스를 희망합니다
	RETURN 1

;나기を仲魔にしたルート=========================================================================================================================================================================
ELSEIF 이벤트플래그:41:1 == 1
	;나기ちゃん出撃불가なら이벤트出てこない
	IF (GETCHARA(4768) > 0 && CFLAG:GETCHARA(4768):전투참가불가능 < 1) == 0
		RETURN 0
	;나기のLv24이상で다크서머너退治
	ELSEIF 이벤트플래그:41:0 == 1
		IF BASE:LOCAL:LV > 24
			RESULTS = 다크서머너를 퇴치하는 프로세스입니다
		ELSE
			RESULTS = 셀프 수행중인 프로세스입니다
		ENDIF
		RETURN 1
	;=======================================================================================================
	;本来のルート
	;ELSEIF BASE:LOCAL:LV > 44 && 이벤트플래그:41:2 == 0
	;	RESULTS = 야타가라스試験のセオリーです
	;	RETURN 1
	;ELSEIF FINDCHARA_B(4762,0) == 2 && BASE:GETCHARA(4768):LV > 74
	;	RESULTS = ゲイリン襲名試験のセオリーです
	;	RETURN 1
	;======================================================================================================
	;以下、別人추가ルート
	;コドクノマレビトandメシア教と戦うことに
	ELSEIF 이벤트플래그:41:0 == 2
		;闘技場で쇼우命と전투済みなら이벤트出てこない
		IF 투기장플래그:14:0 == 1
			RETURN 0	
		ELSE
			RESULTS = 供倶璃（くくり）の媛を 지키는 프로세스입니다
			RETURN 1
		ENDIF
	;刑務所に襲撃してきたコドクノマレビトを撃破
	ELSEIF 이벤트플래그:41:0 == 3
		RESULTS = 비밀 결사 고독의 마레비토의 습격을 방지하는 프로세스입니다
		RETURN 1
	;串뱀がコドクノマレビトに攫われる
	ELSEIF 이벤트플래그:41:0 == 5
		RESULTS = 串蛇媛 구출의 프로세스입니다
		RETURN 1
	;クラリオンとの決戦
	ELSEIF 이벤트플래그:41:0 == 7
		RESULTS = 결전 클라리온의 프로세스입니다
		RETURN 1
	;エピローグ
	ELSEIF 이벤트플래그:41:0 == 8
		RESULTS = 셀프 수행의 종료 프로세스입니다
		RETURN 1
	;エクストラ이벤트
	ELSEIF 이벤트플래그:41:0 == 9
		;Extra이벤트の허가を판정
		IF GETBIT(FLAG:EXTRA이벤트설정, 0) == 0 || GETBIT(FLAG:EXTRA이벤트필터, 8) == 1
			RETURN 0
		ELSE
			RESULTS = 매우 합리적인 프로세스입니다
			RETURN 1
		ENDIF
	ENDIF

;나기を拒否したルート===================================================================================================================================================================
ELSEIF 이벤트플래그:41:1 == 2
	;다크서머너退治を妨害
	IF 이벤트플래그:41:0 == 1
		RESULTS = 다크서머너의 호위
		RETURN 1
	;供倶璃（くくり）家を襲撃
	ELSEIF 이벤트플래그:41:0 == 2
		;闘技場で쇼우命と전투済みなら이벤트出てこない
		IF 투기장플래그:14:0 == 1
			RETURN 0	
		ELSE
			RESULTS = 供倶璃（くくり）家 습격
			RETURN 1
		ENDIF
	ELSEIF 이벤트플래그:41:0 == 3
		;刑務所を襲撃
		RESULTS = 형무소 습격
		RETURN 1
	ELSEIF 이벤트플래그:41:0 == 5
		;刑務所を襲撃
		RESULTS = 팬텀의 기습
		RETURN 1
	ELSEIF 이벤트플래그:41:0 == 7
		;刑務所を襲撃
		RESULTS = 결투장
		RETURN 1
	ENDIF

;Extraイベントルート================================================================================================================================================
ELSEIF 이벤트플래그:41:1 == 4
	IF 이벤트플래그:41:0 == 20
		;エクストラ이벤트2
		RESULTS = 豆腐への怒りの 프로세스입니다
		RETURN 1
	ELSEIF 이벤트플래그:41:0 == 21
		;エクストラ이벤트3
		RESULTS = 死の蝶のプロセスです。
		RETURN 1
	ELSEIF 이벤트플래그:41:0 == 22
		;エクストラ이벤트4
		RESULTS = 墓場の上で踊る幽霊のプロセスです。
		RETURN 1
	ELSEIF 이벤트플래그:41:0 == 23
		;エクストラ이벤트4
		RESULTS = 汚水からの人魚のプロセスです。
		RETURN 1
	ENDIF
ENDIF
RETURN 0












;================================================================================================================================================================
;内容
;================================================================================================================================================================
@SHOPCOM_EVENT_41

IF 이벤트플래그:41:0 == 0
	CALL EVENT_41_0
ELSEIF 이벤트플래그:41:0 == 1
	CALL EVENT_41_1
ELSEIF 이벤트플래그:41:0 == 2
	CALL EVENT_41_2
ELSEIF 이벤트플래그:41:0 == 3
	CALL EVENT_41_3
ELSEIF 이벤트플래그:41:0 == 5
	CALL EVENT_41_5
ELSEIF 이벤트플래그:41:0 == 7
	CALL EVENT_41_7
ELSEIF 이벤트플래그:41:0 == 8
	CALL EVENT_41_8
ELSEIF 이벤트플래그:41:0 == 9
	CALL EVENT_41_9
ELSEIF 이벤트플래그:41:0 == 20
	CALL EVENT_41_20
ELSEIF 이벤트플래그:41:0 == 21
	CALL EVENT_41_21
ELSEIF 이벤트플래그:41:0 == 22
	CALL EVENT_41_22
ELSEIF 이벤트플래그:41:0 == 23
	CALL EVENT_41_23
ENDIF

@EVENT_41_FLAG_RESET

CALL FLAG_RESET,41,2
