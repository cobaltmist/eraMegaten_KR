;=============================================================================
;일기장.exe_rev0205_オート필터―기능
;=============================================================================
;
; 注意点	필터링の판정にPREREQUISITE_DUNGEON_??関数を使ってるから、
;			デバッグモードだとうまく動かないよ。
;
; DIARY_DUNGEON_FILTER_FILTER_MAIN関数		탐색가능な모든던전について、
;									일기장exeでクリア済みと판정されるものの필터ーを全てオンにする。
; 
; DIARY_DUNGEON_FILTER_FILTER_ALLON関数	탐색가능な모든던전について필터ーを全てオンにする。
; DIARY_DUNGEON_FILTER_FILTER_ALLOFF関数	탐색가능な모든던전について필터ーを全てオフにする。
; 
;--------------------------------------------------
;メイン
;--------------------------------------------------
;FLAG:217は던전필터1,1-63
;FLAG:218は던전필터2,1-63

@DIARY_DUNGEON_FILTER_MAIN
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
	;던전출현関数のTRYCALL
		IF RESULT == 1
		;던전출현関数の결과が返ってきたらそれが1かどうか見る
			TRYCCALLFORM DIARY_DUNGEON_FILTER_{LOCAL}
			;DIARY_DUNGEON_FILTER_関数のTRYCALL
				IF RESULT == 1
				;DIARY_DUNGEON_FILTER_関数の결과が返ってきたらそれが1かどうか見る
				;1なら필터ーをオンにする処理をかける
					IF LOCAL <= 63
						SETBIT FLAG:217,(LOCAL)
					ELSE
						SETBIT FLAG:218,(LOCAL - 64)
					ENDIF
				ENDIF
			CATCH
			;DIARY_DUNGEON_FILTER_関数のTRYCALL通らなかった場合は아무것도안한다
			ENDCATCH
			LOCAL:99++
		ENDIF
	CATCH
	;던전출현関数のTRYCALLが通らなかった場合は아무것도안한다
	ENDCATCH
NEXT

;
@DIARY_DUNGEON_FILTER_ALLON
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
		IF RESULT == 1
			LOCAL:1 = 0
			IF LOCAL <= 63
				SETBIT FLAG:217,(LOCAL)
			ELSE
				SETBIT FLAG:218,(LOCAL - 64)
			ENDIF
			LOCAL:99++
		ENDIF
	CATCH
	ENDCATCH
NEXT

@DIARY_DUNGEON_FILTER_ALLOFF
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
		IF RESULT == 1
			LOCAL:1 = 0
			IF LOCAL <= 63
				CLEARBIT FLAG:217,(LOCAL)
			ELSE
				CLEARBIT FLAG:218,(LOCAL - 64)
			ENDIF
			LOCAL:99++
		ENDIF
	CATCH
	ENDCATCH
NEXT


;--------------------------------------------------
;던전ごとのDIARY関数の記述
;--------------------------------------------------

;--------------------------------------------------
;0,샘플던전,DEBUG
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_0
;出現フラグの체크　デバッグモードでしか出ません
IF FLAG:DEBUG == 1
	;クリアフラグの체크
	IF FLAG:DEBUG == 1
		RETURN 1
		;PRINTLC [ 0] 샘플던전
		;RESETCOLOR
	ENDIF
	;샘플던전について出現してない場合は[?]を표시しない
ENDIF

;--------------------------------------------------
;1,에코빌딩,,,無조건,,,,던전フラグ:1:1 = 1,,,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_1
;出現フラグの체크　에코빌딩は無조건
;IF FLAG:DEBUG == 1
	;クリアフラグの체크
	IF 던전フラグ:1:1 == 1
		;クリア済み
		RETURN 1
		;PRINTLC [ 1] 에코빌딩
		;RESETCOLOR
	ELSE
		;出現しているが未クリア
		;PRINTLC [ 1] 에코빌딩
	ENDIF
;ENDIF

;--------------------------------------------------
;2,카루코자카고교,,,의뢰フラグ:2:0 == 1,의뢰フラグ:3:0 == 1,던전フラグ:7:1,,던전フラグ:2:11 = 1,,,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_2
;出現フラグの체크　出現フラグを満たしているorクリアフラグを立てている
IF 의뢰フラグ:2:0 == 1 && 의뢰フラグ:3:0 == 1 || 던전フラグ:2:12 == 1
	;出現している
	;クリアフラグの체크
	;던전7をクリアしていない　を満たしてもクリア扱いに
	IF 던전フラグ:2:12 >= 1 || 던전フラグ:7:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 2] 카루코자카고교
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 2] 카루코자카고교
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 2] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;3,신주쿠위생병원
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_3
;出現フラグの체크　에코빌딩クリアが조건
IF 던전フラグ:1:1 != 0
	;出現している
	;クリアフラグの체크
	;私家版だと유키죠로함락ルート(3:1 == 2)が추가
	IF 던전フラグ:3:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 3] 신주쿠위생병원
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 3] 신주쿠위생병원
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 3] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;4,정신세계,フラグがそれぞれ２通り
;정신세계
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_4
;出現フラグの체크　백합의꽃루트か나오야루트のどっちかが5이상
IF FLAG:백합의꽃루트 >= 5 || FLAG:나오야루트 >= 5
	;出現している
	;クリアフラグの체크　ルートのどっちかが6이상
	IF  FLAG:백합의꽃루트 >= 6 || FLAG:나오야루트 >= 6
	;クリア済み
		RETURN 1
		;PRINTLC [ 4] 정신세계
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 4] 정신세계
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 4] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;5,대마궁,備考,出現フラグ,クリアフラグ
;샘플スクリプト
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_5
;出現フラグの체크　대마궁への誘いクリア
IF 이벤트フラグ:3:0 == 1
	;出現している
	;대마궁は現在クリア不能なためコメントアウト　체크するフラグも間違っている
	;クリアフラグの체크
	;IF 던전フラグ:3:1 == 1
	;クリア済み
	;	RETURN 1
		;PRINTLC [ s] 던전의 이름
		;RESETCOLOR
	;ELSE
	;出現しているが未クリア
		;PRINTLC [ s] 던전의 이름
	;ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 5] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;6,콜로세움던전,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_6
;出現フラグの체크
;私家版対応済み
IF 투기장フラグ:19:0 != 0
	;出現している
	;クリアフラグの체크　던전・성냥に勝利済み
	IF 던전フラグ:6:0 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [ 6] 콜로세움던전
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 6] 콜로세움던전
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 6] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;7,카루코자카상층,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_7
;出現フラグの체크　クリアすると消える타입の던전
IF 이벤트フラグ:2:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:7:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 7] 카루코자카상층
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 7] 카루코자카상층
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 7] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;8,경시청
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_8
;出現フラグの체크　레벨30이상でした
IF BASE:MASTER:LV > 30
	;出現している
	;クリアフラグの체크　クリア또는레벨上限突破
	IF 던전フラグ:8:12 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 8] 경시청
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 8] 경시청
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 8] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;9,미카게쵸지하철역,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_9
;出現フラグの체크　에코빌딩クリア
IF 던전フラグ:1:1 == 1 || CFLAG:MASTER:72 == 21
	;出現している
	;クリアフラグの체크
	;P1ルートクリア,プラズマウォール消失.この던전クリア、のいずれかでクリアと見なす
	IF 던전フラグ:11:7 == 1 || 이벤트フラグ:24:0 != 0 || 던전フラグ:9:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 9] 미카게쵸지하철역
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 9] 미카게쵸지하철역
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 9] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;10,SEBEC빌딩,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_10
;出現フラグの체크　クリアすると消える타입
IF 던전フラグ:9:1 == 1
	;出現している
	;クリアフラグの체크　クリアフラグが消滅フラグを兼ねている
	IF 던전フラグ:10:9 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [10] SEBEC빌딩
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [10] SEBEC빌딩
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [10] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;11,데바・유가,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_11
;出現フラグの체크　クリアしたら消える타입
IF 던전フラグ:10:9 == 1
	;出現している
	;クリアフラグの체크　分岐型なので0以外
	IF 던전フラグ:11:7 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [11] 데바・유가
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [11] 데바・유가
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [11] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;12,미혹의숲,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_12
;出現フラグの체크　クリアすると消える타입
IF (던전フラグ:11:7 == 2 && GETCHARA([[キャラ:마키]], 0) != -1) || 던전フラグ:12:0 == 10
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:12:0 == 10
	;クリア済み
		RETURN 1
		;PRINTLC [12] 미혹의숲
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [12] 미혹의숲
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [12] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;16,시부야센터거리,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_16
;出現フラグの체크　クリアすると消える타입
IF 투기장フラグ:13:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:16:14 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [16] 시부야센터거리
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [16] 시부야센터거리
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [16] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;17,이케부쿠로,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_17
;出現フラグの체크　渋谷クリアが조건
IF 던전フラグ:16:14 != 0
	;出現している
	;クリアフラグの체크　水아키라のピ라입수をとりあえずクリアに
	IF 던전フラグ:17:13 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [17] 이케부쿠로
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [17] 이케부쿠로
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [17] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;18,上野,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_18
;出現フラグの체크　クリアすると消える타입
IF 던전フラグ:17:13 == 1
	;出現している
	;クリアフラグの체크　木쇼우のピ라입수をとりあえずクリアに
	IF 던전フラグ:18:22 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [18] 上野
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [18] 上野
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [18] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;19,아라야의동굴,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_19
;出現フラグの체크　クリアすると消える타입
;キャラ存在판정があるので、クリア済み조건を出現조건としてもＯＲで使う
IF (던전フラグ:12:1 == 1 && GETCHARA([[キャラ:마키]]) >= 0) || 던전フラグ:19:1 != 0
	;出現している
	;クリアフラグの체크　結末に関係なく、何らかのクリアフラグがあればクリア
	IF 던전フラグ:19:1 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [19] 아라야의동굴
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [19] 아라야의동굴
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [19] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;20,긴자대지하도,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_20
;出現フラグの체크　유즈撃破
IF 투기장フラグ:5:0 == 1
	;出現している
	;クリアフラグの체크　ギンザのクリアフラグも判別が難しい
	;IF 던전フラグ:3:1 == 1
	;クリア済み
	;	RETURN 1
	;	;PRINTLC [20] 긴자대지하도
	;	;RESETCOLOR
	;ELSE
	;出現しているが未クリア
		;PRINTLC [20] 긴자대지하도
	;ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [20] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;24,도서관,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_24
;出現フラグの체크　에코빌딩クリアor하츠다이쉘터クリアor하라주쿠クリア クリアすると消える타입
IF 던전フラグ:1:1 == 1 || 던전フラグ:34:8 == 1 || 던전フラグ:61:0 == 5
	;出現している
	;クリアフラグの체크　후구루마撃破
	IF 던전フラグ:24:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [24] 도서관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [24] 도서관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [24] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;25,구황궁,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_25
;出現フラグの체크　闘技場1クリア
IF 투기장フラグ:1:0 != 0
	;出現している
	;クリアフラグの체크　이자나미撃破
	IF 던전フラグ:25:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [25] 구황궁
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [25] 구황궁
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [25] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;26,도청,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_26
;出現フラグの체크　衛쇼우病院クリア
IF 던전フラグ:3:1 != 0
	;出現している
	;クリアフラグの체크　かなり複雑なので後回し
	IF 던전フラグ:26:2 >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [26] 도청
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [26] 도청
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [26] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;28,팩토리,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_28
;出現フラグの체크　情報の有無
IF 던전フラグ:[[던전:팩토리]]:0 == 1
	;出現している
	;クリアフラグの체크
	;키쿠에救出済みならクリアと見なす
	;의뢰の실패또는拒否もクリアと見なす
	IF 던전フラグ:[[던전:팩토리]]:5 == -1 || 던전フラグ:[[던전:팩토리]]:0 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [28] 팩토리
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [28] 팩토리
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [28] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;29,아카사카,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_29
;出現フラグの체크　情報の有無
IF 던전フラグ:[[던전:아카사카]]:0 == 1
	;出現している
	;クリアフラグの체크
	;ヒルコに何らかのコンタクトが取れていればクリアと見なす
	;드라우프니르関連が私家版で実装されているが、ここでは판정대상にしない
	IF 던전フラグ:[[던전:아카사카]]:1 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [29] 아카사카
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [29] 아카사카
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [29] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;30,이단수용소,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_30
;出現フラグの체크　クリアすると消える　フラグが数値的に管理されている
IF 의뢰フラグ:70:0 >= 6
	;出現している
	;クリアフラグの체크
	IF 의뢰フラグ:70:0 >= 7
	;クリア済み
		RETURN 1
		;PRINTLC [30] 이단수용소
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [30] 이단수용소
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [30] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;31,롯폰기대환락가
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_31
;出現フラグの체크　時間조건しかないので実質なし
;IF 의뢰フラグ:70:0 >= 6
	;出現している
	;クリアフラグの체크
	;一応突入済みならクリアとする
	;ただ、こういうデパート系の던전は扱いが難しいので実装대상外とする
	;関数を呼び出さない形で対応
	IF 이벤트フラグ:70:0 > 5 && 던전フラグ:31:0 == 3
	;クリア済み
		RETURN 1
		;PRINTLC [31] 롯폰기대환락가
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [31] 롯폰기대환락가
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [31] ???
;	;RESETCOLOR
;ENDIF


;--------------------------------------------------
;33,조시가야공원묘지,クリア조건複雑,던전フラグ:1:1 == 1,불명
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_33
;出現フラグの체크　에코빌딩クリア後
IF 던전フラグ:1:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:1:1 != 1
	;クリア済み
		RETURN 1
		;PRINTLC [33] 조시가야공원묘지
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [33] 조시가야공원묘지
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [33] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;34,하츠다이쉘터
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_34
;出現フラグの체크　無조건
;IF 던전フラグ:1:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:34:8 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [34] 하츠다이쉘터
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [34] 하츠다이쉘터
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [33] ???
;	;RESETCOLOR
;ENDIF

;--------------------------------------------------
;35,T.D.L.,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_35
;出現フラグの체크　
IF 던전フラグ:[[던전:T.D.L.]]:0
	;出現している
	;クリアフラグの체크　マルチエン디무ングかつ報告が필요한타입
	;複雑なんで自信が無いけど多少はね
	;에키드나に協힘し、카테드랄侵攻受諾フラグを立てた場合、クリア
	;에키드나を倒した場合、クリア
	IF 던전フラグ:[[던전:T.D.L.]]:1 == 4 || 던전フラグ:[[던전:T.D.L.]]:1 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [35] T.D.L.
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [35] T.D.L.
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [35] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;36,하라주쿠쉘터
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_36
;出現フラグの체크　キャラ체크がある타입
;이벤트フラグでルート管理をしている 0でも99でもなく、かつキャラがいることが조건
;クリアフラグは던전フラグでも立ててくれているのでそちらを使う
IF (이벤트フラグ:70:0 != 0 && 이벤트フラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || 던전フラグ:36:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:36:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [36] 하라주쿠쉘터
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [36] 하라주쿠쉘터
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [36] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;37,선샤인시티
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_37
;出現フラグの체크　キャラ체크がある타입
;이벤트フラグでルート管理をしている 2이상かつ99でない かつキャラがいることが조건
;クリアフラグは던전フラグでも立ててくれているのでそちらを使う
IF (이벤트フラグ:70:0 >= 2 && 이벤트フラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || 던전フラグ:37:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:37:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [37] 선샤인시티
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [37] 선샤인시티
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [37] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;38,오차노미즈쉘터
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_38
;出現フラグの체크　
IF 이벤트フラグ:70:1 == 1 || 이벤트フラグ:70:1 >= 2
	;出現している
	;クリアフラグの체크 이벤트で管理
	IF 이벤트フラグ:70:1 >= 2
	;クリア済み
		RETURN 1
		;PRINTLC [38] 오차노미즈쉘터
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [38] 오차노미즈쉘터
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [38] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;39,황천
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_39
;出現フラグの체크　キャラ체크がある타입
;이벤트フラグでルート管理をしている 7이상かつ99でない かつキャラがいることが조건
;クリアフラグは던전フラグでも立ててくれているのでそちらを使う
IF  (이벤트フラグ:70:0 >= 7 && 이벤트フラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || 던전フラグ:39:1 == 1
	;出現している
	;クリアフラグの체크 데카라비아撃破
	IF 던전フラグ:39:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [39] 황천
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [39] 황천
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [39] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;40,이치가야주둔지
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_40
;出現フラグの체크　마요네의의뢰を受けている、마요네様を손に入れている
IF 이벤트フラグ:8:0 == 1 || 이벤트フラグ:8:0 == 3 || 이벤트フラグ:1:0 == 3
	;出現している
	;クリアフラグの체크 
	IF 던전フラグ:40:23 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [40] 이치가야주둔지
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [40] 이치가야주둔지
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [40] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;41,(某国大使館)미국대사관
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_41
;出現フラグの체크　마요네의의뢰、마요네様を손に入れている
IF 이벤트フラグ:8:0 == 3 || 이벤트フラグ:8:0 == 3 || 이벤트フラグ:1:0 == 3
	;出現している
	;クリアフラグの체크 
	IF 던전フラグ:41:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [41] 미국대사관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [41] 미국대사관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [41] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;42,신주쿠,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_42
;出現フラグの체크　신주쿠위생병원クリア
IF 던전フラグ:3:1 == 1
	;出現している
	;クリアフラグの체크
	;暫定的に各ルートの4이상
	IF FLAG:백합의꽃루트 >= 4 || FLAG:나오야루트 >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [42] 신주쿠
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [42] 신주쿠
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [41] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;43,탐욕계
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_43
;出現フラグの체크　
IF (이벤트フラグ:2:0 == 1 && BASE:MASTER:LV > 30) || 던전フラグ:43:0 == 1
	;出現している
	;クリアフラグの체크 체페이撃破
	IF 던전フラグ:43:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [43] 탐욕계
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [43] 탐욕계
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [43] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;44,하자마의정신세계（ボクのおちんちんらんど）
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_44
;出現フラグの체크　本来は周回すると消える타입だが、周回プ레이だと消えない
;初回레이코PT内、카루코자카상층クリア、탐욕계クリアが조건
;クリア済み
;또는未クリアで諸조건を満たし레이코がPT内にいる場合のみ표시
IF 던전フラグ:44:0 == 1 || (FINDCHARA_B(4508) == 2 && 던전フラグ:7:1 == 1 && 던전フラグ:43:0 == 1 && 던전フラグ:44:0 == 0)
	;出現している
	;クリアフラグの체크 하자마撃破
	IF 던전フラグ:44:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [44] 하자마의정신세계
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [44] 하자마의정신세계
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [44] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;45,롯폰기
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_45
;出現フラグの체크　
IF 던전フラグ:18:22 == 1 || 던전フラグ:45:0 >= 1
	;出現している
	;クリアフラグの체크 ピ라입수
	;迷ったけどピ라と앨리스を両方입수でクリア扱いに
	IF 던전フラグ:45:0 >= 1 && 던전フラグ:45:2 ==3
	;クリア済み
		RETURN 1
		;PRINTLC [45] 롯폰기
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [45] 롯폰기
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [45] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;46,신주쿠대성당
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_46
;出現フラグの체크　
IF 던전フラグ:18:22 == 1 && 던전フラグ:42:0 >= 1
	;出現している
	;クリアフラグの체크 파주주とごにゃごにゃした
	IF 던전フラグ:46:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [46] 신주쿠대성당
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [46] 신주쿠대성당
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [46] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;47,시나가와,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_47
;出現フラグの체크　
IF 던전フラグ:[[던전:시나가와]]:0
	;出現している
	;クリアフラグの체크　マルチエン디무ングかつ報告が필요한타입
	;複雑なんで自信が無いけど多少はね
	;하니엘に協힘し、카테드랄受諾フラグを立てた場合、クリア
	;하니엘を倒した場合、クリア
	IF 던전フラグ:[[던전:시나가와]]:1 == 4 || 던전フラグ:[[던전:시나가와]]:1 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [47] 시나가와
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [47] 시나가와
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [47] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;48,카사이누이
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_48
;出現フラグの체크　クリアすると消える타입
IF 의뢰フラグ:5:0 == 1 || 던전フラグ:48:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:48:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [48] 카사이누이
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [48] 카사이누이
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [48] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;49,키타야마대학
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_49
;出現フラグの체크　クリアすると消える타입
IF (의뢰フラグ:5:0 == 1 && BASE:MASTER:LV >= 12) || 던전フラグ:49:0 == 1
	;出現している
	;クリアフラグの체크　시키오지撃破
	IF 던전フラグ:49:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [49] 키타야마대학
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [49] 키타야마대학
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [49] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;50,七姉妹学園
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_50
;出現フラグの체크　クリアすると消える타입 STRFLAG関数がいまいち分からない
IF STRFLAG_REQ("七姉妹学園조사의뢰クリア", 1, [[의뢰:페르소나２]])
	;出現している
	;クリアフラグの체크　自信がない
	IF STRFLAG_D("七姉妹学園クリア", 1, [[던전:페르소나２]])
	;クリア済み
		RETURN 1
		;PRINTLC [50] 七姉妹学園
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		CALLF STRFLAG_D("七姉妹学園クリア", -1, [[던전:페르소나２]])
		;PRINTLC [50] 七姉妹学園
	ENDIF
ELSE
;出現していない
	CALLF STRFLAG_REQ("七姉妹学園조사의뢰クリア", -1, [[의뢰:페르소나２]])
	;SETCOLOR COLOR("gray")
	;PRINTLC [50] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;51,조디악
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_51
;出現フラグの체크　クリアすると消える타입
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 3
	;出現している
	;クリアフラグの체크　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [51] 조디악
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [51] 조디악
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [51] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;52,하늘의과학관
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_52
;出現フラグの체크　クリアすると消える타입
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 7 || STRFLAG_NUM_EV("罰ルート進行", , , , [[이벤트:페르소나２]]) >= 5
	;出現している
	;クリアフラグの체크　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 8 || STRFLAG_NUM_EV("罰ルート進行", , , , [[이벤트:페르소나２]]) >= 6
	;クリア済み
		RETURN 1
		;PRINTLC [52] 하늘의과학관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [52] 하늘의과학관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [52] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;53,카라코르
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_53
;出現フラグの체크　クリアすると消える타입
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 10
	;出現している
	;クリアフラグの체크　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 11
	;クリア済み
		RETURN 1
		;PRINTLC [53] 카라코르
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [53] 카라코르
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [53] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;54,모리모토병원
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_54
;出現フラグの체크　クリアすると消える타입
IF STRFLAG_NUM_EV("罰ルート進行", , , , [[이벤트:페르소나２]]) >= 3
	;出現している
	;クリアフラグの체크　これでいいのか不安
	IF STRFLAG_NUM_EV("罰ルート進行", , , , [[이벤트:페르소나２]]) >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [54] 모리모토병원
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [54] 모리모토병원
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [54] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;55,시바르바
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_55
;出現フラグの체크　クリアすると消える타입
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 12
	;出現している
	;クリアフラグの체크　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[이벤트:페르소나２]]) >= 13
	;クリア済み
		RETURN 1
		;PRINTLC [55] 시바르바
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [55] 시바르바
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [55] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;59,바알성
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_59
;出現フラグの체크　クリアすると消える타입
;キャラ체크がある
;ＥＤを취소した場合のフラグ管理が無いので、취소된EDで代用
;不安
;ファイル名と던전名変えるのやめてぇ！不安になるぅ！
IF (이벤트フラグ:70:0 == 10 && FINDCHARA_B(4761,0) == 2 && (FINDCHARA_B(4763,0) == 2 || FINDCHARA_B(4764,0) == 2)) || (이벤트フラグ:70:0 == 11 && FINDCHARA_B(4761,0) == 2) || 이벤트フラグ:70:0 == 12 ||  GETBIT(FLAG:취소된ED,16) == 1
	;出現している
	;クリアフラグの체크
	;ＥＤを취소した場合のフラグ管理が無いので、취소된EDで代用
	IF 이벤트フラグ:70:0 == 12 || GETBIT(FLAG:취소된ED,16) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [59] 바알성
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [59] 바알성
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [59] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;60,아비디아계
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_60
;出現フラグの체크　クリアすると消える타입
;취소된ED,28も판정として使うことに
IF 던전フラグ:19:1 == 1 || GETBIT(FLAG:취소된ED,28) == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:60:0 == 1 || GETBIT(FLAG:취소된ED,28) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [60] 아비디아계
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [60] 아비디아계
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [60] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;61,하라주쿠
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_61
;出現フラグの체크
;私家版対応済み 無조건
;IF 의뢰フラグ:12:0 != 0
	;出現している
	;クリアフラグの체크
	;私家版対応済み
	IF 던전フラグ:61:0 >= 5
	;クリア済み
		RETURN 1
		;PRINTLC [61] 하라주쿠
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [61] 하라주쿠
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [61] ???
;	;RESETCOLOR
;ENDIF

;--------------------------------------------------
;62,아이스랜드
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_62
;出現フラグの체크　이벤트クリア
IF 의뢰フラグ:12:0 == 1 || 던전フラグ:62:1 == 4
	;出現している
	;クリアフラグの체크　헬撃破
	IF 던전フラグ:62:1 == 4
	;クリア済み
		RETURN 1
		;PRINTLC [62] 아이스랜드
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [62] 아이스랜드
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [62] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;63,샌드랜드
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_63
;出現フラグの체크 フォレストランドにいけることをクリア조건とする
IF 투기장フラグ:9:0 == 2 || 던전フラグ:63:0 == 8
	;出現している
	;クリアフラグの체크　헬撃破
	IF 던전フラグ:63:0 == 8
	;クリア済み
		RETURN 1
		;PRINTLC [63] 샌드랜드
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [63] 샌드랜드
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [63] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;64,센트럴랜드
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_64
;出現フラグの체크
;던전フラグを立てているか、취소된ED60,61のどちらかをクリア조건とする
IF 이벤트フラグ:26:0 == 1 || 던전フラグ:64:0 == 6 || GETBIT(FLAG:취소된ED,60) == 1 || GETBIT(FLAG:취소된ED,61) == 1
	;出現している
	;クリアフラグ 던전クリア、또는エン디무ングを見て、続けるを選んだ
	IF 던전フラグ:64:0 == 6 || GETBIT(FLAG:취소된ED,60) == 1 || GETBIT(FLAG:취소된ED,61) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [64] 센트럴랜드
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [64] 센트럴랜드
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [64] ???
	;RESETCOLOR
ENDIF



;--------------------------------------------------
;65,슈바르츠바스
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_65
;出現フラグの체크　이벤트クリア
IF 이벤트フラグ:11:0 == 1
	;出現している
	;クリアフラグの체크　明らかに未完成じゃないかなぁこれ
	IF STRFLAG_NUM_D("슈바르츠바스進行度") >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [65] 슈바르츠바스
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [65] 슈바르츠바스
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [65] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;66,이계화엘민학원
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_66
;出現フラグの체크 クリアすると消える타입
IF 이벤트フラグ:23:0 >= 2 || 던전フラグ:66:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:66:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [66] 이계화엘민학원
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [66] 이계화엘민학원
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [66] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;70,타르타로스
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_70
;出現フラグの체크 夜じゃないと出ないけどここでは関係ない 数値的に処理
IF 이벤트フラグ:9:0 >= 1 || 던전フラグ:70:1 >= 10
	;出現している
	;クリアフラグの체크 뉵스아바타撃破でクリアとする
	;現状最高値が10で数値的に処理されているが、念の為10이상にしておく
	;엘리자베스撃破は던전フラグ:70:96 == 4　現在は판정外
	IF 던전フラグ:70:1 >= 10
	;クリア済み
		RETURN 1
		;PRINTLC [70] 타르타로스
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [70] 타르타로스
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [70] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;72,유키코공주의성
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_72
;出現フラグの체크 数値的に処理 
IF 이벤트フラグ:12:0 >= 1 || 던전フラグ:72:8 >= 1
	;出現している
	;クリアフラグの체크 マルチエン디무ングだが1이상でクリア
	IF 던전フラグ:72:8 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [72] 유키코공주의성
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [72] 유키코공주의성
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [72] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;73,열기나는사우나
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_73
;出現フラグの체크 数値的に処理
;クリアすると消える？　ＥＲＢ上での処理は72と同じに見える
IF 이벤트フラグ:12:0 >= 2 || 던전フラグ:73:8 >= 1
	;出現している
	;クリアフラグの체크 裏ボス倒すとクリアフラグが2になる
	IF 던전フラグ:73:8 > 1
	;クリア済み
		RETURN 1
		;PRINTLC [73] 열기나는사우나
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [73] 열기나는사우나
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [73] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;74,천상낙원
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_74
;出現フラグの체크 数値的に処理
;フラグ管理が分かりやすくてありがてえなーおれもなー
IF 이벤트フラグ:12:0 == 4 || 던전フラグ:74:1 >= 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:74:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [74] 천상낙원
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [74] 천상낙원
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [74] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;75,마가츠이나바시
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_75
;出現フラグの체크 主人公레벨と大浴場
;IF BASE:MASTER:LV > 50 && 던전フラグ:73:8 > 0
;私家版だと천상낙원クリアが조건
;フラグ管理が分かりやすくてありがてえなーおれもなー
IF 이벤트フラグ:12:0 == 5 || 던전フラグ:75:1 == 2
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:75:1 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [75] 마가츠이나바시
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [75] 마가츠이나바시
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [75] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;78,히카와신사
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_78
;出現フラグの체크 키타야마대학クリア　クリアすると消える타입
;IF 던전フラグ:49:0 == 1
;私家版では의뢰のクリアが조건に변경
;マルチエン디무ング(1,2)になっているのでそれにも対応
IF 의뢰フラグ:5:0 == 2 || 던전フラグ:78:0 >= 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:78:0 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [78] 히카와신사
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [78] 히카와신사
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [78] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;79,토우아TV
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_79
;出現フラグの체크 神社クリア クリアすると消える타입
;IF 던전フラグ:78:0 == 1
;出現フラグが변경されている
IF 던전フラグ:86:0 == 1 || 던전フラグ:79:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:79:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [79] 토우아TV
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [79] 토우아TV
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [79] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;80,거짓미타기하라
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_80
;出現フラグの체크 私家版新規던전
;クリア조건として、이벤트フラグ一定이상또는취소済みエンドで판정
;취소된ED,18
IF 이벤트フラグ:99:0 == 8 || 이벤트フラグ:99:0 >= 9 || GETBIT(FLAG:취소된ED,18) == 1
	;出現している
	;クリアフラグの체크
	IF 이벤트フラグ:99:0 >= 9 ||  GETBIT(FLAG:취소된ED,18) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [80] 거짓미타기하라
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [80] 거짓미타기하라
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [80] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;81,신시청사
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_81
;出現フラグの체크 私家版新規던전
;クリアすると消える타입
IF 던전フラグ:84:0 == 1 || 던전フラグ:81:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:81:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [81] 신시청사
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [81] 신시청사
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [81] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;82,이계화빌딩
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_82
;出現フラグの체크 의뢰受諾済み クリアすると消える타입
IF 의뢰フラグ:29:0 >= 1
	;出現している
	;クリアフラグの체크 こっちは던전のクリア판정を使う
	;実質의뢰フラグ == 2でも同じ
	IF 던전フラグ:82:5 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [82] 이계화빌딩
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [82] 이계화빌딩
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [82] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;83,히라사키경찰서
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_83
;出現フラグの체크 토우아TVクリア済み クリアすると消える타입
IF 던전フラグ:79:0 == 1 || 던전フラグ:83:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:83:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [83] 히라사키경찰서
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [83] 히라사키경찰서
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [83] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;84,천당천산하우스
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_84
;出現フラグの체크 의뢰受諾済み クリアすると消える
;IF 의뢰フラグ:32:0 >= 1
;私家版だと警察署クリアが出現조건　クリアすると消える타입
IF 던전フラグ:83:0 == 1 || 던전フラグ:84:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:84:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [84] 천당천산하우스
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [84] 천당천산하우스
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [84] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;85,고분미궁
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_85
;出現フラグの체크 私家版での추가던전 出現フラグが複雑
;신시청사クリア済みで未クリア　かつ
;	쿠미코を助けていて함락済み
;	또는쿠미코を助けていない
;クリアすると消える타입
;PTに存在しない캐릭터に対する함락체크がかなり面倒
;しょうがないので入れ子のＩＦ아야を２回走らせるクソ処理

;まずは던전のフラグ체크
IF 던전フラグ:85:0 == 1
	;クリア済み
	RETURN 1
	;PRINTLC [85] 고분미궁
	;RESETCOLOR
ELSEIF	던전フラグ:78:0 == 1 && 던전フラグ:85:0 == 0
	;쿠미코救出ルート
	LOCAL = GETCHARA([[キャラ:쿠미코]])
	IF 던전フラグ:78:1 == 1 && FINDCHARA_B([[キャラ:쿠미코]]) == 1 && 함락(LOCAL)
		;出現조건を満たしていて未クリア
		;PRINTLC [85] 고분미궁
	ELSE
		;出現조건を満たしてない
		;SETCOLOR COLOR("gray")
		;PRINTLC [85] ???
		;RESETCOLOR
	ENDIF
ELSEIF	던전フラグ:78:0 == 2 && 던전フラグ:85:0 == 0
	;出現조건を満たしていて未クリア
	;PRINTLC [85] 고분미궁
ELSE
	;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [85] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;86,박물관
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_86
;出現フラグの체크 私家版での추가던전
;市庁舎クリア済み クリアすると消える타입
IF 던전フラグ:78:0 >= 1 || 던전フラグ:86:0 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:86:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [86] 박물관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [86] 박물관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [86] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;88,레온자동차공장
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_88
;出現フラグの체크 私家版での추가던전
;フラグ管理が分かりやすく書いてくれて助かるなーおれもなー
IF (이벤트フラグ:27:0 == 1 && 던전フラグ:88:1 == 0) || 던전フラグ:88:1 == 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:88:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [88] 레온자동차공장
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [88] 레온자동차공장
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [88] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;89,천체박물관
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_89
;出現フラグの체크 의뢰受諾이상 数値的に管理
IF 의뢰フラグ:33:0 >= 1
	;出現している
	;クリアフラグの체크 マルチエン디무ング 数値的に管理 0のみ未クリア
	IF 던전フラグ:89:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [89] 천체박물관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [89] 천체박물관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [89] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;90,ＶＲ미술관
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_90
;出現フラグの체크 クリアすると消滅する타입
IF BASE:MASTER:LV >= 15
	;出現している
	;クリアフラグの체크 스내피に懐柔されるエンドでもクリアとする
	IF 던전フラグ:90:1 >= 3
	;クリア済み
		RETURN 1
		;PRINTLC [90] ＶＲ미술관
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [90] ＶＲ미술관
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [90] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;92,ＶＲ호러・하우스
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_92
;出現フラグの체크
;処理上は90:1が3のときしか開かないが、
;VR美術館では4でも開ける메시지を出しているので準ずる
;IF 던전フラグ:90:1 >= 3
;私家版では美術館の懐柔ＥＤに対応済み
IF (던전フラグ:90:1 >= 3 && 던전フラグ:92:0 == 0) || 던전フラグ:92:0 >= 1
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:92:0 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [92] ＶＲ호러・하우스
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [92] ＶＲ호러・하우스
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [92] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;93,아마미공항
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_93
;出現フラグの체크
IF 의뢰フラグ:34:0 == 1 || 던전フラグ:93:1 >= 4
	;出現している
	;クリアフラグの체크  マルチエン디무ングで数値的に管理 4/5がクリアフラグ
	IF 던전フラグ:93:1 >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [93] 아마미공항
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [93] 아마미공항
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [93] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;94,시아크
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_94
;出現フラグの체크
;クリアとしても未クリアとしても混乱を招くので、関数は作るが표시しない
;つまり未実装処理の대상
IF 던전フラグ:94:1 >= 1
	;出現している
	IF 던전フラグ:94:1 > 10
	;クリア済み
		RETURN 1
		;PRINTLC [94] 시아크
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [94] 시아크
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [94] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;95,니카미몬지하
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_95
;出現フラグの체크 私家版での新規던전
;クリアすると消える타입
;読み方が分かりません　ふ・・・후타나리もんちか？
IF 의뢰フラグ:35:0 == 1 || 던전フラグ:95:0 == 2
	;出現している クリアフラグは数値的に処理
	IF 던전フラグ:95:0 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [95] 니카미몬지하
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [95] 니카미몬지하
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [95] ???
	;RESETCOLOR
ENDIF




;--------------------------------------------------
;追記用の샘플スクリプト
;--------------------------------------------------

;--------------------------------------------------
;S,던전の이름,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_S
;出現フラグの체크　
IF 던전フラグ:1:1 != 0
	;出現している
	;クリアフラグの체크
	IF 던전フラグ:3:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ s] 던전의 이름
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ s] 던전의 이름
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ s] ???
	;RESETCOLOR
ENDIF

