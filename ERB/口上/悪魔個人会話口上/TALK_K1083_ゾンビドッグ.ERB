;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:TALK_PUB302.ERB
;	Facility	:회화타입：男・紳士の회화用메시지＋挨拶・問答処理
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;	002		2011/01/10		Ｎ鳥					기본処理をTALK_COMMONに一元化し、메시지を구상호출用関数に移植
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;=====================================================================
;입調타입：○○の汎用구상＋회화用ファイルです
;=====================================================================

;=====================================================================
;전투時회화および合体時회화の구상テンプレートです。

;個別の악마に対応させたい場合はX1をキャラ번호に
;회화타입別に対応させたい場合はKX1をPUB(회화타입の번호)に
;置き換えてください。

;例）픽시の구상を作りたいならX1⇒501に置き換え
;　　회화타입：女、淑女ならKX1⇒PUB304に置き換え

;知ってると便利そうな表記
;　%CSTR:ARG:X%　X = 11:일인칭 12:이인칭 20:종족
;　\@ CSTR:ARG:종족명 != "" ? %CSTR:ARG:종족명% # %STR:(ABL:ARG:종족)%
;　┗CSTRに종족명が記載されていればそれを、されていなければABLから종족명を割り出して표시する
;=====================================================================

@KOJO_TALK_K1083,ARG,ARG:1

SELECTCASE ARG:1
	CASE 1
		;1:레이디・킬러즈
		PRINTFORML %조사처리(CALLNAME:ARG,"는")% %CALLNAME:PLAYER%에게 해롱해롱거렸다.
		
	CASE 2
		; 2:おねだり前の逡巡時(아이さつor問答で목적が決まっている場合)
	CASE 3
		; 3:交渉の목적を尋ねる
		PRINTFORML 요구하는 것을 묻는다.
	CASE 84
		;84:要求前の1文
	CASE 4
		; 4-6:교섭목적：やらせてくれと言った時の反応
		; 4:取り付く島もなし
			PRINTFORMW 심하게 거부했다.
	CASE 5
		; 5:交渉次第
		PRINTFORMW 조건에 따라 들어주는 것 같다.
	CASE 6
		; 6:一発おｋ
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 7
		; 7-9:교섭목적：やらせてくれと言った時の反応
		; 7:取り付く島もなし
			PRINTFORMW 심하게 거부했다.
	CASE 8
		; 8:交渉次第
		PRINTFORMW 조건에 따라 범해줄 것 같다.
	CASE 9
		; 9:一発おｋ
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 10
		;10:要求額を提示：￥
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORML ￥{TFLAG:TALK용요구치}을 요구했습니다.
		
	CASE 11
		;11-13:￥を払おうとしてお金が발りない
		;11:別のものを要求する
		
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 소지금이 부족합니다.
	CASE 85
		;85 恵まれる
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 소지금이 부족합니다.
		PRINTFORMW ＞%CALLNAME:ARG%에게 불쌍하게 여겨진 것 같다.
	CASE 12
		;12:交渉실패。立ち去る
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 소지금이 부족합니다.
	CASE 13
		;13:交渉실패。敵対する
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 소지금이 부족합니다.
		PRINTFORMW 「BAW！ WOW！」
	CASE 14
		;14-16:￥を支払った
		;14:払ったのに逃げられる
		PRINTFORMW 「BAW！ WOW！」
	CASE 15
		;15:さらに要求される
		PRINTFORMW 「GRRRR……」
	CASE 16
		;16:交渉성공
		PRINTFORMW 「BAW！ WOW！」
	CASE 17
		;17-19:￥を支払うのを断った::
		;17:交渉실패。奇襲する
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 18
		;18:交渉실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
	CASE 19
		;19:他のものを要求する:
		PRINTFORMW 「GRRRR……」
	CASE 20
		;20:要求額を提示：ＭＡＧ
		PRINTFORMW 「GRRRR……」
		PRINTFORML {TFLAG:TALK용요구치}MAG를 요구했습니다.
	CASE 21
		;21-23:ＭＡＧを支払おうとしたが발りない
		;21:別のものを要求する
		PRINTFORMW 「GRRRR……」
		PRINTFORMW ＭＡＧ가 부족합니다.
	CASE 86
		;86 恵まれる
		PRINTFORMW 「GRRRR……」
		PRINTFORMW ＭＡＧ가 부족합니다.
		PRINTFORMW ＞%CALLNAME:ARG%에게 불쌍하게 여겨진 것 같다.
	CASE 22
		;22:交渉실패。立ち去る
		PRINTFORMW 「GRRRR……」
		PRINTFORMW ＭＡＧ가 부족합니다.
	CASE 23
		;23:交渉실패。敵対する
		PRINTFORMW 「GRRRR……」
		PRINTFORMW ＭＡＧ가 부족합니다.
		PRINTFORMW 「BAW！ WOW！」
	CASE 24
		;24-26:ＭＡＧを支払った
		;24:払ったのに逃げられる
		PRINTFORMW 「BAW！ WOW！」
	CASE 25
		;25:さらに要求される
		PRINTFORMW 「GRRRR……」
	CASE 26
		;26:交渉성공
		PRINTFORMW 「BAW！ WOW！」
	CASE 27
		;27-29:ＭＡＧを支払うのを断った
		;27:交渉실패。奇襲する
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 28
		;28:交渉실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
	CASE 29
		;29:他のものを要求する
		PRINTFORMW 「GRRRR……」
	CASE 30
		;30:마석を要求
		PRINTFORMW 「GRRRR……」
		PRINTFORML 마석을 요구했습니다.
		
	CASE 31
		;31-33:마석を渡そうとしたが持っていない
		;31:別のものを要求する
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 마석을 가지고 있지 않습니다.
	CASE 87
		;87 恵まれる
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 마석을 가지고 있지 않습니다.
		PRINTFORMW ＞%CALLNAME:ARG%에게 불쌍하게 여겨진 것 같다.
	CASE 32
		;32:交渉실패。立ち去る
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 마석을 가지고 있지 않습니다.
	CASE 33
		;33:交渉실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORMW 마석을 가지고 있지 않습니다.
	CASE 34
		;34-36:마석を渡した
		;34:払ったのに逃げられる
		PRINTFORMW 「BAW！ WOW！」
	CASE 35
		;35:さらに要求される
		PRINTFORMW 「GRRRR……」
	CASE 36
		;36:交渉성공
		PRINTFORMW 「BAW！ WOW！」
	CASE 37
		;37-39:마석を渡すのを断った
		;37:交渉실패。奇襲する
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 38
		;38:交渉실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
	CASE 39
		;39:他のものを要求する
		PRINTFORMW 「GRRRR……」
	CASE 40
		;40:異性との성교渉を要求
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORML \@TALENT:ARG:남자 ?여자#남자\@를 요구했습니다.
	CASE 41
		;18:異性を宛がってもらった時の反応
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 42
		;42-46:성교渉が終わった後
		;42:敗北してる場合ここでゲームオーバー
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 43
		;43:話しかけたキャラが倒れている
		PRINTFORMW 「BAW！ WOW！」
	CASE 44
		;44:ヤらせたのに逃げられる
		PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 도망쳤다.
		PRINTFORMW 「GRRRR……」
	CASE 45
		;45:満발してない
		PRINTFORMW 「GRRRR……」
		PRINTFORML %조사처리(CALLNAME:ARG,"는")% 만족하지 못한 것 같다.
	CASE 46
		;46:満발
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 만족한 것 같다.
	CASE 47
		;47-49:성교渉を断った
		;47:交渉실패。奇襲する
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 48
		;48:交渉실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
	CASE 49
		;49:他のものを要求する
		PRINTFORMW 「GRRRR……」
	CASE 50
		;50-55:ヤらせてもらった後
		;50:敗北してる場合ここでゲームオーバー
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 51
		;51:話かけたキャラが倒れいる
		PRINTFORMW 「BAW！ WOW！」
	CASE 52
		;52:去っていく
		PRINTFORMW 「GRRRR……」
	CASE 53
		;53:満발し、仲魔になる
		PRINTFORMW 「BAW！ WOW！」
	CASE 54
		;54:満발し、아이템をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 53
		;53:満발し、見逃してくれる
		;現状、死に処理
		PRINTFORMW 「BAW！ WOW！」
	CASE 56
		;56-61:犯してもらった後
		;56:敗北してる場合ここでゲームオーバー
		PRINTFORMW 「BAW！ WOW！」
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 57
		;57:話かけたキャラが倒れいる
		PRINTFORMW 「BAW！ WOW！」
	CASE 58
		;58:去っていく
		PRINTFORMW 「GRRRR……」
	CASE 59
		;59:満발し、仲魔になる
		PRINTFORMW 「BAW！ WOW！」
	CASE 60
		;60:満발し、아이템をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 61
		;61:満발し、見逃してくれる
		;現状、死に処理
		PRINTFORMW 「BAW！ WOW！」
	CASE 62
	;62:仲魔になる
		IF FLAG:교섭목적 > 3
			PRINTFORMW 「BAW！ WOW！」
			PRINTFORMW %CALLNAME:PLAYER%의 몸에 매우 만족하여 %조사처리(CALLNAME:ARG,"는")% 동료마가 되어주었습니다.
		ELSE
			PRINTFORMW 「BAW！ WOW！」
			PRINTFORMW 협상 결과, %조사처리(CALLNAME:ARG,"는")% 동료마가 되어주었습니다.
		ENDIF
	CASE 63
		;63:マスターの레벨より高い場合
		PRINTFORMW 「GRRRR……」
		PRINTFORMW 협상에 성공했지만, 자신보다 레벨이 낮아서 돌아가버렸습니다.
	CASE 64
		;64:ＣＯＭＰの空きが無い場合
		PRINTFORMW 「GRRRR……」
			PRINTFORML 협상에 성공했지만, 동료마가 가득 차서 돌아가버렸습니다.
	CASE 65
		;65:搾りとられた
	CASE 66
		;66:お金をくれる
		IF FLAG:교섭목적 > 3
			PRINTFORMW 「BAW！ WOW！」
			PRINTFORMW %CALLNAME:PLAYER%의 몸에 매우 만족하여 돈을 주었습니다.
		ELSE
		ENDIF
	CASE 67
		;67:ＭＡＧをくれる
		IF FLAG:교섭목적 > 3
			PRINTFORMW 「BAW！ WOW！」
			PRINTFORMW %CALLNAME:PLAYER%의 몸에 매우 만족하여 ＭＡＧ를 주었습니다.
		ELSE
		ENDIF
	CASE 68
		;68:데미지をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 69
		;69-75:아이템をくれるor회복してくれる
		;69:소마を使ってくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 70
		;70:보옥륜を使ってくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 71
		;71:ITEMor마석をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 72
		;72:마석をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 73
		;73:마석を使ってくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 74
		;74:보옥を使ってくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 75
		;75:보옥をくれる
		PRINTFORMW 「BAW！ WOW！」
	CASE 76
		;76-78:気まずくなった
		;76:회화실패。奇襲する
		PRINTFORMW 타닥!
		PRINTFORMW 좀비독은 갑자기 다가왔다.
	CASE 77
		;77:회화실패。敵対する
		PRINTFORMW 「BAW！ WOW！」
	CASE 78
		;78:회화継続
		PRINTFORMW 「GRRRR……」
	CASE 79
		;79-83:立ち去る
		;79:同じ仲魔がいる場合
		PRINTFORMW 「GRRRR……」
	CASE 80
		;険悪な雰囲気
		PRINTFORMW 「GRRRR……」
	CASE 81
		;우호도が低い
		PRINTFORMW 「GRRRR……」
	CASE 82
		;우호도が普通
		PRINTFORMW 「BAW！ WOW！」
	CASE 83
		;우호도が高い
		PRINTFORMW 「BAW！ WOW！」
ENDSELECT


;===========================================================================
;회화時挨拶
;===========================================================================
@GREET_K1083,ARG
;最初の挨拶

;質問を増やした場合、RAND:XのXを増やす
;RETURNの値により回答後の雰囲気が変わる。
;0.회화継続 1.直接仲魔になる 2.何かくれる 3.奇襲される 4.敵対する 5.逃げる 6.気まずくなる

SELECTCASE RAND:1
	CASE 0
		PRINTFORMW 「GRRRR……」
		CALL INPUT_SELECT(1, "다가간다", 2, "싸운다")
		IF RESULT == 1
			;１,本当に欲しいものから買え
			LOCAL = RAND:100 + RAND:(MAXBASE:PLAYER:지혜+MAXBASE:PLAYER:운/2)
;			소질によって판정値が랜덤に上下することもある
;			SIF TALENT:ARG:반항적
;				LOCAL -= RAND:20
			IF LOCAL < 30
				CFLAG:ARG:우호도 -= RAND:50
				;실패
				IF RAND:2
					PRINTFORMW 타닥!
					PRINTFORMW 좀비독은 갑자기 다가왔다.
					RETURN 3
				ELSE
					PRINTFORMW 「BAW！ WOW！」
					RETURN 4
				ENDIF
			ELSE
				CFLAG:ARG:우호도 += RAND:30
				;성공
				PRINTFORMW 「BAW！ WOW！」
				RETURN 0
			ENDIF
		ELSE
			RETURN 4
		ENDIF
ENDSELECT

;===========================================================================
;회화時問答
;===========================================================================
@QUESTION_K1083,ARG,ARG:1


SELECTCASE RAND:1
	CASE 0
		PRINTFORMW 「GRRRR……」
		CALL INPUT_SELECT(1, "다가간다", 2, "싸운다")
		IF RESULT == 1
			;１,本当に欲しいものから買え
			LOCAL = RAND:100 + RAND:(MAXBASE:PLAYER:지혜+MAXBASE:PLAYER:운/2)
;			소질によって판정値が랜덤に上下することもある
;			SIF TALENT:ARG:반항적
;				LOCAL -= RAND:20
			IF LOCAL < 30
				CFLAG:ARG:우호도 -= RAND:50
				;실패
				IF RAND:2
					PRINTFORMW 타닥!
					PRINTFORMW 좀비독은 갑자기 다가왔다.
					RETURN 3
				ELSE
					PRINTFORMW 「BAW！ WOW！」
					RETURN 4
				ENDIF
			ELSE
				CFLAG:ARG:우호도 += RAND:30
				;성공
				PRINTFORMW 「BAW！ WOW！」
				RETURN 0
			ENDIF
		ELSE
			RETURN 4
		ENDIF
ENDSELECT

@FUSION_MESSAGE_K1083,ARG
PRINTFORMW 「GRRRR……」
PRINTFORMW 「BAW！ WOW！」
PRINTFORMW 타닥!
PRINTFORMW 좀비독은 갑자기 다가왔다.

