;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:TITLE_STOCK.ERB
;	Facility	:タイトル画面に表示されるAAと画像を一元化
;
;	Licence		:ライセンスフリー
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		2022/08/19		餅呑					新規作成　コンセプトはだれでも簡単にタイトル画面を追加できるシステム
;	001		2022/08/30		JK好き					resourcesフォルダのタイトル画像数を感知してタイトル画像表示を64枚まで自動で対応出来るように改造
;
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
@TITLE_STOCK
#DIM 画像総数
#DIM AA総数 = 3
;AAを増やしたら↑の数字を変えてください

;タイトル画像数を取得
FOR LOCAL,0,64
	;100*LOCAL番のタイトル画像が設定されているか
	IF EXIST_PICTURE(4930, 100 * LOCAL)
	;無いなら-1して終了
	ELSE
		LOCAL --
		BREAK
	ENDIF
NEXT
;1枚表示するのに処理を2つ使うので実際は半分になる
LOCAL /= 2
;↓デバッグ用
;PRINTFORML タイトル画像数{LOCAL}

画像総数 = LOCAL

LOCAL = AA総数 + 画像総数
IF RAND:LOCAL < AA総数
	CALL AA_STOCK
ELSE
	CALL PICTURE_STOCK
ENDIF

;======================================================
;　タイトルAA
;======================================================
@AA_STOCK
SELECTCASE RAND:3
	CASE 0
		PRINTL
		PRINTL 　　　　__＿ _/ｱ＿_,､　　　　 /ｱ　　　　　　/ｱ　　　　/ｱ　　　　　　　　　　　　　　/ｱ　 　
		PRINTL 　　　　 二二7/二ﾆ,､´　,＿＿//＿＿＿,､　＿//_,､ ,､＿//＿,､　　　　　　　　　 /ｱ　 //　　　
		PRINTL 　　　　//￣￣￣￣7/　 ´￣７/￣ ７ﾉ￣´'￣￣7/ //￣7/￣7/　　　　　　　　　 /ナ＝ｧ/＝＝^　
		PRINTL 　　　 //二二二二//　 ◯　 //　　//　　　　 ﾉ/ //＝//＝//　＿/ｱ,､,_＿__,､　 ﾉノ　//　　　　
		PRINTL 　　　//＿＿＿＿//　　　　ﾉﾒ=､-､//　　　 _／イ//＿//＿//　,_//￣　￣￣´  -"ﾆ＿_//__＿,､ 　
		PRINTL 　 ,＿ﾆ二二二二二＿,､　　￣　 冫<　　 -='7/(ﾉ -￣7/ ￣`' //7/7/ｰ=ｧr＝='`　  ￣７/ ￣￣´ 　
		PRINTL 　 ´_-"フ￣ ヾヽ_￣´　　_,-'ﾉヾヽ　　 //　　　//　　　//7/7/　//　　　　　　//　　　　 　
		PRINTL 　 -= -"　　　`､ノ　　_-='-´"　 `､_)　//　　　//　　_　`ｹ/ﾆ'､ //　iヽ　_＿＿//_＿＿,､　 　
		PRINTL 　　　　　　　　　　　　　　　　　　　 `　　　 `　　　￣7/￣´iﾉ＿_」｝'￣￣￣￣￣￣´　 　
		PRINTL 　　　　　　　　　　　　　　　　　　　　　　　　　　　 //　 [二 ─'し'　　　　　　　　　 　
		PRINTL 　　　　　　　　　　　　　　　　　　　　　　　　　　　 `　　　　　　　　　　　　　　　　 　
		PRINTL 
		PRINTL e　r　a　･　M　e　g　a　t　e　n
	CASE 1
		PRINTL 　　　　　　　　　　　　　　　　　　era　 Megaten　　　　　　　　　　　　　　　　　　 　
		PRINTL 　　　　　　　　　　　　　　　　　　 真・女 神　生　　　　　　　　　　　　　　　　　　　
		PRINTL 　　　　　　_,_　　　　　　　　　　　　　　　 転　　　　　　　　　　　　　　　　　　　　
		PRINTL 　　　　　'=,!ﾐﾐ'、 ぃ､ ﾞl、 ,、 　　　　　　　ri　　　　　　　　　　　　　　　　　　 　
		PRINTL 　　　　ﾊﾆﾆ,,i､`'′ ,`ﾞl-∨ │|　　　　_､|lﾞ,,丿l,　　　　　　　　　|l　　　　　　　　　
		PRINTL 　　＿,,,,,-----ﾟﾞl ,-_ｿ　　 l|: 　 "くﾞi"r‐ｰi､l二,,--r,ﾆﾆ"`Ｌ,,,,,│l-r-i､　　　　　　
		PRINTL 　 `ﾞﾞﾞﾞﾞ,|厂"ﾞ] -彡"　　〔ヽ||: 　,‐〕ﾞllﾞ‘i､j'''"ﾞ￣゛ `,!,-""""ﾞll _,､.-―"ﾞＴＭ!　
		PRINTL 　　　　,lﾞ｝　||、　　　 ﾞﾄl|│　/ ／　　_,-",ノ　:._,_,-'ン: 　　 )│ 　 ￣￣￣￣"　　
		PRINTL 　　,,-'ン'"　 `ｰ二-､,.., '||l ヽ/／　,-",,,-"　　 ﾟ'ｰ,,、:r"　　_／／`　　　　　　　 　
		PRINTL 　　 ﾞ'"｀　　　　｀ﾞ"""　 ″ﾞ''"'゛　`″　　　　　　　　`ﾞ""　ﾞﾟ―′　　　　　　　　 　
	CASE 2
		PRINTL 　　　　　　　　　　　　　　　 e r a  M e g a t e n　　　　　　　　　　　　　　　　　　　　　　　　
		PRINTL 　　　　　　　　　　　　　　　　 真 ・ 女 神 　 生　　　　　　　　　　　　　　　　　　　　　　　　　
		PRINTL 　　　　　　 ｬ-､　　　､　　　　　　　　　　　転　　　　　　　　　　　　　　　　　　　　　　　　　 　
		PRINTL 　　　　__　 ヾゝ`'ﾞ　ｬ､ｨ',＼　 ,-ｧ　　　　　　∧　　　∧　　　　　　　　　　　　　　　　　　　　 　
		PRINTL 　　　　ヽﾆﾆつ iヽ　　> ヽヽﾉ　(　{　　＿|ﾍ---┘ﾞ-─--┘ﾞ─ﾍ　　 ,、　　　 |`i　　　　　　　　　　　
		PRINTL 　ｬー────‐}ﾞl_,ｨ彡ﾞ⌒ﾞ　　 } | 　 "弋弋￣{ l￣￣ ] i二ﾆ--─"  Ｌ＿＿__ﾉ i＿＿_　　　　　　　 　
		PRINTL 　 `'￣￣ﾌ厂""`i ｨ´　　　 '＼　| |　　　>　> ヽ」　└i j─-一'￣`!「￣""'┐　r-､_ノ　　 _,-―--､ 　
		PRINTL 　　　　 }｝　 | |､_　　　,j ｝ | │　　／／　　　_,-',ノ __,ｨﾍ_,-"ノ　　　{　) 　-=＝ﾆ二＿,--､_ノ　
		PRINTL 　　　,-'ノ　　 `‐ 二 -_／ｨ j「　 ',_／／　　 ,-" ,-"　 ￣ヽ　ヤ´　　 __／／　　　　　　　　　　　
		PRINTL 　　　`"´　　　　　　" ー' ﾚﾞ ヽ'"⌒ﾞ``　　　 `'"´　　　　 ヽ)　　 ヾﾆ_r-′　　　　　　　　ＴＭ 　
		PRINTL 
		PRINTL 　　　　　　／＼　　　　　／＼　　　　　／＼　　　　　／＼　　　　　／＼　　　　　　　　　　　　　　
		PRINTL 　　　　　 < 悪 >　　　　< 魔 >　　　　< 召 >　　　　< 喚 >　　　　< 師 >　　　　　　　　　　　　 　
		PRINTL 　　　　　　＼／　　　　　＼／　　　　　＼／　　　　　＼／　　　　　＼／　　　　　　　　　　　　　　
;AAを追加する場合はこの箇所にどうぞ
;	CASE N
;		PRINTL 　
;		PRINTL 　これは例です　上のAAを参考に貼り付けていってね
;		PRINTL 　
ENDSELECT


;======================================================
;　タイトル画像
;======================================================
@PICTURE_STOCK, 表示画像
#DIM 表示画像
;タイトル画像数を取得
FOR LOCAL,0,64
	;100*LOCAL番のタイトル画像が設定されているか
	IF EXIST_PICTURE(4930, 100 * LOCAL)
	;無いなら-1して終了
	ELSE
		LOCAL --
		BREAK
	ENDIF
NEXT
;1枚表示するのに処理を2つ使うので実際は半分になる
LOCAL /= 2
;↓デバッグ用
;PRINTFORML タイトル画像数({LOCAL})
表示画像 = RAND:LOCAL
;↓デバッグ用
;PRINTFORML 選ばれた表示画像({表示画像})番

;画像が無いときはAAを呼ぶ
IF 表示画像 == -1
	CALL AA_STOCK
ELSE
	CALL PRINT_ICON, 4930, (200 * 表示画像)
	CALL PRINT_ICON, 4930, (200 * 表示画像 + 1)
	CALL PRINT_ICON, 4930, (200 * 表示画像 + 100)
	CALL PRINT_ICON, 4930, (200 * 表示画像 + 101)
ENDIF
