;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:RESTRANT.ERB
;	Facility	:식당(포장마차)での노역に関する関数群です。
;
;	Licence		:ライセンスフリー
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;	002		2011/03/21		黒天					노역可能なキャラを一括で노역に従事させる選択肢を추가
;	003		2011/04/11		Ｐ						비전투원の획득EXPにおける레벨보정が主人の레벨を参照していたのを修正
;	004		2011/04/13		黒天					二人未満(一括選択肢非표시)상태でも直接입력することで
;													一括選択処理が実行できていた問題を修正
;	005		2011/09/08		黒天					ＮＴＲ이벤트時の처녀(재생처녀)喪失処理を関数を呼ぶように修正
;													ＮＴＲ이벤트時の임신用処理の판정に사용していたCFLAG:ARG:18を他のERBの処理から判断してCFLAG:ARG:자궁내피임결계(108)に변경
;	006		2012/05/17		osoji					文章加筆、配色변경
;	007		2013/11/24		ひみつ					リスト표시数설정
;	008		2015/11/22		ななし					未조교かつ비전투원の노역基準緩和。主人と一緒に働く事で충성도を得られるように변경
;	009		2017/06/23		kuni					キャラ표시でINPUT_CHARA_LISTを사용するように변경
;	010		2018/08/10		Jk好き					一人当たりのLD軸変動を2から1に변경
;	011		2019/02/08		Jk好き					クレーム処理윤간時の경험処理を추가
;	012		2020/05/19		がめら					NTR好感度処理をCDFLAGに변경
;	013		2020/06/24		名無し					尻소질が収益に影響するように
;	014		2020/07/07		Jk好き					狂っていた노역可能조건を수정
;	015a	2020/10/19		Ratmice					周回引き継ぎキャラ보수減額率변경 @CORRECT_PROCESSION_CHARA
;	016		2021/03/05		NEO						スタッフ（など）による食堂バフ：料理イベント進行　を追加（現在は1段階のみ）
;													　1：得られるマッカが1.1倍になる
;	017		2021/03/07		NEO						スタッフ（？？？）による食堂バフ：料理イベント進行/『エラテン飯』　を追加（現在は3段階まで）
;													　得られるマッカが、段階ごとに1.1倍になる
;	018		2021/04/27		JK好き					食堂で多胎OP時でも妊娠するように修正
;	019		2021/08/19		pub303					労働時も口上表示するように追記
;	019		2021/08/21		pub303					労働時の結果で台詞を変える事が出来るようにTFALGを設定
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;포장마차(식당)で働かせる
;奴隷を포장마차(식당)で働かせます。客の数だけ収益が上がる
;==========================================================
;@RESTRANT
; 포장마차(식당)で働かせる奴隷を選択する。
;<引数>
;	なし
;<戻り値>
;	なし
;==========================================================
@RESTRANT
#LOCALSIZE 5
$RESTRANT_TOP
;사용する変数の초기化
A = 0
B = 0
C = 0
D = 0
;LOCAL   = 노역させたいキャラ
;LOCAL:1 = 노역可能キャラ数
;LOCAL:2 = 단가
;LOCAL:3 = 노역確認用
;LOCAL:4 = 一括노역用カウンタ
VARSET LOCAL,0
$PRINT_LIST
CALL INPUT_CHARA_LIST("일할 노예를 선택하세요", "CASTING_RESTRANT", "", "", "MODECHANGE_RESTRANT")
IF RESULT == 1000
	RETURN 0
ENDIF

IF RESULT == 999
	;一括選択できない상태のためINPUT_LOOP_1に戻る
	SIF FLAG:노역실행확인생략설정 == 0 || A < 2
		GOTO PRINT_LIST
	;一応実行してOKか確認
	PRINTL 현재 노역 가능한 모든 노예를 일하게 합니다.
	PRINTL 좋습니까?
	CALL INPUT_YN
	SIF RESULT == 1
		;キャラ一覧に戻る。
		GOTO PRINT_LIST
	;一括노역플래그ON
	LOCAL:4 = 1
	LOCAL:1 = A
	LOCAL = Q:(LOCAL:4-1)
ELSE
	LOCAL = RESULT
ENDIF

$SELECT_LOOP

;단가を計算。
DRAWLINE

CALL SALARY_RESTRANT, LOCAL, 1
LOCAL:2 = RESULT

PRINTFORML 기본노역단가：{LOCAL:2}

;단가が0마카を下回ることがないので一応コメントアウト
;IF LOCAL:2 > 0
	;노역실행확인생략설정が有効な場合、표시後WAITしないようにする。
IF FLAG:노역실행확인생략설정 == 0
	PRINTFORMW 하루 동안 {LOCAL:2}마카 정도가 예상됩니다
ELSE
	PRINTFORML 하루 동안 {LOCAL:2}마카 정도가 예상됩니다
ENDIF
;ELSE
;	PRINTFORMW 노역단가が0마카を下回ったので、中止します
;	IF FLAG:노역실행확인생략설정 == 1
;		IF LOCAL:4 > 0 && LOCAL:4 < LOCAL:1
;			;LOCAL:4が0より大きく(一括選択)、LOCAL:4がLOCAL:1未満(まだ全員の노역従事が終わってない)場合
;			;次のキャラの노역従事
;			LOCAL:4 += 1
;			LOCAL = Q:(LOCAL:4-1)
;
;			GOTO SELECT_LOOP
;		ELSE
;			;노역실행확인생략설정が有効な場合、関数の머리に戻る
;			GOTO RESTRANT_TOP
;		ENDIF
;	ENDIF
;	RETURN 0
;ENDIF

;식당コマンドを実行するか？
IF FLAG:노역실행확인생략설정 == 0
	PRINTFORML 오늘 하루 %CALLNAME:LOCAL%에게 일하게 시키겠습니까?
	CALL INPUT_YN,"일하게 한다","그만둔다"
	LOCAL:3 = RESULT
ELSE
	;노역실행확인생략설정が有効な場合、実行確認は無조건で実行する(0)を설정
	LOCAL:3 = 0
ENDIF

IF LOCAL:3 == 0
	IF ITEM:식당
		PRINTFORML %CALLNAME:LOCAL%에게 식당에 나오도록 시켰습니다.
	ELSEIF ITEM:포장마차
		PRINTFORML %CALLNAME:LOCAL%에게 포장마차에 나오도록 시켰습니다.
	ELSE
		PRINTFORML %조사처리(CALLNAME:LOCAL,"는")% 식당에서 아르바이트하도록 시켰습니다.
	ENDIF
	;이벤트구상
	T = TARGET
	TARGET = LOCAL
	TFLAG:13 = 15
	CALL KOJO_MESSAGE_EVENT
	TARGET = T
	;SIF LOCAL == TARGET
	;	TARGET = -1
	;SIF LOCAL == ASSI
	;	ASSI = -1
	;SIF CPOS(LOCAL) > 0
	;	CALL REMOVE_POSITION,CPOS(LOCAL)
	CFLAG:LOCAL:노역플래그 = 1
	CFLAG:LOCAL:노역단가 = LOCAL:2
	PRINTL 　
	IF FLAG:노역실행확인생략설정 == 1
		IF LOCAL:4 > 0 && LOCAL:4 < LOCAL:1
			;LOCAL:4が0より大きく(一括選択)、LOCAL:4がLOCAL:1未満(まだ全員の노역従事が終わってない)場合
			;次のキャラの노역従事
			LOCAL:4 += 1
			LOCAL = Q:(LOCAL:4-1)

			GOTO SELECT_LOOP
		ELSE
			;노역실행확인생략설정が有効な場合、一覧표시キャラ抽出に飛ぶ
			GOTO RESTRANT_TOP
		ENDIF
	ENDIF
ELSE
	RESTART
ENDIF

@CASTING_RESTRANT(ARG)
SIF CFLAG:ARG:노역플래그 > 0
	RETURN 0
SIF ARG != MASTER && (ABL:ARG:순종 + ABL:ARG:봉사정신 + ABL:ARG:요리기능 + TALENT:ARG:연모*3 + TALENT:ARG:친애*6) < 6 && !TALENT:ARG:비전투원
	RETURN 0
;비전투원は未조교に限り、포장마차・식당でなら노역できる
SIF ARG != MASTER && TALENT:ARG:비전투원 && (ABL:ARG:순종 + ABL:ARG:봉사정신 + ABL:ARG:요리기능 + TALENT:ARG:연모*3 + TALENT:ARG:친애*6) < 6 && (CFLAG:ARG:被조교횟수 || !(ITEM:포장마차 || ITEM:식당))
	RETURN 0
SIF BASE:ARG:0 <= 500
	RETURN 0
SIF CFLAG:ARG:この場に居ないフラグ == 1
	RETURN 0
RETURN 1

@MODECHANGE_RESTRANT, ARG
SELECTCASE ARG
	CASE -1
		;노역実行확인생략옵션が有効な場合にのみ選択肢を표시する。
		SIF FLAG:노역실행확인생략설정 == 1 && A >= 2
			PRINTL [999] 노역할 수 있는 모든 노예를 일하게 한다
	CASE 999
		RETURN ARG , 0
ENDSELECT
RETURN ARG , 1

;==========================================================
;@END_RESTRANT
; 포장마차(식당)での노역日報処理
;<引数>
;	ARG = 노역を行うキャラの登録番号
;<戻り値>
;	なし
;==========================================================
@END_RESTRANT,ARG
#LOCALSIZE 5
#DIM LCOUNT
;LOCAL   = 計算用1
;LOCAL:1 = 計算用2
;LOCAL:2 = 客入り
;LOCAL:3 = 顧客満발度
;LOCAL:4 = 합계プ레이횟수(未사용?)

VARSET LOCAL,0
;最初に노역단가を再計算
CALL SALARY_RESTRANT,ARG,0
CFLAG:ARG:노역단가 = RESULT

CUSTOMDRAWLINE ･
PRINTFORML %CALLNAME:ARG%의 업무 보고：

;従業員の인기に応じて客が来ます
;初めての場合は店の인기に依存
WHILE CFLAG:ARG:요리인기 > 100 * (POWER(2 , LOCAL)-1) / 3
	LOCAL:1 += (MIN(CFLAG:ARG:요리인기 , 100 * (POWER(2 , LOCAL+1) - 1) / 3) - 100 * (POWER(2 , LOCAL) -1) / 3) / (10 * (POWER(2,LOCAL)))
	LOCAL ++
WEND
IF LOCAL:1
	FOR LCOUNT, 0, LOCAL:1
		LOCAL:2 += RAND:2
	NEXT
ENDIF
;店に인기に応じて客が来ます

LOCAL:3 = FLAG:요리인기
;自分の店が無い時は인기は200固定
SIF ITEM:포장마차 == 0
	LOCAL:3 = 200
LOCAL:3 += 50
LOCAL = 0
LOCAL:1 = 0
WHILE LOCAL:3 > 100 * (POWER(4 , LOCAL)-1) / 3
	LOCAL:1 += (MIN(LOCAL:3 , 100 * (POWER(4 , LOCAL+1) - 1) / 3) - 100 * (POWER(4 , LOCAL) -1) / 3) / (10 * (POWER(4,LOCAL)))
	LOCAL ++
WEND
IF LOCAL:1
	FOR LCOUNT, 0, LOCAL:1
		LOCAL:2 += RAND:2
	NEXT
ENDIF

;최저一人は来る
SIF LOCAL:2 < 1
	LOCAL:2 = 1

;満발度판정
;랜덤で40を추가します。외식노역경험に応じて期待値は上昇します。
IF EXP:ARG:외식노역경험 > 30000
	LOCAL:3 = 60
ELSEIF EXP:ARG:외식노역경험 > 10000
	LOCAL:3 = RAND:31 + 30
ELSEIF EXP:ARG:외식노역경험 > 5000
	LOCAL:3 = RAND:36 + 25
ELSEIF EXP:ARG:외식노역경험 > 3000
	LOCAL:3 = RAND:41 + 20
ELSEIF EXP:ARG:외식노역경험 > 1000
	LOCAL:3 = RAND:46 + 15
ELSEIF EXP:ARG:외식노역경험 > 500
	LOCAL:3 = RAND:51 + 10
ELSEIF EXP:ARG:외식노역경험 > 100
	LOCAL:3 = RAND:56 + 5
ELSE
	LOCAL:3 = RAND:61
ENDIF

;요리기능を체크する。요리기능が相손の욕망を上回るかどうか。성공なら요리기능레벨の２倍、실패なら１倍入ります。

LOCAL:1 = RAND:9
IF LOCAL:1 <= ABL:ARG:요리기능
	LOCAL:3 += ABL:ARG:요리기능
	LOCAL:3 += ABL:ARG:요리기능
ELSE
	LOCAL:3 += ABL:ARG:요리기능
ENDIF

;相손からの行動が発生します。相손の기교がこちらの욕망以下の場合、不満そうな表情が出る可能性があります。
;相손の기교＋こちらの순종の２倍＞こちらの욕망＋２なら、問題なく行為を노출증と봉사정신を加える事が出来ます。
;발りない場合は加えられません。
LOCAL:1 = RAND:5
LOCAL:1 += ABL:ARG:순종
LOCAL:1 += ABL:ARG:순종
LOCAL:1 -= 2

IF LOCAL:1 >= ABL:ARG:욕망
	LOCAL:3 += ABL:ARG:봉사정신
	LOCAL:3 += ABL:ARG:노출증
ENDIF

;ここまでで최대100％

;순종が3LVないと、著しく微妙になります
IF ABL:ARG:순종 < 3 && ARG != MASTER
	LOCAL:3 /= 2
ENDIF




;この時点でのLOCAL:3が満발度

LOSEBASE:체력 = LOCAL:2*15

;こっそりと임신中は체력소비1.5倍
IF TALENT:ARG:임신
	TIMES LOSEBASE:체력 , 1.50
ENDIF

;朝の時点で체력が최대체력の半分以上 かつ
;노역による疲労で체력が切れてしまう場合特別処理をする
;LOCAL:2 客入り
;LOCAL:1 計算用
IF BASE:ARG:체력 <= LOSEBASE:체력 && BASE:ARG:체력 > MAXBASE:ARG:체력/2
	;PRINTL 노역변경パッチ
	;체력分だけ頑張ったということにして客入りを制限
	LOCAL:1 = BASE:ARG:체력*LOCAL:2
	;PRINTFORML LOCAL:1：{LOCAL:1}
	LOCAL:1 /= LOSEBASE:체력
	LOCAL:2 = LOCAL:1
	;체력を1だけ残すようにLOSEBASE:체력を변경
	;LOSEBASE:체력 = BASE:ARG:체력-1
	;制限した接客人数と現在の체력によっては체력が1にならない場合もあるので
	;制限した接客人数次第の체력소비になるように再計算してみる。(2011/02/16)
	LOSEBASE:체력 = LOCAL:2*15
	IF TALENT:ARG:임신
		TIMES LOSEBASE:체력 , 1.50
	ENDIF
	;更に満발度を반감
	LOCAL:3 /= 2
	;制限した接客人数でも체력が切れてしまう場合は
	;いままでどおり체력を1だけ残すようにLOSEBASE:체력を변경
	SIF BASE:ARG:체력 <= LOSEBASE:체력
		LOSEBASE:체력 = BASE:ARG:체력-1
ENDIF

PRINTL

PRINTFORML 손님수：{LOCAL:2}
;満발度による인기増減処理
PRINTFORML 고객만족도:{LOCAL:3}％
PRINTL

PRINTFORML 습득의 구슬 ＋{LOCAL:2*LOCAL:3}
JUEL:ARG:8 += LOCAL:2*LOCAL:3
PRINTFORML 가사경험 ＋{MAX(1,LOCAL:2*(LOCAL:3/10 - 4)/5)}
EXP:ARG:가사경험 += MAX(1,LOCAL:2*(LOCAL:3/10 - 4)/5)
PRINTFORML 외식노역경험 ＋{LOCAL:2}
EXP:ARG:외식노역경험 += LOCAL:2

PRINTFORML 체력 － {LOSEBASE:체력}
BASE:ARG:체력 -= LOSEBASE:체력

;비전투원は경험値획득
IF TALENT:ARG:비전투원
	;PRINTFORML EXP： +{CFLAG:ARG:노역단가+LOCAL:2*2*CFLAG:ARG:노역단가/100*(1+BASE:LOCAL:LV/5)}
	;BASE:ARG:ＥＸＰ += CFLAG:ARG:노역단가+LOCAL:2*2*CFLAG:ARG:노역단가/100*(1+BASE:LOCAL:LV/5)
	PRINTFORML EXP： +{CFLAG:ARG:노역단가+LOCAL:2*LOCAL:3/100*CFLAG:ARG:노역단가/100*(1+BASE:ARG:LV/5)}
	BASE:ARG:ＥＸＰ += CFLAG:ARG:노역단가+LOCAL:2*LOCAL:3/100*CFLAG:ARG:노역단가/100*(1+BASE:ARG:LV/5)
	;레벨アップ판정
	CALL CHECK_LEVEL_UP,ARG
	;IF TALENT:ARG:비전투원 && BASE:ARG:ＥＸＰ >= MAXBASE:ARG:ＥＸＰ
	;	PRINTFORML LEVEL UP!
	;	BASE:ARG:LV += 1
	;	CALL SYNC_STATUS,ARG
	;ENDIF
	;未조교で主人がシフトに入っていれば충성도もアップ
	IF CFLAG:ARG:被조교횟수 == 0 && ARG != MASTER && CFLAG:MASTER:노역플래그 == 1
		IF GETBIT(CFLAG:ARG:シフト설정, (DAY % 7)) == GETBIT(CFLAG:MASTER:シフト설정, (DAY % 7))
			;上昇量は【奴隷】による顧客満발度と【主人】の노역단가が大きく影響する。
			;未조교함락させるのは結構大変なので値は変えてもいいかも
			PRINTFORML 충성도： +{(CFLAG:ARG:노역단가+(CFLAG:MASTER:노역단가)*9)*(LOCAL:3)*(1+BASE:ARG:LV)/30}
			BASE:ARG:충성도 += (CFLAG:ARG:노역단가+(CFLAG:MASTER:노역단가)*9)*(LOCAL:3)*(1+BASE:ARG:LV)/30
		ENDIF
	ENDIF
ENDIF
;페르소나구사자は装着中の페르소나の경험値획득
IF TALENT:ARG:페르소나구사자
	CALL INCREASE_PERSONA_EXP, ARG, CFLAG:ARG:노역단가*(100+LOCAL:4) / 5, -1 ,1
	IF RESULT > 0
		;新페르소나処理
		IF BATTLE_SETTING_IS_PERSONA_NEW_FUNCTION()

		;旧페르소나処理
		ELSE
			PRINTFORML 페르소나【\@EQUIP:ARG:장비페르소나 ? %CSVNAME(DITEMTYPE:(EQUIP:ARG:장비페르소나):페르소나("NO"), 0)% # %CSVNAME(ABL:ARG:초기페르소나, 0)%\@】　EXP：+{RESULT}
		ENDIF
	ENDIF
ENDIF
;기본の인기上昇値
;個人인기
LOCAL = 2 * (LOCAL:3/5-5)
PRINTFORM %CALLNAME:ARG%의 인기 {CFLAG:ARG:요리인기} 
SIF LOCAL >= 0
	PRINT +
PRINTFORML {LOCAL}
CFLAG:ARG:요리인기 += LOCAL

;労働結果の値：成功（初期値）
TFLAG:86 = 0

;포장마차(식당)인기
IF ITEM:포장마차 || ITEM:식당
	LOCAL = (LOCAL:3/5-5)
	IF ITEM:식당
		PRINT 식당
	ELSE
		PRINT 포장마차
	ENDIF
	PRINTFORM 인기 {FLAG:요리인기} 
	SIF LOCAL >= 0
		PRINT +
	PRINTFORML {LOCAL}
	FLAG:요리인기 += LOCAL
ELSEIF LOCAL:3 < 40
	PRINTL 업무 중에 몇 번씩 실수를 저질러 아르바이트비가 반으로 줄었다.
	CFLAG:ARG:노역단가 /= 2
	SIF CFLAG:ARG:노역단가 < 1
		CFLAG:ARG:노역단가 = 1
	;労働結果の値：失敗
	TFLAG:86 += 1
ENDIF

;ＮＴＲ進行
CALL NTR_RESTRANT, ARG, LOCAL:2, LOCAL:3

;2021/8/21　労働時も口上表示するように追記
;포장마차(식당)労働時の口上表示
LOCAL:1 = TARGET
TARGET = ARG
TFLAG:13 = 97
CALL KOJO_MESSAGE_EVENT
TARGET = LOCAL:1

;お金を得る
PRINTFORM %조사처리(CALLNAME:ARG,"는")% {LOCAL:2}인의 손님에게 요리를 대접해 {CFLAG:ARG:노역단가+LOCAL:2*LOCAL:3/100*CFLAG:ARG:노역단가/100}마카
IF ITEM:포장마차 || ITEM:식당
	PRINTW 를 벌었습니다。
ELSE
	PRINTW 의 아르바이트비를 얻었습니다.
ENDIF
MONEY:1 += CFLAG:ARG:노역단가+LOCAL:2*LOCAL:3/100*CFLAG:ARG:노역단가/100
CALL 帳簿閲覧_노역, ARG, CFLAG:ARG:노역단가+LOCAL:2*LOCAL:3/100*CFLAG:ARG:노역단가/100, LOCAL:2, 1

;主人の속성値変動
;真っ当に稼ぐと善に傾く
CALL INCREASE_LD,+1
CALL SYNC_STATUS,MASTER

SIF LOCAL == MASTER
	CALL EVENTCHECK_M

CALL 気絶処理,ARG

			;試験用
			;레벨アップ판정
PRINTL
CALL CHECK_LEVEL_UP,ARG
;==========================================================
;@SALARY_RESTRANT
; レストランの노역단가を計算する。
;<引数>
;	ARG   = 노역대상キャラ
;	ARG:1 = 단가計算情報の표시有無(0:非표시 / 0以外:표시)
;<戻り値>
;	노역단가
;==========================================================
@SALARY_RESTRANT, ARG, ARG:1 = 0
#LOCALSIZE 3
;LOCAL   = 노역단가
;LOCAL:1 = 단가보정倍率
;LOCAL:2 = 作業用値一時格納領域
;念のため変数の초기化
VARSET LOCAL,0

;노역기본단가の算出
;ABL:요리기능をみる
SELECTCASE ABL:ARG:요리기능
	CASE 0
		LOCAL:2 = 1
	CASE 1
		LOCAL:2 = 2
	CASE 2
		LOCAL:2 = 2
	CASE 3
		LOCAL:2 = 3
	CASE 4
		LOCAL:2 = 3
	CASE 5
		LOCAL:2 = 4
	CASE 6
		LOCAL:2 = 5
	CASE 7
		LOCAL:2 = 6
	CASE 8
		LOCAL:2 = 7
	CASE 9
		LOCAL:2 = 8
	CASEELSE
		LOCAL:2 = 10
ENDSELECT
SIF ARG:1
	PRINTFORML 요리기능{ABL:ARG:요리기능}LV +{LOCAL:2}P
LOCAL += LOCAL:2

;EXP:가사경험をみる
SELECTCASE EXP:ARG:가사경험
	CASE IS < EXPLV:1
		LOCAL:2 = 0
	CASE IS < EXPLV:2
		LOCAL:2 = 2
	CASE IS < EXPLV:3
		LOCAL:2 = 4
	CASE IS < EXPLV:4
		LOCAL:2 = 6
	CASE IS < EXPLV:5
		LOCAL:2 = 8
	CASEELSE
		LOCAL:2 = 10
ENDSELECT
SIF ARG:1
	PRINTFORML 가사경험{EXP:ARG:가사경험} +{LOCAL:2}P
LOCAL += LOCAL:2


LOCAL:2 = 0
LOCAL:1 = 100

;단가보정率の算出
;能力による倍率
;ABL:순종をみる
SELECTCASE ABL:ARG:순종
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 10
	CASE 2
		LOCAL:2 = 20
	CASE 3
		LOCAL:2 = 30
	CASE 4
		LOCAL:2 = 40
	CASE 5
		LOCAL:2 = 50
	CASE 6
		LOCAL:2 = 60
	CASE 7
		LOCAL:2 = 70
	CASE 8
		LOCAL:2 = 80
	CASE 9
		LOCAL:2 = 90
	CASEELSE
		LOCAL:2 = 100
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 순종{ABL:ARG:순종}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:욕망をみる
SELECTCASE ABL:ARG:욕망
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 욕망{ABL:ARG:욕망}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:기교をみる
SELECTCASE ABL:ARG:기교
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 10
	CASE 2
		LOCAL:2 = 20
	CASE 3
		LOCAL:2 = 30
	CASE 4
		LOCAL:2 = 40
	CASE 5
		LOCAL:2 = 50
	CASE 6
		LOCAL:2 = 60
	CASE 7
		LOCAL:2 = 70
	CASE 8
		LOCAL:2 = 80
	CASE 9
		LOCAL:2 = 90
	CASEELSE
		LOCAL:2 = 100
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 기교{ABL:ARG:기교}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2



;ABL:Ｖ감각をみる
SELECTCASE ABL:ARG:Ｖ감각
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML Ｖ감각{ABL:ARG:Ｖ감각}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2


;ABL:봉사정신をみる
SELECTCASE ABL:ARG:봉사정신
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 10
	CASE 2
		LOCAL:2 = 20
	CASE 3
		LOCAL:2 = 30
	CASE 4
		LOCAL:2 = 40
	CASE 5
		LOCAL:2 = 50
	CASE 6
		LOCAL:2 = 60
	CASE 7
		LOCAL:2 = 70
	CASE 8
		LOCAL:2 = 80
	CASE 9
		LOCAL:2 = 90
	CASEELSE
		LOCAL:2 = 100
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 봉사정신{ABL:ARG:봉사정신}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:노출증をみる
SELECTCASE ABL:ARG:노출증
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 노출증{ABL:ARG:노출증}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:마조끼をみる
SELECTCASE ABL:ARG:마조끼
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 마조끼{ABL:ARG:마조끼}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:새드끼をみる
SELECTCASE ABL:ARG:새드끼
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 새드끼{ABL:ARG:새드끼}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:가창기능をみる
SELECTCASE ABL:ARG:가창기능
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 5
	CASE 2
		LOCAL:2 = 10
	CASE 3
		LOCAL:2 = 15
	CASE 4
		LOCAL:2 = 20
	CASE 5
		LOCAL:2 = 25
	CASE 6
		LOCAL:2 = 30
	CASE 7
		LOCAL:2 = 35
	CASE 8
		LOCAL:2 = 40
	CASE 9
		LOCAL:2 = 45
	CASEELSE
		LOCAL:2 = 50
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 가창기능{ABL:ARG:가창기능}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2

;ABL:섹스중독
SELECTCASE ABL:ARG:섹스중독
	CASE 0
		LOCAL:2 = 0
	CASE 1
		LOCAL:2 = 10
	CASE 2
		LOCAL:2 = 20
	CASE 3
		LOCAL:2 = 30
	CASE 4
		LOCAL:2 = 40
	CASE 5
		LOCAL:2 = 50
	CASE 6
		LOCAL:2 = 60
	CASE 7
		LOCAL:2 = 70
	CASE 8
		LOCAL:2 = 80
	CASE 9
		LOCAL:2 = 90
	CASEELSE
		LOCAL:2 = 100
ENDSELECT
TIMES LOCAL:2 , 0.50
SIF LOCAL:2 > 0 && ARG:1
	PRINTFORML 섹스중독{ABL:ARG:섹스중독}LV +{LOCAL:2}％
LOCAL:1 += LOCAL:2


;素質による보정


;함락素質
;연모
IF TALENT:ARG:3
	LOCAL:2 = 100
	LOCAL:1 += 100
	SIF ARG:1
		PRINTFORML %TALENTNAME:3% ＋{LOCAL:2}％
ENDIF
;음란
IF TALENT:ARG:4
	LOCAL:2 = 30
	LOCAL:1 -= 30
	SIF ARG:1
		PRINTFORML %TALENTNAME:4% －{LOCAL:2}％
ENDIF
;복종
IF TALENT:ARG:5
	LOCAL:2 = 50
	LOCAL:1 -= 50
	SIF ARG:1
		PRINTFORML %TALENTNAME:5% ＋{LOCAL:2}％
ENDIF
;친애
IF TALENT:ARG:6
	LOCAL:2 = 200
	LOCAL:1 += 200
	SIF ARG:1
		PRINTFORML %TALENTNAME:6% ＋{LOCAL:2}％
ENDIF
;창부
IF TALENT:ARG:7
	LOCAL:2 = 60
	LOCAL:1 -= 60
	SIF ARG:1
		PRINTFORML %TALENTNAME:7% －{LOCAL:2}％
ENDIF
;예속
IF TALENT:ARG:8
	LOCAL:2 = 100
	LOCAL:1 -= 100
	SIF ARG:1
		PRINTFORML %TALENTNAME:8% ＋{LOCAL:2}％
ENDIF



;그외素質
;겁쟁이
IF TALENT:ARG:10
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:10% ＋{LOCAL:2}％
ENDIF
;반항적
IF TALENT:ARG:11
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:11% －{LOCAL:2}％
ENDIF
;꿋꿋함
IF TALENT:ARG:12
	LOCAL:2 = 20
	LOCAL:1 += 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:12% ＋{LOCAL:2}％
ENDIF
;솔직함
IF TALENT:ARG:13
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:13% ＋{LOCAL:2}％
ENDIF
;얌전함
IF TALENT:ARG:14
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:14% ＋{LOCAL:2}％
ENDIF
;프라이드높음
IF TALENT:ARG:15
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:15% －{LOCAL:2}％
ENDIF
;건방짐
IF TALENT:ARG:16
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:16% －{LOCAL:2}％
ENDIF
;프라이드낮음
IF TALENT:ARG:17
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:17% ＋{LOCAL:2}％
ENDIF
;츤데레
IF TALENT:ARG:18
	LOCAL:2 = 20
	LOCAL:1 += 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:18% ＋{LOCAL:2}％
ENDIF
;자제심
IF TALENT:ARG:20
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:20% ＋{LOCAL:2}％
ENDIF
;무관심
IF TALENT:ARG:21
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:21% －{LOCAL:2}％
ENDIF
;감정결핍
IF TALENT:ARG:22
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:22% －{LOCAL:2}％
ENDIF
;일선을넘지않음
IF TALENT:ARG:27
	LOCAL:2 = 15
	LOCAL:1 += 15
	SIF ARG:1
		PRINTFORML %TALENTNAME:27% ＋{LOCAL:2}％
ENDIF
;눈에띄고싶어함
IF TALENT:ARG:28
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:28% ＋{LOCAL:2}％
ENDIF
;정조관념
IF TALENT:ARG:30
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:30% ＋{LOCAL:2}％
ENDIF
;정조관결여
IF TALENT:ARG:31
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:31% －{LOCAL:2}％
ENDIF
;습득빠름
IF TALENT:ARG:50
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:50% ＋{LOCAL:2}％
ENDIF
;습득느림
IF TALENT:ARG:51
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:51% －{LOCAL:2}％
ENDIF
;헌신적
IF TALENT:ARG:63
	LOCAL:2 = 15
	LOCAL:1 += 15
	SIF ARG:1
		PRINTFORML %TALENTNAME:63% ＋{LOCAL:2}％
ENDIF
;남성혐오
IF TALENT:ARG:82
	LOCAL:2 = 20
	LOCAL:1 -= 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:82% －{LOCAL:2}％
ENDIF
;망신
IF TALENT:ARG:86
	LOCAL:2 = 15
	LOCAL:1 += 15
	SIF ARG:1
		PRINTFORML %TALENTNAME:86% ＋{LOCAL:2}％
ENDIF
;소악마
IF TALENT:ARG:87
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:87% ＋{LOCAL:2}％
ENDIF
;여성혐오
IF TALENT:ARG:88
	LOCAL:2 = 20
	LOCAL:1 -= 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:88% －{LOCAL:2}％
ENDIF
;요호
IF TALENT:ARG:91
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:91% ＋{LOCAL:2}％
ENDIF
;매력
IF TALENT:ARG:92
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:92% ＋{LOCAL:2}％
ENDIF
;수수께끼의매력
IF TALENT:ARG:94
	LOCAL:2 = 50
	LOCAL:1 += 50
	SIF ARG:1
		PRINTFORML %TALENTNAME:94% ＋{LOCAL:2}％
ENDIF
;빈유
IF TALENT:ARG:109
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:109% －{LOCAL:2}％
ENDIF
;절벽
IF TALENT:ARG:110
	LOCAL:2 = 20
	LOCAL:1 -= 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:110% －{LOCAL:2}％
ENDIF
;거유
IF TALENT:ARG:111
	LOCAL:2 = 20
	LOCAL:1 += 20
	SIF ARG:1
		PRINTFORML %TALENTNAME:111% ＋{LOCAL:2}％
ENDIF
;폭유
IF TALENT:ARG:112
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:112% ＋{LOCAL:2}％
ENDIF
;魔乳
IF TALENT:ARG:魔乳
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML 魔乳 ＋{LOCAL:2}％
ENDIF
;남자でないなら有効
IF !TALENT:ARG:140
	;小尻
	IF TALENT:ARG:121
		LOCAL:2 = 10
		LOCAL:1 -= 10
		SIF ARG:1
			PRINTFORML %TALENTNAME:121% －{LOCAL:2}％
	ENDIF
	;巨尻
	IF TALENT:ARG:123
		LOCAL:2 = 20
		LOCAL:1 += 20
		SIF ARG:1
			PRINTFORML %TALENTNAME:123% ＋{LOCAL:2}％
	ENDIF
	;爆尻
	IF TALENT:ARG:124
		LOCAL:2 = 10
		LOCAL:1 += 10
		SIF ARG:1
			PRINTFORML %TALENTNAME:124% ＋{LOCAL:2}％
	ENDIF
ENDIF
;흡혈귀
IF TALENT:ARG:132
	LOCAL:2 = 10
	LOCAL:1 -= 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:132% －{LOCAL:2}％
ENDIF
;동물귀
IF TALENT:ARG:143
	LOCAL:2 = 10
	LOCAL:1 += 10
	SIF ARG:1
		PRINTFORML %TALENTNAME:143% ＋{LOCAL:2}％
ENDIF
;인기
IF TALENT:ARG:145
	LOCAL:2 = 25
	LOCAL:1 += 25
	SIF ARG:1
		PRINTFORML %TALENTNAME:145% ＋{LOCAL:2}％
ENDIF
;임신
IF TALENT:ARG:153
	LOCAL:2 = 30
	LOCAL:1 += 30
	SIF ARG:1
		PRINTFORML %TALENTNAME:153% ＋{LOCAL:2}％
ENDIF
;모성
IF TALENT:ARG:155
	LOCAL:2 = 60
	LOCAL:1 += 60
	SIF ARG:1
		PRINTFORML %TALENTNAME:155% ＋{LOCAL:2}％
ENDIF

SIF ARG:1
	PRINTFORML 최종배율 {LOCAL:1}％

;보정値が0以下の場合は1にする
SIF LOCAL:1 <= 0
	LOCAL:1 = 1

;보정値の適用
LOCAL *= LOCAL:1
LOCAL /= 100

;붕괴,광기は報酬をかなり低くする（순종によって、80％まで회복）
IF TALENT:ARG:9 || TALENT:ARG:141
	LOCAL *= MIN(10,ABL:ARG:순종)
	TIMES LOCAL , 0.08
	LOCAL:2 = MIN(10,ABL:ARG:순종)
	LOCAL:2 *= 8
	IF ARG:1
		PRINTL 
		IF TALENT:ARG:9
			PRINTFORML %TALENTNAME:9% ×{LOCAL:2}％
		ELSEIF TALENT:ARG:141
			PRINTFORML %TALENTNAME:141% ×{LOCAL:2}％
		ENDIF
		PRINTL 
	ENDIF
ENDIF

;施設による보정
IF ITEM:식당
	TIMES LOCAL , 1.25
	SIF ARG:1
		PRINTFORML 식당소지에 의한 보정 ×125％
ELSEIF ITEM:포장마차 == 0
	TIMES LOCAL , 0.5
	SIF ARG:1
		PRINTFORML 마진 ×50％
ENDIF

;スタッフ（など）によるバフ
;食堂がなければダメ
IF ITEM:식당
	;以下、1.1倍の乗算なので1.1、1.21……って増えてくけど、まあ条件が条件で1週目50日以内には難しいはずなので
	;1段階目：食堂強化単発イベントにて、イソラヌシを撃破している
	IF 料理イベント進行 > 0
		TIMES LOCAL , 1.10
		SIF ARG:1
			PRINTL イソラヌシのオブジェ＆安くて美味しいイソラ焼き ×110％
	ENDIF
	;2段階目：同、泣きわめくラウンドテーブルを撃破している
	IF 料理イベント進行 > 1
		TIMES LOCAL , 1.10
		SIF ARG:1
			PRINTL 一緒に泣いてくれる優しいテーブルさん ×110％
	ENDIF
	;3段階目：同、GGTデミナンディを撃破している
	IF 料理イベント進行 > 2
		TIMES LOCAL , 1.10
		SIF ARG:1
			PRINTL A10ランクデミナンディステーキ（1日10食限定） ×110％
	ENDIF



ENDIF


;難易度보정
CALL CORRECT_DIFFICULTY, LOCAL, ARG:1
LOCAL = RESULT

;引継ぎキャラ보정(現状どちらでも표시する)
CALL CORRECT_PROCESSION_CHARA, ARG, LOCAL, ARG:1
LOCAL = RESULT

;最終的な노역단가が5以下の場合
;최저保証노역단가として5にする。
SIF LOCAL < 5
	LOCAL = 5

RETURN LOCAL

;==========================================================
;@NTR_RESTRANT
; 식당노역でのNTR処理
;<引数>
;	ARG   = 노역キャラの登録番号
;	ARG:1 = 接客数
;	ARG:2 = 顧客満발度
;<戻り値>
;	なし
;==========================================================
@NTR_RESTRANT, ARG, ARG:1, ARG:2
#LOCALSIZE 7
;LOCAL:1 = NTR好き客からの声掛けられ확률
;LOCAL:2 = NTR引っかかり확률보정
;LOCAL:3 = ナンパかクレームか판정
;LOCAL:4 = クレーム윤간への저항보정
;LOCAL:5 = 윤간人数
;LOCAL:6 = 妖しい薬フラグ
VARSET LOCAL, 0

;식당ＮＴＲ이벤트がOFFの場合は何もせず戻る
SIF !GETBIT(FLAG:ＮＴＲ기능 , 1)
	RETURN
;전속노예의목걸이を장비している場合は何もせず戻る
;SIF (CFLAG:ARG:그외 == 1116 || CFLAG:ARG:그외2 == 1116 || CFLAG:ARG:그외3 == 1116)
SIF (CFLAG:ARG:그외 == 1116 || CFLAG:ARG:그외2 == 1116 || CFLAG:ARG:그외3 == 1116 || CFLAG:ARG:그외4 == 1116 || CFLAG:ARG:그외5 == 1116 || CFLAG:ARG:그외6 == 1116)
	RETURN
;남자は弾く
SIF TALENT:ARG:남자 == 1
	RETURN

SIF ARG:2 == 0
	ARG:2 = 1

LOCAL:1 = LIMIT(CFLAG:ARG:放置日数 * 2, 0, 30) + TALENT:ARG:인기 * 10
LOCAL:2 = CFLAG:ARG:放置日数 * 2 + TALENT:ARG:즉각함락 * 50

IF BASE:ARG:체력 >= 2000
	LOCAL:4 = 100
ELSEIF BASE:ARG:체력 < 2000
	LOCAL:4 = 80
ELSEIF BASE:ARG:체력 < 1000
	LOCAL:4 = 50
ELSEIF BASE:ARG:체력 < 500
	LOCAL:4 = 0
ENDIF

;ＮＴＲ客の설정処理
SELECTCASE FLAG:ＮＴＲ客の설정
	CASE  0
		TIMES LOCAL:1 , 1.00
		TIMES LOCAL:2 , 1.00
		TIMES LOCAL:4 , 1.00
		TIMES ARG:2 , 1.00
	CASE  1
		TIMES LOCAL:1 , 1.50
		TIMES LOCAL:2 , 1.50
		TIMES LOCAL:4 , 0.80
		TIMES ARG:2 , 0.80
	CASE  2
		TIMES LOCAL:1 , 3.00
		TIMES LOCAL:2 , 3.00
		TIMES LOCAL:4 , 0.50
		TIMES ARG:2 , 0.50
ENDSELECT

LOCAL:4 += (TALENT:ARG:반항적 + TALENT:ARG:프라이드높음 + TALENT:ARG:건방짐 + TALENT:ARG:츤데레) * 5 - (TALENT:ARG:겁쟁이 + TALENT:ARG:얌전함 + TALENT:ARG:프라이드낮음) * 10

SIF (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
	PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 뭐라고 할 수 없는 달콤한 향기를 풍기고 있다……


;ＮＴＲ好きフラグ
;放置日数*2（上限30％）の확률で声をかけられる（인기持ちはさらに+10％）
;ＮＴＲ상태の場合は50％
IF RAND:100 < LOCAL:1 || TALENT:ARG:ＮＴＲ > 0 && RAND:100 < 50 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
	PRINTL 
	
	;愛ＮＴＲ
	IF TALENT:ARG:ＮＴＲ == 1
		;위험일
		IF 위험일(ARG) == 1
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 뺨을 붉히고 미소지으면서 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 뭔가를 속삭이고 있다……
		;発情
		ELSEIF 위험일(ARG) == 2
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 매달리듯이 몸을 붙이고 무언가를 속삭이고 있다……
		;만월発情
		ELSEIF 위험일(ARG) == 3
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 매달리듯이 몸을 붙이고 무언가를 속삭이고 있다……
		;通常
		ELSE
			IF RAND:14 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"가")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 키스하고 있다……
			ELSEIF RAND:13 == 0
				PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)% 옆에서 %조사처리(CALLNAME:ARG,"는")% 얼굴이 새빨개져 있다. 테이블 밑에서 무슨 장난을 받고 있는 것 같다……
			ELSEIF RAND:12 == 0 
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%의 옆에 앉아서, 몸을 비비듯이 밀착시키고 있다……
			ELSEIF RAND:11 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 스커트의 안쪽을 만지작거려지며 황홀해 하고 있다……
			ELSEIF RAND:10 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 어깨를 안겨 귓가에 무언가 속삭여지고 있다
			ELSEIF RAND:9 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 그늘에서 서로 껴안고 있다……
			ELSEIF RAND:8 == 0
				PRINTFORMW %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% %조사처리(CALLNAME:ARG,"를")% 옆에 앉힌 채 허리에 손을 두르고 끌어 안으며 밀착되어 있다…
			ELSEIF RAND:7 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 엉덩이를 비비어져 얼굴을 붉히고 있다……
			ELSEIF RAND:6 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"와")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 손가락을 엮어 가며 작은 소리로 이야기에 열중하고 있다
			ELSEIF RAND:5 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 손가락을 엮으면서 친근한 듯이 말하고 있다
			ELSEIF RAND:4 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"가")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 키스하고 있다……
			ELSEIF RAND:3 == 0
				PRINTFORMW 허벅지를 쓰다듬는 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"를")% %조사처리(CALLNAME:ARG,"는")% 얼굴을 붉히며 받아들이고 있다
			ELSEIF RAND:2 == 0
				PRINTFORMW 끌어 안고 키스를 요구하는 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 %조사처리(CALLNAME:ARG,"는")% 수줍어하면서도 혀를 섞으며 응하고 있다
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 어깨를 안겨 기뻐하고 있다……！
			ENDIF
		ENDIF
	;淫ＮＴＲ
	ELSEIF TALENT:ARG:ＮＴＲ == 2
		;위험일
		IF 위험일(ARG) == 1
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님에게 몸을 밀착시키며 무언가를 속삭이고 있다……
		;発情
		ELSEIF 위험일(ARG) == 2
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님의 손이 자신의 치마 안에 들어오자 요염하게 미소 지었다……
		;만월発情
		ELSEIF 위험일(ARG) == 3
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님의 손을 자신의 치마 안에 넣으면서 요염하게 미소 지었다……
		;通常
		ELSE
			PRINTFORMW %조사처리(CALLNAME:ARG,"가")% 손님을 유혹하고 있다……
		ENDIF
	;통상
	ELSE
		PRINTFORMW %CALLNAME:ARG%에게 네토라레 취향의 손님이 말을 걸고 있다……
	ENDIF
	;誘いに乗るか판정
	;기본치0％+放置日数*2（上限なし）さらに즉각함락持ちは+50
	;これに함락度*10の마이ナス보정を入れる
	;ＮＴＲ상태の場合は無조건でついていく
	IF RAND:100 > 100 + 함락(ARG) * 10 - LOCAL:2 || TALENT:ARG:ＮＴＲ > 0 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
		;愛ＮＴＲ
		IF TALENT:ARG:ＮＴＲ == 1
			;위험일
			IF 위험일(ARG) == 1
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 눈을 글썽이면서 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 함께 가게 밖으로 나갔다……
			;発情
			ELSEIF 위험일(ARG) == 2
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 숨을 거칠게 쉬면서 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 함께 가게 밖으로 나갔다……
			;만월発情
			ELSEIF 위험일(ARG) == 3
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 숨을 거칠게 쉬면서 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 함께 가게 밖으로 나갔다……
			;通常
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"가")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 함께 화장실에 들어갔다……
			ENDIF
		;淫ＮＴＲ
		ELSEIF TALENT:ARG:ＮＴＲ == 2
			;위험일
			IF 위험일(ARG) == 1
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님에게 몸을 밀착시킨 채 가게 밖으로 나갔다……
			;発情
			ELSEIF 위험일(ARG) == 2
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 열에 들뜬 표정으로 손님과 함께 가게 밖으로 나갔다……
			;만월発情
			ELSEIF 위험일(ARG) == 3
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 열에 들뜬 표정으로 손님과 함께 가게 밖으로 나갔다……
			;通常
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님과 함께 가게 밖으로 나갔다……
			ENDIF
		;통상
		ELSE
			PRINTFORML %조사처리(CALLNAME:ARG,"가")% 네토라레 취향의 손님에게 유혹당해 가게 밖으로 나갔다……
		ENDIF
		PRINTFORML ・
		PRINTFORML ・・
		PRINTFORML ・・・
		;本番판정
		;기본치50％+放置日数*2（上限なし）さらに즉각함락持ちは+50
		;これに함락度*50の마이ナス보정を入れる
		;ＮＴＲ상태の場合は無조건でパコパコされる
		IF RAND:100 > 50 + 함락(ARG) * 50 - LOCAL:2 || TALENT:ARG:ＮＴＲ > 0 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
			LOCAL:3 = 1
			IF TALENT:ARG:남자 == 0 
				IF CFLAG:ARG:現ＮＴＲ進行度 > 10
					IF CFLAG:ARG:108 == 1
						CFLAG:ARG:108 = 0
						PRINTFORML %CALLNAME:ARG%의 자궁내 피임결계가 해제되어 버린 것 같다……
					ENDIF
					IF RAND:100 < 30 && CFLAG:ARG:109 == 0
						CFLAG:ARG:109 = 1
						PRINTFORML %조사처리(CALLNAME:ARG,"는")% 배란유발제를 입과 입을 통해서 받아먹었다……
					ENDIF
				ENDIF
				CALL NTR_RESTRANT_SEX, ARG, LOCAL:3
				PRINTFORML 

				SETCOLOR COLOR("pink")
				;愛ＮＴＲ
				IF TALENT:ARG:ＮＴＲ == 1
					;위험일
					IF 위험일(ARG) == 1
						IF RAND:7 == 0
							PRINTFORML 방 안에 침대가 삐걱거리는 소리가 울린다……
							PRINTFORMW 침대에서 위를 향해 누운 %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 몸을 맡기고, 밀려 넘어진 채 쾌락에 허덕이고 있다……
							PRINTFORML %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"가")% 사정할 것 같다、고 %CALLNAME:ARG%에게 전하자 %조사처리(CALLNAME:ARG,"는")% 웃는 얼굴로 『안에다 싸 줘』라고 속삭였다……
							PRINTFORML 
							PRINTFORMW 그 순간、질내에서 페니스가 퍼득이고 %NTRNAME(CFLAG:ARG:함락キャラ)%의 정액이 배란일의 자궁을 가득 채워 간다……
							PRINTFORMW 두 사람은 사정이 끝난 후에도 연결된 채로 키스를 나누면서 마음을 확인한다……
							PRINTFORML 
							SIF TALENT:ARG:아내
								PRINTFORMW 테이블 위에는 벗은 반지가 놓여 있었다……
						ELSEIF RAND:6 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%의 정액에 자궁을 채워지면서 기쁜 듯이 웃고 있다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 하복부에 손을 올린 채 행복한 표정으로 가게에 돌아왔다……
						ELSEIF RAND:5 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 호텔에 도착하자마자 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 달라붙어, 귓속말로 위험일이라는 사실을 알렸다……
							PRINTFORML %조사처리(CALLNAME:ARG,"가")% 바라는 것을 알아차린 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 참지 못하고 %CALLNAME:ARG%의 속옷에 손을 걸었다……
							PRINTFORMW 
							PRINTFORML 시간을 잊은 채 몰두하고 있던 자식 만들기 섹스를 마친 %조사처리(CALLNAME:ARG,"는")% 
							PRINTFORMW 쏟아부어진 아기 씨앗에 만발해、부드럽게 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 미소 지었다……
						ELSEIF RAND:4 == 0
							PRINTFORML 위를 보는 채 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"를")% 받아들이고 있는 %조사처리(CALLNAME:ARG,"는")% 발을 엮은 채 물기를 띤 눈동자로 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"를")% 바라보고 있다……
							PRINTFORMW 나신을 밀착시키며 더 깊은 삽입을 바라는 %CALLNAME:ARG%의 신체는、자궁까지 닿는 사정을 기다리며 바라고 있다……
							PRINTFORML 그리고 뜨거운 사정을 가장 안쪽에서 느끼자 %조사처리(CALLNAME:ARG,"는")% 뒤로 몸을 젖히면서도 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 매달려、
							PRINTFORML 여전히 페니스를 놓아 주지 않고 몸을 겹친다……
							PRINTFORMW 
							PRINTFORML 격렬하게 몇 번이나 몸을 섞은 뒤 겨우 페니스를 해방시킨 %조사처리(CALLNAME:ARG,"는")%
							PRINTFORMW 질구부터 넘치는 정액을 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 보이면서 오늘이 위험일이라고 알리며、생긋 미소 지었다……
						ELSEIF RAND:3 == 0
							PRINTFORML 질 안쪽에 꽂았을 때의 %CALLNAME:ARG%의 반응에 평소와는 다른 열기를 감지한 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 
							PRINTFORMW %조사처리(CALLNAME:ARG,"가")% 위험일이라는 것을 깨닫고、대면좌위로 %CALLNAME:ARG%의 허리를 단단히 안은 채 가장 깊은 곳의 자극에 집중하기 시작했다……
							PRINTFORML 밀착한 허리놀림을 통해 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"가")% 진심으로 자신을 임신시킬 생각이라는 것을 알고、
							PRINTFORMW %CALLNAME:ARG%의 기대와 흥분은 더욱 높아지고 있다……
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 안쪽을 빙글빙글 괴롭혀지며 몇 번을 계속해서 가고 있었지만、
							PRINTFORMW 한층 더 강렬한 절정과 함께 질이 단번에 페니스를 물고、대망의 질내사정이 방문했다……！
							PRINTFORMW 격렬한 쾌감과 여자로서의 기쁨에 전율하며、%조사처리(CALLNAME:ARG,"는")% 눈물을 흘리며 질내에 퍼져 가는 %NTRNAME(CFLAG:ARG:함락キャラ)%의 정액을 맛봤다……
						ELSEIF RAND:2 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 위험일이니 오늘은 안 된다며 마음을 먹고 있었음이 분명했지만, 
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게 껴안긴 그 체온을 몸으로 느끼자 다짐한 마음을 본능이 이겼다……
							PRINTFORML %NTRNAME(CFLAG:ARG:함락キャラ)%의 정자를 자궁에 받아들이고 싶다、%NTRNAME(CFLAG:ARG:함락キャラ)%에게 임신되고 싶다고 바라는 마음에,
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 거스를 수 없었다……
						ELSE
							PRINTFORML %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% %조사처리(CALLNAME:ARG,"가")% 위험일이라는 것을 알자、평소보다 격렬하게 %조사처리(CALLNAME:ARG,"를")% 원하고 있다…
							PRINTFORMW 
							PRINTFORML 몇 번씩 대량으로 쏟아진 정액이 흐르는 것을 놔둔 채 한계를 맞이하고 녹초가 되어 침대에 누운 %CALLNAME:ARG%에게
							PRINTFORMW %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 다시 페니스를 꽂아、몸을 흔들기 시작했다……
							PRINTFORML %CALLNAME:ARG%의 자궁을 %NTRNAME(CFLAG:ARG:함락キャラ)%의 정액으로 채우고 제대로 교배를 완료할 때까지
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%의 수컷 본능이 행위를 끝내려고 하지 않았다……
						ENDIF
					;発情
					ELSEIF 위험일(ARG) == 2
						PRINTFORML %조사처리(CALLNAME:ARG,"는")% 위험일인 것도 아랑곳하지 않고 욕망이 솟구치는 대로 %NTRNAME(CFLAG:ARG:함락キャラ)% 위에서 허리를 흔들고 있다……
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 일을 끝마치는 시간까지 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 몸을 섞어 질내를 정액으로 계속 채웠다
					;만월発情
					ELSEIF 위험일(ARG) == 3
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 욕망이 솟구치는 대로 %NTRNAME(CFLAG:ARG:함락キャラ)%의 위에서 허리를 흔들고 있다……
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 일을 끝마치는 시간까지 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 몸을 섞어 질내를 정액으로 계속 채웠다……
					;通常
					ELSE
						IF RAND:16 == 0
							PRINTFORMW 소리를 죽이는 %CALLNAME:ARG%의 질내를 %NTRNAME(CFLAG:ARG:함락キャラ)%의 씨앗이 빈틈없이 가득 채웠다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 상기된 얼굴로 비틀비틀 접객을 재개했다……
						ELSEIF RAND:15 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 양 팔을 뒤로 묶이고、가슴을 내밀은 자세로 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")% 몸을 섞고 있다……
							PRINTFORM  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"가")% 허리를 흔들 때마다 쭈욱 내민 
							IF TALENT:ARG:거유 || TALENT:ARG:폭유 || TALENT:ARG:魔乳
								PRINTFORMW 찰지게 여문 유방이 야릇하게 흔들리고 있다……
							ELSEIF TALENT:ARG:빈유 || TALENT:ARG:절벽
								PRINTFORMW 살짝 부풀어 오른 곳이、봉오리를 꼿꼿하게 새우면서 부들부들 떨고 있다……
							ELSE
								PRINTFORMW 부드러운 유방이 자기주장을 하듯이 흔들리고 있다……
							ENDIF
							PRINTFORML 
							PRINTFORMW  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 야릇한 소리를 내는 %CALLNAME:ARG% 안에다 확실하게 자신의 유전자를 새겨 넣었다……
						ELSEIF RAND:14 == 0
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게 뒤에서 박히면서 %조사처리(CALLNAME:ARG,"는")% 달콤한 교성을 올리고 있다……
							PRINTFORMW %CALLNAME:ARG%의 자포자기한 질은 조금이라도 많은 정자를 받아들이려고 %NTRNAME(CFLAG:ARG:함락キャラ)%의 페니스를 꾹 하고 잡아 떼어 놓지 않는다……
							PRINTFORML
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게 여러 번 진심으로 교배된 후、%조사처리(CALLNAME:ARG,"는")% 키스를 나누며 접객업으로 돌아갔다……
						ELSEIF RAND:13 == 0
							PRINTFORMW 좁은 독방에서 두 사람의 공간을 확보하며 %조사처리(CALLNAME:ARG,"과")% %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 강하게 껴안은 채 서로의 입술을 탐했다……
							PRINTFORMW 완전히 준비가 된 %조사처리(CALLNAME:ARG,"는")% 관철되는 것을 요구하며 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 무의식적으로 허리를 비빈다……
							PRINTFORMW 그리고 %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%의 페니스를 받아들이며、%NTRNAME(CFLAG:ARG:함락キャラ)%의 귓전에 달콤한 교성을 올리기 시작했다……
						ELSEIF RAND:12 == 0
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게서부터 부드럽게 달콤한 키스를 여러 번 받고 있는 사이에, %CALLNAME:ARG%의 비밀 장소는 완전히 눅진눅진하게 되어 있었다……
							PRINTFORMW 속옷에서 흘러넘치는 애액을 알아챈 %조사처리(CALLNAME:ARG,"는")%、부끄러워하면서도 열정적으로 삽입을 조르는 것이었다……
						ELSEIF RAND:11 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 웨이트리스 의상의 위에서부터 %NTRNAME(CFLAG:ARG:함락キャラ)%의 애무를 받아 황홀해 하고 있다……
						ELSEIF RAND:10 == 0
							PRINTFORMW  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"과")% 격렬한 행위를 여러 번 반복한 후,%조사처리(CALLNAME:ARG,"는")% 접객업으로 돌아갔지……만、조금 주위의 시선이 이상하다……
							PRINTFORMW 아무래도 %CALLNAME:ARG%의 달콤한 목소리가 밖으로 새어 나오고 있었던 것 같다……
						ELSEIF RAND:9 == 0
							PRINTFORMW  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% %조사처리(CALLNAME:ARG,"를")% 뒤에서 격렬하게 박아 대며,가슴이나 음부에의 애무를 빠뜨리지 않는다……
							PRINTFORMW %CALLNAME:ARG%의 약한 곳을 파악해 낸 손가락이 %조사처리(CALLNAME:ARG,"를")% 오늘 몇 번째의 절정에 간단하게 몰아넣었다……
							PRINTFORMW 그리고、머릿속이 하얗게 된 가운데 더욱 자극 받아、%조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%에게 몸도 마음도 맡겨 버렸다……
						ELSEIF RAND:8 == 0
							PRINTFORMW 손님 곤란합니다 등등을 말하며、웨이트리스 차림인 채의 플레이를 만끽하는 바보 커플이 거기 있었다.
							PRINTFORMW %조사처리(CALLNAME:ARG,"과")%  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 잔뜩 기분이 올라 배역에 몰두해 즐겁고 격렬하게 섹스에 몰두했다……
						ELSEIF RAND:7 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"과")%  %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"는")% 양손을 맞잡은 채、시선을 얽히게 바라보며 몇 번이나 뜨거운 입맞춤을 하고 있다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 흐리멍덩한 눈빛으로 %조사처리(NTRNAME(CFLAG:ARG:함락キャラ),"와")%의 키스에 열중하며 타액의 교환을 계속하고 있다……
							PRINTFORMW 길고 뜨거운 입맞춤으로 완전히 달아올라 버린 %CALLNAME:ARG%의 몸은、%NTRNAME(CFLAG:ARG:함락キャラ)%의 페니스를 받아들이는 것만으로 절정에 올랐다……
						ELSEIF RAND:6 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 긴 휴식 후、완전히 충실해진 얼굴로 가게에 돌아왔다……
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게 몇 번이나 사랑 받은 지 얼마 안 된 탓인지, 묘하게 행동이 요염하다……
						ELSEIF RAND:5 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% %NTRNAME(CFLAG:ARG:함락キャラ)%의 남근에, 사랑스러운 듯이 혀를 기게 했다……
							PRINTFORMW %NTRNAME(CFLAG:ARG:함락キャラ)%에게 거칠게 짓눌리는 것을 상상하면서 펠라치오로 %CALLNAME:ARG%의 속옷은 이미 질척질척한 듯하다……
						ELSEIF RAND:4 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 변기에 앉아 있는 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 대면좌위로 찔려 올려지고 있다……
							PRINTFORMW 두 사람은 사랑을 확인하듯이 입술을 포개면서、절정의 여운에 잠겨있다……
						ELSEIF RAND:3 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 세면대에 손을 대고、%NTRNAME(CFLAG:ARG:함락キャラ)%의 괴롭힘에 신음하고 있다……
							PRINTFORMW 거울에 비친 자신의 황홀해 하는 얼굴을 보면서、%NTRNAME(CFLAG:ARG:함락キャラ)%의 정액을 태내에 흘려보냈다……
						ELSEIF RAND:2 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 변기에 앉아 있는 %NTRNAME(CFLAG:ARG:함락キャラ)%の의 페니스를 물고서 눈을 치켜뜨고 있다……
							PRINTFORMW 페니스에 붙은 정액을 혀로 빨아 주자、%NTRNAME(CFLAG:ARG:함락キャラ)%(이)가 상냥하게 머리를 쓰다듬었다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 기쁜 듯이 뺨을 붉히고、더욱 세심하게 혀를 움직이기 시작했다……
							PRINTFORML 
							PRINTFORMW 봉사를 계속하는 %CALLNAME:ARG%의 질구에서는 방금 전에 방출된 %NTRNAME(CFLAG:ARG:함락キャラ)%의 정액이 방울져 떨어지고 있다……
						ELSE
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 벽에 손을 댄 모습으로 %NTRNAME(CFLAG:ARG:함락キャラ)%에게 뒤에서 범해지고 있다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 엉덩이살을 붙잡혀、천천히 확실하게 %NTRNAME(CFLAG:ARG:함락キャラ)%의 씨앗을 받아들였다……
						ENDIF
					ENDIF
				;淫ＮＴＲ
				ELSEIF TALENT:ARG:ＮＴＲ == 2
					;위험일
					IF 위험일(ARG) == 1
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손님의 정액이 위험일인 질내에 쏟아질 때마다、기쁨의 소리를 내고 있다……
					;発情
					ELSEIF 위험일(ARG) == 2
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 마치 짐승처럼 손님과 몸을 섞고 있다……
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 생식 본능대로 본 적도 없는 남자의 씨앗을 자궁 내에 받아들이고 있다……
					;만월発情
					ELSEIF 위험일(ARG) == 3
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 마치 짐승처럼 손님과 몸을 섞고 있다……
						PRINTFORMW 달빛을 받은 %조사처리(CALLNAME:ARG,"는")% 남자의 위에서 춤을 추듯이 허리를 흔들고 있다……
					;通常
					ELSE
						IF RAND:6 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 골목에 들어가 벽에 손을 대고、내밀어진 둔부를 덮는 스커트를 살짝 들어올렸다……
							PRINTFORMW 속옷을 입지 않은 꿀단지는 이미 물기를 머금어、남자를 유혹하는 암컷의 향기가 손님의 본능을 자극했다……
							PRINTFORML 
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 난폭하게 엉덩이 살을 붙잡히고、짐승처럼 범해져、몇 번이고 손님의 씨앗을 태내에 받아들였다……
						ELSEIF RAND:5 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 문 닫는 시간까지 손님과 어울린 모양이다……
						ELSEIF RAND:4 == 0
							PRINTFORML 침대에 걸터 앉은 %조사처리(CALLNAME:ARG,"는")% 발을 넓게 벌려、들리도록 쿠츄쿠츄하는 물소리를 내면서
							PRINTFORMW 핑크색의 음순을、고객에게 보이게 손가락으로 천천히 열어 간다.
							PRINTFORML 요염하고 강렬한 암컷의 냄새를 발하면서, 번들번들하게 젖은 치부는 꿈틀거리며, 사람을 불러들이고 있다……
							PRINTFORMW 그 자극적인 광경에 손님들은 매료되어, 숨 가쁘게 삽입하고 그대로 일심불란하게 허리를 움직였다……
						ELSEIF RAND:3 == 0
							PRINTFORMW 평소 이목구비에서 전혀 상상할 수없는 표정으로, %조사처리(CALLNAME:ARG,"는")% 쾌락을 탐했다。
							PRINTFORML 고객의 야생적이고 단정적인 고문에, 등에 손톱을 세워 크게 신음을 올리며
							PRINTFORMW 자궁에까지 닿을 것 같은 사정을 질내에 받고、몇 번이나 격렬한 절정을 맛보고 있다……
						ELSEIF RAND:2 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 완전히 녹은 얼굴로 격렬하게 들이닥치는 페니스에 취해 있다……
							PRINTFORML 강하게, 깊이 침입할 때마다 %조사처리(CALLNAME:ARG,"는")% 뒤로 몸을 젖히며 달콤한 목소리를 올리고 있다……
							PRINTFORMW 밀려 드는 쾌감을 오랫동안 탐내고 있었다……
						ELSE
							PRINTFORMW 손님의 페니스를 맛보는 듯이 %조사처리(CALLNAME:ARG,"는")% 스스로 허리를 튕기며 그 느낌을 즐기고 있다……
						ENDIF
					ENDIF
				;통상
				ELSE
					;위험일
					IF 위험일(ARG) == 1
						IF RAND:8 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 네토리 취미인 손님의 교묘한 말씨에 휩쓸려 위험일인 질내에 정액을 흘려 넣어졌다……
							PRINTFORMW 돌아온 %조사처리(CALLNAME:ARG,"는")% 입에 손을 댄 채、빠른 걸음으로 샤워실에 들어갔다……
						ELSEIF RAND:7 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 위험일이라는 것을 알면서도 네토리 취미 손님을 받아들이고 질에 질내사정을 허용하고 말았다……
							PRINTFORMW 경솔한 행위에 후회하면서도, 하복부에 느껴지는 충만함에 %조사처리(CALLNAME:ARG,"는")% 당황하고 있다……
						ELSEIF RAND:6 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"가")% 가게에서 돌아오는 길에, 네토리 취미 남자의 정액이 질에서 허벅지에 쏟아졌다……
							PRINTFORMW 조금 심한 질내사정에 교성을 높인 것을 떠올리며, 스스로가 위험일이라는 사실을 겨우 떠올렸다……
						ELSEIF RAND:5 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 위험일의 질내에、네토리 취미의 남자에게 교배를 허용하고 말았다……
							PRINTFORMW 안 되는 일이라는 걸 알면서도 몇 시간 전에 자신의 신체가 맛본 즐거움을 잊을 수 있을 거라고는 생각되지 않았다……
						ELSEIF RAND:4 == 0
							PRINTFORMW %CALLNAME:ARG%의 위험일인 질에、네토리 취미 남자의 정액을 여러 번 받아 엉망진창이 되어 있다……
							PRINTFORMW 멈출 수 있는 선을 완전히 넘었다는 것을、%조사처리(CALLNAME:ARG,"는")% 겨우 알아차렸다……
						ELSEIF RAND:3 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% '오늘은 위험한 날이니까'라고는 얘기했지만
							PRINTFORMW 네토리 취미의 남자에게 강하게 껴안기자 간단하게 함락되어 잔뜩 아기 씨앗을 들이부어졌다……
						ELSEIF RAND:2 == 0
							PRINTFORMW 위험일의 질에 반복해서 교배되고 그것을 자연스럽게 받아들이고있는 일에 %조사처리(CALLNAME:ARG,"는")% 동요했다……
							PRINTFORMW 마음도 신체도 안쪽으로부터 네토리 취미의 남자의 취향으로 바뀌어、%조사처리(CALLNAME:ARG,"는")% 이제 돌아갈 수 없다는 생각이 들었다……
						ELSE
							PRINTFORMW 위험일이니까 라고 스스로를 타일렀지만, 상냥한 말과 달콤한 분위기에 %조사처리(CALLNAME:ARG,"는")% 간단하게 흘러가 버렸다……
							PRINTFORMW 감미로운 시간을 잠시 보낸 후、집에 돌아온 %조사처리(CALLNAME:ARG,"는")% 고간의 느낌과 자신의 약함에 머리를 감싸쥐고 있다……
						ENDIF
					;発情
					ELSEIF 위험일(ARG) == 2
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 달아오른 신체를 억누르지 못하고、위험한 날이라는 것을 알면서도 네토라레 취미의 손님의 정액을 질내에 받아들이고 말았다……
						PRINTFORMW 발정 상태에서 깨어난 %조사처리(CALLNAME:ARG,"는")% 자신이 해 버린 일을 몸을 떨면서 후회하고 있다……
					;만월発情
					ELSEIF 위험일(ARG) == 3
						PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 달아오른 신체를 억누르지 못하고、네토라레 취미의 손님의 정액을 질내에 받아들이고 말았다……
						PRINTFORMW 발정 상태에서 깨어난 %조사처리(CALLNAME:ARG,"는")% 자신이 해 버린 일을 후회하고 있다……
					;通常
					ELSE
						IF RAND:7 == 0
							PRINTFORMW 휴식 시간을 크게 지나서 돌아온 %조사처리(CALLNAME:ARG,"는")% 애매모호한 변명을 하면서 늦은 것을 사죄하고 있다……
						ELSEIF RAND:6 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 가게로 돌아가자마자 화장실로 뛰어들었다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 간신히 나오긴 했어도 옷의 얼룩을 걱정하고 있는 것 같다……
						ELSEIF RAND:5 == 0
							PRINTFORMW 가게에 돌아온 %조사처리(CALLNAME:ARG,"는")% 농후한 수컷의 냄새를 풍기는 채 접객에 돌아왔다……
						ELSEIF RAND:4 == 0
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 밖에 나갔던 일을 사과하고는 새침한 얼굴로 접객업에 돌아왔다……
						ELSEIF RAND:3 == 0
							PRINTFORMW 땀에 젖은 모습으로 다시 가게에 돌아온 %조사처리(CALLNAME:ARG,"는")% 나른한 모습으로 접객을 시작했다……
						ELSEIF RAND:2 == 0
							PRINTFORMW 잠시 후、%조사처리(CALLNAME:ARG,"는")% 달아오른 얼굴로 가게에 돌아왔다……
						ELSE
							PRINTFORMW 돌아온 %조사처리(CALLNAME:ARG,"는")% 허벅지의 흰색 점액을 흘린 채로 접객을 재개했다……
						ENDIF
					ENDIF
				ENDIF
				RESETCOLOR
				;労働結果の値：ＮＴＲ
				TFLAG:86 += 1000
			ENDIF
		ELSE
			PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 입꼬리를 당기고、복장을 고치면서 돌아왔다……	
			PRINTFORML 
			LOCAL:3 = 3
			CALL NTR_RESTRANT_SEX, ARG, LOCAL:3
			;労働結果の値：ＮＴＲ
			TFLAG:86 += 1000
		ENDIF
	;회피
	ELSE
		;放置日数によって변화
		IF 함락(ARG) * 50 - LOCAL:2 > 80
			IF RAND:3 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 웃는 얼굴로 나누고 있다
			ELSEIF RAND:2 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 사무적으로 처리했다
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 잘 처리했다
			ENDIF
		ELSEIF 함락(ARG) * 50 - LOCAL:2 > 60
			IF RAND:5 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 즐거운 듯이 회화하고 있다
			ELSEIF RAND:4 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 웃는 얼굴로 대답하고 있다
			ELSEIF RAND:3 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 음란한 농담에 곤란해 하는 표정을 짓고 있다
			ELSEIF RAND:2 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 수줍은 얼굴로 질문에 답하고 있다
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 가벼운 잡담을 하고 있는 것 같다
			ENDIF
			CFLAG:ARG:放置日数 += 1 + RAND:3
		ELSEIF 함락(ARG) * 50 - LOCAL:2 <= 60
			IF RAND:7 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 신체를 서로 기대는 듯이 하며 회화하고 있다…
			ELSEIF RAND:6 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 손을 붙들리는 것이 반드시 싫지만은 않은 것 같다…
			ELSEIF RAND:5 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 엉덩이를 만져져 불평하고 있지만, 어떻게 봐도 즐거워 보인다…
			ELSEIF RAND:4 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 이야기에 열중하고 있다
			ELSEIF RAND:3 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 성희롱 질문에 머뭇머뭇거리면서도 성실하게 대답하고 있다…
			ELSEIF RAND:2 == 0
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 허벅지를 쓰다듬어져 당황하고 있다
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 작은 소리로 이야기에 열중하고 있다
			ENDIF
			CFLAG:ARG:放置日数 += 1 + RAND:3
		ENDIF
		IF CFLAG:ARG:構ったフラグ == 1
			CDFLAG:ARG:キャラ間好感度:(98) += 10
		ELSE
			CDFLAG:ARG:キャラ間好感度:(98) += 10 + CFLAG:ARG:放置日数
		ENDIF
			
	ENDIF
	PRINTFORML 
ENDIF
;顧客만족도が低いほどクレームフラグ
IF RAND:100 > ARG:2 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
	PRINTFORML 
	PRINTFORML %CALLNAME:ARG%에게 인상 나쁜 남자가 클레임을 걸어왔다……
	PRINTFORML ・
	PRINTFORML ・・
	PRINTFORMW ・・・
	;クレーム対応可否판정
	;淫ＮＴＲの場合は納める気なし
	IF RAND:100 > ARG:2 + RAND:(11 + ABL:ARG:기교 + ABL:ARG:봉사정신) || TALENT:ARG:ＮＴＲ == 2 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
		PRINTFORML 
		PRINTFORML %조사처리(CALLNAME:ARG,"는")% 능숙하게 대처하지 못했다……
		;身体でクレーム処理판정
		;淫ＮＴＲの場合はすぐにパコパコ
		IF RAND:100 > LOCAL:4 || TALENT:ARG:ＮＴＲ == 2 || (CFLAG:ARG:그외 == 1117 || CFLAG:ARG:그외2 == 1117 || CFLAG:ARG:그외3 == 1117)
			;윤간人数
			LOCAL:5 = 3 + RAND:4
			;女の場合
			IF TALENT:ARG:남자 == 0 

				IF  TALENT:ARG:ＮＴＲ == 2
					PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 남자의 사무실에서 실내에 있던 {LOCAL:5}사람의 남자들에게 몸을 사용하여 클레임을 처리했다……
				ELSE
					PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 남자의 사무소에 억지로 끌려가 실내에 있던 {LOCAL:5}사람의 남자들에게 윤간 당했다……
				ENDIF
				PRINTFORML 
				SIF CFLAG:ARG:배란유발제 == 1
					GOTO OKUSURI
				IF CFLAG:ARG:現ＮＴＲ進行度 > 10
					IF CFLAG:ARG:자궁내피임결계 == 1
						CFLAG:ARG:자궁내피임결계 = 0
						PRINTFORML %CALLNAME:ARG%의 자궁내 피임결계가 해제되어버렸다……
					ENDIF
					IF RAND:100 < 30 && CFLAG:ARG:자궁내피임결계 == 0
						CFLAG:ARG:배란유발제 = 1
						IF RAND:2 == 0
							PRINTFORML %조사처리(CALLNAME:ARG,"는")% 배란유발제를 먹었다……
						ELSE
							$OKUSURI
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 이상한 약을 주사 당했다……
							CFLAG:ARG:음란度+= 100 - ARG:2 + CFLAG:ARG:現ＮＴＲ進行度*10
							LOCAL:6 = 1
						ENDIF
					ENDIF
				ENDIF

				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 정액투성이인 모습으로 자초지종이 기록된 테이프와 함께 가게 앞에 버려져 있었다……	
				PRINTFORML 
				LOCAL:3 = 2
				CALL NTR_RESTRANT_SEX, ARG, LOCAL:3, LOCAL:5

				SETCOLOR 204,51,255

				PRINTFORML 
				IF 위험일(ARG)
					PRINTFORMW 테이프에는 위험일일 터인 %조사처리(CALLNAME:ARG,"가")% 차례차례로 질내에 사정 당하고 있는 영상이 찍혀 있었다……
				ELSEIF TALENT:ARG:ＮＴＲ == 2
					PRINTFORMW 테이프에는 %조사처리(CALLNAME:ARG,"가")% 질내사정 당하면서 『피스 사인(V사인)』을 하고 있는 영상이 찍혀 있었다……	
				;배란유발제
				ELSEIF CFLAG:ARG:배란유발제 == 1
					;妖しい薬
					IF LOCAL:6 == 1
						IF RAND:4 == 0
							PRINTFORMW 테이프에는 %조사처리(CALLNAME:ARG,"가")% 군침을 늘어뜨리면서、남자 위에서 허리를 계속 흔드는 영상이 찍혀 있었다……
							PRINTFORMW 내밀어진 페니스를 맛있는 듯이 물면서、여러 명의 남자들에게 계속 질내사정 당하고 있다……
						ELSEIF RAND:3 == 0
							PRINTFORML 테이프에는 남자에게 배면좌위로 범해지고 있는 %CALLNAME:ARG%의 영상이 찍혀 있었다……
							PRINTFORMW %CALLNAME:ARG%의 다리는 크게 벌려져、결합부가 훤히 보이고 있다……
							PRINTFORMW 남자는 음란한 말을 외치는 %CALLNAME:ARG%의 안에 사정을 끝마치고、페니스를 뽑았다……
							PRINTFORML 
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 쾌락에 녹아내릴 것같은 얼굴로 『극태 자지에 교배 당해 버렸습니다아♡』라며 피스 사인(V사인)을 하고 있다……
							PRINTFORMW 질구에서는 %CALLNAME:ARG%의 등 뒤에서 히죽거리는 남자의 정액이 넘쳐 나오고 있었다……
						ELSEIF RAND:2 == 0
							PRINTFORMW 테이프에는 침대에 엎드려 누워있는 %조사처리(CALLNAME:ARG,"가")%、남자에게 양다리를 안긴 듯한 자세로 허리를 쳐붙여지고 있는 영상이 찍혀있었다……
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 정숙치 못하게 입을 열고、황홀한 눈으로 쾌락의 소용돌이에 몸을 맡기고 있다……
							PRINTFORML 
							PRINTFORMW 남자가 정액을 질내에 털어 넣자、%조사처리(CALLNAME:ARG,"는")% 혀를 내밀며 수정 당하는 기쁨에 몸을 떨었다……
						ELSE
							PRINTFORMW 테이프에는 자신의 비소를 벌리면서 질내사정을 조르는 %CALLNAME:ARG%의 영상이 찍혀 있었다……
							PRINTFORMW 쾌락에 녹아내릴 것 같은 얼굴을 한 %CALLNAME:ARG%에게、차례차례 남자들이 질내사정을 하는 모습이 생생하게 찍혀 있었다……
						ENDIF
					;배란유발제
					ELSE
						IF RAND:2 == 0
							PRINTFORMW 테이프를 재생하자 배란제를 먹은 것을 깨달은 %조사처리(CALLNAME:ARG,"가")% 새파래진 얼굴로 필사적으로 저항하는 모습이 비춰지고 있었다……
							PRINTFORMW 그러나 저항도 허망하게 %조사처리(CALLNAME:ARG,"는")% 몸집이 커다란 남자에게 혀벅지를 안기듯이 끌어당겨져、확실하게 질내에 정액을 퍼부어졌다……
							PRINTFORML 
							PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 지나친 쇼크에 양팔을 늘어뜨린 채、정신을 놓고 말았다……
						ELSE
							PRINTFORMW 테이프에는 배란제를 먹은 %조사처리(CALLNAME:ARG,"가")% 문신을 한 남자에게 몇 번이고 질내사정 당하는 영상이 찍혀 있었다……	
						ENDIF
					ENDIF
				;통상
				ELSE
					IF RAND:6 == 0
						PRINTFORMW 테이프에는 %조사처리(CALLNAME:ARG,"가")% 울부짖으면서 범해지는 영상이 찍혀 있었다……
					ELSEIF RAND:5 == 0
						PRINTFORML 테이프를 재생하자 불안한 얼굴로 앉아있는 %CALLNAME:ARG%의 영상이 찍혀 있었다……
						PRINTFORMW 화면에서 『해라』라고 말하는 남자의 목소리가 들리자、페니스를 발기시킨 남자들이 일제히 덤벼들었다
						PRINTFORMW 화면에서는 %CALLNAME:ARG%의 비명과 남자들의 웃음소리가 들려오고、몰려든 남자들의 틈새로 비어져 나온 발목에는 찢어진 속옷이 팔랑팔랑 흔들리고 있다
						PRINTFORML 
						PRINTFORMW 마지막으로 비춰진 것은、너덜너덜한 복장으로 정액을 뒤집어쓴 채로、멍하니 주저앉아 있는 %CALLNAME:ARG%의 모습이었다……
					ELSEIF RAND:4 == 0
						PRINTFORML 테이프에는 바닥에 깔아눕혀진 %조사처리(CALLNAME:ARG,"가")%、필사적으로 저항하는 영상이 찍혀 있었다……
						PRINTFORMW 양손으로 필사적으로 밀어내려고 했지만、저항도 헛되이 머리를 바닥에 억눌리면서 양아치의 육봉을 삽입 당해 버렸다……
						PRINTFORML 
						PRINTFORMW 양아치가 입꼬리를 끌어올리면서 질내에 사정을 시작하자、%CALLNAME:ARG%의 눈동자는 절망의 색으로 물들면서 눈물을 흘렸다……
						PRINTFORMW 저항할 기력을 잃은 %조사처리(CALLNAME:ARG,"는")% 차례차례로 남자들의 노리개가 되고 있었다……
					ELSEIF RAND:3 == 0
						PRINTFORMW 테이프에는 남자들에게 억눌리면서、질내사정 당하고 있는 %CALLNAME:ARG%의 결합부가 클로즈업으로 찍혀 있었다……
					ELSEIF RAND:2 == 0
						PRINTFORMW 테이프에는 양손을 뒤로 묶이고、눈가리개를 한 %조사처리(CALLNAME:ARG,"가")% 뒤로 범해지는 영상이 찍혀 있었다……
						PRINTFORMW 질내를 알지 못하는 남자의 정액으로 더럽혀질 때마다、비통한 신음을 지르고 있다……
					ELSE
						PRINTFORMW 테이프에는 양손이 묶인 %조사처리(CALLNAME:ARG,"가")% 침대 위에서 살찐 아저씨에게 범해지는 영상이 찍혀 있었다……
						PRINTFORMW 살찐 아저씨는 처진 아랫배를 흔들면서、눈물을 흘리는 %CALLNAME:ARG%에게 허리를 쳐 붙이고 있다……
					ENDIF
				ENDIF
				RESETCOLOR

				;労働結果の値：身体でクレーム処理
				TFLAG:86 += 200
			ENDIF
		;お口でクレーム処理
		ELSE
			;労働結果の値：お口でクレーム処理
			TFLAG:86 += 100
			IF TALENT:ARG:남자 == 0 
				IF RAND:2 == 0
					PRINTFORML %조사처리(CALLNAME:ARG,"는")% 남자에게 화장실에 끌려 들어가、입으로 봉사를 강요 당했다……
				ELSE
					PRINTFORML %조사처리(CALLNAME:ARG,"는")% 테이블 아래에서 입으로 봉사를 강요 당했다……
				ENDIF
			ENDIF
			LOCAL:3 = 4
			CALL NTR_RESTRANT_SEX, ARG, LOCAL:3
		ENDIF
	;クレーム処理成功
	ELSE

;2021/8/21　加筆修正
;結果毎にTFLAG:86の値を入れるのはエラーの元になるので
;「丸く収めた」「セクハラで丸く収めた」で分岐して、その中でさらに分岐するように変更
;RAND:2 で分岐させるには「セクハラで丸く収めた」側の結果が一つ少なかったので加筆
		IF RAND:2 == 0
			;労働結果の値：クレーム処理を丸く収めた
			TFLAG:86 += 10
			IF RAND:4 == 0
				PRINTFORML %CALLNAME:ARG%의 빠른 응대에, 손님의 분노는 곧 가라앉았다.
			ELSEIF RAND:3 == 0
				PRINTFORML %조사처리(CALLNAME:ARG,"는")% 능숙하게 받아넘겨、그 자리를 정리했다
			ELSEIF RAND:2 == 0
				PRINTFORML %조사처리(CALLNAME:ARG,"는")% 계속해서 머리를 숙여、어떻게든 손님을 진정시켰다
			ELSE
				PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 잘 처리할 수 있었던 것 같다
			ENDIF
		ELSE
			;労働結果の値：クレーム処理でセクハラを受けた
			TFLAG:86 += 20
			IF RAND:4 == 0
				PRINTFORML %조사처리(CALLNAME:ARG,"는")% 손님이 돌아갈 때까지 위자료 대신이라며 가슴을 비비길 계속했다……
			ELSEIF RAND:3 == 0
				PRINTFORML %조사처리(CALLNAME:ARG,"는")% 고객에 동석을 강요 당해、잔뜩 성희롱을 받고 말았다
			ELSEIF RAND:2 == 0
				PRINTFORML 성의를 보이면 용서한다는 말에, 명령하는 대로 스커트를 걷어올려、우는 눈으로 속옷을 드러냈다……
			ELSE
				PRINTFORML %조사처리(CALLNAME:ARG,"는")%자신이 입고 있는 속옷을 내미는 것으로 용서받았다……
			ENDIF
		ENDIF

		; IF RAND:7 == 0
		; 	PRINTFORML %CALLNAME:ARG%의 빠른 응대에, 손님의 분노는 곧 가라앉았다.
		; ELSEIF RAND:6 == 0
		; 	PRINTFORML %조사처리(CALLNAME:ARG,"는")% 능숙하게 받아넘겨、그 자리를 정리했다
		; ELSEIF RAND:5 == 0
		; 	PRINTFORML %조사처리(CALLNAME:ARG,"는")% 계속해서 머리를 숙여、어떻게든 손님을 진정시켰다
		; ELSEIF RAND:4 == 0
		; 	PRINTFORML %조사처리(CALLNAME:ARG,"는")% 손님이 돌아갈 때까지 위자료 대신이라며 가슴을 비비길 계속했다……
		; ELSEIF RAND:3 == 0
		; 	PRINTFORML %조사처리(CALLNAME:ARG,"는")% 고객에 동석을 강요 당해、잔뜩 성희롱을 받고 말았다
		; ELSEIF RAND:2 == 0
		; 	PRINTFORML 성의를 보이면 용서한다는 말에, 명령하는 대로 스커트를 걷어올려、우는 눈으로 속옷을 드러냈다……
		; ELSE
		; 	PRINTFORMW %조사처리(CALLNAME:ARG,"는")% 잘 처리할 수 있었던 것 같다
		; ENDIF
	ENDIF
ENDIF
PRINTFORML 

;==========================================================
;@CORRECT_DIFFICULTY
; 노역단가／매각가격に難易度보정を掛ける
;<引数>
;	ARG   = 노역단가／매각가격
;	ARG:1 = 보정情報표시有無(0:非표시／1:표시)
;<戻り値>
;	보정後가격
;==========================================================
@CORRECT_DIFFICULTY, ARG, ARG:1 = 0
#LOCALSIZE 1
LOCAL = ARG
;EASY
IF FLAG:4 == 1
	SIF ARG:1
		PRINTFORML 난이도:EASY ×120％
	TIMES LOCAL , 1.20
;NORMAL
ELSEIF FLAG:4 == 2
	TIMES LOCAL , 1.00
;HARD
ELSEIF FLAG:4 == 3
	SIF ARG:1
		PRINTFORML 난이도:HARD ×80％
	TIMES LOCAL , 0.80
ENDIF
SIF ARG:1
	PRINTL

RETURN LOCAL

;==========================================================
;@CORRECT_PROCESSION_CHARA
; 노역단가／매각가격に引継ぎキャラ보정を掛ける
;<引数>
;	ARG   = 대상キャラ
;	ARG:1 = 노역단가／매각가격
;	ARG:2 = 보정情報표시有無(0:非표시／1:표시)
;<戻り値>
;	보정後가격
;==========================================================
@CORRECT_PROCESSION_CHARA, ARG, ARG:1, ARG:2 = 0
#LOCALSIZE 1
LOCAL = ARG:1
IF CFLAG:ARG:引継ぎ횟수 > 0 && FLAG:5 < 9 && DAY < 51
;MOD 015a 주회횟수で減額率を변경
	IF FLAG:주회횟수 > 11
		SIF ARG:2
			PRINTFORML 인계된 캐릭터： × 0.50
		LOCAL /= 2
	ELSEIF FLAG:주회횟수 > 8
		SIF ARG:2
			PRINTFORML 인계된 캐릭터： × 0.35
		LOCAL *= 7
		LOCAL /= 20
	ELSEIF FLAG:주회횟수 > 5
		SIF ARG:2
			PRINTFORML 인계된 캐릭터： × 0.20
		LOCAL /= 5
	ELSEIF FLAG:주회횟수 > 2
		SIF ARG:2
			PRINTFORML 인계된 캐릭터： × 0.10
		LOCAL /= 10
	ELSE
		SIF ARG:2
			PRINTFORML 인계된 캐릭터： × 0.05
		LOCAL /= 20
	ENDIF
;MOD 015a END
	SIF LOCAL < 1
		LOCAL = 1
ENDIF

RETURN LOCAL


;==========================================================
;@NTR_RESTRANT_SEX
; ＮＴＲ섹스計算
;<引数>
;	ARG   = 노역キャラの登録番号
;	ARG:1 = ＮＴＲ相손番号
;LOCAL:1 = 相손の사정횟수
;LOCAL:2 = 相손の성교횟수
;LOCAL:3 = プ레이内容
;LOCAL:4 = 윤간人数
;LOCAL:5 = 호감도
;LOCAL:6 = 음란度
;LOCAL:7 = 호감도減少処理用
;==========================================================
@NTR_RESTRANT_SEX, ARG, ARG:3, ARG:4
#LOCALSIZE 8
#DIM LCOUNT
CFLAG:ARG:펠라횟수 = 0
CFLAG:ARG:本番횟수 = 0
CFLAG:ARG:애널횟수 = 0
CFLAG:ARG:中出し횟수 = 0
CFLAG:ARG:손コキ횟수 = 0
TCVAR:ARG:획득키스경험 = 0
LOCAL:3 = ARG:3 , ARG:4
;ＮＴＲ好きの客（本番）
IF LOCAL:3 == 1
	ARG:1 = -2
	CFLAG:ARG:中出し횟수 = 1
	CFLAG:ARG:本番횟수 = 1
	LOCAL:1 = 2 + RAND:4
	LOCAL:2 = LOCAL:1 + RAND:(LOCAL:1)
	TCVAR:ARG:획득바람경험 = 1

;クレーム客（本番）
ELSEIF LOCAL:3 == 2
	ARG:1 = -3
	CFLAG:ARG:中出し횟수 = LOCAL:4
	CFLAG:ARG:本番횟수 = LOCAL:4
	LOCAL:1 = LOCAL:4 + RAND:(LOCAL:4)
	LOCAL:2 = LOCAL:1 + RAND:(LOCAL:4)
	TCVAR:ARG:획득윤간경험 = 1

;ＮＴＲ好きの客（フェラ）
ELSEIF LOCAL:3 == 3
	ARG:1 = -2
	CFLAG:ARG:펠라횟수 = 1 + RAND:3
	TCVAR:ARG:획득바람경험 = 1

;クレーム客（フェラ）
ELSEIF LOCAL:3 == 4
	ARG:1 = -3
	CFLAG:ARG:펠라횟수 = 3 + RAND:3

ENDIF

IF LOCAL:3 < 3
	FOR LCOUNT , 0 , LOCAL:2
		IF RAND:100 < 60
			IF HAVE_PENIS(ARG) && HAVE_VAGINA(ARG)
				CFLAG:ARG:本番횟수 += 1
				CFLAG:ARG:손コキ횟수 += 1
			ELSEIF HAVE_PENIS(ARG)
				CFLAG:ARG:애널횟수 += 1
				CFLAG:ARG:손コキ횟수 += 1
			ELSE
				CFLAG:ARG:本番횟수 += 1
			ENDIF
		ELSEIF RAND:100 < 50
			IF HAVE_PENIS(ARG)
				CFLAG:ARG:손コキ횟수 += 1
			ELSE
				CFLAG:ARG:펠라횟수 += 1
			ENDIF
		ELSE
			IF HAVE_PENIS(ARG) && HAVE_VAGINA(ARG)
				CFLAG:ARG:애널횟수 += 1
				CFLAG:ARG:손コキ횟수 += 1
			ELSEIF HAVE_PENIS(ARG)
				CFLAG:ARG:애널횟수 += 1
				CFLAG:ARG:손コキ횟수 += 1
			ELSE
				CFLAG:ARG:애널횟수 += 1
			ENDIF
		ENDIF
	NEXT
	CFLAG:ARG:中出し횟수 += LIMIT(RAND:(1+CFLAG:ARG:本番횟수) , 0, LOCAL:1)

	;키스경험処理：適当に랜덤で
	SIF RAND:2 == 0
		TCVAR:ARG:획득키스경험 += 1
ENDIF

;획득경험
TCVAR:ARG:획득펠라경험 = CFLAG:ARG:펠라횟수
TCVAR:ARG:획득봉사쾌락경험 = CFLAG:ARG:펠라횟수
TCVAR:ARG:획득Ｖ경험 = CFLAG:ARG:本番횟수
TCVAR:ARG:획득Ａ경험 = CFLAG:ARG:애널횟수
TCVAR:ARG:획득성교경험 = CFLAG:ARG:本番횟수 + CFLAG:ARG:애널횟수
TCVAR:ARG:획득질사경험 = CFLAG:ARG:中出し횟수
TCVAR:ARG:획득정액경험 = LOCAL:1
IF TCVAR:ARG:획득윤간경험
	TCVAR:ARG:획득고통쾌락경험 = (CFLAG:ARG:本番횟수 + CFLAG:ARG:애널횟수) / 2
	TCVAR:ARG:획득피사경험 = (CFLAG:ARG:本番횟수 + CFLAG:ARG:애널횟수) / 2
ENDIF
SIF CFLAG:ARG:손コキ횟수 > 0
	TCVAR:ARG:획득사정경험 = RAND:(CFLAG:ARG:손コキ횟수)
SIF TCVAR:ARG:획득성교경험 + TCVAR:ARG:획득사정경험 > 0
	TCVAR:ARG:획득절정경험 = RAND:(TCVAR:ARG:획득성교경험 + TCVAR:ARG:획득사정경험)
;임신用
SIF CFLAG:ARG:자궁내피임결계 == 0
	CFLAG:ARG:顧客の中出氏による임신판정 = TCVAR:ARG:획득질사경험*2
;처녀상실処理
IF TALENT:ARG:처녀 && CFLAG:ARG:本番횟수
	CALL ADDS_ABNORMAL_EXP, "처녀상실（윤간）", ARG
	CALL ADDS_ABNORMAL_EXP, "처녀상실（촬영）", ARG
	SETCOLOR COLOR("red")
	IF LOCAL:3 == 2
		PRINTFORML 【＋２】   처녀상실（윤간）
		PRINTFORML 【＋２】   처녀상실（촬영）
	ELSEIF LOCAL:3 == 1
		PRINTFORML 【＋２】   처녀상실(ＮＴＲ)
	ENDIF
	RESETCOLOR
	TALENT:ARG:처녀 = 0
ELSEIF TALENT:ARG:재생처녀
	PRINTFORML 재생처녀상실
	TALENT:ARG:재생처녀 = 0
ENDIF

LOCAL:5 = TCVAR:ARG:획득정액경험 * 5 + (TCVAR:ARG:획득절정경험 + TCVAR:ARG:획득질사경험) * 10 + CFLAG:ARG:放置日数
LOCAL:6 = CFLAG:ARG:本番횟수 + CFLAG:ARG:애널횟수 + TCVAR:ARG:획득절정경험 * 10
LOCAL:7 = CFLAG:ARG:中出し횟수 * 3 + TCVAR:ARG:획득절정경험 * 5


;ＮＴＲ客の설정処理
SELECTCASE FLAG:ＮＴＲ客の설정
	CASE  0
		TIMES LOCAL:5 , 1.00
		TIMES LOCAL:6 , 1.00
		TIMES LOCAL:7 , 1.00
	CASE  1
		TIMES LOCAL:5 , 2.00
		TIMES LOCAL:6 , 2.00
		TIMES LOCAL:7 , 2.00
	CASE  2
		TIMES LOCAL:5 , 5.00
		TIMES LOCAL:6 , 5.00
		TIMES LOCAL:7 , 5.00
ENDSELECT

;子宮現在容量加算
IF TALENT:ARG:오토코노코
	CFLAG:(ARG):子宮現在容量 += LOCAL:7 * 2
ELSEIF !IS_MALE(ARG)
	CFLAG:(ARG):子宮現在容量 += LOCAL:7 * 2
ENDIF

;호감도
IF ARG:1 == -2
	CDFLAG:ARG:キャラ間好感度:(98) += LOCAL:5
ELSEIF ARG:1 == -3
	CDFLAG:ARG:キャラ間好感度:(97) -= LOCAL:5
ENDIF

;음란度上昇
;바람癖がある場合は음란度倍化
IF TALENT:ARG:바람기
	CFLAG:ARG:음란度 += LOCAL:6*2
ELSE
	CFLAG:ARG:음란度 += LOCAL:6
ENDIF

;호감도減少処理
CALL NTR_SHOOT , ARG, ARG:1, LOCAL:7

CALL SHOW_ADD_EXP, ARG


