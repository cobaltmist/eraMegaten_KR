@EVENT_COUNTER
;-------------------------------------------------
;インサートしている時のフェラなど、불可能な行動はここで処理
;-------------------------------------------------

LOCAL = RAND:50

;겁쟁이
LOCAL -= TALENT:겁쟁이*10
;꿋꿋함
LOCAL += TALENT:꿋꿋함*5
;프라이드높음
LOCAL += TALENT:프라이드높음*10
;건방짐
LOCAL += TALENT:건방짐*20
;츤데레
LOCAL += TALENT:츤데레*5
;무관심
LOCAL -= TALENT:무관심*3
;호기심
LOCAL += TALENT:호기심*3
;보수적
LOCAL -= TALENT:보수적*3
;일선을넘지않음
LOCAL -= TALENT:일선을넘지않음*10
;눈에띄고싶어함
LOCAL += TALENT:눈에띄고싶어함*5
;정조관념
LOCAL -= TALENT:정조관념*3
;정조관결여
LOCAL += TALENT:정조관결여*3
;억압
LOCAL -= TALENT:억압*10
;개방
LOCAL += TALENT:해방*10
;저항
LOCAL -= TALENT:저항*20
;부끄럼쟁이
LOCAL -= TALENT:부끄럼쟁이*5
;부끄럼없음
LOCAL += TALENT:부끄럼없음*5
;헌신적
LOCAL += TALENT:헌신적*5
;중독되기쉬움
LOCAL += TALENT:중독되기쉬움*3
;자위광
LOCAL += TALENT:자위광*3
;섹스광
LOCAL += TALENT:섹스광*3
;애널광
LOCAL += TALENT:애널광*3
;음유
LOCAL += TALENT:음유*3
;광기
LOCAL += TALENT:광기*3 
;연모
LOCAL += TALENT:연모*15
;친애
LOCAL += TALENT:친애*20
;남성혐오
SIF TALENT:남성혐오 && TALENT:PLAYER:남자
	LOCAL -= 20
;여성혐오
SIF TALENT:여성혐오 && !TALENT:PLAYER:남자
	LOCAL -= 20
;새드
LOCAL += TALENT:새드*20
;매혹
LOCAL += TALENT:매혹*20
;매력
LOCAL += TALENT:매력*20
;수수께끼의매력
LOCAL += TALENT:수수께끼의매력*20
;소악마
LOCAL += TALENT:소악마*20
;마조
LOCAL -= TALENT:마조*20
;욕망
LOCAL += ABL:욕망*5
;봉사정신
LOCAL += ABL:봉사정신*3
;마조끼
LOCAL -= ABL:마조끼*5
;새드끼
LOCAL += ABL:새드끼*5

LOCAL += ABL:섹스중독*5
;욕정
LOCAL += GET_STAIN("질내" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("바기나" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("입" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("손" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("가슴" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("애널" , "정액" , TARGET) * ABL:정액중독
LOCAL += GET_STAIN("머리카락" , "정액" , TARGET) * ABL:정액중독
;소스で변화
LOCAL += SOURCE:TARGET:정애/10
LOCAL += SOURCE:TARGET:성행위/10
LOCAL -= SOURCE:TARGET:아픔/10
LOCAL -= SOURCE:TARGET:무서움/10
;절정
LOCAL += NOWEX:PLAYER:Ｃ절정 * 5
LOCAL -= NOWEX:TARGET:Ｃ절정 * 5
LOCAL += NOWEX:PLAYER:Ｖ절정 * 5
LOCAL -= NOWEX:TARGET:Ｖ절정 * 5
LOCAL += NOWEX:PLAYER:Ａ절정 * 5
LOCAL -= NOWEX:TARGET:Ａ절정 * 5
LOCAL += NOWEX:PLAYER:Ｂ절정 * 5
LOCAL -= NOWEX:TARGET:Ｂ절정 * 5
LOCAL += NOWEX:PLAYER:사정 * 5
LOCAL -= NOWEX:TARGET:사정 * 5

;疲れている
SIF BASE:체력 - DOWNBASE:체력 <= 500 || BASE:기력 - DOWNBASE:기력 <= 0
	LOCAL = 0
;ノンケ
SIF TALENT:남자 && TALENT:PLAYER:남자 && ABL:ＢＬ끼 == 0
	LOCAL = 0
SIF !TALENT:남자 && !TALENT:PLAYER:남자 && ABL:레즈끼 == 0
	LOCAL = 0
IF TEQUIP:아이마스크 || TEQUIP:밧줄 || TEQUIP:볼재갈 || TEQUIP:관장기＋플러그 || TEQUIP:확장벌룬 || TEQUIP:애널전극 || TEQUIP:유방전극 || TEQUIP:촉수 || TEQUIP:삼각목마 || TEQUIP:야외플레이위험도
	LOCAL = 0
ENDIF
;カウンターしなさそうなシチュエーションでは禁止
SELECTCASE SELECTCOM
	CASE 9 to 11,89,98,100 to 104,122,141 to 144,147 to 160,201,203,500,513,514
		LOCAL = 0
ENDSELECT

;マイナスまたは100％を超えていたら수정
LOCAL = LIMIT(LOCAL, 0, 100)


IF LOCAL > 0
	;インサートでイかされた後は、ご봉사かキス率が高い
	IF (TEQUIP:TARGET:50 < 0 || TEQUIP:TARGET:51 < 0) && TFLAG:2 && TFLAG:18
		IF RAND:3 == 0
			CALL COUNTER_SELECT0
		ELSEIF RAND:2 == 0
			CALL COUNTER_SELECT3
		ELSE
			CALL COUNTER_SELECT6
		ENDIF
	;インサートの後はインサートor挿入れたままできること
	ELSEIF TEQUIP:TARGET:50 > 0
		LOCAL = RAND:4
		SELECTCASE LOCAL
			CASE 1
				SIF ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER500_1			
			;だいしゅきホールド
			CASE 2
				SIF SELECTCOM == 60 || SELECTCOM == 68 || SELECTCOM == 78
					CALL EVENT_COUNTER500_2
			;性交見せつけ
			CASE 3
				SIF ABL:TARGET:노출증 > 1 && (SELECTCOM == 66 || SELECTCOM == 68 || SELECTCOM == 74)
					CALL EVENT_COUNTER500_3
			CASE 4
				CALL COUNTER_SELECT6
		ENDSELECT
	ELSEIF TEQUIP:TARGET:51 > 0
		CALL COUNTER_SELECT6
	ELSEIF TEQUIP:PLAYER:50 > 0 || TEQUIP:PLAYER:51 > 0
		IF RAND:2 == 0
			CALL COUNTER_SELECT0
		ELSE
			CALL COUNTER_SELECT6
		ENDIF
	ELSEIF HAVE_PENIS(PLAYER) && (SELECTCOM == 80 || SELECTCOM == 99)
		LOCAL = RAND:3
		SELECTCASE LOCAL
			CASE 1
				SIF ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER502			
			;玉揉み
			CASE 2
				SIF ABL:TARGET:기교 > 1 && SELECTCOM == 80
					CALL EVENT_COUNTER600_1
			;애널애무
			CASE 3
				SIF ABL:TARGET:기교 > 1 && SELECTCOM == 80
					CALL EVENT_COUNTER601
		ENDSELECT
	;펠라치오
	ELSEIF HAVE_PENIS(PLAYER) && (SELECTCOM == 81 || SELECTCOM == 140 || SELECTCOM == 211 || SELECTCOM == 501 || SELECTCOM == 508)
		LOCAL = RAND:3
		SELECTCASE LOCAL
			CASE 1
				SIF ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER503_1			
			;玉舐め
			CASE 2
				SIF ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER600_2
				
			;ディープスロート
			CASE 3
				SIF ABL:TARGET:기교 > 3 && SELECTCOM == 81
					CALL EVENT_COUNTER503_2
		ENDSELECT
	;파이즈리
	ELSEIF HAVE_PENIS(PLAYER) && (SELECTCOM == 82 || SELECTCOM == 87 || SELECTCOM == 88)
		LOCAL = RAND:3
		SELECTCASE LOCAL
			CASE 1
				SIF !SELECTCOM == 82 || ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER504_1
			;세로파이즈리
			CASE 2
				SIF ABL:TARGET:기교 > 2 || !TALENT:TARGET:절벽 && SELECTCOM == 82
					CALL EVENT_COUNTER504_2
			;頑張って谷間をつくる
			CASE 3
				SIF ABL:TARGET:기교 > 2 || !TALENT:TARGET:절벽 && SELECTCOM == 82
					CALL EVENT_COUNTER504_3
		ENDSELECT
	;스마타
	ELSEIF HAVE_VAGINA(TARGET) && SELECTCOM == 83
		LOCAL = RAND:2
		SELECTCASE LOCAL
			CASE 1
				SIF !ABL:TARGET:기교 > 1
					CALL EVENT_COUNTER505_1
			;수음추가
			CASE 2
				SIF ABL:TARGET:기교 > 1 && SELECTCOM == 83
					CALL EVENT_COUNTER505_2
		ENDSELECT
	;거품춤
	ELSEIF HAVE_VAGINA(TARGET) && SELECTCOM == 84
		CALL EVENT_COUNTER75		
	;コミュ系
	ELSEIF SELECTCOM > 20 && SELECTCOM < 26
		IF RAND:5 == 0	
			CALL EVENT_COUNTER11	
		ELSEIF RAND:4 == 0	
			CALL EVENT_COUNTER12
		ELSEIF RAND:3 == 0	
			CALL EVENT_COUNTER13
		ELSEIF RAND:2 == 0		
			CALL EVENT_COUNTER14		
		ELSE
			CALL EVENT_COUNTER33
		ENDIF
	ELSE
		IF RAND:2 == 0
			CALL COUNTER_SELECT0
		ELSE
			CALL COUNTER_SELECT6
		ENDIF
	ENDIF
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT0
;손
IF (USE_PENIS(PLAYER,3) || ITEM_PENIS(PLAYER)) && (USE_HAND(TARGET) || IS_BEAST(TARGET)) && HAVE_PENIS(PLAYER) && RAND:6 == 0
	CALL EVENT_COUNTER50
ELSEIF PALAM:4 > PALAMLV:1 && !ASSIPLAY && USE_VAGINA(PLAYER) && USE_HAND(TARGET) && HAVE_VAGINA(PLAYER) && RAND:5 == 0
	CALL EVENT_COUNTER57
ELSEIF TEQUIP:유방노출 && TEQUIP:PLAYER:유방노출 && HAVE_VAGINA(PLAYER) && RAND:4 == 0
	CALL EVENT_COUNTER74
ELSEIF PALAM:4 > PALAMLV:1 && !ASSIPLAY && !ITEM_ANUS(PLAYER) && USE_ANUS(PLAYER) && USE_HAND(TARGET) && RAND:3 == 0
	CALL EVENT_COUNTER55
ELSEIF USE_HAND(TARGET) && RAND:2 == 0
	CALL EVENT_COUNTER58
ELSEIF  USE_MOUTH(TARGET) && USE_NIPLE(TARGET)
	CALL EVENT_COUNTER59
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT1
;입
IF USE_PENIS(PLAYER) && USE_MOUTH(TARGET) && RAND:2 == 0
	CALL EVENT_COUNTER51
ELSEIF USE_MOUTH(TARGET) && USE_ANUS(PLAYER)
	CALL EVENT_COUNTER56
ENDIF


;-------------------------------------------------------------
@COUNTER_SELECT3
;발
IF USE_PENIS(PLAYER,1) && USE_FOOT(TARGET)
	CALL EVENT_COUNTER54
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT4
;顔面騎乗
IF PLAY_CUNNI(PLAYER,TARGET) && RAND:3 == 0
	CALL EVENT_COUNTER70
ELSEIF PLAY_FELLA(PLAYER,TARGET) && RAND:2 == 0
	CALL EVENT_COUNTER71
ELSEIF USE_MOUTH(PLAYER) && USE_ANUS(TARGET)
	CALL EVENT_COUNTER72
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT5
;기승위
IF ITEM_VAGINA(TARGET) < 1 || ITEM_ANUS(TARGET) < 1 || ITEM_NIPLE(TARGET) < 1 || ITEM_PENIS(TARGET) < 1 && HAVE_VAGINA(TARGET)
	CALL EVENT_COUNTER91
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT6
;キス
IF PLAY_KISS(PLAYER,TARGET) && RAND:2 == 0
	CALL EVENT_COUNTER30
ELSEIF PLAY_KISS(PLAYER,TARGET)
	CALL EVENT_COUNTER60
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT7
IF PALAM:4 > PALAMLV:1 && USE_VAGINA(PLAYER) && USE_HAND(TARGET) && HAVE_VAGINA(PLAYER) && RAND:2 == 0
	CALL EVENT_COUNTER57
ELSEIF PALAM:4 > PALAMLV:1 && !ASSIPLAY && !ITEM_ANUS(PLAYER) && USE_ANUS(PLAYER) && USE_HAND(TARGET)
	CALL EVENT_COUNTER55
ENDIF

;-------------------------------------------------------------
@COUNTER_SELECT8
;レイプ
IF USE_PENIS(TARGET) && USE_PBAND(TARGET) && !TEQUIP:PLAYER:13 && HAVE_VAGINA(PLAYER) && RAND:4 == 0
	CALL EVENT_COUNTER80
ELSEIF USE_PENIS(TARGET) && USE_PBAND(TARGET) && !TEQUIP:PLAYER:14 && !TEQUIP:PLAYER:15 && RAND:3 == 0
	CALL EVENT_COUNTER81
ELSEIF USE_PENIS(TARGET) && USE_PBAND(TARGET) && !TEQUIP:PLAYER:14 && !TEQUIP:PLAYER:15 && RAND:2 == 0
	CALL EVENT_COUNTER82
ELSEIF USE_PENIS(TARGET) && USE_PBAND(TARGET) && !TEQUIP:PLAYER:14 && !TEQUIP:PLAYER:15
	CALL EVENT_COUNTER83
ENDIF


;-------------------------------------------------------------

