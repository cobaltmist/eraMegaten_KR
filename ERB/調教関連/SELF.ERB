;SELF.ERB、奴隷からの봉사などの이벤트
;-------------------------------------------------
;夜종료시及び朝に起こる이벤트 타겟選択
;-------------------------------------------------
@EVENT_NIGHT_SELF
#DIM 요바이リスト , MAX_PLAYER_CHARA
#DIM 요바이가능人数 , 1
#DIM LCOUNT

;キャラ등록数が1以下の時は引き返す
SIF CHARANUM <= 1
	RETURN 1
VARSET 요바이リスト , -1
요바이가능人数 = 0
B = 0
FOR LCOUNT, 0, CHARANUM
	;主人ならスキップ
	SIF LCOUNT == MASTER
		CONTINUE
	SIF CFLAG:LCOUNT:요바이불허가
		CONTINUE
	;대상がその場にいないなら除外
	SIF CFLAG:LCOUNT:이자리에없는플래그 == 1
		CONTINUE
	;렌탈中は除外
	SIF CFLAG:LCOUNT:노역플래그 == 3
		CONTINUE
	;上司に連れて行かれると除外
	SIF CFLAG:LCOUNT:상사내습 == 1
		CONTINUE
	;체력が500以下なら除外
	SIF BASE:LCOUNT:0 <= 500
		CONTINUE
	;반발각인がある場合は除外
	SIF MARK:LCOUNT:3 >= 1
		CONTINUE
	;함락소질が無い場合は除外
	SIF 함락(LCOUNT) == 0
		CONTINUE
	;신뢰系함락素質の場合は除外
	SIF 신뢰(LCOUNT) || 동료(LCOUNT)
		CONTINUE
	;他の所に行ってる伽羅は除外
	SIF CFLAG:LCOUNT:ＮＴＲ요바이
		CONTINUE
	;最も호감도の高いキャラのIDが0未満である場合は除外
	SIF FAVORITE_1_ID(LCOUNT) < 0
		CONTINUE
	요바이リスト:요바이가능人数 = LCOUNT
	요바이가능人数 += 1
NEXT
IF 요바이가능人数 == 0
	B = -1
	RETURN 1
ENDIF

;まず、メインキャラを選ぶ
B = 0

;Bに랜덤選択されたキャラのキャラ등록번호を入れる・0の時はやり直し
$REPLAY0
B = 요바이リスト:(RAND:요바이가능人数)
;대상판정,Bが行動者,Eが被害者,Gが판정用
E = FAVORITE_1(B)
;FOR G, 0, CHARANUM
;	SIF CFLAG:B:(CFLAG:G:캐릭터고유번호+2000) > CFLAG:B:(CFLAG:E:캐릭터고유번호+2000)
;	E = G
;NEXT
;대상の호감도が行動者より主人が高かった場合요바이無し
SIF E != MASTER && FAVORITE(E,MASTER)  > FAVORITE(E,B)
	RETURN 1
;대상が사정ができる場合
IF HAVE_PENIS(E)
	Y = 1
;できない場合
ELSE
	Y = 0
ENDIF

;相손が主人の場合は構ったフラグ
IF FLAG:ＮＴＲ기능
	SIF E == MASTER
		CFLAG:B:構ったフラグ = 1
ENDIF

;-------------------------------------------------
;夜종료시に起こる이벤트
;-------------------------------------------------

;7種8패턴
;대상C 相손V
;대상C 相손A
;대상V 相손C
;대상A 相손C
;両者C（素）・両者C（貝）
;자위
;一緒に寝る

;7つの組み合わせ
;대상（男）*相손（男）
	;대상C 相손A
	;대상A 相손C
;대상（男）*相손（フタ）
	;대상C 相손V
	;대상C 相손A
	;대상A 相손C
	;両者C（素）
;대상（フタ）*相손（男）
	;대상C 相손A
	;대상V 相손C
	;대상A 相손C
	;両者C（素）
;대상（フタ）*相손（フタ）
	;대상C 相손V
	;대상C 相손A
	;대상V 相손C
	;대상A 相손C
	;両者C（素）
;대상（女）*相손（男・フタ）
	;대상V 相손C
	;대상A 相손C
	;両者C（素）
;대상（男・フタ）*相손（女）
	;대상C 相손V
	;대상C 相손A
	;両者C（素）
;대상（女）*相손（女）
	;両者C（貝）
;※자위は조건無し、一緒に寝るは性別の조건無し

;랜덤に発生するかと체크し、実行不可ならば再度체크
;当たり7ハズレ2。実行가능に当たる前にハズレに当たったら종료
;ただし、上位の함락소질ががあれば必ず発生

LOCAL = TARGET
TARGET = B

$LOOP_N
IF TALENT:B:6 || TALENT:B:7 || TALENT:B:8
	R = RAND:7
ELSE
	R = RAND:9
ENDIF

IF R == 0
	;대상C 相손V（처녀及び재생처녀を持たず、V감각2이상、욕망3이상で男でない、대상が男또는フタナリ場合）
	IF TALENT:B:0 == 0 && TALENT:B:1 == 0 && ABL:B:4 >= 2 && ABL:B:1 >= 3 && Y == 1 && !IS_MALE(B) && Y == 1
		CALL SELF_NIGHT6
	ELSE
		GOTO LOOP_N
	ENDIF
ELSEIF R == 1
	;대상C 相손A（A감각3이상、욕망4이상、대상が男또는フタナリ場合）
	IF ABL:B:5 >= 3 && ABL:B:1 >= 4 && Y == 1 && Y == 1
		CALL SELF_NIGHT31
	ELSE
		GOTO LOOP_N
	ENDIF
ELSEIF R == 2
	;대상V 相손C（대상が처녀及び재생처녀を持たず男でない、타겟のＣ감각3이상、욕망3이상で男또는フタナリの場合）
	IF TALENT:E:0 == 0 && TALENT:E:1 == 0 && IS_MALE(E) == 0 && ABL:B:3 >= 3 && ABL:B:1 >= 3 && HAVE_PENIS(B)
		CALL SELF_NIGHT32
	ELSE
		GOTO LOOP_N
	ENDIF
ELSEIF R == 3
	;대상A 相손C（대상のA감각3이상、타겟のＣ감각3이상、욕망4이상で男또는フタナリの場合）
	IF ABL:E:5 >= 3 && ABL:B:3 >= 3 && ABL:B:1 >= 4 && HAVE_PENIS(B)
		CALL SELF_NIGHT33
	ELSE
		GOTO LOOP_N
	ENDIF
ELSEIF R == 4
	;（両者C（스마타）・両者C（貝合わせ））（どちらか片方でも男でない場合）
	IF !IS_MALE(E) || !IS_MALE(B)
		CALL SELF_NIGHT34
	ELSE
		GOTO LOOP_N
	ENDIF
ELSEIF R == 5
	CALL SELF_NIGHT35
ELSEIF R == 6
	;一緒に寝る(연모または친애が필요)
	IF TALENT:B:3 || TALENT:B:6
		CALL SELF_NIGHT36
	ELSE
		GOTO LOOP_N
	ENDIF
ELSE
	TARGET = LOCAL
	RETURN 0
ENDIF
TARGET = LOCAL

;-------------------------------------------------
;夜이벤트 ソースの計算
;-------------------------------------------------
;요바이（대상C 相손V）
@SELF_NIGHT6
DRAWLINE
TFLAG:13 = 9
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;Ｖ감각
IF ABL:B:4 <= 2
	A += 1
ELSEIF ABL:B:4 <= 4
	A += 2
ELSEIF ABL:B:4 <= 7
	A += 3
ELSEIF ABL:B:4 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:4 - 10) / 3
ENDIF

;Ｃ감각（대상）
IF ABL:E:3 <= 2
	A += 1
ELSEIF ABL:E:3 <= 4
	A += 2
ELSEIF ABL:E:3 <= 7
	A += 3
ELSEIF ABL:E:3 <= 10
	A += 4
ELSE
	A += 4 + (ABL:E:3 - 10) / 3
ENDIF

;정액중독
IF ABL:B:16 <= 1
	A += 1
ELSEIF ABL:B:16 <= 2
	A += 2
ELSEIF ABL:B:16 <= 5
	A += 3
ELSEIF ABL:B:16 <= 7
	A += 4
ELSEIF ABL:B:16 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:16 - 10) / 4
ENDIF

;섹스중독
IF ABL:B:18 <= 1
	A += 1
ELSEIF ABL:B:18 <= 2
	A += 2
ELSEIF ABL:B:18 <= 4
	A += 3
ELSEIF ABL:B:18 <= 6
	A += 4
ELSEIF ABL:B:18 <= 8
	A += 5
ELSEIF ABL:B:18 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:18 - 10) / 3
ENDIF

;창부
SIF TALENT:B:7
	A += 1
;섹스광
SIF TALENT:B:75
	A += 2
;Ｖ민감
SIF TALENT:B:104
	A += 1
;헌신적
SIF TALENT:B:63
	A += 1
;영맹또는교활
SIF TALENT:B:202 || TALENT:B:205
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,E)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:E%)+{A}
	EXP:B:40 += A
	EXP:E:40 += A
ENDIF

IF HAVE_PENIS(B)
	EXP:B:3 += A/2
	PRINTFORML %EXPNAME:3%＋{A/2}
ENDIF

IF CFLAG:B:101 > 1 && CFLAG:B:108 == 0
	EXP:B:5 += A/2
	CFLAG:B:101 += A/2
ENDIF

EXP:E:3 += A/2
EXP:B:0 += A/2
EXP:B:2 += A/4
EXP:E:2 += A/4
EXP:B:4 += A/2
EXP:E:4 += A/2
EXP:B:20 += A/2
EXP:B:22 += A/4
JUEL:B:1 += A*100
PRINTFORML %EXPNAME:3%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:0%＋{A/2}
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:2%(%CALLNAME:E%)＋{A/4}
PRINTFORML %EXPNAME:4%＋{A/2}
PRINTFORML %EXPNAME:4%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:20%＋{A/2}
PRINTFORML %EXPNAME:22%＋{A/4}
PRINTFORML %PALAMNAME:1%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*60}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*40}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
JUEL:B:5 += A*60
JUEL:B:7 += A*40
JUEL:B:8 += A*40
PRINTL 
PRINTFORMW {A/2}회의 행위를 마친 뒤, 마음이 통한 두사람은 연결된 채로 얼싸안고 깊은 잠에 빠졌다……

DRAWLINE

RETURN 0


;요바이（대상C 相손A）
@SELF_NIGHT31
DRAWLINE
TFLAG:13 = 31
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;Ａ감각
IF ABL:B:5 <= 2
	A += 1
ELSEIF ABL:B:5 <= 4
	A += 2
ELSEIF ABL:B:5 <= 7
	A += 3
ELSEIF ABL:B:5 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:5 - 10) / 3
ENDIF

;Ｃ감각（대상）
IF ABL:E:3 <= 2
	A += 1
ELSEIF ABL:E:3 <= 4
	A += 2
ELSEIF ABL:E:3 <= 7
	A += 3
ELSEIF ABL:E:3 <= 10
	A += 4
ELSE
	A += 4 + (ABL:E:3 - 10) / 3
ENDIF

;정액중독
IF ABL:B:16 <= 1
	A += 1
ELSEIF ABL:B:16 <= 2
	A += 2
ELSEIF ABL:B:16 <= 5
	A += 3
ELSEIF ABL:B:16 <= 7
	A += 4
ELSEIF ABL:B:16 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:16 - 10) / 3
ENDIF

;섹스중독
IF ABL:B:18 <= 1
	A += 1
ELSEIF ABL:B:18 <= 2
	A += 2
ELSEIF ABL:B:18 <= 4
	A += 3
ELSEIF ABL:B:18 <= 6
	A += 4
ELSEIF ABL:B:18 <= 8
	A += 5
ELSEIF ABL:B:18 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:18 - 10) / 3
ENDIF

;창부
SIF TALENT:B:7
	A += 1
;헌신적
SIF TALENT:B:63
	A += 1
;애널광
SIF TALENT:B:76
	A += 2
;Ａ민감
SIF TALENT:B:106
	A += 1
;영맹또는교활
SIF TALENT:B:202 || TALENT:B:205
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,E)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:E%)+{A}
	EXP:B:40 += A
	EXP:E:40 += A
ELSEIF IS_GAY(B,E)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:E%)+{A}
	EXP:B:41 += A
	EXP:E:41 += A
ENDIF

EXP:E:3 += A/2
PRINTFORML %EXPNAME:3%(%CALLNAME:E%)＋{A/2}

IF HAVE_PENIS(B)
	EXP:B:3 += A/2
	PRINTFORML %EXPNAME:3%＋{A/2}
ENDIF

EXP:B:1 += A/2
EXP:B:2 += A/4
EXP:E:2 += A/4
EXP:B:4 += A/2
EXP:E:4 += A/2
EXP:B:20 += A/2
JUEL:B:2 += A*100
JUEL:B:5 += A*70
JUEL:B:7 += A*30
JUEL:B:8 += A*40
PRINTFORML %EXPNAME:1%＋{A/2}
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:2%(%CALLNAME:E%)＋{A/4}
PRINTFORML %EXPNAME:4%＋{A/2}
PRINTFORML %EXPNAME:4%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:20%＋{A/2}
PRINTFORML %PALAMNAME:2%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*70}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
PRINTL 
PRINTFORMW {A/2}회의 행위를 마친 뒤, 그대로 당신의 가슴 위에서 잠들어버렸다……

DRAWLINE

RETURN 0


;요바이（대상V 相손C）
@SELF_NIGHT32
DRAWLINE
TFLAG:13 = 32
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 2
ELSEIF ABL:B:1 <= 4
	A = 3
ELSEIF ABL:B:1 <= 7
	A = 4
ELSEIF ABL:B:1 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:1 - 10) / 4
ENDIF

;Ｃ감각
IF ABL:B:3 <= 2
	A += 2
ELSEIF ABL:B:3 <= 4
	A += 3
ELSEIF ABL:B:3 <= 7
	A += 4
ELSEIF ABL:B:3 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:3 - 10) / 3
ENDIF

;Ｖ감각（대상）
IF ABL:E:4 <= 2
	A += 1
ELSEIF ABL:E:4 <= 4
	A += 2
ELSEIF ABL:E:4 <= 7
	A += 3
ELSEIF ABL:E:4 <= 10
	A += 4
ELSE
	A += 4 + (ABL:E:4 - 10) / 3
ENDIF

;섹스중독
IF ABL:B:18 <= 1
	A += 1
ELSEIF ABL:B:18 <= 2
	A += 2
ELSEIF ABL:B:18 <= 4
	A += 3
ELSEIF ABL:B:18 <= 6
	A += 4
ELSEIF ABL:B:18 <= 8
	A += 5
ELSEIF ABL:B:18 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:18 - 10) / 3
ENDIF

;자위광
SIF TALENT:B:74
	A += 2
;Ｃ민감
SIF TALENT:B:102
	A += 1
;영맹또는잔학
SIF TALENT:B:202 || TALENT:B:207
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,E)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:E%)+{A}
	EXP:B:40 += A
	EXP:E:40 += A
ENDIF

EXP:B:3 += A/2
PRINTFORML %EXPNAME:3%＋{A/2}

IF HAVE_PENIS(E)
	EXP:E:3 += A/2
	PRINTFORML %EXPNAME:3%(%CALLNAME:E%)＋{A/2}
ENDIF

IF CFLAG:E:101 > 1 && CFLAG:E:108 == 0
	EXP:E:5 += A/2
	CFLAG:E:101 += A/2
ENDIF

EXP:E:0 += A/2
EXP:B:2 += A/4
EXP:E:2 += A/4
EXP:B:4 += A/2
EXP:E:4 += A/2
PRINTFORML %EXPNAME:20%＋{A/2}
JUEL:B:0 += A*100
JUEL:B:5 += A*50
JUEL:B:6 += A*60
JUEL:B:8 += A*40
PRINTFORML %EXPNAME:0%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:2%(%CALLNAME:E%)＋{A/4}
PRINTFORML %EXPNAME:4%＋{A/2}
PRINTFORML %EXPNAME:4%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:20%(%CALLNAME:E%)＋{A/2}
PRINTFORML %PALAMNAME:0%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*50}
PRINTFORML %PALAMNAME:6%의 구슬＋{A*60}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
PRINTL 
PRINTFORMW %조사처리(CALLNAME:B,"는")% 질내에 {A/2}회 정액을 쏟아내고는, 두 사람은 그 상태로 잠들었다……

DRAWLINE

RETURN 0


;요바이（대상A 相손C）
@SELF_NIGHT33
DRAWLINE
TFLAG:13 = 33
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 2
ELSEIF ABL:B:1 <= 4
	A = 3
ELSEIF ABL:B:1 <= 7
	A = 4
ELSEIF ABL:B:1 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:1 - 10) / 4
ENDIF

;Ｃ감각
IF ABL:B:3 <= 2
	A += 2
ELSEIF ABL:B:3 <= 4
	A += 3
ELSEIF ABL:B:3 <= 7
	A += 4
ELSEIF ABL:B:3 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:3 - 10) / 3
ENDIF

;Ａ감각（대상）
IF ABL:E:5 <= 2
	A += 1
ELSEIF ABL:E:5 <= 4
	A += 2
ELSEIF ABL:E:5 <= 7
	A += 3
ELSEIF ABL:E:5 <= 10
	A += 4
ELSE
	A += 4 + (ABL:E:5 - 10) / 3
ENDIF

;섹스중독
IF ABL:B:18 <= 1
	A += 1
ELSEIF ABL:B:18 <= 2
	A += 2
ELSEIF ABL:B:18 <= 4
	A += 3
ELSEIF ABL:B:18 <= 6
	A += 4
ELSEIF ABL:B:18 <= 8
	A += 5
ELSEIF ABL:B:18 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:18 - 10) / 3
ENDIF

;자위광
SIF TALENT:B:74
	A += 2
;Ｃ민감
SIF TALENT:B:102
	A += 1
;영맹또는잔학
SIF TALENT:B:202 || TALENT:B:207
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,E)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:E%)+{A}
	EXP:B:40 += A
	EXP:E:40 += A
ELSEIF IS_GAY(B,E)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:E%)+{A}
	EXP:B:41 += A
	EXP:E:41 += A
ENDIF

EXP:B:3 += A/2
PRINTFORML %EXPNAME:3%＋{A/2}

IF HAVE_PENIS(E)
	EXP:E:3 += A/2
	PRINTFORML %EXPNAME:3%(%CALLNAME:E%)＋{A/2}
ENDIF

EXP:E:1 += A/2
EXP:B:2 += A/4
EXP:E:2 += A/4
EXP:B:4 += A/2
EXP:E:4 += A/2
PRINTFORML %EXPNAME:20%＋{A/2}
JUEL:B:0 += A*100
JUEL:B:5 += A*40
JUEL:B:6 += A*70
JUEL:B:8 += A*40
PRINTFORML %EXPNAME:1%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:2%(%CALLNAME:E%)＋{A/4}
PRINTFORML %EXPNAME:4%＋{A/2}
PRINTFORML %EXPNAME:4%(%CALLNAME:E%)＋{A/2}
PRINTFORML %EXPNAME:20%(%CALLNAME:E%)＋{A/2}
PRINTFORML %PALAMNAME:0%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*40}
PRINTFORML %PALAMNAME:6%의 구슬＋{A*70}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
PRINTL 
PRINTFORMW %CALLNAME:E%의 장내에 {A/2}회 정액을 쏟아내고는, 만족해하며 잠들었다……

DRAWLINE

RETURN 0


;요바이（両者C（스마타）・両者C（貝合わせ））
@SELF_NIGHT34
DRAWLINE
TFLAG:13 = 34
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 2
ELSEIF ABL:B:1 <= 4
	A = 3
ELSEIF ABL:B:1 <= 7
	A = 4
ELSEIF ABL:B:1 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:1 - 10) / 4
ENDIF

;봉사정신
IF ABL:B:7 <= 2
	A += 1
ELSEIF ABL:B:7 <= 4
	A += 2
ELSEIF ABL:B:7 <= 7
	A += 3
ELSEIF ABL:B:7 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:7 - 10) / 3
ENDIF

;Ｃ감각
IF ABL:B:3 <= 2
	A += 2
ELSEIF ABL:B:3 <= 4
	A += 3
ELSEIF ABL:B:3 <= 7
	A += 4
ELSEIF ABL:B:3 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:3 - 10) / 3
ENDIF

;Ｃ감각（대상）
IF ABL:E:3 <= 2
	A += 1
ELSEIF ABL:E:3 <= 4
	A += 2
ELSEIF ABL:E:3 <= 7
	A += 3
ELSEIF ABL:E:3 <= 10
	A += 4
ELSE
	A += 4 + (ABL:E:3 - 10) / 3
ENDIF

;자위광
SIF TALENT:B:74
	A += 2
;Ｃ민감
SIF TALENT:B:102
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,E)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:E%)+{A}
	EXP:B:40 += A
	EXP:E:40 += A
ENDIF

IF Y == 1
	EXP:E:3 += A/2
	EXP:B:20 += A
	PRINTFORML %EXPNAME:3%(%CALLNAME:E%)＋{A/2}
	PRINTFORML %EXPNAME:20%＋{A}
ELSEIF HAVE_PENIS(B)
	EXP:B:3 += A/2
	EXP:E:20 += A
	PRINTFORML %EXPNAME:3%＋{A/2}
	PRINTFORML %EXPNAME:20%(%CALLNAME:E%)＋{A}
ENDIF

EXP:B:2 += A/4
EXP:E:2 += A/4
JUEL:B:0 += A*100
JUEL:B:5 += A*50
JUEL:B:6 += A*50
JUEL:B:8 += A*40
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:2%(%CALLNAME:E%)＋{A/4}
PRINTFORML %PALAMNAME:0%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*50}
PRINTFORML %PALAMNAME:6%의 구슬＋{A*50}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
PRINTL 
PRINTFORMW 그 뒤, 두 사람은 서로 얼싸안은 채로 잠에 빠져들었다……

DRAWLINE

RETURN 0


;夜자위
@SELF_NIGHT35
DRAWLINE

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;노출증
IF ABL:B:8 <= 2
	A += 1
ELSEIF ABL:B:8 <= 4
	A += 2
ELSEIF ABL:B:8 <= 7
	A += 3
ELSEIF ABL:B:8 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:8 - 10) / 4
ENDIF

;자위중독
IF ABL:B:15 <= 2
	A += 2
ELSEIF ABL:B:15 <= 4
	A += 3
ELSEIF ABL:B:15 <= 7
	A += 4
ELSEIF ABL:B:15 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:15 - 10) / 4
ENDIF

;자위하기쉬움
SIF TALENT:B:60
	A += 2
;자위광（Cだと重複するので他より弱く）
SIF TALENT:B:74
	A += 1

;CVAB판정
$LOOP_N_M
IF TALENT:B:140
	R = RAND:3
ELSE
	R = RAND:4
ENDIF

IF R == 0
	;C판정
	TFLAG:13 = 35
	CALL KOJO_MESSAGE_EVENT
	;Ｃ감각
	IF ABL:B:3 <= 2
		A += 1
	ELSEIF ABL:B:3 <= 4
		A += 2
	ELSEIF ABL:B:3 <= 7
		A += 3
	ELSEIF ABL:B:3 <= 10
		A += 4
	ELSE
		A += 4 + (ABL:B:3 - 10) / 3
	ENDIF
	;자위광
	SIF TALENT:B:74
		A += 2
	;Ｃ민감
	SIF TALENT:B:102
		A += 1
	SIF A == 0
		A = 1
	IF HAVE_PENIS(B)
		EXP:B:3 += A/2
		PRINTFORML %EXPNAME:3%＋{A/2}
		IF ABL:B:8 >= 5
			;BUKKAKE
			EXP:E:20 += A/2
			PRINTFORML %EXPNAME:20%(%CALLNAME:E%)＋{A/2}
		ENDIF
	ENDIF
	JUEL:B:0 += A*60
	PRINTFORML %PALAMNAME:0%의 구슬＋{A*60}
ELSEIF R == 1
	;A판정（A감각2이상）
	IF  ABL:B:5 >= 2
		TFLAG:13 = 35
		CALL KOJO_MESSAGE_EVENT
		;Ａ감각
		IF ABL:B:5 <= 2
			A += 1
		ELSEIF ABL:B:5 <= 4
			A += 2
		ELSEIF ABL:B:5 <= 7
			A += 3
		ELSEIF ABL:B:5 <= 10
			A += 4
		ELSE
			A += 4 + (ABL:B:5 - 10) / 3
		ENDIF
		;애널광
		SIF TALENT:B:76
			A += 2
		;Ａ민감
		SIF TALENT:B:106
			A += 1
		SIF A == 0
			A = 1
		EXP:B:1 += A/2
		PRINTFORML %EXPNAME:1%＋{A/2}
		JUEL:B:2 += A*60
		PRINTFORML %PALAMNAME:2%의 구슬＋{A*60}
	ELSE
		GOTO LOOP_N_M
	ENDIF
ELSEIF R == 2
	;B판정
	TFLAG:13 = 35
	CALL KOJO_MESSAGE_EVENT
	;Ｂ감각
	IF ABL:B:6 <= 2
		A += 1
	ELSEIF ABL:B:6 <= 4
		A += 2
	ELSEIF ABL:B:6 <= 7
		A += 3
	ELSEIF ABL:B:6 <= 10
		A += 4
	ELSE
		A += 4 + (ABL:B:6 - 10) / 3
	ENDIF
	;음유
	SIF TALENT:B:77
		A += 2
	;Ｂ민감
	SIF TALENT:B:108
		A += 1
	SIF A == 0
		A = 1
	IF TALENT:B:149
		EXP:B:54 += A/2
		PRINTFORML %EXPNAME:54%＋{A/2}
	ENDIF
	JUEL:B:3 += A*60
	PRINTFORML %PALAMNAME:3%의 구슬＋{A*60}
ELSEIF R == 3
	;V판정（처녀及び재생처녀を持っていない）
	IF TALENT:B:0 == 0 && TALENT:B:1 == 0
		TFLAG:13 = 35
		CALL KOJO_MESSAGE_EVENT
		;Ｖ감각
		IF ABL:B:4 <= 2
			A += 1
		ELSEIF ABL:B:4 <= 4
			A += 2
		ELSEIF ABL:B:4 <= 7
			A += 3
		ELSEIF ABL:B:4 <= 10
			A += 4
		ELSE
			A += 4 + (ABL:B:4 - 10) / 3
		ENDIF
		;섹스광
		SIF TALENT:B:75
			A += 2
		;Ｖ민감
		SIF TALENT:B:104
			A += 1
		SIF A == 0
			A = 1
		EXP:B:0 += A/2
		PRINTFORML %EXPNAME:0%＋{A/2}
		JUEL:B:1 += A*60
		PRINTFORML %PALAMNAME:1%의 구슬＋{A*60}
	ELSE
		GOTO LOOP_N_M
	ENDIF
ENDIF

EXP:B:2 += A/4
EXP:B:10 += A/2
JUEL:B:6 += A*50
JUEL:B:7 += A*30
JUEL:B:8 += A*40
JUEL:B:9 += A*30
PRINTFORML %EXPNAME:2%＋{A/4}
PRINTFORML %EXPNAME:10%＋{A/2}
PRINTFORML %PALAMNAME:6%의 구슬＋{A*50}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORML %PALAMNAME:8%의 구슬＋{A*40}
PRINTFORMW %PALAMNAME:9%의 구슬＋{A*30}
PRINTL 
PRINTFORMW 행위가 끝나자, %조사처리(CALLNAME:B,"는")% 작은 한숨을 내쉬며 잠에 빠져들었다

DRAWLINE

RETURN 0


;一緒に寝る
@SELF_NIGHT36
DRAWLINE
TFLAG:13 = 36
CALL KOJO_MESSAGE_EVENT

;순종
IF ABL:B:0 <= 6
	A = 3
ELSEIF ABL:B:0 <= 8
	A = 4
ELSEIF ABL:B:0 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:0 - 10) / 4
ENDIF

;봉사정신
IF ABL:B:7 <= 6
	A += 4
ELSEIF ABL:B:7 <= 8
	A += 5
ELSEIF ABL:B:7 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:7 - 10) / 3
ENDIF

;친애
SIF TALENT:B:6
	A += 1
;유아／유아퇴행または유치
SIF TALENT:B:150 || TALENT:B:151
	A += 2
;아내または남편
SIF TALENT:B:170 || TALENT:B:171
	A += 1
;아이
SIF TALENT:B:175
	A += 2
;우애
SIF TALENT:B:201
	A += 1

SIF A == 0
	A = 1

EXP:B:23 += A/4
EXP:E:23 += A/4

;유아／유아퇴행または유치且つ대상が가창기능3이상
IF (TALENT:B:150 || TALENT:B:151) && ABL:E:14 >= 3
	EXP:E:64 += A/5
	PRINTFORML %EXPNAME:64%(%CALLNAME:E%)＋{A/5}
ENDIF

JUEL:B:5 += A*100
PRINTFORML %EXPNAME:23%＋{A/4}
PRINTFORML %EXPNAME:23%(%CALLNAME:E%)＋{A/4}
PRINTFORMW %PALAMNAME:5%의 구슬＋{A*100}
PRINTL 
IF TALENT:B:150 || TALENT:B:151
	PRINTFORMW %조사처리(CALLNAME:B,"는")% 편안한 표정으로 숨소리를 내고 있다
ELSE
	PRINTFORMW %조사처리(CALLNAME:B,"는")% 작은 목소리로 잘 자라고 말하며 잠들었다
ENDIF

DRAWLINE

RETURN 0

;-------------------------------------------------
;朝이벤트1
;-------------------------------------------------
@EVENT_NEWDAY_SELF
;랜덤に発生するかと체크し、実行不可ならば再度체크
;当たり9ハズレ2。実行가능に当たる前にハズレに当たったら종료
;ただし、上位の함락소질ががあれば必ず発生
SIF B == -1
	RETURN 0
;上司に連れて行かれると除外
SIF CFLAG:B:상사내습 == 1
	RETURN 0
	
LOCAL = TARGET
TARGET = B
$LOOP_M
IF TALENT:B:6 || TALENT:B:7 || TALENT:B:8
	R = RAND:9
ELSE
	R = RAND:11
ENDIF
;実行者の主人への호감도が他のキャラへの호감도より高いと必ずハズレ
	FOR G, 0, CHARANUM
		SIF G != MASTER && FAVORITE(B,G) > FAVORITE(B,MASTER)
			R = 11
	NEXT
	
;構ったフラグ
IF FLAG:ＮＴＲ기능
	CFLAG:B:構ったフラグ = 1
ENDIF
	
IF R == 0
	;朝기승위/貝合わせ판정
	IF ((TALENT:B:0 == 0 && TALENT:B:1 == 0 && ABL:B:4 >= 3 && ABL:B:7 >= 7 && Y == 1) || (ABL:B:3 >= 3 && ABL:B:7 >= 7 && Y == 0)) && !IS_MALE(B)
		CALL SELF_MORNING_3
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 1
	;朝기승위A판정(VかAか、처녀か남자か판정以外기본的に기승위と同じ)
	IF ABL:B:5 >= 3 && ABL:B:7 >= 7 && Y == 1
		CALL SELF_MORNING_24
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 2
	;朝파이즈리판정
	IF ABL:B:7 >= 5 && TALENT:B:110 == 0 && !IS_MALE(B) && Y == 1
		CALL SELF_MORNING_2
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 3
	;朝키스판정(봉사정신が6이상、연모または친애が필요)
	IF ABL:B:7 >= 6 && (TALENT:B:3 || TALENT:B:6)
		CALL SELF_MORNING_25
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 4
	;朝フェラ/커닐링구스판정
	CALL SELF_MORNING_1
ELSEIF R == 5
	;朝食판정(봉사정신が6이상、요리기능3이상が필요)
	IF ABL:B:7 >= 6 && ABL:B:12 >= 3
		CALL SELF_MORNING_26
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 6
	;起きたら隣で寝てる판정(연모または친애が필요)
	IF TALENT:B:3 || TALENT:B:6
		CALL SELF_MORNING_27
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 7
	;朝の발コキ판정(새드끼1이상が필요)
	IF ABL:B:10 >= 1 && (HAVE_PENIS(MASTER))
		CALL SELF_MORNING_28
	ELSE
		GOTO LOOP_M
	ENDIF
ELSEIF R == 8
	;お寝小판정(오줌싸개버릇が필요)
	IF TALENT:B:57 == 1
		CALL SELF_MORNING_30
	ELSE
		GOTO LOOP_M
	ENDIF
ELSE
	TARGET = LOCAL
	RETURN 0
ENDIF

;-------------------------------------------------
;朝이벤트2
;-------------------------------------------------
;上位の함락소질があれば半分の확률로発生
IF TALENT:B:6 || TALENT:B:7 || TALENT:B:8
	R = RAND:2
ELSE
	R = RAND:4
ENDIF

IF R == 0
	;朝の搾りたてミルク판정(봉사정신が6이상、모유체질、분유중독1이상、が필요)
	IF ABL:B:7 >= 6 && TALENT:B:149 && ABL:B:19 >= 1
		CALL SELF_MORNING_29
	ENDIF
ENDIF
TARGET = LOCAL
RETURN 0

;-------------------------------------------------
;朝이벤트 ソースの計算
;-------------------------------------------------
;朝기승위/貝合わせ
@SELF_MORNING_3
DRAWLINE
TFLAG:13 = 3
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

IF Y == 1
;기승위
	;Ｖ감각
	IF ABL:B:4 <= 2
		A += 1
	ELSEIF ABL:B:4 <= 4
		A += 2
	ELSEIF ABL:B:4 <= 7
		A += 3
	ELSEIF ABL:B:4 <= 10
		A += 4
	ELSE
		A += 4 + (ABL:B:4 - 10) / 3
	ENDIF

	;정액중독
	IF ABL:B:16 <= 1
		A += 1
	ELSEIF ABL:B:16 <= 2
		A += 2
	ELSEIF ABL:B:16 <= 5
		A += 3
	ELSEIF ABL:B:16 <= 7
		A += 4
	ELSEIF ABL:B:16 <= 10
		A += 5
	ELSE
		A += 5 + (ABL:B:16 - 10) / 4
	ENDIF

	;섹스중독
	IF ABL:B:18 <= 1
		A += 1
	ELSEIF ABL:B:18 <= 2
		A += 2
	ELSEIF ABL:B:18 <= 4
		A += 3
	ELSEIF ABL:B:18 <= 6
		A += 4
	ELSEIF ABL:B:18 <= 8
		A += 5
	ELSEIF ABL:B:18 <= 10
		A += 6
	ELSE
		A += 6 + (ABL:B:18 - 10) / 3
	ENDIF

	;섹스광
	SIF TALENT:B:75
		A += 2
	;Ｖ민감
	SIF TALENT:B:104
		A += 1
ELSE
;貝合わせの場合暫定措置で、레즈끼及び레즈중독を代入
;コマンド貝合わせは성교경험入らないので…
	;Ｃ감각
	IF ABL:B:3 <= 2
		A += 1
	ELSEIF ABL:B:3 <= 4
		A += 2
	ELSEIF ABL:B:3 <= 7
		A += 3
	ELSEIF ABL:B:3 <= 10
		A += 4
	ELSE
		A += 4 + (ABL:B:3 - 10) / 3
	ENDIF

	;레즈끼
	IF ABL:B:11 <= 1
		A += 1
	ELSEIF ABL:B:11 <= 2
		A += 2
	ELSEIF ABL:B:11 <= 5
		A += 3
	ELSEIF ABL:B:11 <= 7
		A += 4
	ELSEIF ABL:B:11 <= 11
		A += 5
	ELSE
		A += 5 + (ABL:B:11 - 10) / 4
	ENDIF

	;레즈중독
	IF ABL:B:17 <= 1
		A += 1
	ELSEIF ABL:B:17 <= 2
		A += 2
	ELSEIF ABL:B:17 <= 4
		A += 3
	ELSEIF ABL:B:17 <= 6
		A += 4
	ELSEIF ABL:B:17 <= 8
		A += 5
	ELSEIF ABL:B:17 <= 10
		A += 6
	ELSE
		A += 6 + (ABL:B:17 - 10) / 3
	ENDIF

	;Ｃ민감
	SIF TALENT:B:102
		A += 1
ENDIF

;창부
SIF TALENT:B:7
	A += 1
;헌신적
SIF TALENT:B:63
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:B:40 += A
	EXP:MASTER:40 += A
ENDIF

IF Y == 1
	;기승위
	EXP:MASTER:3 += A/2
	PRINTFORML %EXPNAME:3%(%CALLNAME:MASTER%)＋{A/2}
	IF HAVE_PENIS(B) && !IS_MALE(TARGET)
		EXP:B:3 += A/2
		EXP:B:20 += A
		PRINTFORML %EXPNAME:3%＋{A/2}
		PRINTFORML %EXPNAME:20%＋{A}
	ELSE
		EXP:B:20 += A/2
		PRINTFORML %EXPNAME:20%＋{A/2}
	ENDIF

	IF CFLAG:B:101 > 1 && CFLAG:B:108 == 0
		EXP:B:5 += A/2
		CFLAG:B:101 += A/2
	ENDIF

	EXP:B:0 += A/2
	EXP:B:4 += A/2
	JUEL:B:1 += A*100
	PRINTFORML %EXPNAME:0%＋{A/2}
	PRINTFORML %EXPNAME:4%＋{A/2}
	SIF EXP:B:5 > 0 && (TALENT:B:3 || TALENT:B:6)
		PRINTFORML %EXPNAME:5%＋{A/2}
	PRINTFORML %PALAMNAME:1%의 구슬＋{A*100}
ELSE
	;貝合わせ
	JUEL:B:0 += A*100
	PRINTFORML %PALAMNAME:0%의 구슬＋{A*20}
ENDIF

JUEL:B:5 += A*70
JUEL:B:7 += A*30
JUEL:B:8 += A*40
PRINTFORML %PALAMNAME:5%의 구슬＋{A*70}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
DRAWLINE

RETURN 0


;朝기승위A
@SELF_MORNING_24
DRAWLINE
TFLAG:13 = 24
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;Ａ감각
IF ABL:B:5 <= 2
	A += 1
ELSEIF ABL:B:5 <= 4
	A += 2
ELSEIF ABL:B:5 <= 7
	A += 3
ELSEIF ABL:B:5 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:5 - 10) / 3
ENDIF

;정액중독
IF ABL:B:16 <= 1
	A += 1
ELSEIF ABL:B:16 <= 2
	A += 2
ELSEIF ABL:B:16 <= 5
	A += 3
ELSEIF ABL:B:16 <= 7
	A += 4
ELSEIF ABL:B:16 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:16 - 10) / 3
ENDIF

;섹스중독
IF ABL:B:18 <= 1
	A += 1
ELSEIF ABL:B:18 <= 2
	A += 2
ELSEIF ABL:B:18 <= 4
	A += 3
ELSEIF ABL:B:18 <= 6
	A += 4
ELSEIF ABL:B:18 <= 8
	A += 5
ELSEIF ABL:B:18 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:18 - 10) / 3
ENDIF

;창부
SIF TALENT:B:7
	A += 1
;헌신적
SIF TALENT:B:63
	A += 1
;애널광
SIF TALENT:B:76
	A += 2
;Ａ민감
SIF TALENT:B:106
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:B:40 += A
	EXP:MASTER:40 += A
ELSEIF IS_GAY(B,MASTER)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:MASTER%)+{A}
	EXP:B:41 += A
	EXP:MASTER:41 += A
ENDIF

EXP:MASTER:3 += A/2
PRINTFORML %EXPNAME:3%(%CALLNAME:MASTER%)＋{A/2}

IF HAVE_PENIS(B)
	EXP:B:3 += A/2
	EXP:B:20 += A
	PRINTFORML %EXPNAME:3%＋{A/2}
	PRINTFORML %EXPNAME:20%＋{A}
ELSE
	EXP:B:20 += A/2
	PRINTFORML %EXPNAME:20%＋{A/2}
ENDIF

EXP:B:1 += A/2
EXP:B:4 += A/2
JUEL:B:2 += A*100
JUEL:B:5 += A*70
JUEL:B:7 += A*30
JUEL:B:8 += A*40
PRINTFORML %EXPNAME:1%＋{A/2}
PRINTFORML %EXPNAME:4%＋{A/2}
PRINTFORML %PALAMNAME:2%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*70}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*40}
DRAWLINE

RETURN 0


;朝파이즈리
@SELF_MORNING_2
DRAWLINE
TFLAG:13 = 2
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;Ｂ감각
IF ABL:B:6 <= 2
	A += 1
ELSEIF ABL:B:6 <= 4
	A += 2
ELSEIF ABL:B:6 <= 7
	A += 3
ELSEIF ABL:B:6 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:6 - 10) / 3
ENDIF

;정액중독
IF ABL:B:16 <= 1
	A += 1
ELSEIF ABL:B:16 <= 2
	A += 2
ELSEIF ABL:B:16 <= 5
	A += 3
ELSEIF ABL:B:16 <= 7
	A += 4
ELSEIF ABL:B:16 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:16 - 10) / 3
ENDIF

;분유중독
IF TALENT:B:149
	IF ABL:B:19 <= 2
		A += 1
	ELSEIF ABL:B:19 <= 4
		A += 2
	ELSEIF ABL:B:19 <= 7
		A += 3
	ELSEIF ABL:B:19 <= 10
		A += 4
	ELSE
		A += 4 + (ABL:B:19 - 10) / 4
	ENDIF
ENDIF

;예속
SIF TALENT:B:8
	A += 1
;악취둔감
SIF TALENT:B:61
	A += 1
;악취민감
SIF TALENT:B:62
	A -= 1
;헌신적
SIF TALENT:B:63
	A += 1
;음유
SIF TALENT:B:77
	A += 2
;Ｂ민감
SIF TALENT:B:108
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:B:40 += A
	EXP:MASTER:40 += A
ENDIF

EXP:MASTER:3 += A/2
PRINTFORML %EXPNAME:3%(%CALLNAME:MASTER%)＋{A/2}

EXP:B:22 += A
EXP:B:20 += A/2
SIF TALENT:B:149
	EXP:B:54 += A/2
JUEL:B:3 += A*80
JUEL:B:5 += A*100
JUEL:B:7 += A*30
JUEL:B:8 += A*70
PRINTFORML %EXPNAME:22%＋{A}
PRINTFORML %EXPNAME:20%＋{A/2}
SIF TALENT:B:149
	PRINTFORML %EXPNAME:54%＋{A/2}
PRINTFORML %PALAMNAME:3%의 구슬＋{A*80}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*100}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*70}
DRAWLINE

RETURN 0


;朝키스
@SELF_MORNING_25
DRAWLINE
TFLAG:13 = 25
CALL KOJO_MESSAGE_EVENT

;순종
IF ABL:B:0 <= 6
	A = 3
ELSEIF ABL:B:0 <= 8
	A = 4
ELSEIF ABL:B:0 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:0 - 10) / 3
ENDIF

;봉사정신
IF ABL:B:7 == 6
	A += 4
ELSEIF ABL:B:7 <= 8
	A += 5
ELSEIF ABL:B:7 <= 10
	A += 6
ELSE
	A += 6 + (ABL:B:7 - 10) / 2
ENDIF

;친애
SIF TALENT:B:6
	A += 3
;헌신적
SIF TALENT:B:63
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:40 += A
	EXP:MASTER:40 += A
ELSEIF IS_GAY(B,MASTER)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:MASTER%)+{A}
	EXP:B:41 += A
	EXP:MASTER:41 += A
ENDIF

EXP:B:23 += A/2
EXP:B:키스경험 += A/2
JUEL:B:5 += A*80
JUEL:B:8 += A*20
PRINTFORML %EXPNAME:23%＋{A/2}
PRINTFORML 키스경험＋{A/2}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*80}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*20}
DRAWLINE

RETURN 0


;朝フェラ/커닐링구스
@SELF_MORNING_1
DRAWLINE
TFLAG:13 = 1
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;봉사정신
IF ABL:B:7 <= 2
	A += 1
ELSEIF ABL:B:7 <= 4
	A += 2
ELSEIF ABL:B:7 <= 7
	A += 3
ELSEIF ABL:B:7 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:7 - 10) / 3
ENDIF

IF Y == 1
;フェラ
	;정액중독
	IF ABL:B:16 <= 1
		A += 1
	ELSEIF ABL:B:16 <= 2
		A += 2
	ELSEIF ABL:B:16 <= 5
		A += 3
	ELSEIF ABL:B:16 <= 7
		A += 4
	ELSEIF ABL:B:16 <= 10
		A += 5
	ELSE
		A += 5 + (ABL:B:16 - 10) / 2
	ENDIF
ELSE
;커닐링구스
	;とりあえず레즈중독
	IF ABL:B:17 <= 1
		A += 1
	ELSEIF ABL:B:17 <= 2
		A += 2
	ELSEIF ABL:B:17 <= 4
		A += 3
	ELSEIF ABL:B:17 <= 6
		A += 4
	ELSEIF ABL:B:17 <= 8
		A += 5
	ELSEIF ABL:B:17 <= 10
		A += 6
	ELSE
		A += 6 + (ABL:B:17 - 10) / 2
	ENDIF
ENDIF

;예속
SIF TALENT:B:8
	A += 1
;악취둔감
SIF TALENT:B:61
	A += 1
;악취민감
SIF TALENT:B:62
	A -= 1
;헌신적
SIF TALENT:B:63
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:B:40 += A
	EXP:MASTER:40 += A
ELSEIF (IS_GAY(B,MASTER) && 0)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:MASTER%)+{A}
	EXP:B:41 += A
	EXP:MASTER:41 += A
ENDIF

IF Y == 1
;フェラ
	EXP:MASTER:3 += A/2
	PRINTFORML %EXPNAME:3%(%CALLNAME:MASTER%)＋{A/2}

	EXP:B:22 += A
	EXP:B:20 += A/2
	PRINTFORML %EXPNAME:22%＋{A}
	PRINTFORML %EXPNAME:20%＋{A/2}
;커닐링구스には特に無し
ENDIF

JUEL:B:5 += A*70
JUEL:B:7 += A*30
JUEL:B:8 += A*80
PRINTFORML %PALAMNAME:5%의 구슬＋{A*70}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*80}
DRAWLINE

RETURN 0


;朝食
@SELF_MORNING_26
DRAWLINE
TFLAG:13 = 26
CALL KOJO_MESSAGE_EVENT

;순종
IF ABL:B:0 <= 6
	A = 1
ELSEIF ABL:B:0 <= 8
	A = 2
ELSEIF ABL:B:0 <= 10
	A = 3
ELSE
	A = 3 + (ABL:B:0 - 10) / 4
ENDIF

;봉사정신
IF ABL:B:7 <= 6
	A += 2
ELSEIF ABL:B:7 <= 8
	A += 3
ELSEIF ABL:B:7 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:7 - 10) / 3
ENDIF

;요리기능
IF ABL:B:12 <= 2
	A += 2
ELSEIF ABL:B:12 <= 4
	A += 3
ELSEIF ABL:B:12 <= 7
	A += 4
ELSEIF ABL:B:12 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:12 - 10) / 2
ENDIF

;낙관적または눈에띄고싶어함且つ가창기능2이상
IF (TALENT:B:25 || TALENT:B:28) && ABL:B:14 >= 2
	IF ABL:B:14 <= 4
		A += 1
	ELSEIF ABL:B:14 <= 7
		A += 2
	ELSEIF ABL:B:14 <= 10
		A += 3
	ELSE
		A += 3 + (ABL:B:14 - 10) / 4
	ENDIF
ENDIF

;연모
SIF TALENT:B:3
	A += 1
;친애
SIF TALENT:B:6
	A += 2
;헌신적
SIF TALENT:B:63
	A += 1

;에이프런有り
SIF ITEM:23 == 1
	A += 1

SIF A == 0
	A = 1

IF TALENT:B:3 || TALENT:B:6
	EXP:B:23 += A/3
	PRINTFORML %EXPNAME:23%＋{A/3}
ENDIF
EXP:B:61 += A/3
SIF (TALENT:B:25 || TALENT:B:28) && ABL:B:14 >= 2
	EXP:B:64 += A/5
JUEL:B:5 += A*60
JUEL:B:8 += A*70
PRINTFORML %EXPNAME:61%＋{A/3}
SIF (TALENT:B:25 || TALENT:B:28) && ABL:B:14 >= 2
	PRINTFORML %EXPNAME:64%＋{A/5}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*60}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*70}
DRAWLINE

RETURN 0


;起きたら隣で寝てる
@SELF_MORNING_27
DRAWLINE
TFLAG:13 = 27
CALL KOJO_MESSAGE_EVENT

;순종
IF ABL:B:0 <= 2
	A = 2
ELSEIF ABL:B:0 <= 4
	A = 3
ELSEIF ABL:B:0 <= 7
	A = 4
ELSEIF ABL:B:0 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:0 - 10) / 3
ENDIF

;봉사정신
IF ABL:B:7 <= 2
	A += 1
ELSEIF ABL:B:7 <= 4
	A += 2
ELSEIF ABL:B:7 <= 7
	A += 3
ELSEIF ABL:B:7 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:7 - 10) / 4
ENDIF

;친애
SIF TALENT:B:6
	A += 2
;유아／유아퇴행または유치
SIF TALENT:B:150 || TALENT:B:151
	A += 1
;아이
SIF TALENT:B:175
	A += 2

SIF A == 0
	A = 1

;とりあえず레즈경험、ＢＬ경험は無しで
EXP:B:23 += A/4
EXP:MASTER:23 += A/4
JUEL:B:5 += A*60
PRINTFORML %EXPNAME:23%＋{A/4}
PRINTFORML %EXPNAME:23%(%CALLNAME:MASTER%)＋{A/4}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*60}
DRAWLINE

RETURN 0


;朝の발コキ
@SELF_MORNING_28
DRAWLINE
TFLAG:13 = 28
CALL KOJO_MESSAGE_EVENT

;욕망
IF ABL:B:1 <= 2
	A = 1
ELSEIF ABL:B:1 <= 4
	A = 2
ELSEIF ABL:B:1 <= 7
	A = 3
ELSEIF ABL:B:1 <= 10
	A = 4
ELSE
	A = 4 + (ABL:B:1 - 10) / 4
ENDIF

;봉사정신
IF ABL:B:7 <= 6
	A += 2
ELSEIF ABL:B:7 <= 8
	A += 3
ELSEIF ABL:B:7 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:7 - 10) / 4
ENDIF

;새드끼
IF ABL:B:10 <= 1
	A += 2
ELSEIF ABL:B:10 <= 3
	A += 3
ELSEIF ABL:B:10 <= 6
	A += 4
ELSEIF ABL:B:10 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:10 - 10) / 2
ENDIF

;새드
SIF TALENT:B:83
	A += 1

SIF A == 0
	A = 1

IF IS_LESBIAN(B,MASTER)
	PRINTFORML %EXPNAME:40%+{A}
	PRINTFORML %EXPNAME:40%(%CALLNAME:MASTER%)+{A}
	EXP:B:40 += A
	EXP:MASTER:40 += A
ELSEIF IS_GAY(B,MASTER)
	PRINTFORML %EXPNAME:41%+{A}
	PRINTFORML %EXPNAME:41%(%CALLNAME:MASTER%)+{A}
	EXP:B:41 += A
	EXP:MASTER:41 += A
ENDIF

EXP:MASTER:3 += A/2
PRINTFORML %EXPNAME:3%(%CALLNAME:MASTER%)＋{A/2}

IF Y == 1
	EXP:B:20 += A/2
	PRINTFORML %EXPNAME:20%＋{A/2}
ENDIF

EXP:B:32 += A/2
JUEL:B:5 += A*30
JUEL:B:8 += A*80
PRINTFORML %EXPNAME:32%＋{A/2}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*30}
PRINTFORMW %PALAMNAME:8%의 구슬＋{A*80}
DRAWLINE

RETURN 0

;お寝小
@SELF_MORNING_30
DRAWLINE
TFLAG:13 = 30
CALL KOJO_MESSAGE_EVENT

;Ｃ감각
IF ABL:B:3 <= 2
	A = 2
ELSEIF ABL:B:3 <= 4
	A = 3
ELSEIF ABL:B:3 <= 7
	A = 4
ELSEIF ABL:B:3 <= 10
	A = 5
ELSE
	A = 5 + (ABL:B:3 - 10) / 3
ENDIF

;노출증
IF ABL:B:8 <= 2
	A += 2
ELSEIF ABL:B:8 <= 4
	A += 3
ELSEIF ABL:B:8 <= 7
	A += 4
ELSEIF ABL:B:8 <= 10
	A += 5
ELSE
	A += 5 + (ABL:B:8 - 10) / 3
ENDIF

;자위광
SIF TALENT:B:74
	A += 2
;Ｃ민감
SIF TALENT:B:102
	A += 1
;유아／유아퇴행または유치
SIF TALENT:B:150 || TALENT:B:151
	A += 2
;아이は驚異的な早さで成長するので、TALENT:아이はとりあえず대상外

SIF A == 0
	A = 1

EXP:B:31 += A/4
JUEL:B:0 += A*60
JUEL:B:7 += A*50
JUEL:B:9 += A*40
JUEL:B:100 += A*20
PRINTFORML %EXPNAME:31%＋{A/4}
PRINTFORML %PALAMNAME:0%의 구슬＋{A*60}
PRINTFORML %PALAMNAME:7%의 구슬＋{A*50}
PRINTFORML %PALAMNAME:9%의 구슬＋{A*40}
PRINTFORMW %PALAMNAME:100%의 구슬＋{A*20}
DRAWLINE

RETURN 0


;朝の搾りたてミルク
@SELF_MORNING_29
DRAWLINE
TFLAG:13 = 29
CALL KOJO_MESSAGE_EVENT

;봉사정신
IF ABL:B:7 <= 6
	A = 2
ELSEIF ABL:B:7 <= 8
	A = 3
ELSEIF ABL:B:7 <= 10
	A = 4
ELSE
	A = 4 + (ABL:7 - 10) / 3
ENDIF

;분유중독
IF ABL:B:19 <= 1
	A += 1
ELSEIF ABL:B:19 <= 3
	A += 2
ELSEIF ABL:B:19 <= 6
	A += 3
ELSEIF ABL:B:19 <= 10
	A += 4
ELSE
	A += 4 + (ABL:B:19 - 10) / 2
ENDIF

;헌신적
SIF TALENT:B:63
	A += 1
;음유
SIF TALENT:B:77
	A += 2
;Ｂ민감
SIF TALENT:B:108
	A += 1

SIF A == 0
	A = 1

EXP:B:54 += A/2
JUEL:B:3 += A*40
JUEL:B:5 += A*60
JUEL:B:9 += A*40
PRINTFORML %EXPNAME:54%＋{A/2}
PRINTFORML %PALAMNAME:3%의 구슬＋{A*40}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*60}
PRINTFORMW %PALAMNAME:9%의 구슬＋{A*40}
DRAWLINE

RETURN 0


;-------------------------------------------------
;조교後に起こる이벤트
;-------------------------------------------------
@SELF_CHECK
;強정신剤の反動
IF TEQUIP:34 > 0 && (TFLAG:44>0 || TFLAG:45>0 || TFLAG:46>0 || TFLAG:47>0)
	CALL SELF_CHECK3
;조교後레즈およびＢＬプ레이、조교後섹스どちらか一つ（強정신剤の反動が起こる時は무효）
ELSE
	IF ASSI >= 0
		A = NO:ASSI
		IF (TALENT:4 || TALENT:7) && GET_RELATION(TARGET, ASSI) > 100 && BASE:0 >= 500 && TEQUIP:34 <= 2 && (IS_LESBIAN(ASSI,TARGET) || IS_GAY(ASSI,TARGET))
			CALL SELF_CHECK1
		ELSEIF ((TALENT:3 || TALENT:6) || ((TALENT:4 || TALENT:5 || TALENT:7 || TALENT:8) && ABL:4 >= 3)) && TALENT:0 == 0 && TALENT:1 == 0 && BASE:0 >= 500 && TEQUIP:34 <= 2 && CFLAG:MASTER:11 && (HAVE_PENIS(MASTER)) && !IS_MALE(TARGET)
			CALL SELF_CHECK2
		ENDIF
	ELSEIF ((TALENT:3 || TALENT:6) || ((TALENT:4 || TALENT:5 || TALENT:7 || TALENT:8) && ABL:4 >= 3)) && TALENT:0 == 0 && TALENT:1 == 0 && BASE:0 >= 500 && TEQUIP:34 <= 2 && CFLAG:MASTER:11 && (HAVE_PENIS(MASTER)) && !IS_MALE(TARGET)
		CALL SELF_CHECK2
	ENDIF

	;조교後착유、조교後자위。どれか一つ
	IF ABL:3 >= 4 && (ABL:19 > ABL:15) && TALENT:149 && !IS_MALE(TARGET)
		CALL SELF_CHECK4
	ELSEIF ABL:15
		CALL SELF_CHECK5
	ENDIF
ENDIF


;레즈およびＢＬプ레이
@SELF_CHECK1
;이벤트구상呼び出し
DRAWLINE
TFLAG:13 = 4
CALL KOJO_MESSAGE_EVENT

;레즈중독또는ＢＬ중독
N = 1
IF ABL:17 == 1 || ABL:21 == 1
	N += 1
ELSEIF ABL:17 == 2 || ABL:21 == 2
	N += 2
ELSEIF ABL:17 == 3 || ABL:21 == 3
	N += 3
ELSEIF ABL:17 == 4 || ABL:21 == 4
	N += 5
ELSEIF ABL:17 >= 5 || ABL:21 >= 5
	N += 7
ENDIF
IF ABL:ASSI:17 == 1 || ABL:ASSI:21 == 1
	N += 1
ELSEIF ABL:ASSI:17 == 2 || ABL:ASSI:21 == 2
	N += 2
ELSEIF ABL:ASSI:17 == 3 || ABL:ASSI:21 == 3
	N += 5
ELSEIF ABL:ASSI:17 == 4 || ABL:ASSI:21 == 4
	N += 8
ELSEIF ABL:ASSI:17 >= 5 || ABL:ASSI:21 >= 5
	N += 13
ENDIF

;愛称処理
;A = NO:ASSI
N *= GET_RELATION(TARGET, ASSI)
N /= 100

;바이
SIF TALENT:81
	M += 3

IF IS_LESBIAN(TARGET,ASSI)
	PRINTFORML %EXPNAME:40%＋{N*20}
ELSEIF IS_GAY(TARGET,ASSI)
	PRINTFORML %EXPNAME:41%＋{N*20}
ENDIF
SIF N*100*ABL:0/500 > 0
	PRINTFORML %EXPNAME:2%＋{N*100*ABL:0/500}
PRINTFORML %PALAMNAME:0%의 구슬＋{N*100*ABL:0}
PRINTFORML %PALAMNAME:6%의 구슬＋{N*200}

IF IS_LESBIAN(TARGET,ASSI)
	EXP:40 += N*20
ELSEIF IS_GAY(TARGET,ASSI)
	EXP:41 += N*20
ENDIF
EXP:2 += N*100*ABL:0/500
JUEL:0 += N*100*ABL:0
JUEL:6 += N*200

IF (TALENT:139 && TALENT:ASSI:139) || (IS_GAY(TARGET,ASSI))
	PRINTFORML %EXPNAME:3%＋{N}
	PRINTFORML %EXPNAME:20%＋{N}
	PRINTFORML %EXPNAME:21%＋{N}
	PRINTFORML %EXPNAME:22%＋{N}
	PRINTFORML %PALAMNAME:6%의 구슬＋{N*100}
	PRINTFORML %PALAMNAME:7%의 구슬＋{N*100}
	PRINTFORML %PALAMNAME:9%의 구슬＋{N*100}
	EXP:3 += N
	EXP:20 += N
	EXP:21 += N
	EXP:22 += N
	JUEL:6 += N*100
	JUEL:7 += N*100
	JUEL:9 += N*100
ELSEIF TALENT:ASSI:139
	PRINTFORML %EXPNAME:20%＋{N}
	PRINTFORML %PALAMNAME:7%의 구슬＋{N*100*(ABL:2+ABL:7)}
	PRINTFORML %PALAMNAME:8%의 구슬＋{N*100*(ABL:2+ABL:7)}
	EXP:20 += N
	JUEL:7 += N*100*(ABL:2+ABL:7)
	JUEL:8 += N*100*(ABL:2+ABL:7)
ELSEIF TALENT:139
	PRINTFORML %EXPNAME:3%＋{N}
	PRINTFORML %PALAMNAME:9%의 구슬＋{N*100}
	EXP:3 += N
	JUEL:9 += N*100
ELSE
	PRINTFORML %PALAMNAME:7%의 구슬＋{N*50*(ABL:2+ABL:7)}
	PRINTFORML %PALAMNAME:8%의 구슬＋{N*50*(ABL:2+ABL:7)}
	JUEL:7 += N*50*(ABL:2+ABL:7)
	JUEL:8 += N*50*(ABL:2+ABL:7)
ENDIF

IF TALENT:ASSI:83
	PRINTFORML %EXPNAME:30%＋{N}
	PRINTFORML %CALLNAME:ASSI%の%EXPNAME:32%＋{N}
	IF N*100*ABL:8 > 0
		PRINTFORML %PALAMNAME:10%의 구슬＋{N*100*ABL:9}
		JUEL:10 += N*100*ABL:9
	ENDIF
		EXP:30 += N
		EXP:ASSI:32 += N
ENDIF

WAIT
DRAWLINE

;조교後섹스
@SELF_CHECK2
;이벤트구상呼び出し
DRAWLINE
TFLAG:13 = 5
CALL KOJO_MESSAGE_EVENT

S = 1
;V감각
IF ABL:4 == 1
	S += 1
ELSEIF ABL:4 == 2
	S += 2
ELSEIF ABL:4 == 3
	S += 3
ELSEIF ABL:4 == 4
	S += 4
ELSEIF ABL:4 >= 5
	S += 5
ENDIF

;욕망と봉사정신によるボーナス
IF ABL:1 >= 5 && ABL:7 >= 5 && PALAM:5 >= PALAMLV:5
	S += 3
ELSEIF ABL:1 >= 4 && ABL:7 >= 4 && PALAM:5 >= PALAMLV:4
	S += 2
ELSEIF ABL:1 >= 3 && ABL:7 >= 3 && PALAM:5 >= PALAMLV:3
	S += 1
ENDIF

;섹스광い
SIF TALENT:75
	S += 3

;主人の사정제한
SIF S > CFLAG:MASTER:11
	S = CFLAG:MASTER:11

PRINTFORML %EXPNAME:0%＋{S}
PRINTFORML %EXPNAME:4%＋{S}
SIF CFLAG:101 > 0 && CFLAG:108 == 0
	PRINTFORML %EXPNAME:5%＋{S/2}
PRINTFORML %EXPNAME:20%＋{S/2}
PRINTFORML %PALAMNAME:1%의 구슬＋{S*400}
PRINTFORML %PALAMNAME:5%의 구슬＋{S*200}
PRINTFORMW %PALAMNAME:6%의 구슬＋{S*400}
EXP:0 += S
EXP:4 += S
IF CFLAG:101 > 0 && CFLAG:108 == 0
	EXP:5 += S/2
	CFLAG:101 += S/2
ENDIF
EXP:20 += S/2
JUEL:1 += S*400
JUEL:5 += S*200
JUEL:6 += S*400
CFLAG:MASTER:11 -= S
WAIT


@SELF_CHECK3
;이벤트구상呼び出し
DRAWLINE
TFLAG:13 = 6
CALL KOJO_MESSAGE_EVENT

;강정신약による절정체크
D = 0
;강정신약の効果が残ったまま조교を종료した場合の処理
;통상時の効果が再現できそうにないので同時多重절정したという処理に변경
;Dは多重절정の종류を示す(1の場合は○절정、2の場合は○＋△절정、4の場合は四重절정となっている)
SIF TFLAG:44
	D += 1
SIF TFLAG:45
	D += 1
SIF TFLAG:46
	D += 1
SIF TFLAG:47
	D += 1
C = D * TFLAG:44
V = D * TFLAG:45
A = D * TFLAG:46
B = D * TFLAG:47

PRINTFORML %EXPNAME:2%＋{TFLAG:44 + TFLAG:45 + TFLAG:46 + TFLAG:47}
SIF C > 0
	PRINTFORML %PALAMNAME:0%의 구슬＋{C*1000}
SIF V > 0
	PRINTFORML %PALAMNAME:1%의 구슬＋{V*1000}
SIF A > 0
	PRINTFORMW %PALAMNAME:2%의 구슬＋{A*1000}
SIF B > 0
	PRINTFORML %PALAMNAME:3%의 구슬＋{B*1000}
PRINTL 
EXP:2 += TFLAG:44 + TFLAG:45 + TFLAG:46 + TFLAG:47
JUEL:0 += C*1000
JUEL:1 += V*1000
JUEL:2 += A*1000
JUEL:3 += B*1000

;리셋
TFLAG:44 = 0
TFLAG:45 = 0
TFLAG:46 = 0
TFLAG:47 = 0
TEQUIP:34 = 0

;副作用で체력が500に
SIF BASE:0 > 500
	BASE:0 = 500
WAIT


@SELF_CHECK4
;이벤트구상呼び出し
DRAWLINE
TFLAG:13 = 7
CALL KOJO_MESSAGE_EVENT


;분유중독による착유체크
;남자はだめ。모유체질、분유중독、一定능력、체력が필요
M = 1

IF ABL:19 == 1
	M += 1
ELSEIF ABL:19 == 2
	M += 2
ELSEIF ABL:19 == 3
	M += 3
ELSEIF ABL:19 == 4
	M += 5
ELSEIF ABL:19 >= 5
	M += 7
ENDIF
;욕망と봉사정신によるボーナス
IF ABL:1 >= 5 && ABL:7 >= 5 && PALAM:5 >= PALAMLV:5
	M += 3
ELSEIF ABL:1 >= 4 && ABL:7 >= 4 && PALAM:5 >= PALAMLV:4
	M += 2
ELSEIF ABL:1 >= 3 && ABL:7 >= 3 && PALAM:5 >= PALAMLV:3
	M += 1
ENDIF
;자위하기쉬움
SIF TALENT:60
	M += 2
;음유
SIF TALENT:77
	M += 3


PRINTFORML %EXPNAME:54%＋{M}
PRINTFORMW %PALAMNAME:3%의 구슬＋{M*300}
PRINTFORML %PALAMNAME:6%의 구슬＋{M*50}
PRINTFORML %PALAMNAME:8%의 구슬＋{M*20}
EXP:54 += M
JUEL:3 += M*300
JUEL:6 += M*50
JUEL:8 += M*20
IF ABL:0+ABL:8+ABL:9 >= 10
	PRINTFORML %PALAMNAME:9%의 구슬＋{M*150}
	JUEL:9 += M*150
ENDIF
WAIT


@SELF_CHECK5
;이벤트구상呼び出し
DRAWLINE
TFLAG:13 = 8
CALL KOJO_MESSAGE_EVENT


;자위중독による자위체크
A = 1
;자위중독を見る
IF ABL:15 == 1
	A += 1
ELSEIF ABL:15 == 2
	A += 2
ELSEIF ABL:15 == 3
	A += 3
ELSEIF ABL:15 == 4
	A += 5
ELSEIF ABL:15 >= 5
	A += 7
ENDIF

;욕망とＣ감각によるボーナス
IF ABL:1 >= 5 && ABL:3 >= 5 && PALAM:5 >= PALAMLV:5
	A += 3
ELSEIF ABL:1 >= 4 && ABL:3 >= 4 && PALAM:5 >= PALAMLV:4
	A += 2
ELSEIF ABL:1 >= 3 && ABL:3 >= 3 && PALAM:5 >= PALAMLV:3
	A += 1
ENDIF

;자위하기쉬움
SIF TALENT:60
	A += 2
;자위광
SIF TALENT:74
	A += 3

;조수が고무
IF ASSI >= 0
	SIF TALENT:ASSI:136
		A += 1
ENDIF

PRINTFORML %EXPNAME:10%＋{A}
PRINTFORML %PALAMNAME:0%의 구슬＋{A*500}
PRINTFORML %PALAMNAME:5%의 구슬＋{A*100}
PRINTFORMW %PALAMNAME:6%의 구슬＋{A*250}
EXP:10 += A
JUEL:0 += A*500
JUEL:5 += A*100
JUEL:6 += A*250
IF ABL:0+ABL:8+ABL:9 >= 10 && TIME == 0
	PRINTFORML %PALAMNAME:9%의 구슬＋{A*200}
	JUEL:9 += A*200
ENDIF
WAIT

