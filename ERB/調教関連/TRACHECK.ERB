;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		2021/01/28		eMさ者					挿入継続処理のTARGETのVの処理を一部変更
;	002		2021/01/28		eMさ者					挿入継続処理へ飛ぶ条件で、下着ずらし挿入に対応。また、V挿入中→ズボンをはかせたときに挿入解除処理へ行くように
;	003		2021/02/14		J>s!UL@1				手淫の挿入継続処理を変更。挿入継続処理へ516,517,520,902,903を追加
;	004		2021/04/25		JK好き					@TARGET_EJAC_CHECKにターゲットのTCVAR:사정処理追加
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;-------------------------------------------------
;バイブなど付けっぱなしアイテムのチェック
;-------------------------------------------------
@EQUIP_CHECK
;착의の処理
CALL EQUIP_CLOTHES
;착의のソース증가効果
CALL CHECK_SOURCE,MASTER
CALL CHECK_SOURCE,TARGET
SIF ASSI > -1
	CALL CHECK_SOURCE,ASSI

;클리캡装着中
SIF TEQUIP:11
	CALL EQUIP_COM42

;오나홀装着中
SIF TEQUIP:12
	CALL EQUIP_COM43

;바이브装着中
SIF TEQUIP:13
	CALL EQUIP_COM44

;애널바이브装着中
SIF TEQUIP:14
	CALL EQUIP_COM45

;애널비즈사용중
SIF TEQUIP:15
	CALL EQUIP_COM46

;유두캡装着中
SIF TEQUIP:16
	CALL EQUIP_COM47

;착유기装着中
SIF TEQUIP:17
	CALL EQUIP_COM49

;삼각목마装着中
SIF TEQUIP:41
	CALL EQUIP_COM108

;리본装着中
SIF TEQUIP:42
	CALL EQUIP_COM109

;カテーテル装着中
SIF TEQUIP:43
	CALL EQUIP_COM158

;尿道プラグ装着中
SIF TEQUIP:44
	CALL EQUIP_COM159

;클리캡装着中(조교자)
SIF TEQUIP:PLAYER:11
	CALL EQUIP_COM50

;오나홀装着中(조교자)
SIF TEQUIP:PLAYER:12
	CALL EQUIP_COM51

;바이브装着中(조교자)
SIF TEQUIP:PLAYER:13
	CALL EQUIP_COM52

;애널바이브装着中(조교자)
SIF TEQUIP:PLAYER:14
	CALL EQUIP_COM53

;애널비즈사용중(조교자)
SIF TEQUIP:PLAYER:15
	CALL EQUIP_COM54

;유두캡装着中(조교자)
SIF TEQUIP:PLAYER:16
	CALL EQUIP_COM55

;착유기装着中(조교자)
SIF TEQUIP:PLAYER:17
	CALL EQUIP_COM56

;아이마스크装着中
SIF TEQUIP:18
	CALL EQUIP_COM105

;밧줄で긴박中
SIF TEQUIP:19
	CALL EQUIP_COM106

;볼재갈装着中
SIF TEQUIP:20
	CALL EQUIP_COM107

;浣腸＋애널プラグ装着中
SIF TEQUIP:21
	CALL EQUIP_COM146

;확장벌룬装着中
SIF TEQUIP:22
	CALL EQUIP_COM148

;애널전극装着中
SIF TEQUIP:23
	CALL EQUIP_COM149

;유방전극装着中
SIF TEQUIP:24
	CALL EQUIP_COM150

;촉수조교中
SIF TEQUIP:25
	CALL EQUIP_COM160

;ビデオ촬영中
SIF TEQUIP:28
	CALL EQUIP_COM183


;야외플레이中(廃ビル)
SIF TEQUIP:29 & 1
	CALL EQUIP_COM184_B

;야외플레이中(森林)
SIF TEQUIP:29 & 2
	CALL EQUIP_COM184_F

;야외플레이中(公園)
SIF TEQUIP:29 & 4
	CALL EQUIP_COM184_P

;야외플레이中(水辺)
SIF TEQUIP:29 & 8
	CALL EQUIP_COM184_U

;야외플레이中(共通)
SIF TEQUIP:29 && FLAG:46
	CALL EQUIP_COM184

;수치플레이中
SIF TEQUIP:30
	CALL EQUIP_COM186

;목욕탕플레이中
SIF TEQUIP:31
	CALL EQUIP_COM187

;샤워사용중
SIF TEQUIP:32
	CALL EQUIP_COM188

;새댁플레이中
SIF TEQUIP:33
	CALL EQUIP_COM189

;강정신약の効果発揮中／강정신약の反動処理
SIF TEQUIP:34
	CALL EQUIP_COM191

;촉수구욕中
SIF TEQUIP:36
	CALL EQUIP_COM168

;挿入継続処理追加
;----------------------------------------------------------------------------------------------------------------------
;頭文字から一物はP、指はFの方で

;縛られている状態や、三角木馬騎乗中
IF TEQUIP:TARGET:12 || TEQUIP:TARGET:19 || TEQUIP:TARGET:25 || TEQUIP:TARGET:41
	CALL REMOVE_P_INSERT_V_TARGET
	CALL REMOVE_P_INSERT_A_TARGET
	CALL REMOVE_P_INSERT_V_PLAYER
	CALL REMOVE_P_INSERT_A_PLAYER
	CALL REMOVE_F_INSERT_V_TARGET
	CALL REMOVE_F_INSERT_A_TARGET
ENDIF

IF TEQUIP:PLAYER:12 || TEQUIP:PLAYER:19 || TEQUIP:PLAYER:25 || TEQUIP:PLAYER:41
	CALL REMOVE_P_INSERT_V_PLAYER
	CALL REMOVE_P_INSERT_A_PLAYER
ENDIF

IF TEQUIP:TARGET:13
	CALL REMOVE_P_INSERT_V_TARGET
	CALL REMOVE_F_INSERT_V_TARGET
ENDIF

IF TEQUIP:PLAYER:13
	CALL REMOVE_P_INSERT_V_PLAYER
ENDIF

IF TEQUIP:TARGET:14 || TEQUIP:TARGET:15 || TEQUIP:TARGET:21 || TEQUIP:TARGET:22 || TEQUIP:TARGET:23
	CALL REMOVE_P_INSERT_A_TARGET
	CALL REMOVE_F_INSERT_A_TARGET
ENDIF
IF TEQUIP:PLAYER:14 || TEQUIP:PLAYER:15 || TEQUIP:PLAYER:21 || TEQUIP:PLAYER:22 || TEQUIP:PLAYER:23
	CALL REMOVE_P_INSERT_A_PLAYER
ENDIF

SELECTCASE SELECTCOM
	;TARGETのV
	CASE 60 , 61 , 66 , 68 , 69 , 72 , 74 , 154 , 504 TO 507
		CALL REMOVE_P_INSERT_A_TARGET
		CALL REMOVE_F_INSERT_V_TARGET
		IF TEQUIP:TARGET:50 > 0; && TEQUIP:TARGET:50 < 2
			TEQUIP:TARGET:50 = 2
		ELSE
			TEQUIP:TARGET:50 = 1
		ENDIF
	;TARGETのA
	CASE 62 , 63 , 67 , 70 , 71 , 73 , 512 , 517
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_F_INSERT_A_TARGET
		IF TEQUIP:TARGET:51 > 0 && TEQUIP:TARGET:51 < 2 
			TEQUIP:TARGET:51 = 2
		ELSE
			TEQUIP:TARGET:51 = 1
		ENDIF
	;PLAYERのV
	CASE 64 , 92 TO 94
		CALL REMOVE_P_INSERT_A_PLAYER
		IF TEQUIP:PLAYER:50 > 0 && TEQUIP:PLAYER:50 < 2
			TEQUIP:PLAYER:50 = 2
		ELSE
			TEQUIP:PLAYER:50 = 1
		ENDIF
	;PLAYERのA
	CASE 95 TO 97 , 520 , 902 , 903
		CALL REMOVE_P_INSERT_V_PLAYER
		IF TEQUIP:PLAYER:51 > 0 && TEQUIP:PLAYER:51 < 2
			TEQUIP:PLAYER:51 = 2
		ELSE
			TEQUIP:PLAYER:51 = 1
		ENDIF
	;TARGETの指V
	CASE 3 , 503
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_F_INSERT_A_TARGET
		IF TEQUIP:TARGET:52 > 0 && TEQUIP:TARGET:52 < 2
			TEQUIP:TARGET:52 = 2
		ELSE
			TEQUIP:TARGET:52 = 1
		ENDIF
	;TARGETの指A
	CASE 5 , 516
		CALL REMOVE_P_INSERT_A_TARGET
		CALL REMOVE_F_INSERT_V_TARGET
		IF TEQUIP:TARGET:53 > 0
			TEQUIP:TARGET:53 = 2
		ELSE
			TEQUIP:TARGET:53 = 1
		ENDIF
	CASE 2 , 9 , 23 TO 25 , 74 , 81 TO 88 , 91 , 120 TO 125 , 128 , 129 , 140 , 143 TO 145 , 149 , 151 , 152 , 155 TO 157 , 160 , 184 TO 189 , 197 , 201 , 203 , 204 , 210 , 211 , 500 , 510 , 511 , 513 TO 515 , 600 TO 606
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_P_INSERT_A_TARGET
		CALL REMOVE_F_INSERT_V_TARGET
		CALL REMOVE_F_INSERT_A_TARGET
		CALL REMOVE_P_INSERT_V_PLAYER
		CALL REMOVE_P_INSERT_A_PLAYER
	CASE 141
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_F_INSERT_V_TARGET
	CASE 142
		CALL REMOVE_F_INSERT_A_TARGET
		CALL REMOVE_P_INSERT_A_PLAYER
	CASE 1 , 4  , 501 , 502 , 508
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_P_INSERT_A_TARGET
		CALL REMOVE_P_INSERT_V_PLAYER
		CALL REMOVE_P_INSERT_A_PLAYER
	CASE 90
		CALL REMOVE_P_INSERT_V_PLAYER
		CALL REMOVE_P_INSERT_A_PLAYER
	CASE 80
		CALL REMOVE_P_INSERT_V_TARGET
		CALL REMOVE_P_INSERT_A_TARGET
ENDSELECT

;挿入継続処理へ飛ぶ
;下着ずらし挿入はUSE_VAGINA(TARGET)を満たしていないため、実行判定を流用
IF TEQUIP:TARGET:50 > 0 && USE_PENIS(PLAYER) && (USE_VAGINA(TARGET) || USE_VAGINA(TARGET,0,2))
	CALL EQUIP_P_INSERT_V_TARGET
;V挿入中だけど、チンコorマンコが使えないというとき、V挿入解除処理へ飛ぶ
ELSEIF TEQUIP:TARGET:50 > 0
	CALL REMOVE_P_INSERT_V_TARGET
ENDIF
IF TEQUIP:TARGET:51 > 0 && USE_ANUS(TARGET) && USE_PENIS(PLAYER)
	CALL EQUIP_P_INSERT_A_TARGET
ENDIF

IF TEQUIP:TARGET:52 > 0 && USE_VAGINA(TARGET) && USE_HAND(PLAYER)
	CALL EQUIP_F_INSERT_V_TARGET
ENDIF
IF TEQUIP:TARGET:53 > 0 && USE_ANUS(TARGET) && USE_HAND(PLAYER)
	CALL EQUIP_F_INSERT_A_TARGET
ENDIF

IF TEQUIP:PLAYER:50 > 0 && USE_VAGINA(PLAYER) && USE_PENIS(TARGET)
	CALL EQUIP_P_INSERT_V_PLAYER
ENDIF
IF TEQUIP:PLAYER:51 > 0 && USE_ANUS(PLAYER) && USE_PENIS(TARGET)
	CALL EQUIP_P_INSERT_A_PLAYER
ENDIF

;ソース周りは挿入継続処理のファイルに引っ越し
;------------------------------------------------------------------------------------------

;主導権がTARGETにある時、カウンター発生
IF TEQUIP:주도권 && (TALENT:연모 || TALENT:친애) && !ASSIPLAY
	CALL EVENT_COUNTER
ENDIF

;----------------------------------------------------------------------------------------



RETURN 1





;-------------------------------------------------
;主人による조교のボーナス
;-------------------------------------------------
@MASTER_SKILL_CHECK, ARG
;의존도ボーナス
IF ASSIPLAY == 0
	;正ベクトル
	IF CFLAG:2 >= 5000
		TIMES SOURCE:ARG:쾌Ｃ , 1.50
		TIMES SOURCE:ARG:쾌Ｖ, 1.50
		TIMES SOURCE:ARG:쾌Ａ , 1.50
		TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:ARG:정애 , 1.50
		
		TIMES SOURCE:ARG:불결 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF CFLAG:2 >= 2000
		TIMES SOURCE:ARG:쾌Ｃ , 1.30
		TIMES SOURCE:ARG:쾌Ｖ, 1.30
		TIMES SOURCE:ARG:쾌Ａ , 1.30
		TIMES SOURCE:ARG:쾌Ｂ , 1.30
		TIMES SOURCE:ARG:정애 , 1.30
		
		TIMES SOURCE:ARG:불결 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF CFLAG:2 >= 1000
		TIMES SOURCE:ARG:쾌Ｃ , 1.20
		TIMES SOURCE:ARG:쾌Ｖ, 1.20
		TIMES SOURCE:ARG:쾌Ａ , 1.20
		TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:ARG:정애 , 1.20
		
		TIMES SOURCE:ARG:불결 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF CFLAG:2 >= 500
		TIMES SOURCE:ARG:정애 , 1.10
		
		TIMES SOURCE:ARG:불결 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	;負ベクトル
	ELSEIF CFLAG:2 <= -5000
		TIMES SOURCE:ARG:무서움 , 1.50
		TIMES SOURCE:ARG:중독충족 , 1.50
		TIMES SOURCE:ARG:굴종 , 1.50
		
		TIMES SOURCE:ARG:울굴 , 0.30
		TIMES SOURCE:ARG:반감 , 0.30
	ELSEIF CFLAG:2 <= -2000
		TIMES SOURCE:ARG:무서움 , 1.30
		TIMES SOURCE:ARG:중독충족 , 1.30
		TIMES SOURCE:ARG:굴종 , 1.30
		
		TIMES SOURCE:ARG:울굴 , 0.50
		TIMES SOURCE:ARG:반감 , 0.50
	ELSEIF CFLAG:2 <= -1000
		TIMES SOURCE:ARG:무서움 , 1.20
		TIMES SOURCE:ARG:중독충족 , 1.20
		TIMES SOURCE:ARG:굴종 , 1.20
		
		TIMES SOURCE:ARG:울굴 , 0.70
		TIMES SOURCE:ARG:반감 , 0.70
	ELSEIF CFLAG:2 <= -500
		TIMES SOURCE:ARG:굴종 , 1.10
		
		TIMES SOURCE:ARG:울굴 , 0.90
		TIMES SOURCE:ARG:반감 , 0.90
	ENDIF
ENDIF

;-------------------------------------------------
;처녀상실時の処理
;-------------------------------------------------
@LOST_VIRGIN
IF TALENT:0 && TFLAG:19
	PRINTW 처녀상실
	;TALENT:TARGET:0 = 0
	;처녀상실플래그(今回のコマンド)
	TFLAG:3 = 1
	;처녀상실플래그(今回の조교)
	TFLAG:31 = 1
	;처녀상실플래그(ビデオ촬영)
	IF TEQUIP:28
		CALL ADDS_ABNORMAL_EXP, "처녀상실（촬영）", TARGET
		TFLAG:39 = 1
	ENDIF
	;정조관념
	IF TALENT:TARGET:30
		TIMES SOURCE:TARGET:정애 , 0.60
		TIMES SOURCE:TARGET:반감 , 10.00
	;정조관념+연모or친애（주인에의한처녀상실のみ）
	ELSEIF TALENT:TARGET:30 && TFLAG:19 && !IS_LOVER(TARGET)
		TIMES SOURCE:TARGET:정애 , 1.50
		TIMES SOURCE:TARGET:반감 , 0.25
	;정조관결여
	ELSEIF TALENT:TARGET:31
		TIMES SOURCE:TARGET:정애 , 0.60
		TIMES SOURCE:TARGET:반감 , 0.50
	ENDIF
	;손가락삽입の慣らしギミック処理
	IF PALAM:TARGET:1 >= 80
		TIMES SOURCE:TARGET:쾌Ｖ, 1.50
		TIMES SOURCE:TARGET:정애 , 1.25
		TIMES SOURCE:TARGET:아픔 , 0.60
		TIMES SOURCE:TARGET:반감 , 0.60
	ELSEIF PALAM:TARGET:1 >= 60
		TIMES SOURCE:TARGET:쾌Ｖ, 1.40
		TIMES SOURCE:TARGET:정애 , 1.15
		TIMES SOURCE:TARGET:아픔 , 0.70
		TIMES SOURCE:TARGET:반감 , 0.70
	ELSEIF PALAM:TARGET:1 >= 40
		TIMES SOURCE:TARGET:쾌Ｖ, 1.30
		TIMES SOURCE:TARGET:정애 , 1.10
		TIMES SOURCE:TARGET:아픔 , 0.80
		TIMES SOURCE:TARGET:반감 , 0.80
	ELSEIF PALAM:TARGET:1 >= 20
		TIMES SOURCE:TARGET:쾌Ｖ, 1.20
		TIMES SOURCE:TARGET:정애 , 1.05
		TIMES SOURCE:TARGET:아픔 , 0.90
		TIMES SOURCE:TARGET:반감 , 0.90
	ENDIF
	;함락소질による処理
	IF TFLAG:20
		;연모かつ相手が主人
		IF TALENT:TARGET:3 && TFLAG:20
			;PRINTFORML %CALLNAME:TARGET%は%CALLNAME:MASTER%に처녀を捧げられた事に幸福を感じているようだ……
			TFLAG:150 = 2
			TIMES SOURCE:TARGET:정애 , 2.00
			TIMES SOURCE:TARGET:반감 , 0.10
		;친애かつ相手が主人
		ELSEIF TALENT:TARGET:6 && TFLAG:20
			;PRINTFORML %CALLNAME:TARGET%は%CALLNAME:MASTER%が初めての相手である事にこの上ない幸せを感じているようだ……
			TFLAG:150 = 2
			TIMES SOURCE:TARGET:정애 , 2.00
			TIMES SOURCE:TARGET:반감 , 0.01
		ENDIF
		;行為によって、애정경험を加算する
		;정상위
		IF SELECTCOM == 60
			;PRINTFORML %EXPNAME:23%+10
			CALL ADDS_EXP("애정경험", 10, TARGET)
		;후배위
		ELSEIF SELECTCOM == 61
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		;기승위
		ELSEIF SELECTCOM == 66
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		;대면좌위
		ELSEIF SELECTCOM == 68
			;PRINTFORML %EXPNAME:23%+8
			CALL ADDS_EXP("애정경험", 8, TARGET)
		;배면좌위
		ELSEIF SELECTCOM == 69
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		;３Ｐ
		ELSEIF SELECTCOM == 500
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		;흐트러진모란
		ELSEIF SELECTCOM == 504
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		;기승유방자위
		ELSEIF SELECTCOM == 505
			;PRINTFORML %EXPNAME:23%+5
			CALL ADDS_EXP("애정경험", 5, TARGET)
		ENDIF
	ENDIF
ENDIF

;-------------------------------------------------
;재생처녀상실の체크
;-------------------------------------------------
IF TALENT:TARGET:1 && TFLAG:19
	PRINTW 재생처녀상실
	;TALENT:TARGET:1 = 0
	;손가락삽입の慣らしギミック処理
	IF PALAM:TARGET:1 >= 80
		TIMES SOURCE:TARGET:아픔 , 0.80
	ELSEIF PALAM:TARGET:1 >= 60
		TIMES SOURCE:TARGET:아픔 , 0.85
	ELSEIF PALAM:TARGET:1 >= 40
		TIMES SOURCE:TARGET:아픔 , 0.90
	ELSEIF PALAM:TARGET:1 >= 20
		TIMES SOURCE:TARGET:아픔 , 0.95
	ENDIF
ENDIF



;-------------------------------------------------
;기교の체크
;-------------------------------------------------
@TECHNIQUE_CHECK, ARG, ARG:1
;行為をしている者の기교を체크する
;奴隷の場合
;IF TFLAG:28 == 1
	;奴隷のABL:기교
	IF ABL:ARG:2 == 0
		;TIMES SOURCE:ARG:쾌Ｃ , 0.50
		;TIMES SOURCE:ARG:쾌Ｖ, 0.50
		;TIMES SOURCE:ARG:쾌Ａ , 0.50
		;TIMES SOURCE:ARG:쾌Ｂ , 0.50
		TIMES SOURCE:(ARG:1):0 , 0.50
		TIMES SOURCE:(ARG:1):1 , 0.50
		TIMES SOURCE:(ARG:1):2 , 0.50
		TIMES SOURCE:(ARG:1):3 , 0.50
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.00
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.00
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.00
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.00
		TIMES SOURCE:ARG:성행위 , 0.50
	ELSEIF ABL:ARG:2 == 1
		;TIMES SOURCE:ARG:쾌Ｃ , 0.60
		;TIMES SOURCE:ARG:쾌Ｖ, 0.60
		;TIMES SOURCE:ARG:쾌Ａ , 0.60
		;TIMES SOURCE:ARG:쾌Ｂ , 0.60
		TIMES SOURCE:(ARG:1):0 , 0.60
		TIMES SOURCE:(ARG:1):1 , 0.60
		TIMES SOURCE:(ARG:1):2 , 0.60
		TIMES SOURCE:(ARG:1):3 , 0.60
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.05
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.05
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.05
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.05
		TIMES SOURCE:ARG:성행위 , 0.55
	ELSEIF ABL:ARG:2 == 2
		;TIMES SOURCE:ARG:쾌Ｃ , 0.80
		;TIMES SOURCE:ARG:쾌Ｖ, 0.80
		;TIMES SOURCE:ARG:쾌Ａ , 0.80
		;TIMES SOURCE:ARG:쾌Ｂ , 0.80
		TIMES SOURCE:(ARG:1):0 , 0.80
		TIMES SOURCE:(ARG:1):1 , 0.80
		TIMES SOURCE:(ARG:1):2 , 0.80
		TIMES SOURCE:(ARG:1):3 , 0.80
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.10
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.10
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.10
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.10
		TIMES SOURCE:ARG:성행위 , 0.70
	ELSEIF ABL:ARG:2 == 3
		;TIMES SOURCE:ARG:쾌Ｃ , 1.00
		;TIMES SOURCE:ARG:쾌Ｖ, 1.00
		;TIMES SOURCE:ARG:쾌Ａ , 1.00
		;TIMES SOURCE:ARG:쾌Ｂ , 1.00
		TIMES SOURCE:(ARG:1):0 , 1.00
		TIMES SOURCE:(ARG:1):1 , 1.00
		TIMES SOURCE:(ARG:1):2 , 1.00
		TIMES SOURCE:(ARG:1):3 , 1.00
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.15
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.15
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.15
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.15
		TIMES SOURCE:ARG:성행위 , 0.90
	ELSEIF ABL:ARG:2 == 4
		;TIMES SOURCE:ARG:쾌Ｃ , 1.20
		;TIMES SOURCE:ARG:쾌Ｖ, 1.20
		;TIMES SOURCE:ARG:쾌Ａ , 1.20
		;TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:(ARG:1):0 , 1.20
		TIMES SOURCE:(ARG:1):1 , 1.20
		TIMES SOURCE:(ARG:1):2 , 1.20
		TIMES SOURCE:(ARG:1):3 , 1.20
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.20
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.20
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.20
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.20
		TIMES SOURCE:ARG:성행위 , 1.20
	ELSEIF ABL:ARG:2 == 5
		;TIMES SOURCE:ARG:쾌Ｃ , 1.50
		;TIMES SOURCE:ARG:쾌Ｖ, 1.50
		;TIMES SOURCE:ARG:쾌Ａ , 1.50
		;TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:(ARG:1):0 , 1.50
		TIMES SOURCE:(ARG:1):1 , 1.50
		TIMES SOURCE:(ARG:1):2 , 1.50
		TIMES SOURCE:(ARG:1):3 , 1.50
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.25
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.25
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.25
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.25
		TIMES SOURCE:ARG:성행위 , 1.50
	ELSEIF ABL:ARG:2 == 6
		;TIMES SOURCE:ARG:쾌Ｃ , 1.80
		;TIMES SOURCE:ARG:쾌Ｖ, 1.80
		;TIMES SOURCE:ARG:쾌Ａ , 1.80
		;TIMES SOURCE:ARG:쾌Ｂ , 1.80
		TIMES SOURCE:ARG:성행위 , 1.80
		TIMES SOURCE:(ARG:1):0 , 1.80
		TIMES SOURCE:(ARG:1):1 , 1.80
		TIMES SOURCE:(ARG:1):2 , 1.80
		TIMES SOURCE:(ARG:1):3 , 1.80
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.30
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.30
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.30
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.30
	ELSEIF ABL:ARG:2 == 7
		;TIMES SOURCE:ARG:쾌Ｃ , 2.10
		;TIMES SOURCE:ARG:쾌Ｖ, 2.10
		;TIMES SOURCE:ARG:쾌Ａ , 2.10
		;TIMES SOURCE:ARG:쾌Ｂ , 2.10
		TIMES SOURCE:ARG:성행위 , 2.10
		TIMES SOURCE:(ARG:1):0 , 2.10
		TIMES SOURCE:(ARG:1):1 , 2.10
		TIMES SOURCE:(ARG:1):2 , 2.10
		TIMES SOURCE:(ARG:1):3 , 2.10
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.35
	ELSEIF ABL:ARG:2 == 8
		;TIMES SOURCE:ARG:쾌Ｃ , 2.30
		;TIMES SOURCE:ARG:쾌Ｖ, 2.30
		;TIMES SOURCE:ARG:쾌Ａ , 2.30
		;TIMES SOURCE:ARG:쾌Ｂ , 2.30
		TIMES SOURCE:ARG:성행위 , 2.30
		TIMES SOURCE:(ARG:1):0 , 2.30
		TIMES SOURCE:(ARG:1):1 , 2.30
		TIMES SOURCE:(ARG:1):2 , 2.30
		TIMES SOURCE:(ARG:1):3 , 2.30
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.35
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.35
	ELSEIF ABL:ARG:2 == 9
		;TIMES SOURCE:ARG:쾌Ｃ , 2.45
		;TIMES SOURCE:ARG:쾌Ｖ, 2.45
		;TIMES SOURCE:ARG:쾌Ａ , 2.45
		;TIMES SOURCE:ARG:쾌Ｂ , 2.45
		TIMES SOURCE:ARG:성행위 , 2.45
		TIMES SOURCE:(ARG:1):0 , 2.45
		TIMES SOURCE:(ARG:1):1 , 2.45
		TIMES SOURCE:(ARG:1):2 , 2.45
		TIMES SOURCE:(ARG:1):3 , 2.45
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.40
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.40
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.40
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.40
	ELSEIF ABL:ARG:2 == 10
		;TIMES SOURCE:ARG:쾌Ｃ , 2.80
		;TIMES SOURCE:ARG:쾌Ｖ, 2.80
		;TIMES SOURCE:ARG:쾌Ａ , 2.80
		;TIMES SOURCE:ARG:쾌Ｂ , 2.80
		TIMES SOURCE:ARG:성행위 , 2.80
		TIMES SOURCE:(ARG:1):0 , 2.80
		TIMES SOURCE:(ARG:1):1 , 2.80
		TIMES SOURCE:(ARG:1):2 , 2.80
		TIMES SOURCE:(ARG:1):3 , 2.80
		TIMES SOURCE:(ARG:1):도구쾌Ｃ , 1.45
		TIMES SOURCE:(ARG:1):도구쾌Ｖ , 1.45
		TIMES SOURCE:(ARG:1):도구쾌Ａ , 1.45
		TIMES SOURCE:(ARG:1):도구쾌Ｂ , 1.45
	ELSE
		SOURCE:ARG:성행위 = (SOURCE:ARG:성행위 * ABL:ARG:2 * 10 - 30) / 100
		SOURCE:(ARG:1):0 = (SOURCE:(ARG:1):0 * ABL:ARG:2 * 10 - 30) / 100
		SOURCE:(ARG:1):1 = (SOURCE:(ARG:1):1 * ABL:ARG:2 * 10 - 30) / 100
		SOURCE:(ARG:1):2 = (SOURCE:(ARG:1):2 * ABL:ARG:2 * 10 - 30) / 100
		SOURCE:(ARG:1):3 = (SOURCE:(ARG:1):3 * ABL:ARG:2 * 10 - 30) / 100
	ENDIF
	SIF TFLAG:28 & 2
		CALL ADDS_EXP("조교경험", 1, ARG)
;조교자の場合
;ELSEIF TFLAG:28 == 0
;조교자のABL:기교
;IF ABL:(ARG:1):2 == 0
;	TIMES SOURCE:ARG:쾌Ｃ , 0.50
;	TIMES SOURCE:ARG:쾌Ｖ, 0.50
;	TIMES SOURCE:ARG:쾌Ａ , 0.50
;	TIMES SOURCE:ARG:쾌Ｂ , 0.50
;	TIMES SOURCE:(ARG:1):0 , 0.50
;	TIMES SOURCE:(ARG:1):1 , 0.50
;	TIMES SOURCE:(ARG:1):2 , 0.50
;	TIMES SOURCE:(ARG:1):3 , 0.50
;ELSEIF ABL:(ARG:1):2 == 1
;	TIMES SOURCE:ARG:쾌Ｃ , 0.60
;	TIMES SOURCE:ARG:쾌Ｖ, 0.60
;	TIMES SOURCE:ARG:쾌Ａ , 0.60
;	TIMES SOURCE:ARG:쾌Ｂ , 0.60
;	TIMES SOURCE:(ARG:1):0 , 0.60
;	TIMES SOURCE:(ARG:1):1 , 0.60
;	TIMES SOURCE:(ARG:1):2 , 0.60
;	TIMES SOURCE:(ARG:1):3 , 0.60
;ELSEIF ABL:(ARG:1):2 == 2
;	TIMES SOURCE:ARG:쾌Ｃ , 0.80
;	TIMES SOURCE:ARG:쾌Ｖ, 0.80
;	TIMES SOURCE:ARG:쾌Ａ , 0.80
;	TIMES SOURCE:ARG:쾌Ｂ , 0.80
;	TIMES SOURCE:(ARG:1):0 , 0.80
;	TIMES SOURCE:(ARG:1):1 , 0.80
;	TIMES SOURCE:(ARG:1):2 , 0.80
;	TIMES SOURCE:(ARG:1):3 , 0.80
;ELSEIF ABL:(ARG:1):2 == 3
;	TIMES SOURCE:ARG:쾌Ｃ , 1.00
;	TIMES SOURCE:ARG:쾌Ｖ, 1.00
;	TIMES SOURCE:ARG:쾌Ａ , 1.00
;	TIMES SOURCE:ARG:쾌Ｂ , 1.00
;	TIMES SOURCE:(ARG:1):0 , 1.00
;	TIMES SOURCE:(ARG:1):1 , 1.00
;	TIMES SOURCE:(ARG:1):2 , 1.00
;	TIMES SOURCE:(ARG:1):3 , 1.00
;ELSEIF ABL:(ARG:1):2 == 4
;	TIMES SOURCE:ARG:쾌Ｃ , 1.20
;	TIMES SOURCE:ARG:쾌Ｖ, 1.20
;	TIMES SOURCE:ARG:쾌Ａ , 1.20
;	TIMES SOURCE:ARG:쾌Ｂ , 1.20
;	TIMES SOURCE:(ARG:1):0 , 1.20
;	TIMES SOURCE:(ARG:1):1 , 1.20
;	TIMES SOURCE:(ARG:1):2 , 1.20
;	TIMES SOURCE:(ARG:1):3 , 1.20
;ELSEIF ABL:(ARG:1):2 == 5
;	TIMES SOURCE:ARG:쾌Ｃ , 1.50
;	TIMES SOURCE:ARG:쾌Ｖ, 1.50
;	TIMES SOURCE:ARG:쾌Ａ , 1.50
;	TIMES SOURCE:ARG:쾌Ｂ , 1.50
;	TIMES SOURCE:(ARG:1):0 , 1.50
;	TIMES SOURCE:(ARG:1):1 , 1.50
;	TIMES SOURCE:(ARG:1):2 , 1.50
;	TIMES SOURCE:(ARG:1):3 , 1.50
;ELSEIF ABL:(ARG:1):2 == 6
;	TIMES SOURCE:ARG:쾌Ｃ , 1.80
;	TIMES SOURCE:ARG:쾌Ｖ, 1.80
;	TIMES SOURCE:ARG:쾌Ａ , 1.80
;	TIMES SOURCE:ARG:쾌Ｂ , 1.80
;	TIMES SOURCE:(ARG:1):0 , 1.80
;	TIMES SOURCE:(ARG:1):1 , 1.80
;	TIMES SOURCE:(ARG:1):2 , 1.80
;	TIMES SOURCE:(ARG:1):3 , 1.80
;ELSEIF ABL:(ARG:1):2 == 7
;	TIMES SOURCE:ARG:쾌Ｃ , 2.10
;	TIMES SOURCE:ARG:쾌Ｖ, 2.10
;	TIMES SOURCE:ARG:쾌Ａ , 2.10
;	TIMES SOURCE:ARG:쾌Ｂ , 2.10
;	TIMES SOURCE:ARG:성행위 , 2.10
;	TIMES SOURCE:(ARG:1):0 , 2.10
;	TIMES SOURCE:(ARG:1):1 , 2.10
;	TIMES SOURCE:(ARG:1):2 , 2.10
;	TIMES SOURCE:(ARG:1):3 , 2.10
;ELSEIF ABL:(ARG:1):2 == 8
;	TIMES SOURCE:ARG:쾌Ｃ , 2.30
;	TIMES SOURCE:ARG:쾌Ｖ, 2.30
;	TIMES SOURCE:ARG:쾌Ａ , 2.30
;	TIMES SOURCE:ARG:쾌Ｂ , 2.30
;	TIMES SOURCE:ARG:성행위 , 2.30
;	TIMES SOURCE:(ARG:1):0 , 2.30
;	TIMES SOURCE:(ARG:1):1 , 2.30
;	TIMES SOURCE:(ARG:1):2 , 2.30
;	TIMES SOURCE:(ARG:1):3 , 2.30
;ELSEIF ABL:(ARG:1):2 == 9
;	TIMES SOURCE:ARG:쾌Ｃ , 2.45
;	TIMES SOURCE:ARG:쾌Ｖ, 2.45
;	TIMES SOURCE:ARG:쾌Ａ , 2.45
;	TIMES SOURCE:ARG:쾌Ｂ , 2.45
;	TIMES SOURCE:ARG:성행위 , 2.45
;	TIMES SOURCE:(ARG:1):0 , 2.45
;	TIMES SOURCE:(ARG:1):1 , 2.45
;	TIMES SOURCE:(ARG:1):2 , 2.45
;	TIMES SOURCE:(ARG:1):3 , 2.45
;ELSEIF ABL:(ARG:1):2 == 10
;	TIMES SOURCE:ARG:쾌Ｃ , 2.80
;	TIMES SOURCE:ARG:쾌Ｖ, 2.80
;	TIMES SOURCE:ARG:쾌Ａ , 2.80
;	TIMES SOURCE:ARG:쾌Ｂ , 2.80
;	TIMES SOURCE:ARG:성행위 , 2.80
;	TIMES SOURCE:(ARG:1):0 , 2.80
;	TIMES SOURCE:(ARG:1):1 , 2.80
;	TIMES SOURCE:(ARG:1):2 , 2.80
;	TIMES SOURCE:(ARG:1):3 , 2.80
;ENDIF
;EXP:(ARG:1):70 += 1
;ENDIF


;-------------------------------------------------
;강정신약による절정취소
;-------------------------------------------------
@ECST_CANCEL, ARG

;SOURCE.ERBの절정処理を流用

C = 0
V = 0
A = 0
B = 0

;절정Ｃ
IF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 5
	C = 5
	CDOWN:ARG:0 = (PALAMLV:4 * 5 - 1000)
	PRINTL 궁극절정Ｃ캔슬
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 4
	C = 4
	CDOWN:ARG:0 = (PALAMLV:4 * 4 - 1000)
	PRINTL 최강절정Ｃ캔슬
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 3
	C = 3
	CDOWN:ARG:0 = (PALAMLV:4 * 3 - 1000)
	PRINTL 초강절정Ｃ캔슬
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 2
	C = 2
	CDOWN:ARG:0 = (PALAMLV:4 * 2 - 1000)
	PRINTL 강절정Ｃ캔슬
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4
	C = 1
	PALAM:ARG:0 = 5000
	CUP:ARG:0 = 0
	PRINTL 절정Ｃ캔슬
ENDIF
;CDOWN:ARG:1で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:0 + PALAM:ARG:0 - CDOWN:ARG:0 >= PALAMLV:4
	CDOWN:ARG:0 = CUP:ARG:0 + PALAM:ARG:0 - PALAMLV:4 + 1

;절정Ｖ
IF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 5
	V = 5
	CDOWN:ARG:1 = (PALAMLV:4 * 5 - 1000)
	PRINTL 궁극절정Ｖ캔슬
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 4
	V = 4
	CDOWN:ARG:1 = (PALAMLV:4 * 4 - 1000)
	PRINTL 최강절정Ｖ캔슬
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 3
	V = 3
	CDOWN:ARG:1 = (PALAMLV:4 * 3 - 1000)
	PRINTL 초강절정Ｖ캔슬
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 2
	V = 2
	CDOWN:ARG:1 = (PALAMLV:4 * 2 - 1000)
	PRINTL 강절정Ｖ캔슬
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4
	V = 1
	CDOWN:ARG:1 = (PALAMLV:4 - 1000)
	PRINTL 절정Ｖ캔슬
ENDIF
;CDOWN:ARG:1で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:1 + PALAM:ARG:1 - CDOWN:ARG:1 >= PALAMLV:4
	CDOWN:ARG:1 = CUP:ARG:1 + PALAM:ARG:1 - PALAMLV:4 + 1

;절정Ａ
IF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 5
	A = 5
	CDOWN:ARG:2 = (PALAMLV:4 * 5 - 1000)
	PRINTL 궁극절정Ａ캔슬
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 4
	A = 4
	CDOWN:ARG:2 = (PALAMLV:4 * 4 - 1000)
	PRINTL 최강절정Ａ캔슬
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 3
	A = 3
	CDOWN:ARG:2 = (PALAMLV:4 * 3 - 1000)
	PRINTL 초강절정Ａ캔슬
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 2
	A = 2
	CDOWN:ARG:2 = (PALAMLV:4 * 2 - 1000)
	PRINTL 강절정Ａ캔슬
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4
	A = 1
	CDOWN:ARG:2 = (PALAMLV:4 - 1000)
	PRINTL 절정Ａ캔슬
ENDIF
;CDOWN:ARG:2で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:2 + PALAM:ARG:2 - CDOWN:ARG:2 >= PALAMLV:4
	CDOWN:ARG:2 = CUP:ARG:2 + PALAM:ARG:2 - PALAMLV:4 + 1

;절정Ｂ
IF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 5
	B = 5
	CDOWN:ARG:3 = (PALAMLV:4 * 5 - 1000)
	PRINTL 궁극절정Ｂ캔슬
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 4
	B = 4
	CDOWN:ARG:3 = (PALAMLV:4 * 4 - 1000)
	PRINTL 최강절정Ｂ캔슬
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 3
	B = 3
	CDOWN:ARG:3 = (PALAMLV:4 * 3 - 1000)
	PRINTL 초강절정Ｂ캔슬
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 2
	B = 2
	CDOWN:ARG:3 = (PALAMLV:4 * 2 - 1000)
	PRINTL 강절정Ｂ캔슬
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4
	B = 1
	CDOWN:ARG:3 = (PALAMLV:4 - 1000)
	PRINTL 절정Ｂ캔슬
ENDIF
;CDOWN:ARG:3で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:3 + PALAM:ARG:3 - CDOWN:ARG:3 >= PALAMLV:4
	CDOWN:ARG:3 = CUP:ARG:3 + PALAM:ARG:3 - PALAMLV:4 + 1
	
;止められた절정횟수をTFLAG:44～TFLAG:47に記録
TFLAG:44 += C
TFLAG:45 += V
TFLAG:46 += A
TFLAG:47 += B

RETURN 1

;-------------------------------------------------
;절정処理
;-------------------------------------------------
@ORGASM_ADD, ARG
C = 0
V = 0
A = 0
B = 0

;강정신약の副作用を適用する
IF TEQUIP:ARG:34 == 1
	CALL REACT_DRUG, ARG
ENDIF

;절정Ｃ
IF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 5
	C = 5
;	CDOWN:ARG:0 = (PALAMLV:4 * 5 - 1000)
	CDOWN:ARG:0 = (PALAMLV:4 - 1000) * 5
	NOWEX:ARG:0 = 5
	;PRINTFORML 究極절정Ｃ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 4
	C = 4
;	CDOWN:ARG:0 = (PALAMLV:4 * 4 - 1000)
	CDOWN:ARG:0 = (PALAMLV:4 - 1000) * 4
	NOWEX:ARG:0 = 4
	;PRINTFORML 最強절정Ｃ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 3
	C = 3
;	CDOWN:ARG:0 = (PALAMLV:4 * 3 - 1000)
	CDOWN:ARG:0 = (PALAMLV:4 - 1000) * 3
	NOWEX:ARG:0 = 3
	;PRINTFORML 超強절정Ｃ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4 * 2
	C = 2
;	CDOWN:ARG:0 = (PALAMLV:4 * 2 - 1000)
	CDOWN:ARG:0 = (PALAMLV:4 - 1000) * 2
	NOWEX:ARG:0 = 2
	;PRINTFORML 強절정Ｃ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:0 + PALAM:ARG:0 >= PALAMLV:4
	C = 1
	CDOWN:ARG:0 = (PALAMLV:4 - 1000)
	NOWEX:ARG:0 = 1
	;PRINTFORML 절정Ｃ\@ARG == PLAYER?(조교자)#\@
ENDIF
;CDOWN:ARG:0で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:0 + PALAM:ARG:0 - CDOWN:ARG:0 >= PALAMLV:4
	CDOWN:ARG:0 = CUP:ARG:0 + PALAM:ARG:0 - PALAMLV:4 + 1

;절정Ｖ
IF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 5
	V = 5
;	CDOWN:ARG:1 = (PALAMLV:4 * 5 - 1000)
	CDOWN:ARG:1 = (PALAMLV:4 - 1000) * 5
	NOWEX:ARG:1 = 5
	;PRINTFORML 究極절정Ｖ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 4
	V = 4
;	CDOWN:ARG:1 = (PALAMLV:4 * 4 - 1000)
	CDOWN:ARG:1 = (PALAMLV:4 - 1000) * 4
	NOWEX:ARG:1 = 4
	;PRINTFORML 最強절정Ｖ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 3
	V = 3
;	CDOWN:ARG:1 = (PALAMLV:4 * 3 - 1000)
	CDOWN:ARG:1 = (PALAMLV:4 - 1000) * 3
	NOWEX:ARG:1 = 3
	;PRINTFORML 超強절정Ｖ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4 * 2
	V = 2
;	CDOWN:ARG:1 = (PALAMLV:4 * 2 - 1000)
	CDOWN:ARG:1 = (PALAMLV:4 - 1000) * 2
	NOWEX:ARG:1 = 2
	;PRINTFORML 強절정Ｖ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:1 + PALAM:ARG:1 >= PALAMLV:4
	V = 1
	CDOWN:ARG:1 = (PALAMLV:4 - 1000)
	NOWEX:ARG:1 = 1
	;PRINTFORML 절정Ｖ\@ARG == PLAYER?(조교자)#\@
ENDIF
;CDOWN:ARG:1で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:1 + PALAM:ARG:1 - CDOWN:ARG:1 >= PALAMLV:4
	CDOWN:ARG:1 = CUP:ARG:1 + PALAM:ARG:1 - PALAMLV:4 + 1

;절정Ａ
IF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 5
	A = 5
;	CDOWN:ARG:2 = (PALAMLV:4 * 5 - 1000)
	CDOWN:ARG:2 = (PALAMLV:4 - 1000) * 5
	NOWEX:ARG:2 = 5
	;PRINTFORML 究極절정Ａ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 4
	A = 4
;	CDOWN:ARG:2 = (PALAMLV:4 * 4 - 1000)
	CDOWN:ARG:2 = (PALAMLV:4 - 1000) * 4
	NOWEX:ARG:2 = 4
	;PRINTFORML 最強절정Ａ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 3
	A = 3
;	CDOWN:ARG:2 = (PALAMLV:4 * 3 - 1000)
	CDOWN:ARG:2 = (PALAMLV:4 - 1000) * 3
	NOWEX:ARG:2 = 3
	;PRINTFORML 超強절정Ａ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4 * 2
	A = 2
;	CDOWN:ARG:2 = (PALAMLV:4 * 2 - 1000)
	CDOWN:ARG:2 = (PALAMLV:4 - 1000) * 2
	NOWEX:ARG:2 = 2
	;PRINTFORML 強절정Ａ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:2 + PALAM:ARG:2 >= PALAMLV:4
	A = 1
	CDOWN:ARG:2 = (PALAMLV:4 - 1000)
	NOWEX:ARG:2 = 1
	;PRINTFORML 절정Ａ\@ARG == PLAYER?(조교자)#\@
ENDIF
;CDOWN:ARG:2で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:2 + PALAM:ARG:2 - CDOWN:ARG:2 >= PALAMLV:4
	CDOWN:ARG:2 = CUP:ARG:2 + PALAM:ARG:2 - PALAMLV:4 + 1

;절정Ｂ
IF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 5
	B = 5
;	CDOWN:ARG:3 = (PALAMLV:4 * 5 - 1000)
	CDOWN:ARG:3 = (PALAMLV:4- 1000) * 5 
	NOWEX:ARG:3 = 5
	;PRINTFORML 究極절정Ｂ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 4
	B = 4
;	CDOWN:ARG:3 = (PALAMLV:4 * 4 - 1000)
	CDOWN:ARG:3 = (PALAMLV:4 - 1000) * 4
	NOWEX:ARG:3 = 4
	;PRINTFORML 最強절정Ｂ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 3
	B = 3
;	CDOWN:ARG:3 = (PALAMLV:4 * 3 - 1000)
	CDOWN:ARG:3 = (PALAMLV:4 - 1000) * 3
	NOWEX:ARG:3 = 3
	;PRINTFORML 超強절정Ｂ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4 * 2
	B = 2
;	CDOWN:ARG:3 = (PALAMLV:4 * 2 - 1000)
	CDOWN:ARG:3 = (PALAMLV:4 - 1000) * 2
	NOWEX:ARG:3 = 2
	;PRINTFORML 強절정Ｂ\@ARG == PLAYER?(조교자)#\@
ELSEIF CUP:ARG:3 + PALAM:ARG:3 >= PALAMLV:4
	B = 1
	CDOWN:ARG:3 = (PALAMLV:4 - 1000)
	NOWEX:ARG:3 = 1
	;PRINTFORML 절정Ｂ\@ARG == PLAYER?(조교자)#\@
ENDIF
;CDOWN:ARG:3で下げても절정이상なら
;その値-1になるように調整（10000で절정なら9999）
SIF CUP:ARG:3 + PALAM:ARG:3 - CDOWN:ARG:3 >= PALAMLV:4
	CDOWN:ARG:3 = CUP:ARG:3 + PALAM:ARG:3 - PALAMLV:4 + 1

;-------------------------------------------------
;절정時の추가処理
;-------------------------------------------------
SIF ARG == TARGET
	TFLAG:절정강도 = C + V + A + B
SIF	ARG == PLAYER
	TFLAG:조교자절정강도 = C + V + A + B
IF ARG == TARGET
	;쾌락각인の処理
	;절정の部位と強度の합계が一定이상で각인を취득する
	R = C+V*2+A*2+B
	;Rが4이상で쾌락각인３に相当
	IF R >= 4 && MARK:1 < 3
		TFLAG:200 = 3
	;Rが3이상で쾌락각인２に相当
	ELSEIF R >= 3 && MARK:1 < 2
		TFLAG:200 = 2
	;Rが2이상で쾌락각인１に相当
	ELSEIF R >= 2 && MARK:1 < 1
		TFLAG:200 = 1
	ENDIF
ENDIF

LOCAL = 0

IF C >= 5 && V >= 5 && A >= 5 && B >= 5
	LOCAL = 40
	C *= 40
	V *= 40
	A *= 40
	B *= 40
ELSEIF C >= 4 && V >= 4 && A >= 4 && B >= 4
	LOCAL = 32
	C *= 32
	V *= 32
	A *= 32
	B *= 32
ELSEIF C >= 3 && V >= 3 && A >= 3 && B >= 3
	LOCAL = 24
	C *= 24
	V *= 24
	A *= 24
	B *= 24
ELSEIF C >= 2 && V >= 2 && A >= 2 && B >= 2
	LOCAL = 16
	C *= 16
	V *= 16
	A *= 16
	B *= 16
ELSEIF C && V && A && B
	LOCAL = 8
	C *= 8
	V *= 8
	A *= 8
	B *= 8
ELSEIF C && V && A
	LOCAL = 4
	C *= 4
	V *= 4
	A *= 4
ELSEIF B && V && A
	LOCAL = 4
	B *= 4
	V *= 4
	A *= 4
ELSEIF C && B && A
	LOCAL = 4
	C *= 4
	B *= 4
	A *= 4
ELSEIF C && V && B
	LOCAL = 4
	C *= 4
	V *= 4
	B *= 4
ELSEIF C && V
	LOCAL = 2
	C *= 2
	V *= 2
ELSEIF C && A
	LOCAL = 2
	C *= 2
	A *= 2
ELSEIF V && A
	LOCAL = 2
	V *= 2
	A *= 2
ELSEIF C && B
	LOCAL = 2
	C *= 2
	B *= 2
ELSEIF V && B
	LOCAL = 2
	V *= 2
	B *= 2
ELSEIF A && B
	LOCAL = 2
	A *= 2
	B *= 2
ENDIF

IF LOCAL > 0 && CFLAG:ＭＡＧ비피흡수 == 0 && ARG == TARGET
	LOCAL *= MAXBASE:PLAYER:LV * 20 * (5+MAX(ABL:PLAYER:순종,ABL:PLAYER:욕망,ABL:PLAYER:기교))/5
	CALL DRAIN_MAG,TARGET,LOCAL,PLAYER
ENDIF

IF C
	SOURCE:ARG:노출 += 500 * C
	SOURCE:ARG:굴종 += 200 * C
	SOURCE:ARG:반감 += 150 * C
	SIF TALENT:ARG:남자 && TALENT:ARG:오토코노코 == 0
		SOURCE:ARG:반감 -= 150 * C
	DOWNBASE:ARG:0 += 20
	DOWNBASE:ARG:1 += 10
ENDIF
IF V
	SOURCE:ARG:욕정 += 800 * V
	SOURCE:ARG:복종 += 500 * V
	SOURCE:ARG:노출 += 700 * V
	SOURCE:ARG:굴종 += 400 * V
	SOURCE:ARG:반감 += 300 * V
	DOWNBASE:ARG:0 += 40
	DOWNBASE:ARG:1 += 20
ENDIF
IF A
	SOURCE:ARG:욕정 += 500 * A
	SOURCE:ARG:복종 += 700 * A
	SOURCE:ARG:노출 += 900 * A
	SOURCE:ARG:굴종 += 500 * A
	SOURCE:ARG:반감 += 400 * A
	SIF TALENT:ARG:남자 && TALENT:ARG:오토코노코 == 0
		SOURCE:ARG:반감 += 400 * A
	SIF TALENT:ARG:남자 && TALENT:ARG:오토코노코 == 0
		SOURCE:ARG:일탈 += 200 * A
	
	DOWNBASE:ARG:0 += 60
	DOWNBASE:ARG:1 += 30
ENDIF
IF B
	SOURCE:ARG:노출 += 500 * B
	SOURCE:ARG:굴종 += 200 * B
	SOURCE:ARG:반감 += 150 * B
	SIF TALENT:ARG:남자 && TALENT:ARG:오토코노코 == 0
		SOURCE:ARG:반감 += 150 * B
	SIF TALENT:ARG:남자 && TALENT:ARG:오토코노코 == 0
		SOURCE:ARG:일탈 += 100 * B
	DOWNBASE:ARG:0 += 20
	DOWNBASE:ARG:1 += 10
ENDIF

;절정による욕망ＬＶアップ
L = 0
SIF C >= 2 || B >= 2 || V || A
	L = 1
SIF V >= 2 || A >= 2
	L = 2
SIF (C >= 2 && B >= 2) || (C >= 2 && V) || (C >= 2 && A) || (B >= 2 && V) || (B >= 2 && A) && (V && A)
	L = 2
SIF (C && B && V) || (C && B && A) || (C && V && A) || (V && A && B)
	L = 3
SIF C && V && A && B
	L = 4
IF ARG == TARGET
	;자제심があると１下がる
	SIF TALENT:ARG:20
		L -= 1

	IF ABL:ARG:1 < L
		ABL:ARG:1 = L
		PRINT 그리고 
		PRINTS ABLNAME:1
		PRINT 이 LV
		PRINTV L
		PRINTL (이)가 되었다
		;욕망の上昇による[억압]の消滅を체크
		CALL YOKUBO_UP_CHECK
	ENDIF
ENDIF

;절정횟수を増やす
EX:ARG:0 += C
EX:ARG:1 += V
EX:ARG:2 += A
EX:ARG:3 += B

;절정경험を増やす
;EXP:ARG:2 += C+V+A+B
CALL ADDS_EXP("절정경험", C+V+A+B, ARG)
RETURN 1


;-------------------------------------------------
;강정신약の副作用
;-------------------------------------------------
@REACT_DRUG, ARG
;仕様설명：
;@ECST_CANCELでEX:11～EX:14に記録してきた절정횟수を해방します。
;パッチ詰め合わせではTFLAG:44～TFLAG:47を代わりに사용。内訳は
;TFLAG:44 = EX:11(Ｃ절정処理)の代わり、TFLAG:45 = EX:12(Ｖ절정処理)の代わり、
;TFLAG:46 = EX:13(Ａ절정処理)の代わり、TFLAG:47 = EX:14(Ｂ절정処理)の代わり
;記録してきた절정횟수１回につき、該当する部位の쾌ソース（UP:0,1,2,3）を２倍にします。
;１回のコマンドでひとつの部位につき１回ずつこの倍化処理を行い、
;EX:11～EX:14の합계が０になったとき、反動が해제されます。
;-------------------------------------------------
;쾌Ｃの処理
IF TFLAG:44 > 0 && CUP:ARG:0 > 0
	CUP:ARG:0 *= 2
	TFLAG:44 -= 1
ENDIF
;쾌Ｖの処理
IF TFLAG:45 > 0 && CUP:ARG:1 > 0
	CUP:ARG:1 *= 2
	TFLAG:45 -= 1
ENDIF
;쾌Ａの処理
IF TFLAG:46 > 0 && CUP:ARG:2 > 0
	CUP:ARG:2 *= 2
	TFLAG:46 -= 1
ENDIF
;쾌Ｂの処理
IF TFLAG:47 > 0 && CUP:ARG:3 > 0
	CUP:ARG:3 *= 2
	TFLAG:47 -= 1
ENDIF
;反動の종료체크
SIF TFLAG:44 + TFLAG:45 + TFLAG:46 + TFLAG:47 == 0
	TEQUIP:34 = 0

RETURN 1


;-------------------------------------------------
;조교대상の사정체크
;-------------------------------------------------
@TARGET_EJAC_CHECK
SIF TALENT:후타나리 == 0 && !IS_MALE(TARGET)
	RETURN 0

A = CUP:TARGET:0 + CUP:TARGET:1 + CUP:TARGET:2 + CUP:TARGET:3

;자제심
SIF TALENT:자제심
	A /= 2

;쾌감에솔직
SIF TALENT:쾌감에솔직
	TIMES A , 1.20

;쾌감을부정（음란、娼婦で無効）
SIF TALENT:쾌감을부정 && (TALENT:음란 == 0 && TALENT:창부 == 0)
	TIMES A , 0.80

;미약
SIF TEQUIP:미약
	A *= 2

;이뇨제
SIF TEQUIP:이뇨제
	A /= 2

;射精の再装填期間中は射精ゲージの増加は20分の1に
SIF CFLAG:TARGET:사정게이지재장전 > 0
	A /= 20

;射精の限界が来ている場合は、射精ゲージの増加はしない
IF CFLAG:TARGET:사정남은수보존 == 0
	A = 0
	BASE:사정 = 0
ENDIF

BASE:사정 += A

;타겟TCVAR:射精処理追加
IF BASE:TARGET:사정 > MAXBASE:TARGET:사정 * 5
	TCVAR:TARGET:사정 = 5
ELSEIF BASE:TARGET:사정 > MAXBASE:TARGET:사정 * 4
	TCVAR:TARGET:사정 = 4
ELSEIF BASE:TARGET:사정 > MAXBASE:TARGET:사정 * 3
	TCVAR:TARGET:사정 = 3
ELSEIF BASE:TARGET:사정 > MAXBASE:TARGET:사정 * 2
	TCVAR:TARGET:사정 = 2
ELSEIF BASE:TARGET:사정 > MAXBASE:TARGET:사정
	TCVAR:TARGET:사정 = 1
ELSE
	TCVAR:TARGET:사정 = 0
ENDIF

S = BASE:사정
EJAC = MAXBASE:사정
IF TEQUIP:42 == 0
	IF  S > EJAC * 5
		E = 5
	ELSEIF  S > EJAC * 4
		E = 4
	ELSEIF  S > EJAC * 3
		E = 3
	ELSEIF  S > EJAC * 2
		E = 2
	ELSEIF S > EJAC
		E = 1
	ELSE
		E = 0
	ENDIF
	
	;究極射精
	IF E == 5
		DOWNBASE:TARGET:체력 += 20
		DOWNBASE:TARGET:기력 += 100
	
		IF EXP:TARGET:사정경험 < EXPLV:1
			SOURCE:TARGET:노출 += 10000
			SOURCE:TARGET:굴종 += 5000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 200
			ELSE
				SOURCE:TARGET:불결 += 2000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:2
			SOURCE:TARGET:노출 += 5000
			SOURCE:TARGET:굴종 += 3000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 150
			ELSE
				SOURCE:TARGET:불결 += 1500
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:3
			SOURCE:TARGET:노출 += 3000
			SOURCE:TARGET:굴종 += 1500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 100
			ELSE
				SOURCE:TARGET:불결 += 1000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:4
			SOURCE:TARGET:노출 += 1500
			SOURCE:TARGET:굴종 += 800
			IF TALENT:남자
				SOURCE:TARGET:불결 += 70
			ELSE
				SOURCE:TARGET:불결 += 700
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:5
			SOURCE:TARGET:노출 += 1000
			SOURCE:TARGET:굴종 += 500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 40
			ELSE
				SOURCE:TARGET:불결 += 400
			ENDIF
		ELSE
			SOURCE:TARGET:노출 += 500
			SOURCE:TARGET:굴종 += 300
		ENDIF
	
;		PRINTS NAME:TARGET
;		PRINTL 大量사정
;		PRINTL 정액경험＋１
;		PRINTL 사정경험＋５
;		IF EXP:TARGET:3 == 0 && !IS_MALE(TARGET)
;			EXP:TARGET:50 += 1
;			PRINTL 이상경험＋1
;			CALL ADDS_ABNORMAL_EXP("사정", TARGET)
;		ENDIF
		CALL ADDS_EXP("정액경험", 1, TARGET)
		CALL ADDS_EXP("사정경험", 5, TARGET)
;		EXP:TARGET:20 += 1
;		EXP:TARGET:3 += 5
	
		CALL IN_VAGINA_CHECK_T
	
		;Ｐに정액불결
		CALL SET_STAIN("페니스", "정액", TARGET)
	
		BASE:사정 -= EJAC*5
		SIF BASE:사정 >= EJAC
			BASE:사정 = EJAC-1

		;調教対象が射精フラグ
		TFLAG:10 = 5
		NOWEX:5 += 1
		EX:5 += 1
	;最強射精
	ELSEIF E == 4
		DOWNBASE:TARGET:체력 += 20
		DOWNBASE:TARGET:기력 += 100
	
		IF EXP:TARGET:사정경험 < EXPLV:1
			SOURCE:TARGET:노출 += 10000
			SOURCE:TARGET:굴종 += 5000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 200
			ELSE
				SOURCE:TARGET:불결 += 2000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:2
			SOURCE:TARGET:노출 += 5000
			SOURCE:TARGET:굴종 += 3000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 150
			ELSE
				SOURCE:TARGET:불결 += 1500
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:3
			SOURCE:TARGET:노출 += 3000
			SOURCE:TARGET:굴종 += 1500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 100
			ELSE
				SOURCE:TARGET:불결 += 1000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:4
			SOURCE:TARGET:노출 += 1500
			SOURCE:TARGET:굴종 += 800
			IF TALENT:남자
				SOURCE:TARGET:불결 += 70
			ELSE
				SOURCE:TARGET:불결 += 700
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:5
			SOURCE:TARGET:노출 += 1000
			SOURCE:TARGET:굴종 += 500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 40
			ELSE
				SOURCE:TARGET:불결 += 400
			ENDIF
		ELSE
			SOURCE:TARGET:노출 += 500
			SOURCE:TARGET:굴종 += 300
		ENDIF
	
;		PRINTS NAME:TARGET
;		PRINTL 大量사정
;		PRINTL 정액경험＋１
;		PRINTL 사정경험＋４
;		IF EXP:TARGET:3 == 0 && !IS_MALE(TARGET)
;			EXP:TARGET:50 += 1
;			PRINTL 이상경험＋1
;			CALL ADDS_ABNORMAL_EXP("사정", TARGET)
;		ENDIF
		CALL ADDS_EXP("정액경험", 1, TARGET)
		CALL ADDS_EXP("사정경험", 4, TARGET)
;		EXP:TARGET:20 += 1
;		EXP:TARGET:3 += 4
	
		CALL IN_VAGINA_CHECK_T
	
		;Ｐに정액불결
		CALL SET_STAIN("페니스", "정액", TARGET)
	
		BASE:사정 -= EJAC*4
		SIF BASE:사정 >= EJAC
			BASE:사정 = EJAC-1

		;조교대상이사정フラグ
		TFLAG:10 = 4
		NOWEX:5 += 1
		EX:5 += 1
	;超大量사정
	ELSEIF E == 3
		DOWNBASE:TARGET:체력 += 20
		DOWNBASE:TARGET:기력 += 100
	
		IF EXP:TARGET:사정경험 < EXPLV:1
			SOURCE:TARGET:노출 += 10000
			SOURCE:TARGET:굴종 += 5000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 200
			ELSE
				SOURCE:TARGET:불결 += 2000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:2
			SOURCE:TARGET:노출 += 5000
			SOURCE:TARGET:굴종 += 3000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 150
			ELSE
				SOURCE:TARGET:불결 += 1500
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:3
			SOURCE:TARGET:노출 += 3000
			SOURCE:TARGET:굴종 += 1500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 100
			ELSE
				SOURCE:TARGET:불결 += 1000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:4
			SOURCE:TARGET:노출 += 1500
			SOURCE:TARGET:굴종 += 800
			IF TALENT:남자
				SOURCE:TARGET:불결 += 70
			ELSE
				SOURCE:TARGET:불결 += 700
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:5
			SOURCE:TARGET:노출 += 1000
			SOURCE:TARGET:굴종 += 500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 40
			ELSE
				SOURCE:TARGET:불결 += 400
			ENDIF
		ELSE
			SOURCE:TARGET:노출 += 500
			SOURCE:TARGET:굴종 += 300
		ENDIF
	
;		PRINTS NAME:TARGET
;		PRINTL 大量사정
;		PRINTL 정액경험＋１
;		PRINTL 사정경험＋３
;		IF EXP:TARGET:3 == 0 && !IS_MALE(TARGET)
;			EXP:TARGET:50 += 1
;			PRINTL 이상경험＋1
;			CALL ADDS_ABNORMAL_EXP("사정", TARGET)
;		ENDIF
		CALL ADDS_EXP("정액경험", 1, TARGET)
		CALL ADDS_EXP("사정경험", 3, TARGET)
;		EXP:TARGET:20 += 1
;		EXP:TARGET:3 += 3
	
		CALL IN_VAGINA_CHECK_T
	
		;Ｐに정액불결
		CALL SET_STAIN("페니스", "정액", TARGET)
	
		BASE:사정 -= EJAC*3
		SIF BASE:사정 >= EJAC
			BASE:사정 = EJAC-1

		;조교대상이사정フラグ
		TFLAG:10 = 3
		NOWEX:5 += 1
		EX:5 += 1
	;大量사정
	ELSEIF E == 2
		DOWNBASE:TARGET:체력 += 20
		DOWNBASE:TARGET:기력 += 100
	
		IF EXP:TARGET:사정경험 < EXPLV:1
			SOURCE:TARGET:노출 += 10000
			SOURCE:TARGET:굴종 += 5000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 200
			ELSE
				SOURCE:TARGET:불결 += 2000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:2
			SOURCE:TARGET:노출 += 5000
			SOURCE:TARGET:굴종 += 3000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 150
			ELSE
				SOURCE:TARGET:불결 += 1500
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:3
			SOURCE:TARGET:노출 += 3000
			SOURCE:TARGET:굴종 += 1500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 100
			ELSE
				SOURCE:TARGET:불결 += 1000
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:4
			SOURCE:TARGET:노출 += 1500
			SOURCE:TARGET:굴종 += 800
			IF TALENT:남자
				SOURCE:TARGET:불결 += 70
			ELSE
				SOURCE:TARGET:불결 += 700
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:5
			SOURCE:TARGET:노출 += 1000
			SOURCE:TARGET:굴종 += 500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 40
			ELSE
				SOURCE:TARGET:불결 += 400
			ENDIF
		ELSE
			SOURCE:TARGET:노출 += 500
			SOURCE:TARGET:굴종 += 300
		ENDIF
	
;		PRINTS NAME:TARGET
;		PRINTL 大量사정
;		PRINTL 정액경험＋１
;		PRINTL 사정경험＋２
;		IF EXP:TARGET:3 == 0 && !IS_MALE(TARGET)
;			EXP:TARGET:50 += 1
;			PRINTL 이상경험＋1
;			CALL ADDS_ABNORMAL_EXP("사정", TARGET)
;		ENDIF
		CALL ADDS_EXP("정액경험", 1, TARGET)
		CALL ADDS_EXP("사정경험", 2, TARGET)
;		EXP:TARGET:20 += 1
;		EXP:TARGET:3 += 2
	
		CALL IN_VAGINA_CHECK_T
	
		;Ｐに정액불결
		CALL SET_STAIN("페니스", "정액", TARGET)
	
		BASE:사정 -= EJAC*2
		SIF BASE:사정 >= EJAC
			BASE:사정 = EJAC-1

		;조교대상이사정フラグ
		TFLAG:10 = 2
		NOWEX:5 += 1
		EX:5 += 1
	;통상の사정
	ELSEIF E == 1
		DOWNBASE:TARGET:기력 += 40
	
		IF EXP:TARGET:사정경험 < EXPLV:1
			SOURCE:TARGET:노출 += 5000
			SOURCE:TARGET:굴종 += 2500
			IF TALENT:남자
				SOURCE:TARGET:불결 += 90
			ELSE
				SOURCE:TARGET:불결 += 900
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:2
			SOURCE:TARGET:노출 += 2500
			SOURCE:TARGET:굴종 += 2000
			IF TALENT:남자
				SOURCE:TARGET:불결 += 70
			ELSE
				SOURCE:TARGET:불결 += 700
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:3
			SOURCE:TARGET:노출 += 1000
			SOURCE:TARGET:굴종 += 800
			IF TALENT:남자
				SOURCE:TARGET:불결 += 50
			ELSE
				SOURCE:TARGET:불결 += 500
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:4
			SOURCE:TARGET:노출 += 800
			SOURCE:TARGET:굴종 += 600
			IF TALENT:남자
				SOURCE:TARGET:불결 += 35
			ELSE
				SOURCE:TARGET:불결 += 350
			ENDIF
		ELSEIF EXP:TARGET:사정경험 < EXPLV:5
			SOURCE:TARGET:노출 += 400
			SOURCE:TARGET:굴종 += 400
			IF TALENT:남자
				SOURCE:TARGET:불결 += 20
			ELSE
				SOURCE:TARGET:불결 += 200
			ENDIF
		ELSE
			SOURCE:TARGET:노출 += 200
			SOURCE:TARGET:굴종 += 250
		ENDIF
	
	;	PRINTS NAME:TARGET
	;	PRINTL 사정
	;	PRINTL 사정경험＋１
;		IF EXP:TARGET:3 == 0 && !IS_MALE(TARGET)
			;EXP:TARGET:50 += 1
			;PRINTL 이상경험＋1
;			CALL ADDS_ABNORMAL_EXP("사정", TARGET)
;		ENDIF
		CALL ADDS_EXP("사정경험", 1, TARGET)
		;EXP:TARGET:3 += 1
	
		CALL IN_VAGINA_CHECK_T
	
		;Ｐに정액불결
		CALL SET_STAIN("페니스", "정액", TARGET)
	
		BASE:사정 -= EJAC
		SIF BASE:사정 >= EJAC
			BASE:사정 = EJAC-1
	
		;조교대상이사정フラグ
		TFLAG:10 = 1
		NOWEX:5 += 1
		EX:5 += 1
	ENDIF
	
	IF CFLAG:ＭＡＧ비피흡수 == 0 && E > 0
		LOCAL = 2 * BASE:PLAYER:LV * E * 20 * (5+MAX(ABL:PLAYER:순종,ABL:PLAYER:욕망,ABL:PLAYER:기교))/5
		CALL DRAIN_MAG,TARGET,LOCAL,PLAYER
	ENDIF
	;사정には再装填の期間を設ける
	;통상사정時
	SIF E == 1
		CFLAG:TARGET:9 = 3
	;大量사정時
	SIF E == 2
		CFLAG:TARGET:9 = 5
	;大量사정時
	SIF E == 3
		CFLAG:TARGET:9 = 6
	;大量사정時
	SIF E == 4
		CFLAG:TARGET:9 = 7
	;大量사정時
	SIF E == 5
		CFLAG:TARGET:9 = 2
	
	;사정残弾減少
	SIF E > 0
		CFLAG:TARGET:11 -= 1
ENDIF
;-------------------------------------------------
;분유체크(ARG:行為者、ARG:1被行為者)
;-------------------------------------------------
@MILK_CHECK, ARG, ARG:1
#DIM 변수A
#DIM 변수B
SIF TALENT:ARG:모유체질 == 0
	RETURN 0

변수A = CUP:ARG:0 / 5 + CUP:ARG:1 / 5 + CUP:ARG:2 / 5 + CUP:ARG:3 * 3

;자제심
SIF TALENT:ARG:자제심
	변수A /= 2

;쾌감에솔직
SIF TALENT:ARG:쾌감에솔직
	TIMES 변수A , 1.20

;쾌감을부정（음란、창부で무효）
SIF TALENT:ARG:쾌감을부정 && IS_BITCHY(ARG) == 0
	TIMES 변수A , 0.80

;B둔감;둔감と민감の번호ミス수정＆なぜか민감を計算していなかったので추가
SIF TALENT:ARG:Ｂ둔감
	TIMES 변수A , 0.80

;B민감
SIF TALENT:ARG:Ｂ민감
	TIMES 변수A , 1.20

;미약
SIF TEQUIP:ARG:미약
	변수A *= 2

;이뇨제
SIF TEQUIP:ARG:이뇨제
	변수A /= 2

;조교자が유아퇴행
SIF TALENT:(ARG:1):유아／유아퇴행
	TIMES 변수A , 1.20

;조교자が유치
SIF TALENT:(ARG:1):유치
	TIMES 변수A , 1.20

;빈유
SIF TALENT:ARG:빈유
	TIMES 변수A , 0.75

;절벽;なぜか절벽を計算していなかったので추가
SIF TALENT:ARG:절벽
	TIMES 변수A , 0.50

;분유중독の레벨を見る
IF ABL:ARG:분유중독== 0
	TIMES 변수A , 1.00
ELSEIF ABL:ARG:분유중독 == 1
	TIMES 변수A , 1.05
ELSEIF ABL:ARG:분유중독 == 2
	TIMES 변수A , 1.10
ELSEIF ABL:ARG:분유중독 == 3
	TIMES 변수A , 1.20
ELSEIF ABL:ARG:분유중독 == 4
	TIMES 변수A , 1.30
ELSEIF ABL:ARG:분유중독 == 5
	TIMES 변수A , 1.50
ELSE
	변수A = 변수A * ABL:ARG:분유중독 * 30 / 100
ENDIF

;ここで毎ターン500加算されていたのを수정
변수A = 변수A / 2
BASE:ARG:모유 += 변수A

IF  BASE:ARG:모유 > MAXBASE:ARG:모유 * 5
	변수B = 5
ELSEIF  BASE:ARG:모유 > MAXBASE:ARG:모유 * 4
	변수B = 4
ELSEIF  BASE:ARG:모유 > MAXBASE:ARG:모유 * 3
	변수B = 3
ELSEIF  BASE:ARG:모유 > MAXBASE:ARG:모유 * 2
	변수B = 2
ELSEIF BASE:ARG:모유 > MAXBASE:ARG:모유
	변수B = 1
ELSE
	변수B = 0
ENDIF

;究極분유
IF 변수B == 5
	DOWNBASE:ARG:체력 += 20
	DOWNBASE:ARG:기력 += 100

	IF EXP:ARG:분유경험 < EXPLV:1
		SOURCE:ARG:노출 += 10000
		SOURCE:ARG:굴종 += 5000
		SOURCE:ARG:불결 += 2000
	ELSEIF EXP:ARG:분유경험 < EXPLV:2
		SOURCE:ARG:노출 += 5000
		SOURCE:ARG:굴종 += 3000
		SOURCE:ARG:불결 += 1500
	ELSEIF EXP:ARG:분유경험 < EXPLV:3
		SOURCE:ARG:노출 += 3000
		SOURCE:ARG:굴종 += 1500
		SOURCE:ARG:불결 += 1000
	ELSEIF EXP:ARG:분유경험 < EXPLV:4
		SOURCE:ARG:노출 += 1500
		SOURCE:ARG:굴종 += 800
		SOURCE:ARG:불결 += 700
	ELSEIF EXP:ARG:분유경험 < EXPLV:5
		SOURCE:ARG:노출 += 1000
		SOURCE:ARG:굴종 += 500
		SOURCE:ARG:불결 += 400
	ELSE
		SOURCE:ARG:노출 += 500
		SOURCE:ARG:굴종 += 300
	ENDIF

	;PRINTFORML %CALLNAME:ARG%は유두から大量の모유を噴出した
	;PRINTL 분유경험＋５
	SIF EXP:ARG:분유경험 == 0
		CALL ADDS_ABNORMAL_EXP("분유", ARG)
	CALL ADDS_EXP("분유경험", 5, ARG)
	;Ｂに모유불결
	STAIN:ARG:가슴 |= 16

	BASE:ARG:모유 -= MAXBASE:ARG:모유*5
	SIF BASE:ARG:모유 >= MAXBASE:ARG:모유
		BASE:ARG:모유 = MAXBASE:ARG:모유-1

	;조교대상이분유フラグ
	IF ARG == MASTER
		TFLAG:주인이분유 += 5
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:주인이착유중 += 5
	ELSEIF  ARG == ASSI
		TFLAG:조수가분유 += 5
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:조수가착유중 += 5
	ELSE
		TFLAG:조교대상이분유 += 5
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:착유중 += 5
	ENDIF

;なぜか:4が使われていたけれど분유は:10なのだから:10ではないのか？CSVにも:4は何も書かれていないし
;	NOWEX:ARG:4 += 5
;	EX:ARG:4 += 5
	NOWEX:ARG:분유 += 5
	EX:ARG:분유 += 5
;最強분유
ELSEIF 변수B == 4
	DOWNBASE:ARG:체력 += 20
	DOWNBASE:ARG:기력 += 100

	IF EXP:ARG:분유경험 < EXPLV:1
		SOURCE:ARG:노출 += 10000
		SOURCE:ARG:굴종 += 5000
		SOURCE:ARG:불결 += 2000
	ELSEIF EXP:ARG:분유경험 < EXPLV:2
		SOURCE:ARG:노출 += 5000
		SOURCE:ARG:굴종 += 3000
		SOURCE:ARG:불결 += 1500
	ELSEIF EXP:ARG:분유경험 < EXPLV:3
		SOURCE:ARG:노출 += 3000
		SOURCE:ARG:굴종 += 1500
		SOURCE:ARG:불결 += 1000
	ELSEIF EXP:ARG:분유경험 < EXPLV:4
		SOURCE:ARG:노출 += 1500
		SOURCE:ARG:굴종 += 800
		SOURCE:ARG:불결 += 700
	ELSEIF EXP:ARG:분유경험 < EXPLV:5
		SOURCE:ARG:노출 += 1000
		SOURCE:ARG:굴종 += 500
		SOURCE:ARG:불결 += 400
	ELSE
		SOURCE:ARG:노출 += 500
		SOURCE:ARG:굴종 += 300
	ENDIF

	;PRINTFORML %CALLNAME:ARG%は유두から大量の모유を噴出した
	;PRINTL 분유경험＋４
	SIF EXP:ARG:분유경험 == 0
		CALL ADDS_ABNORMAL_EXP("분유", ARG)
	CALL ADDS_EXP("분유경험", 4, ARG)
	;Ｂに모유불결
	STAIN:ARG:가슴 |= 16

	BASE:ARG:모유 -= MAXBASE:ARG:모유*4
	SIF BASE:ARG:모유 >= MAXBASE:ARG:모유
		BASE:ARG:모유 = MAXBASE:ARG:모유-1

	;조교대상이분유フラグ
	IF ARG == MASTER
		TFLAG:주인이분유 += 4
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:주인이착유중 += 4
	ELSEIF  ARG == ASSI
		TFLAG:조수가분유 += 4
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:조수가착유중 += 4
	ELSE
		TFLAG:조교대상이분유 += 4
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:착유중 += 4
	ENDIF

	NOWEX:ARG:분유 += 4
	EX:ARG:분유 += 4
;超大量분유
ELSEIF 변수B == 3
	DOWNBASE:ARG:체력 += 20
	DOWNBASE:ARG:기력 += 100

	IF EXP:ARG:분유경험 < EXPLV:1
		SOURCE:ARG:노출 += 10000
		SOURCE:ARG:굴종 += 5000
		SOURCE:ARG:불결 += 2000
	ELSEIF EXP:ARG:분유경험 < EXPLV:2
		SOURCE:ARG:노출 += 5000
		SOURCE:ARG:굴종 += 3000
		SOURCE:ARG:불결 += 1500
	ELSEIF EXP:ARG:분유경험 < EXPLV:3
		SOURCE:ARG:노출 += 3000
		SOURCE:ARG:굴종 += 1500
		SOURCE:ARG:불결 += 1000
	ELSEIF EXP:ARG:분유경험 < EXPLV:4
		SOURCE:ARG:노출 += 1500
		SOURCE:ARG:굴종 += 800
		SOURCE:ARG:불결 += 700
	ELSEIF EXP:ARG:분유경험 < EXPLV:5
		SOURCE:ARG:노출 += 1000
		SOURCE:ARG:굴종 += 500
		SOURCE:ARG:불결 += 400
	ELSE
		SOURCE:ARG:노출 += 500
		SOURCE:ARG:굴종 += 300
	ENDIF

	;PRINTFORML %CALLNAME:ARG%は유두から大量の모유を噴出した
	;PRINTL 분유경험＋３
	SIF EXP:ARG:분유경험 == 0
		CALL ADDS_ABNORMAL_EXP("분유", ARG)
	CALL ADDS_EXP("분유경험", 3, ARG)
	;Ｂに모유불결
	STAIN:ARG:가슴 |= 16

	BASE:ARG:모유 -= MAXBASE:ARG:모유*3
	SIF BASE:ARG:모유 >= MAXBASE:ARG:모유
		BASE:ARG:모유 = MAXBASE:ARG:모유-1

	;조교대상이분유フラグ
	IF ARG == MASTER
		TFLAG:주인이분유 += 3
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:주인이착유중 += 3
	ELSEIF  ARG == ASSI
		TFLAG:조수가분유 += 3
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:조수가착유중 += 3
	ELSE
		TFLAG:조교대상이분유 += 3
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:착유중 += 3
	ENDIF

	NOWEX:ARG:분유 += 3
	EX:ARG:분유 += 3
;大量분유
ELSEIF 변수B == 2
	DOWNBASE:ARG:체력 += 20
	DOWNBASE:ARG:기력 += 100

	IF EXP:ARG:분유경험 < EXPLV:1
		SOURCE:ARG:노출 += 10000
		SOURCE:ARG:굴종 += 5000
		SOURCE:ARG:불결 += 2000
	ELSEIF EXP:ARG:분유경험 < EXPLV:2
		SOURCE:ARG:노출 += 5000
		SOURCE:ARG:굴종 += 3000
		SOURCE:ARG:불결 += 1500
	ELSEIF EXP:ARG:분유경험 < EXPLV:3
		SOURCE:ARG:노출 += 3000
		SOURCE:ARG:굴종 += 1500
		SOURCE:ARG:불결 += 1000
	ELSEIF EXP:ARG:분유경험 < EXPLV:4
		SOURCE:ARG:노출 += 1500
		SOURCE:ARG:굴종 += 800
		SOURCE:ARG:불결 += 700
	ELSEIF EXP:ARG:분유경험 < EXPLV:5
		SOURCE:ARG:노출 += 1000
		SOURCE:ARG:굴종 += 500
		SOURCE:ARG:불결 += 400
	ELSE
		SOURCE:ARG:노출 += 500
		SOURCE:ARG:굴종 += 300
	ENDIF

	;PRINTFORML %CALLNAME:ARG%は유두から大量の모유を噴出した
	;PRINTL 분유경험＋２
	SIF EXP:ARG:분유경험 == 0
		CALL ADDS_ABNORMAL_EXP("분유", ARG)
	CALL ADDS_EXP("분유경험", 2, ARG)
	;Ｂに모유불결
	STAIN:ARG:가슴 |= 16

	BASE:ARG:모유 -= MAXBASE:ARG:모유*2
	SIF BASE:ARG:모유 >= MAXBASE:ARG:모유
		BASE:ARG:모유 = MAXBASE:ARG:모유-1

	;조교대상이분유フラグ
	IF ARG == MASTER
		TFLAG:주인이분유 += 2
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:주인이착유중 += 2
	ELSEIF  ARG == ASSI
		TFLAG:조수가분유 += 2
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:조수가착유중 += 2
	ELSE
		TFLAG:조교대상이분유 += 2
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:착유중 += 2
	ENDIF

	NOWEX:ARG:분유 += 2
	EX:ARG:분유 += 2
;통상の분유
ELSEIF 변수B == 1
	DOWNBASE:ARG:기력 += 40

	IF EXP:ARG:분유경험 < EXPLV:1
		SOURCE:ARG:노출 += 5000
		SOURCE:ARG:굴종 += 2500
		SOURCE:ARG:불결 += 900
	ELSEIF EXP:ARG:분유경험 < EXPLV:2
		SOURCE:ARG:노출 += 2500
		SOURCE:ARG:굴종 += 2000
		SOURCE:ARG:불결 += 700
	ELSEIF EXP:ARG:분유경험 < EXPLV:3
		SOURCE:ARG:노출 += 1000
		SOURCE:ARG:굴종 += 800
		SOURCE:ARG:불결 += 500
	ELSEIF EXP:ARG:분유경험 < EXPLV:4
		SOURCE:ARG:노출 += 800
		SOURCE:ARG:굴종 += 600
		SOURCE:ARG:불결 += 350
	ELSEIF EXP:ARG:분유경험 < EXPLV:5
		SOURCE:ARG:노출 += 400
		SOURCE:ARG:굴종 += 400
		SOURCE:ARG:불결 += 200
	ELSE
		SOURCE:ARG:노출 += 200
		SOURCE:ARG:굴종 += 250
	ENDIF

	;PRINTFORML %CALLNAME:ARG%は유두から모유を垂れ流した
	;PRINTL 분유경험＋１
	SIF EXP:ARG:분유경험 == 0
		CALL ADDS_ABNORMAL_EXP("분유", ARG)
	CALL ADDS_EXP("분유경험", 1, ARG)
	;Ｂに모유불결
	STAIN:ARG:가슴 |= 16

	BASE:ARG:모유 -= MAXBASE:ARG:모유
	SIF BASE:ARG:모유 >= MAXBASE:ARG:모유
		BASE:ARG:모유 = MAXBASE:ARG:모유-1

	;조교대상이분유フラグ
	IF ARG == MASTER
		TFLAG:주인이분유 += 1
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:주인이착유중 += 1
	ELSEIF  ARG == ASSI
		TFLAG:조수가분유 += 1
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:조수가착유중 += 1
	ELSE
		TFLAG:조교대상이분유 += 1
		;착유기で모유が集められているか체크
		SIF TEQUIP:ARG:17
			TFLAG:착유중 += 1
	ENDIF

	NOWEX:ARG:분유 += 1
	EX:ARG:분유 += 1
ENDIF

IF CFLAG:ARG:ＭＡＧ비피흡수 == 0 && 변수B > 0
	LOCAL = 2 * BASE:(ARG:1):LV * 변수B * 20 * (5+MAX(ABL:(ARG:1):순종,ABL:(ARG:1):욕망,ABL:(ARG:1):기교))/5
	CALL DRAIN_MAG,ARG,LOCAL,ARG:1
ENDIF

;-------------------------------------------------
;동성の場合の체크
;-------------------------------------------------
@SOURCE_SEX_CHECK, ARG, ARG:1

IF (!TALENT:ARG:짐승 || TALENT:ARG:새) && (TALENT:(ARG:1):짐승 || TALENT:(ARG:1):새)
	;ABL:수간중독をみる
	IF ABL:ARG:22 == 0
		TIMES SOURCE:ARG:쾌Ｃ , 0.75
		TIMES SOURCE:ARG:쾌Ｖ , 0.75
		TIMES SOURCE:ARG:쾌Ａ , 0.75
		TIMES SOURCE:ARG:쾌Ｂ , 0.75
		TIMES SOURCE:ARG:달성 , 0.90
		TIMES SOURCE:ARG:굴종 , 1.20
		TIMES SOURCE:ARG:불결 , 1.30
		TIMES SOURCE:ARG:일탈 , 1.30
		TIMES SOURCE:ARG:반감 , 1.20
		TIMES SOURCE:ARG:울굴 , 1.20
	ELSEIF ABL:ARG:22 == 1
		SOURCE:ARG:9 += 100
		TIMES SOURCE:ARG:쾌Ｃ , 1.10
		TIMES SOURCE:ARG:쾌Ｖ , 1.10
		TIMES SOURCE:ARG:쾌Ａ , 1.10
		TIMES SOURCE:ARG:쾌Ｂ , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:불결 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	ELSEIF ABL:ARG:22 == 2
		SOURCE:ARG:9 += 200
		TIMES SOURCE:ARG:쾌Ｃ , 1.20
		TIMES SOURCE:ARG:쾌Ｖ , 1.20
		TIMES SOURCE:ARG:쾌Ａ , 1.20
		TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:불결 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF ABL:ARG:22 == 3
		SOURCE:ARG:9 += 350
		TIMES SOURCE:ARG:쾌Ｃ , 1.30
		TIMES SOURCE:ARG:쾌Ｖ , 1.30
		TIMES SOURCE:ARG:쾌Ａ , 1.30
		TIMES SOURCE:ARG:쾌Ｂ , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:불결 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF ABL:ARG:22 == 4
		SOURCE:ARG:9 += 500
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ , 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:22 == 5
		SOURCE:ARG:9 += 750
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ , 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:22 == 6
		SOURCE:ARG:9 += 1000
		TIMES SOURCE:ARG:쾌Ｃ , 1.50
		TIMES SOURCE:ARG:쾌Ｖ , 1.50
		TIMES SOURCE:ARG:쾌Ａ , 1.50
		TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:불결 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF ABL:ARG:22 == 7
		SOURCE:ARG:9 += 1200
		TIMES SOURCE:ARG:쾌Ｃ , 1.60
		TIMES SOURCE:ARG:쾌Ｖ , 1.60
		TIMES SOURCE:ARG:쾌Ａ , 1.60
		TIMES SOURCE:ARG:쾌Ｂ , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:불결 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
	ELSEIF ABL:ARG:22 == 8
		SOURCE:ARG:9 += 1500
		TIMES SOURCE:ARG:쾌Ｃ , 1.70
		TIMES SOURCE:ARG:쾌Ｖ , 1.70
		TIMES SOURCE:ARG:쾌Ａ , 1.70
		TIMES SOURCE:ARG:쾌Ｂ , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:불결 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
	ELSEIF ABL:ARG:22 == 9
		SOURCE:ARG:9 += 1800
		TIMES SOURCE:ARG:쾌Ｃ , 1.80
		TIMES SOURCE:ARG:쾌Ｖ , 1.80
		TIMES SOURCE:ARG:쾌Ａ , 1.80
		TIMES SOURCE:ARG:쾌Ｂ , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:불결 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
	ELSEIF ABL:ARG:22 == 10
		SOURCE:ARG:9 += 2500
		TIMES SOURCE:ARG:쾌Ｃ , 1.90
		TIMES SOURCE:ARG:쾌Ｖ , 1.90
		TIMES SOURCE:ARG:쾌Ａ , 1.90
		TIMES SOURCE:ARG:쾌Ｂ , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ELSE
		SOURCE:ARG:9 += ABL:ARG:22 * 600 + 100 * (ABL:ARG:22 - 10) - 3400
		SOURCE:ARG:쾌Ｃ = SOURCE:ARG:쾌Ｃ * (ABL:ARG:22 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｖ = SOURCE:ARG:쾌Ｖ * (ABL:ARG:22 * 10 + 90) / 100
		SOURCE:ARG:쾌Ａ = SOURCE:ARG:쾌Ａ * (ABL:ARG:22 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｂ = SOURCE:ARG:쾌Ｂ * (ABL:ARG:22 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:ARG:22 * 10 + 90) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ENDIF
ENDIF

IF TALENT:(ARG:1):촉수 || TEQUIP:25
	;ABL:촉수중독をみる
	IF ABL:ARG:23 == 0 
		TIMES SOURCE:ARG:쾌Ｃ , 0.75
		TIMES SOURCE:ARG:쾌Ｖ , 0.75
		TIMES SOURCE:ARG:쾌Ａ , 0.75
		TIMES SOURCE:ARG:쾌Ｂ , 0.75
		TIMES SOURCE:ARG:달성 , 0.90
		TIMES SOURCE:ARG:굴종 , 1.20
		TIMES SOURCE:ARG:불결 , 1.30
		TIMES SOURCE:ARG:무서움 , 1.20
		TIMES SOURCE:ARG:일탈 , 1.20
		TIMES SOURCE:ARG:반감 , 1.20
		TIMES SOURCE:ARG:울굴 , 1.20
	ELSEIF ABL:ARG:23 == 1
		SOURCE:ARG:9 += 100
		TIMES SOURCE:ARG:쾌Ｃ , 1.10
		TIMES SOURCE:ARG:쾌Ｖ , 1.10
		TIMES SOURCE:ARG:쾌Ａ , 1.10
		TIMES SOURCE:ARG:쾌Ｂ , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:불결 , 0.90
		TIMES SOURCE:ARG:무서움 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
		TIMES SOURCE:ARG:반감 , 0.90
	ELSEIF ABL:ARG:23 == 2
		SOURCE:ARG:9 += 200
		TIMES SOURCE:ARG:쾌Ｃ , 1.20
		TIMES SOURCE:ARG:쾌Ｖ , 1.20
		TIMES SOURCE:ARG:쾌Ａ , 1.20
		TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:불결 , 0.80
		TIMES SOURCE:ARG:무서움 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
		TIMES SOURCE:ARG:반감 , 0.80
	ELSEIF ABL:ARG:23 == 3
		SOURCE:ARG:9 += 350
		TIMES SOURCE:ARG:쾌Ｃ , 1.30
		TIMES SOURCE:ARG:쾌Ｖ , 1.30
		TIMES SOURCE:ARG:쾌Ａ , 1.30
		TIMES SOURCE:ARG:쾌Ｂ , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:불결 , 0.70
		TIMES SOURCE:ARG:무서움 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
		TIMES SOURCE:ARG:반감 , 0.70
	ELSEIF ABL:ARG:23 == 4
		SOURCE:ARG:9 += 500
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ , 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:무서움 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
		TIMES SOURCE:ARG:반감 , 0.60
	ELSEIF ABL:ARG:23 == 5
		SOURCE:ARG:9 += 750
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ , 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:무서움 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
		TIMES SOURCE:ARG:반감 , 0.60
	ELSEIF ABL:ARG:23 == 6
		SOURCE:ARG:9 += 1000
		TIMES SOURCE:ARG:쾌Ｃ , 1.50
		TIMES SOURCE:ARG:쾌Ｖ , 1.50
		TIMES SOURCE:ARG:쾌Ａ , 1.50
		TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:불결 , 0.50
		TIMES SOURCE:ARG:무서움 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
		TIMES SOURCE:ARG:반감 , 0.50
	ELSEIF ABL:ARG:23 == 7
		SOURCE:ARG:9 += 1200
		TIMES SOURCE:ARG:쾌Ｃ , 1.60
		TIMES SOURCE:ARG:쾌Ｖ , 1.60
		TIMES SOURCE:ARG:쾌Ａ , 1.60
		TIMES SOURCE:ARG:쾌Ｂ , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:불결 , 0.40
		TIMES SOURCE:ARG:무서움 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
		TIMES SOURCE:ARG:반감 , 0.40
	ELSEIF ABL:ARG:23 == 8
		SOURCE:ARG:9 += 1500
		TIMES SOURCE:ARG:쾌Ｃ , 1.70
		TIMES SOURCE:ARG:쾌Ｖ , 1.70
		TIMES SOURCE:ARG:쾌Ａ , 1.70
		TIMES SOURCE:ARG:쾌Ｂ , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:불결 , 0.30
		TIMES SOURCE:ARG:무서움 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
		TIMES SOURCE:ARG:반감 , 0.30
	ELSEIF ABL:ARG:23 == 9
		SOURCE:ARG:9 += 1800
		TIMES SOURCE:ARG:쾌Ｃ , 1.80
		TIMES SOURCE:ARG:쾌Ｖ , 1.80
		TIMES SOURCE:ARG:쾌Ａ , 1.80
		TIMES SOURCE:ARG:쾌Ｂ , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:불결 , 0.20
		TIMES SOURCE:ARG:무서움 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
		TIMES SOURCE:ARG:반감 , 0.20
	ELSEIF ABL:ARG:23 == 10
		SOURCE:ARG:9 += 2500
		TIMES SOURCE:ARG:쾌Ｃ , 1.90
		TIMES SOURCE:ARG:쾌Ｖ , 1.90
		TIMES SOURCE:ARG:쾌Ａ , 1.90
		TIMES SOURCE:ARG:쾌Ｂ , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:무서움 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
		TIMES SOURCE:ARG:반감 , 0.10
	ELSE
		SOURCE:ARG:9 += ABL:ARG:23 * 600 + 100 * (ABL:ARG:23 - 10) - 3400
		SOURCE:ARG:쾌Ｃ = SOURCE:ARG:쾌Ｃ * (ABL:ARG:23 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｖ = SOURCE:ARG:쾌Ｖ * (ABL:ARG:23 * 10 + 90) / 100
		SOURCE:ARG:쾌Ａ = SOURCE:ARG:쾌Ａ * (ABL:ARG:23 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｂ = SOURCE:ARG:쾌Ｂ * (ABL:ARG:23 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:ARG:23 * 10 + 90) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:무서움 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
		TIMES SOURCE:ARG:반감 , 0.10
	ENDIF
ENDIF

SIF (!IS_GAY(ARG, ARG:1))
	RETURN 0

;레즈
IF IS_LESBIAN(ARG, ARG:1)
	;ABL:레즈끼をみる
	IF ABL:ARG:11 == 0
		TIMES SOURCE:ARG:굴종 , 1.20
		TIMES SOURCE:ARG:일탈 , 1.20
	ELSEIF ABL:ARG:11 == 1
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:ARG:11 == 2
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	ELSEIF ABL:ARG:11 == 3
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF ABL:ARG:11 == 4
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF ABL:ARG:11 == 5
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:11 == 6
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF ABL:ARG:11 == 7
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
	ELSEIF ABL:ARG:11 == 8
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
	ELSEIF ABL:ARG:11 == 9
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
	ELSE
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:ARG:11 * 10 + 100) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ENDIF
	
	;ABL:레즈중독をみる
	IF ABL:ARG:17 == 1
		SOURCE:ARG:9 += 100
		TIMES SOURCE:ARG:쾌Ｃ , 1.10
		TIMES SOURCE:ARG:쾌Ｖ , 1.10
		TIMES SOURCE:ARG:쾌Ａ , 1.10
		TIMES SOURCE:ARG:쾌Ｂ , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:불결 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	ELSEIF ABL:ARG:17 == 2
		SOURCE:ARG:9 += 200
		TIMES SOURCE:ARG:쾌Ｃ , 1.20
		TIMES SOURCE:ARG:쾌Ｖ , 1.20
		TIMES SOURCE:ARG:쾌Ａ , 1.20
		TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:불결 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF ABL:ARG:17 == 3
		SOURCE:ARG:9 += 350
		TIMES SOURCE:ARG:쾌Ｃ , 1.30
		TIMES SOURCE:ARG:쾌Ｖ , 1.30
		TIMES SOURCE:ARG:쾌Ａ , 1.30
		TIMES SOURCE:ARG:쾌Ｂ , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:불결 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF ABL:ARG:17 == 4
		SOURCE:ARG:9 += 500
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ , 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:17 == 5
		SOURCE:ARG:중독충족 += 750
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ, 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:17 == 6
		SOURCE:ARG:중독충족 += 1000
		TIMES SOURCE:ARG:쾌Ｃ , 1.50
		TIMES SOURCE:ARG:쾌Ｖ, 1.50
		TIMES SOURCE:ARG:쾌Ａ , 1.50
		TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:불결 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF ABL:ARG:17 == 7
		SOURCE:ARG:중독충족 += 1200
		TIMES SOURCE:ARG:쾌Ｃ , 1.60
		TIMES SOURCE:ARG:쾌Ｖ, 1.60
		TIMES SOURCE:ARG:쾌Ａ , 1.60
		TIMES SOURCE:ARG:쾌Ｂ , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:불결 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
	ELSEIF ABL:ARG:17 == 8
		SOURCE:ARG:중독충족 += 1500
		TIMES SOURCE:ARG:쾌Ｃ , 1.70
		TIMES SOURCE:ARG:쾌Ｖ, 1.70
		TIMES SOURCE:ARG:쾌Ａ , 1.70
		TIMES SOURCE:ARG:쾌Ｂ , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:불결 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
	ELSEIF ABL:ARG:17 == 9
		SOURCE:ARG:중독충족 += 1800
		TIMES SOURCE:ARG:쾌Ｃ , 1.80
		TIMES SOURCE:ARG:쾌Ｖ, 1.80
		TIMES SOURCE:ARG:쾌Ａ , 1.80
		TIMES SOURCE:ARG:쾌Ｂ , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:불결 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
	ELSEIF ABL:ARG:17 == 10
		SOURCE:ARG:중독충족 += 2500
		TIMES SOURCE:ARG:쾌Ｃ , 1.90
		TIMES SOURCE:ARG:쾌Ｖ, 1.90
		TIMES SOURCE:ARG:쾌Ａ , 1.90
		TIMES SOURCE:ARG:쾌Ｂ , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ELSE
		SOURCE:ARG:9 += ABL:ARG:17 * 600 + 100 * (ABL:ARG:17 - 10) - 3400
		SOURCE:ARG:쾌Ｃ = SOURCE:ARG:쾌Ｃ * (ABL:ARG:17 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｖ = SOURCE:ARG:쾌Ｖ * (ABL:ARG:17 * 10 + 90) / 100
		SOURCE:ARG:쾌Ａ = SOURCE:ARG:쾌Ａ * (ABL:ARG:17 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｂ = SOURCE:ARG:쾌Ｂ * (ABL:ARG:17 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:ARG:17 * 10 + 90) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ENDIF

	;조교자のABL:레즈끼
	IF ABL:(ARG:1):11 == 0
		TIMES SOURCE:ARG:정애 , 0.50
		TIMES SOURCE:ARG:달성 , 0.50
	ELSEIF ABL:(ARG:1):11 == 1
		TIMES SOURCE:ARG:정애 , 0.70
		TIMES SOURCE:ARG:달성 , 0.70
	ELSEIF ABL:(ARG:1):11 == 2
		TIMES SOURCE:ARG:정애 , 0.90
		TIMES SOURCE:ARG:달성 , 0.90
	ELSEIF ABL:(ARG:1):11 == 3
		TIMES SOURCE:ARG:정애 , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:(ARG:1):11 == 4
		TIMES SOURCE:ARG:정애 , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
	ELSEIF ABL:(ARG:1):11 == 5
		TIMES SOURCE:ARG:정애 , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
	ELSEIF ABL:(ARG:1):11 == 6
		TIMES SOURCE:ARG:정애 , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
	ELSEIF ABL:(ARG:1):11 == 7
		TIMES SOURCE:ARG:정애 , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
	ELSEIF ABL:(ARG:1):11 == 8
		TIMES SOURCE:ARG:정애 , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
	ELSEIF ABL:(ARG:1):11 == 9
		TIMES SOURCE:ARG:정애 , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
	ELSEIF ABL:(ARG:1):11 == 10
		TIMES SOURCE:ARG:정애 , 2.00
		TIMES SOURCE:ARG:달성 , 2.00
	ELSE
		SOURCE:ARG:정애 = SOURCE:ARG:정애 * ABL:(ARG:1):11 * 20 / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * ABL:(ARG:1):11 * 20 / 100
	ENDIF

	;조교자のABL:레즈중독
	IF ABL:(ARG:1):17 == 1
		TIMES SOURCE:ARG:정애 , 1.10
		TIMES SOURCE:ARG:성행위 , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:(ARG:1):17 == 2
		TIMES SOURCE:ARG:정애 , 1.20
		TIMES SOURCE:ARG:성행위 , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
	ELSEIF ABL:(ARG:1):17 == 3
		TIMES SOURCE:ARG:정애 , 1.30
		TIMES SOURCE:ARG:성행위 , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
	ELSEIF ABL:(ARG:1):17 == 4
		TIMES SOURCE:ARG:정애 , 1.40
		TIMES SOURCE:ARG:성행위 , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
	ELSEIF ABL:(ARG:1):17 == 5
		TIMES SOURCE:ARG:정애 , 1.50
		TIMES SOURCE:ARG:성행위 , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
	ELSEIF ABL:(ARG:1):17 == 6
		TIMES SOURCE:ARG:정애 , 1.60
		TIMES SOURCE:ARG:성행위 , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
	ELSEIF ABL:(ARG:1):17 == 7
		TIMES SOURCE:ARG:정애 , 1.70
		TIMES SOURCE:ARG:성행위 , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
	ELSEIF ABL:(ARG:1):17 == 8
		TIMES SOURCE:ARG:정애 , 1.80
		TIMES SOURCE:ARG:성행위 , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
	ELSEIF ABL:(ARG:1):17 == 9
		TIMES SOURCE:ARG:정애 , 1.90
		TIMES SOURCE:ARG:성행위 , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
	ELSEIF ABL:(ARG:1):17 == 10
		TIMES SOURCE:ARG:정애 , 2.00
		TIMES SOURCE:ARG:성행위 , 2.00
		TIMES SOURCE:ARG:달성 , 2.00
	ELSE
		SOURCE:ARG:정애 = SOURCE:ARG:정애 * (ABL:(ARG:1):17 * 10 + 90) / 100
		SOURCE:ARG:성행위 = SOURCE:ARG:성행위 * (ABL:(ARG:1):17 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:(ARG:1):17 * 10 + 90) / 100
	ENDIF

	;조교자の자제심
	IF TALENT:(ARG:1):20
		TIMES SOURCE:ARG:성행위 , 0.50
		TIMES SOURCE:ARG:달성 , 0.50
	ENDIF
ENDIF

;ＢＬ
IF IS_GAY(ARG, ARG:1)
	;ABL:ＢＬ끼をみる
	IF ABL:ARG:20 == 0 && TALENT:(ARG:1):오토코노코 == 0
		TIMES SOURCE:ARG:굴종 , 1.20
		TIMES SOURCE:ARG:일탈 , 1.20
	ELSEIF ABL:ARG:20 == 1
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:ARG:20 == 2
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	ELSEIF ABL:ARG:20 == 3
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF ABL:ARG:20 == 4
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF ABL:ARG:20 == 5
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:20 == 6
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF ABL:ARG:20 == 7
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
	ELSEIF ABL:ARG:20 == 8
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
	ELSEIF ABL:ARG:20 == 9
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
	ELSEIF ABL:ARG:20 == 10
		TIMES SOURCE:ARG:달성 , 2.00
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ELSEIF ABL:ARG:20 > 10
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:ARG:20 * 10 + 100) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ENDIF
	
	;ABL:ＢＬ중독をみる
	IF ABL:ARG:21 == 1
		SOURCE:ARG:중독충족 += 100
		TIMES SOURCE:ARG:쾌Ｃ , 1.10
		TIMES SOURCE:ARG:쾌Ｖ, 1.10
		TIMES SOURCE:ARG:쾌Ａ , 1.10
		TIMES SOURCE:ARG:쾌Ｂ , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
		TIMES SOURCE:ARG:굴종 , 0.90
		TIMES SOURCE:ARG:불결 , 0.90
		TIMES SOURCE:ARG:일탈 , 0.90
	ELSEIF ABL:ARG:21 == 2
		SOURCE:ARG:중독충족 += 200
		TIMES SOURCE:ARG:쾌Ｃ , 1.20
		TIMES SOURCE:ARG:쾌Ｖ, 1.20
		TIMES SOURCE:ARG:쾌Ａ , 1.20
		TIMES SOURCE:ARG:쾌Ｂ , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
		TIMES SOURCE:ARG:굴종 , 0.80
		TIMES SOURCE:ARG:불결 , 0.80
		TIMES SOURCE:ARG:일탈 , 0.80
	ELSEIF ABL:ARG:21 == 3
		SOURCE:ARG:중독충족 += 350
		TIMES SOURCE:ARG:쾌Ｃ , 1.30
		TIMES SOURCE:ARG:쾌Ｖ, 1.30
		TIMES SOURCE:ARG:쾌Ａ , 1.30
		TIMES SOURCE:ARG:쾌Ｂ , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
		TIMES SOURCE:ARG:굴종 , 0.70
		TIMES SOURCE:ARG:불결 , 0.70
		TIMES SOURCE:ARG:일탈 , 0.70
	ELSEIF ABL:ARG:21 == 4
		SOURCE:ARG:중독충족 += 500
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ, 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:21 == 5
		SOURCE:ARG:중독충족 += 750
		TIMES SOURCE:ARG:쾌Ｃ , 1.40
		TIMES SOURCE:ARG:쾌Ｖ, 1.40
		TIMES SOURCE:ARG:쾌Ａ , 1.40
		TIMES SOURCE:ARG:쾌Ｂ , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
		TIMES SOURCE:ARG:굴종 , 0.60
		TIMES SOURCE:ARG:불결 , 0.60
		TIMES SOURCE:ARG:일탈 , 0.60
	ELSEIF ABL:ARG:21 == 6
		SOURCE:ARG:중독충족 += 1000
		TIMES SOURCE:ARG:쾌Ｃ , 1.50
		TIMES SOURCE:ARG:쾌Ｖ, 1.50
		TIMES SOURCE:ARG:쾌Ａ , 1.50
		TIMES SOURCE:ARG:쾌Ｂ , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
		TIMES SOURCE:ARG:굴종 , 0.50
		TIMES SOURCE:ARG:불결 , 0.50
		TIMES SOURCE:ARG:일탈 , 0.50
	ELSEIF ABL:ARG:21 == 7
		SOURCE:ARG:중독충족 += 1200
		TIMES SOURCE:ARG:쾌Ｃ , 1.60
		TIMES SOURCE:ARG:쾌Ｖ, 1.60
		TIMES SOURCE:ARG:쾌Ａ , 1.60
		TIMES SOURCE:ARG:쾌Ｂ , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
		TIMES SOURCE:ARG:굴종 , 0.40
		TIMES SOURCE:ARG:불결 , 0.40
		TIMES SOURCE:ARG:일탈 , 0.40
	ELSEIF ABL:ARG:21 == 8
		SOURCE:ARG:중독충족 += 1500
		TIMES SOURCE:ARG:쾌Ｃ , 1.70
		TIMES SOURCE:ARG:쾌Ｖ, 1.70
		TIMES SOURCE:ARG:쾌Ａ , 1.70
		TIMES SOURCE:ARG:쾌Ｂ , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
		TIMES SOURCE:ARG:굴종 , 0.30
		TIMES SOURCE:ARG:불결 , 0.30
		TIMES SOURCE:ARG:일탈 , 0.30
	ELSEIF ABL:ARG:21 == 9
		SOURCE:ARG:중독충족 += 1800
		TIMES SOURCE:ARG:쾌Ｃ , 1.80
		TIMES SOURCE:ARG:쾌Ｖ, 1.80
		TIMES SOURCE:ARG:쾌Ａ , 1.80
		TIMES SOURCE:ARG:쾌Ｂ , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
		TIMES SOURCE:ARG:굴종 , 0.20
		TIMES SOURCE:ARG:불결 , 0.20
		TIMES SOURCE:ARG:일탈 , 0.20
	ELSEIF ABL:ARG:21 == 10
		SOURCE:ARG:중독충족 += 2500
		TIMES SOURCE:ARG:쾌Ｃ , 1.90
		TIMES SOURCE:ARG:쾌Ｖ, 1.90
		TIMES SOURCE:ARG:쾌Ａ , 1.90
		TIMES SOURCE:ARG:쾌Ｂ , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ELSEIF ABL:ARG:21 > 10
		SOURCE:ARG:9 += ABL:10 * 600 + 100 * (ABL:10 - 10) - 3400
		SOURCE:ARG:쾌Ｃ = SOURCE:ARG:쾌Ｃ * (ABL:10 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｖ = SOURCE:ARG:쾌Ｖ * (ABL:10 * 10 + 90) / 100
		SOURCE:ARG:쾌Ａ = SOURCE:ARG:쾌Ａ * (ABL:10 * 10 + 90) / 100
		SOURCE:ARG:쾌Ｂ = SOURCE:ARG:쾌Ｂ * (ABL:10 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:10 * 10 + 90) / 100
		TIMES SOURCE:ARG:굴종 , 0.10
		TIMES SOURCE:ARG:불결 , 0.10
		TIMES SOURCE:ARG:일탈 , 0.10
	ENDIF

	;조교자のABL:ＢＬ끼
	IF ABL:(ARG:1):20 == 0 && TALENT:오토코노코 == 0
		TIMES SOURCE:ARG:정애 , 0.50
		TIMES SOURCE:ARG:달성 , 0.50
	ELSEIF ABL:(ARG:1):20 == 1 && TALENT:오토코노코 == 0
		TIMES SOURCE:ARG:정애 , 0.70
		TIMES SOURCE:ARG:달성 , 0.70
	ELSEIF ABL:(ARG:1):20 == 2 && TALENT:오토코노코 == 0
		TIMES SOURCE:ARG:정애 , 0.90
		TIMES SOURCE:ARG:달성 , 0.90
	ELSEIF ABL:(ARG:1):20 == 3
		TIMES SOURCE:ARG:정애 , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:(ARG:1):20 == 4
		TIMES SOURCE:ARG:정애 , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
	ELSEIF ABL:(ARG:1):20 == 5
		TIMES SOURCE:ARG:정애 , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
	ELSEIF ABL:(ARG:1):20 == 6
		TIMES SOURCE:ARG:정애 , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
	ELSEIF ABL:(ARG:1):20 == 7
		TIMES SOURCE:ARG:정애 , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
	ELSEIF ABL:(ARG:1):20 == 8
		TIMES SOURCE:ARG:정애 , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
	ELSEIF ABL:(ARG:1):20 == 9
		TIMES SOURCE:ARG:정애 , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
	ELSEIF ABL:(ARG:1):20 == 10
		TIMES SOURCE:ARG:정애 , 2.00
		TIMES SOURCE:ARG:달성 , 2.00
	ELSEIF ABL:(ARG:1):20 > 10
		SOURCE:ARG:정애 = SOURCE:ARG:정애 * ABL:(ARG:1):20 * 20 / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * ABL:(ARG:1):20 * 20 / 100
	ENDIF

	;조교자のABL:ＢＬ중독
	IF ABL:(ARG:1):21 == 1
		TIMES SOURCE:ARG:정애 , 1.10
		TIMES SOURCE:ARG:성행위 , 1.10
		TIMES SOURCE:ARG:달성 , 1.10
	ELSEIF ABL:(ARG:1):21 == 2
		TIMES SOURCE:ARG:정애 , 1.20
		TIMES SOURCE:ARG:성행위 , 1.20
		TIMES SOURCE:ARG:달성 , 1.20
	ELSEIF ABL:(ARG:1):21 == 3
		TIMES SOURCE:ARG:정애 , 1.30
		TIMES SOURCE:ARG:성행위 , 1.30
		TIMES SOURCE:ARG:달성 , 1.30
	ELSEIF ABL:(ARG:1):21 == 4
		TIMES SOURCE:ARG:정애 , 1.40
		TIMES SOURCE:ARG:성행위 , 1.40
		TIMES SOURCE:ARG:달성 , 1.40
	ELSEIF ABL:(ARG:1):21 == 5
		TIMES SOURCE:ARG:정애 , 1.50
		TIMES SOURCE:ARG:성행위 , 1.50
		TIMES SOURCE:ARG:달성 , 1.50
	ELSEIF ABL:(ARG:1):21 == 6
		TIMES SOURCE:ARG:정애 , 1.60
		TIMES SOURCE:ARG:성행위 , 1.60
		TIMES SOURCE:ARG:달성 , 1.60
	ELSEIF ABL:(ARG:1):21 == 7
		TIMES SOURCE:ARG:정애 , 1.70
		TIMES SOURCE:ARG:성행위 , 1.70
		TIMES SOURCE:ARG:달성 , 1.70
	ELSEIF ABL:(ARG:1):21 == 8
		TIMES SOURCE:ARG:정애 , 1.80
		TIMES SOURCE:ARG:성행위 , 1.80
		TIMES SOURCE:ARG:달성 , 1.80
	ELSEIF ABL:(ARG:1):21 == 9
		TIMES SOURCE:ARG:정애 , 1.90
		TIMES SOURCE:ARG:성행위 , 1.90
		TIMES SOURCE:ARG:달성 , 1.90
	ELSEIF ABL:(ARG:1):21 == 10
		TIMES SOURCE:ARG:정애 , 2.00
		TIMES SOURCE:ARG:성행위 , 2.00
		TIMES SOURCE:ARG:달성 , 2.00
	ELSE
		SOURCE:ARG:정애 = SOURCE:ARG:정애 * (ABL:(ARG:1):21 * 10 + 90) / 100
		SOURCE:ARG:성행위 = SOURCE:ARG:성행위 * (ABL:(ARG:1):21 * 10 + 90) / 100
		SOURCE:ARG:달성 = SOURCE:ARG:달성 * (ABL:(ARG:1):21 * 10 + 90) / 100
	ENDIF

	;조교자の자제심
	IF TALENT:(ARG:1):20 && TALENT:오토코노코 == 0
		TIMES SOURCE:ARG:성행위 , 0.50
		TIMES SOURCE:ARG:달성 , 0.50
	ENDIF
ENDIF

;남자は女相手だとボーナス、여성혐오は연모ルート＋相手が主人じゃないと무효
IF (TALENT:ARG:남자 && TALENT:(ARG:1):남자 == 0) && (TALENT:ARG:여성혐오 && !((TALENT:ARG:연모 || TALENT:ARG:친애) && (ARG:1) == MASTER))
	TIMES SOURCE:ARG:쾌Ｃ , 1.30
	TIMES SOURCE:ARG:성행위 , 1.30
	TIMES SOURCE:ARG:달성 , 1.30
	TIMES SOURCE:ARG:욕정 , 1.30
	
ENDIF

@PLAYER_SKILL_CHECK, ARG, ARG:1
;조교자のTALENT:해방をみる
IF TALENT:(ARG:1):33
	TIMES SOURCE:ARG:쾌Ｃ , 1.20
	TIMES SOURCE:ARG:쾌Ｖ, 1.20
	TIMES SOURCE:ARG:쾌Ａ , 1.20
	TIMES SOURCE:ARG:쾌Ｂ , 1.20
	TIMES SOURCE:ARG:정애 , 1.20
ENDIF
;조교자のTALENT:바이をみる
IF TALENT:(ARG:1):81
	TIMES SOURCE:ARG:정애 , 1.20
	TIMES SOURCE:ARG:성행위 , 1.20
	TIMES SOURCE:ARG:달성 , 1.20
ENDIF
;조교자のTALENT:새드をみる
SIF TALENT:(ARG:1):83
	TIMES SOURCE:ARG:무서움 , 1.50
;조교자のTALENT:소악마をみる
SIF TALENT:(ARG:1):87
	TIMES SOURCE:ARG:노출 , 1.50
;조교자のTALENT:매혹をみる
IF TALENT:(ARG:1):93
	TIMES SOURCE:ARG:불결 , 0.50
	TIMES SOURCE:ARG:일탈 , 0.50

	TIMES SOURCE:ARG:쾌Ｃ , 1.20
	TIMES SOURCE:ARG:쾌Ｖ, 1.20
	TIMES SOURCE:ARG:쾌Ａ , 1.20
	TIMES SOURCE:ARG:쾌Ｂ , 1.20
	TIMES SOURCE:ARG:성행위 , 1.20
ENDIF
;조교자のTALENT:수수께끼의매력をみる
IF TALENT:(ARG:1):94
	TIMES SOURCE:ARG:불결 , 0.50
	TIMES SOURCE:ARG:일탈 , 0.50

	TIMES SOURCE:ARG:쾌Ｃ , 1.20
	TIMES SOURCE:ARG:쾌Ｖ, 1.20
	TIMES SOURCE:ARG:쾌Ａ , 1.20
	TIMES SOURCE:ARG:쾌Ｂ , 1.20
	TIMES SOURCE:ARG:성행위 , 1.20
	TIMES SOURCE:ARG:달성 , 1.50
ENDIF

;-------------------------------------------------
;절정時の방뇨処理
;-------------------------------------------------
@ORGASM_ADD_URINE, ARG
SIF TFLAG:29 == 0
	RETURN 0

IF TFLAG:29 >= 7 && TEQUIP:27 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋５
	;EXP:ARG:31 += 5
	CALL ADDS_EXP("방뇨경험", 5, ARG)
ELSEIF TFLAG:29 >= 7 && TEQUIP:27
	;PRINTFORML %EXPNAME:31%＋４
	;EXP:ARG:31 += 4
	CALL ADDS_EXP("방뇨경험", 4, ARG)
ELSEIF TFLAG:29 >= 7 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋３
	;EXP:ARG:31 += 3
	CALL ADDS_EXP("방뇨경험", 3, ARG)
ELSEIF P >= 5 && TEQUIP:27 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋４
	;EXP:ARG:31 += 4
	CALL ADDS_EXP("방뇨경험", 4, ARG)
ELSEIF TFLAG:29 >= 5 && TEQUIP:27
	;PRINTFORML %EXPNAME:31%＋３
	;EXP:ARG:31 += 3
	CALL ADDS_EXP("방뇨경험", 3, ARG)
ELSEIF TFLAG:29 >= 5 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋２
	;EXP:ARG:31 += 2
	CALL ADDS_EXP("방뇨경험", 2, ARG)
ELSEIF TFLAG:29 >= 3 && TEQUIP:27 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋３
	;EXP:ARG:31 += 3
	CALL ADDS_EXP("방뇨경험", 3, ARG)
ELSEIF TFLAG:29 >= 3 && TEQUIP:27
	;PRINTFORML %EXPNAME:31%＋２
	;EXP:ARG:31 += 2
	CALL ADDS_EXP("방뇨경험", 2, ARG)
ELSEIF TFLAG:29 >= 3 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋１
	;EXP:ARG:31 += 1
	CALL ADDS_EXP("방뇨경험", 1, ARG)
ELSEIF TFLAG:29 >= 1 && TEQUIP:27 && TALENT:57
	;PRINTFORML %EXPNAME:31%＋２
	;EXP:ARG:31 += 2
	CALL ADDS_EXP("방뇨경험", 2, ARG)
ELSEIF TFLAG:29 >= 1 && TEQUIP:27
	;PRINTFORML %EXPNAME:31%＋１
	;EXP:ARG:31 += 1
	CALL ADDS_EXP("방뇨경험", 1, ARG)
ENDIF
SIF TEQUIP:27 && (TFLAG:29 >= 3 || TALENT:57)
	TEQUIP:27 = 0

;-------------------------------------------------
;각인취득の체크
;-------------------------------------------------
@MARK_GOT_CHECK
;-------------------------------------------------
;고통각인
;-------------------------------------------------
IF CUP:TARGET:10 >= 2000 && CUP:TARGET:10 < 4000 && MARK:0 <= 0
	TFLAG:22 = 1
ELSEIF CUP:TARGET:10 >= 4000 && CUP:TARGET:10 < 8000 && MARK:0 <= 1
	TFLAG:22 = 2
	;꿋꿋함・감정결핍の場合は고통각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:12 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ELSEIF CUP:TARGET:10 >= 8000 && MARK:0 <= 2
	TFLAG:22 = 3
	;꿋꿋함・감정결핍の場合は고통각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:12 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ENDIF


;-------------------------------------------------
;쾌락각인
;-------------------------------------------------
IF TFLAG:200 == 1 && MARK:1 <= 0
	TFLAG:23 = 1
ELSEIF TFLAG:200 == 2 && MARK:1 <= 1
	TFLAG:23 = 2
ELSEIF TFLAG:200 == 3 && MARK:1 <= 2
	TFLAG:23 = 3
	;자제심・감정결핍の場合は쾌락각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:20 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ENDIF

;-------------------------------------------------
;굴복각인
;-------------------------------------------------
A = CUP:TARGET:0 + CUP:TARGET:1 + CUP:TARGET:2 + CUP:TARGET:3

;쾌락によるLvUPは10番+취득した굴복각인の레벨のTFLAGを与える
IF A >= 1000 && A < 2400 && MARK:1 > MARK:2 && MARK:2 <= 0
	TFLAG:24 = 11
ELSEIF A >= 2400 && A < 6000 && MARK:1 > MARK:2 && MARK:2 <= 1
	TFLAG:24 = 12
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ELSEIF A >= 6000 && MARK:1 > MARK:2 && MARK:2 <= 2
	TFLAG:24 = 13
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 <= 1 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ENDIF


A = CUP:TARGET:10 + CUP:TARGET:11

;고통と공포によるLvUPは20番+취득した굴복각인の레벨のTFLAGを与える
IF A >= 1000 && A < 2400 && MARK:2 <= 0
	TFLAG:24 = 21
ELSEIF A >= 2400 && A < 6000 && MARK:2 <= 1
	TFLAG:24 = 22
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ELSEIF A >= 6000 && MARK:2 <= 2
	TFLAG:24 = 23
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 <= 1 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ENDIF


A = CUP:TARGET:5 + CUP:TARGET:7

;복종と굴복によるLvUPは30番+취득した굴복각인の레벨のTFLAGを与える
IF A >= 1000 && A < 2400 && MARK:2 <= 0
	TFLAG:24 = 31
ELSEIF A >= 2400 && A < 6000 && MARK:2 <= 1
	TFLAG:24 = 32
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 == 0 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ELSEIF A >= 6000 && MARK:2 <= 2
	TFLAG:24 = 33
	;감정결핍の場合は굴복각인による순종アップはなし
	IF ABL:0 <= 1 && TALENT:22 == 0
		TFLAG:25 = 1
	ENDIF
ENDIF

;-------------------------------------------------
;반발각인
;------------------------------------------------- 
A = CUP:TARGET:12+CUP:TARGET:13
IF A > 500 && A < 1200 && MARK:4 <= 0 && TFLAG:150 == 0
	TFLAG:21 = 1
ELSEIF A >= 1200 && A < 3000 && MARK:4 < 1 && TFLAG:150 == 0
	TFLAG:21 = 2
	;감정결핍の場合は반발각인による순종ダウンはなし
	IF ABL:0 == 1 && TALENT:22 == 0
		TFLAG:25 = 1
	ELSEIF ABL:0 == 2 && TALENT:22 == 0
		TFLAG:25 = 2
	ENDIF
ELSEIF A >= 3000 && MARK:4 <= 2 && TFLAG:150 == 0
	TFLAG:21 = 3
	;감정결핍の場合は반발각인による순종ダウンはなし
	IF ABL:0 > 0 && ABL:0 <= 2 && TALENT:22 == 0
		TFLAG:25 = 1
	ELSEIF ABL:0 == 3 && TALENT:22 == 0
		TFLAG:25 = 2
	ENDIF
ENDIF
TFLAG:150 = 0


;-------------------------------------------------
;각인취득の処理
;-------------------------------------------------
@MARK_GOT_RESULT
GETCOLOR
LOCAL = RESULT
IF TFLAG:21 || TFLAG:22 || TFLAG:23 || TFLAG:24
	TWAIT 1, 1
	SETCOLOR COLOR("red")
ENDIF
;------------------------------------------------- 
;고통각인
;------------------------------------------------- 
IF TFLAG:22 == 1
	PRINTFORMW %타겟은% 고통각인 LV1을 얻었다
	MARK:0 = 1
ELSEIF TFLAG:22 == 2
	PRINTFORML %타겟은% 고통각인 LV2를 얻었다
	MARK:0 = 2
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTW 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ELSE
		WAIT
	ENDIF
ELSEIF TFLAG:22 == 3
	PRINTFORML %타겟은% 고통각인LV3을 얻었다
	MARK:0 = 3
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTL 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ENDIF
	IF TALENT:PLAYER:83
		CALL ADDS_ABNORMAL_EXP("고통각인LV3（새드）", TARGET)
		;PRINTFORML 【%CALLNAME:PLAYER%が새드】
		;PRINTFORMW %EXPNAME:50%＋２
		;EXP:TARGET:50 += 2
	ELSEIF TALENT:PLAYER:53 && SELECTCOM == 104
		CALL ADDS_ABNORMAL_EXP("고통각인LV3（바늘다루기）", TARGET)
		;PRINTFORML 【%CALLNAME:PLAYER%が바늘다루기】
		;PRINTFORMW %EXPNAME:50%＋２
		;EXP:TARGET:50 += 2
	ELSE
		CALL ADDS_ABNORMAL_EXP("고통각인LV3", TARGET)
;		PRINTFORMW %EXPNAME:50%＋１
;		EXP:TARGET:50 += 1
	ENDIF
ENDIF


;------------------------------------------------- 
;쾌락각인
;------------------------------------------------- 
IF TFLAG:23 == 1
	PRINTFORMW %타겟은% 쾌락각인 LV1을 얻었다
	MARK:1 = 1
ELSEIF TFLAG:23 == 2
	PRINTFORMW %타겟은% 쾌락각인 LV2를 얻었다
	MARK:1 = 2
ELSEIF TFLAG:23 == 3
	PRINTFORML %타겟은% 쾌락각인LV3을 얻었다
	MARK:1 = 3
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTW 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ELSE
		WAIT
	ENDIF
ENDIF


;------------------------------------------------- 
;굴복각인
;------------------------------------------------- 
;쾌락による각인
IF TFLAG:24 == 11
	PRINTFORMW %타겟은% 굴복각인 LV1을 얻었다
	MARK:2 = 1
ELSEIF TFLAG:24 == 12
	PRINTFORML %타겟은% 굴복각인 LV2를 얻었다
	MARK:2 = 2
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTW 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ENDIF
ELSEIF TFLAG:24 == 13
	PRINTFORML %타겟은% 굴복각인 LV3을 얻었다
	MARK:2 = 3
	IF TFLAG:25 == 1 && ABL:0 <= 1
		PRINTW 그리고 순종이 LV2가 되었다
		ABL:0 = 2
	ELSE
		WAIT
	ENDIF
;고통、공포による각인
ELSEIF TFLAG:24 == 21
	PRINTFORMW %타겟은% 굴복각인 LV1을 얻었다
	MARK:2 = 1
ELSEIF TFLAG:24 == 22
	PRINTFORML %타겟은% 굴복각인 LV2를 얻었다
	MARK:2 = 2
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTW 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ELSE
		WAIT
	ENDIF
ELSEIF TFLAG:24 == 23
	PRINTFORML %타겟은% 굴복각인 LV3을 얻었다
	MARK:2 = 3
	IF TFLAG:25 == 1  && ABL:0 <= 1
		PRINTW 그리고 순종이 LV2가 되었다
		ABL:0 = 2
	ELSE
		WAIT
	ENDIF
;굴복、복종による각인
ELSEIF TFLAG:24 == 31
	PRINTFORMW %타겟은% 굴복각인 LV1을 얻었다
	MARK:2 = 1
ELSEIF TFLAG:24 == 32
	PRINTFORML %타겟은% 굴복각인 LV2를 얻었다
	MARK:2 = 2
	IF TFLAG:25 == 1 && ABL:0 == 0
		PRINTW 그리고 순종이 LV1이 되었다
		ABL:0 = 1
	ELSE
		WAIT
	ENDIF
ELSEIF TFLAG:24 == 33
	PRINTFORML %타겟은% 굴복각인 LV3을 얻었다
	MARK:2 = 3
	IF TFLAG:25 == 1 && ABL:0 <= 1
		PRINTW 그리고 순종이 LV2가 되었다
		ABL:0 = 2
	ELSE
		WAIT
	ENDIF
ENDIF


;------------------------------------------------- 
;반발각인
;------------------------------------------------- 
IF TFLAG:21 == 1
	PRINTFORMW %타겟은% 반발각인 LV1을 얻었다
	MARK:3 = 1
	MARK:4 = 1
ELSEIF TFLAG:21 == 2
	PRINTFORML %타겟은% 반발각인 LV2를 얻었다
	MARK:3 = 2
	MARK:4 = 2
	IF TFLAG:25 == 1
		PRINTW 그리고 순종이 LV0으로 내려갔다
		ABL:0 = 0
	ELSEIF TFLAG:25 == 2
		PRINTW 그리고 순종이 LV1로 내려갔다
		ABL:0 = 1
	ELSE
		WAIT
	ENDIF
ELSEIF TFLAG:21 == 3
	PRINTFORML %타겟은% 반발각인 LV3을 얻었다
	MARK:3 = 3
	MARK:4 = 3
	IF TFLAG:25 == 1
		PRINTW 그리고 순종이 LV0으로 내려갔다
		ABL:0 = 0
	ELSEIF TFLAG:25 == 2
		PRINTW 그리고 순종이 LV2로 내려갔다
		ABL:0 = 2
	ELSE
		WAIT
	ENDIF
ENDIF
SETCOLOR LOCAL
;-------------------------------------------------
;순종の上昇による[저항]の消滅を체크
;-------------------------------------------------
@JUJUN_UP_CHECK
IF ABL:0 >= 3 && TALENT:34
	PRINTS NAME:TARGET
	PRINT 은(는) [
	PRINTS TALENTNAME:34
	PRINTL ]을 잃었다
	TALENT:34 = 0
	PRINTL 부정의 구슬이 절반이 되었다
	JUEL:100 /= 2
ENDIF

;-------------------------------------------------
;욕망の上昇による[억압]の消滅を체크
;-------------------------------------------------
@YOKUBO_UP_CHECK
IF ABL:1 >= 3 && TALENT:32
	PRINTS NAME:TARGET
	PRINT 은(는) [
	PRINTS TALENTNAME:32
	PRINTL ]을 잃었다
	TALENT:32 = 0
	PRINTL 부정의 구슬이 절반이 되었다
	JUEL:100 /= 2
ENDIF

;-------------------------------------------------
;고통쾌락경험、봉사쾌락경험の체크
;-------------------------------------------------
@EXP_GOT_CHECK, ARG, ARG:1
;봉사계である、봉사쾌락の체크
A = CUP:ARG:0+CUP:ARG:1+CUP:ARG:2+CUP:ARG:3
E = 0

IF CUP:ARG:6 < 100
	A = 0
ELSEIF CUP:ARG:6 < 300
	A *= 2
ELSEIF CUP:ARG:6 < 700
	A *= 3
ELSEIF CUP:ARG:6 < 1500
	A *= 4
ELSE
	A *= 5
ENDIF

IF TFLAG:100
	IF A >= 12000
		E = 16
		TIMES CUP:ARG:11 , 0.65
		TIMES CUP:ARG:12 , 0.30
	ELSEIF A >= 8000
		E = 12
		TIMES CUP:ARG:11 , 0.70
		TIMES CUP:ARG:12 , 0.40
	ELSEIF A >= 5000
		E = 8
		TIMES CUP:ARG:11 , 0.75
		TIMES CUP:ARG:12 , 0.50
	ELSEIF A >= 3000
		E = 4
		TIMES CUP:ARG:11 , 0.80
		TIMES CUP:ARG:12 , 0.60
	ELSEIF A >= 2000
		E = 2
		TIMES CUP:ARG:11 , 0.85
		TIMES CUP:ARG:12 , 0.70
	ELSEIF A >= 1000
		E = 1
		TIMES CUP:ARG:11 , 0.90
		TIMES CUP:ARG:12 , 0.80
	ENDIF
	SIF ARG == PLAYER
		TIMES E , 0.20
	IF E
;		PRINT 봉사쾌락경험+
;		PRINTVL E
;		EXP:ARG:21 += E
;		TFLAG:26 = E
		IF TEQUIP:ARG:주도권 == 0 || ((TALENT:ARG:연모 || TALENT:ARG:친애) && ARG:1 == MASTER)
			CALL ADDS_EXP("봉사쾌락경험", E, ARG)
		ELSE
			CALL ADDS_EXP("가학쾌락경험", E * (ABL:ARG:새드끼/2 + 1) / 5, ARG)
		ENDIF
	ENDIF
ENDIF

;고통쾌락の체크
E = 0
IF CUP:ARG:6 >= 3000 && CUP:ARG:10 >= 2000
	E = 16
	TIMES CUP:ARG:11 , 0.65
ELSEIF CUP:ARG:6 >= 2500 && CUP:ARG:10 >= 1500
	E = 12
	TIMES CUP:ARG:11 , 0.70
ELSEIF CUP:ARG:6 >= 1500 && CUP:ARG:10 >= 1000
	E = 8
	TIMES CUP:ARG:11 , 0.75
ELSEIF CUP:ARG:6 >= 1000 && CUP:ARG:10 >= 500
	E = 4
	TIMES CUP:ARG:11 , 0.80
ELSEIF CUP:ARG:6 >= 600 && CUP:ARG:10 >= 300
	E = 2
	TIMES CUP:ARG:11 , 0.85
ELSEIF CUP:ARG:6 >= 300 && CUP:ARG:10 >= 100
	E = 1
	TIMES CUP:ARG:11 , 0.90
ENDIF
IF E > 0
;	PRINT 고통쾌락경험+
	;PRINTVL E
	;EXP:ARG:30 += E
	;TFLAG:27 = E
	CALL ADDS_EXP("고통쾌락경험", E, ARG)
	;가학쾌락경험
	E = ABL:(ARG:1):10+ABL:ARG:9
	E -= 1
	IF E > 0
;		PRINTFORM %CALLNAME:(ARG:1)%の
;		PRINT 가학쾌락경험+
;		PRINTVL E
;		EXP:(ARG:1):32 += E
;		TFLAG:28 = E
		CALL ADDS_EXP("가학쾌락경험", E, ARG:1)
	ENDIF
ENDIF


